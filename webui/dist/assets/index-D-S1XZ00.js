import{r as m,j as e,L as ci,e as ka,R as Ct,b as jN,f as vN,g as bN,h as NN,k as lt,l as yN,m as wN,O as Vp,n as _N}from"./router-Bz250laD.js";import{a as SN,b as CN,g as kN}from"./react-vendor-BmxF9s7Q.js";import{N as TN,c as EN,O as gi,P as zN,g as Du}from"./utils-BXc2jIuz.js";import{L as Fp,T as Ip,C as Qp,R as MN,a as Yp,V as AN,b as ON,S as Kp,c as DN,d as Xp,I as RN,e as Pp,f as LN,g as Jp,h as UN,i as BN,j as HN,O as Zp,P as $N,k as Wp,l as eg,D as sg,A as tg,m as ag,n as qN,o as GN,p as lg,q as VN,r as ng,s as FN,t as IN,u as QN,v as YN,w as KN,x as ig,y as rg,F as cg,z as og,B as XN,E as PN}from"./radix-extra-DDK-u9dm.js";import{R as JN,T as ZN,L as WN,g as ey,C as Xc,X as Pc,Y as ur,h as sy,B as Ru,j as Jc,P as ty,k as ay,l as ly}from"./charts-DbiuC1q1.js";import{S as ny,G as dg,O as ug,o as iy,C as mg,p as ry,T as xg,D as hg,R as cy,q as oy,H as fg,I as dy,J as pg,K as gg,L as uy,M as jg,V as my,N as vg,Q as bg,U as xy,X as hy,Y as Ng,Z as fy,_ as py,$ as yg,a0 as gy,e as jy,f as vy,c as wg,P as fo,d as nm,b as Zu,h as by,l as Ny,m as yy,a1 as wy,a2 as _g,a3 as _y,a4 as Sy,a5 as Cy,a6 as Sg,a7 as Cg,a8 as kg,a9 as Tg,aa as Eg,ab as zg,ac as ky}from"./radix-core-9dEfQl-6.js";import{R as At,a as yr,C as Ot,b as aa,L as tt,P as Mr,Z as hn,F as Aa,c as Ty,S as ji,d as Ey,M as Fl,A as zy,D as My,e as ro,f as xi,T as Ay,X as fl,g as Oy,h as Dy,I as Ra,i as Oa,j as ea,k as co,E as wr,l as Gt,m as Mg,H as Ry,n as es,o as Da,U as _r,p as Ag,q as Og,r as xp,K as Dg,s as Rg,t as Ly,u as ao,v as Uy,B as fr,w as oo,x as im,y as By,z as Hy,G as $t,J as po,N as hi,O as ut,Q as Fa,V as fi,W as rm,Y as Lg,_ as Ar,$ as $y,a0 as qy,a1 as fn,a2 as vi,a3 as pl,a4 as Ya,a5 as bi,a6 as cm,a7 as Gy,a8 as Vy,a9 as Vl,aa as Fy,ab as Ug,ac as lo,ad as pn,ae as Iy,af as pi,ag as Qy,ah as Wu,ai as em,aj as Bg,ak as Yy,al as Ky,am as hp,an as Xy,ao as xl,ap as Lu,aq as fp,ar as Hg,as as Py,at as $g,au as Uu,av as Jy,aw as Zy,ax as Wy,ay as e0,az as s0,aA as qg,aB as Gg,aC as Vg,aD as Fg,aE as t0,aF as pp,aG as a0,aH as l0,aI as n0,aJ as i0}from"./icons-B6qV_tuI.js";import{S as r0,p as c0,j as o0,a as d0,E as gp,R as u0,o as m0}from"./codemirror-BEE0n9kQ.js";import{u as Ig,a as uo,s as Qg,K as Yg,P as Kg,b as Xg,D as Pg,c as Jg,S as Zg,v as x0,d as Wg,C as ej,h as h0}from"./dnd-B_gmzEl7.js";import{_ as la,c as f0,g as sj,D as p0,z as Zc}from"./misc-CKjrIrIJ.js";import{D as g0,U as j0}from"./uppy-BMZiFQyG.js";import{M as v0,r as b0,a as N0,b as y0}from"./markdown-kUhwkcQP.js";import{c as w0,H as mo,P as xo,u as _0,d as S0,R as C0,B as k0,e as T0,C as E0,M as z0,f as M0}from"./reactflow-DLoXAt4c.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const x of u)if(x.type==="childList")for(const h of x.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function r(u){const x={};return u.integrity&&(x.integrity=u.integrity),u.referrerPolicy&&(x.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?x.credentials="include":u.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function o(u){if(u.ep)return;u.ep=!0;const x=r(u);fetch(u.href,x)}})();var Bu={exports:{}},mr={},Hu={exports:{}},$u={};var jp;function A0(){return jp||(jp=1,(function(l){function i(U,P){var X=U.length;U.push(P);e:for(;0<X;){var L=X-1>>>1,B=U[L];if(0<u(B,P))U[L]=P,U[X]=B,X=L;else break e}}function r(U){return U.length===0?null:U[0]}function o(U){if(U.length===0)return null;var P=U[0],X=U.pop();if(X!==P){U[0]=X;e:for(var L=0,B=U.length,_e=B>>>1;L<_e;){var Ne=2*(L+1)-1,Ce=U[Ne],ve=Ne+1,ze=U[ve];if(0>u(Ce,X))ve<B&&0>u(ze,Ce)?(U[L]=ze,U[ve]=X,L=ve):(U[L]=Ce,U[Ne]=X,L=Ne);else if(ve<B&&0>u(ze,X))U[L]=ze,U[ve]=X,L=ve;else break e}}return P}function u(U,P){var X=U.sortIndex-P.sortIndex;return X!==0?X:U.id-P.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var x=performance;l.unstable_now=function(){return x.now()}}else{var h=Date,f=h.now();l.unstable_now=function(){return h.now()-f}}var g=[],j=[],v=1,y=null,b=3,S=!1,w=!1,O=!1,A=!1,D=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function _(U){for(var P=r(j);P!==null;){if(P.callback===null)o(j);else if(P.startTime<=U)o(j),P.sortIndex=P.expirationTime,i(g,P);else break;P=r(j)}}function T(U){if(O=!1,_(U),!w)if(r(g)!==null)w=!0,$||($=!0,Se());else{var P=r(j);P!==null&&be(T,P.startTime-U)}}var $=!1,E=-1,se=5,te=-1;function ne(){return A?!0:!(l.unstable_now()-te<se)}function ue(){if(A=!1,$){var U=l.unstable_now();te=U;var P=!0;try{e:{w=!1,O&&(O=!1,V(E),E=-1),S=!0;var X=b;try{s:{for(_(U),y=r(g);y!==null&&!(y.expirationTime>U&&ne());){var L=y.callback;if(typeof L=="function"){y.callback=null,b=y.priorityLevel;var B=L(y.expirationTime<=U);if(U=l.unstable_now(),typeof B=="function"){y.callback=B,_(U),P=!0;break s}y===r(g)&&o(g),_(U)}else o(g);y=r(g)}if(y!==null)P=!0;else{var _e=r(j);_e!==null&&be(T,_e.startTime-U),P=!1}}break e}finally{y=null,b=X,S=!1}P=void 0}}finally{P?Se():$=!1}}}var Se;if(typeof z=="function")Se=function(){z(ue)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,je=oe.port2;oe.port1.onmessage=ue,Se=function(){je.postMessage(null)}}else Se=function(){D(ue,0)};function be(U,P){E=D(function(){U(l.unstable_now())},P)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(U){U.callback=null},l.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<U?Math.floor(1e3/U):5},l.unstable_getCurrentPriorityLevel=function(){return b},l.unstable_next=function(U){switch(b){case 1:case 2:case 3:var P=3;break;default:P=b}var X=b;b=P;try{return U()}finally{b=X}},l.unstable_requestPaint=function(){A=!0},l.unstable_runWithPriority=function(U,P){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var X=b;b=U;try{return P()}finally{b=X}},l.unstable_scheduleCallback=function(U,P,X){var L=l.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?L+X:L):X=L,U){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=X+B,U={id:v++,callback:P,priorityLevel:U,startTime:X,expirationTime:B,sortIndex:-1},X>L?(U.sortIndex=X,i(j,U),r(g)===null&&U===r(j)&&(O?(V(E),E=-1):O=!0,be(T,X-L))):(U.sortIndex=B,i(g,U),w||S||(w=!0,$||($=!0,Se()))),U},l.unstable_shouldYield=ne,l.unstable_wrapCallback=function(U){var P=b;return function(){var X=b;b=P;try{return U.apply(this,arguments)}finally{b=X}}}})($u)),$u}var vp;function O0(){return vp||(vp=1,Hu.exports=A0()),Hu.exports}var bp;function D0(){if(bp)return mr;bp=1;var l=O0(),i=SN(),r=CN();function o(s){var t="https://react.dev/errors/"+s;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+s+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function x(s){var t=s,a=s;if(s.alternate)for(;t.return;)t=t.return;else{s=t;do t=s,(t.flags&4098)!==0&&(a=t.return),s=t.return;while(s)}return t.tag===3?a:null}function h(s){if(s.tag===13){var t=s.memoizedState;if(t===null&&(s=s.alternate,s!==null&&(t=s.memoizedState)),t!==null)return t.dehydrated}return null}function f(s){if(s.tag===31){var t=s.memoizedState;if(t===null&&(s=s.alternate,s!==null&&(t=s.memoizedState)),t!==null)return t.dehydrated}return null}function g(s){if(x(s)!==s)throw Error(o(188))}function j(s){var t=s.alternate;if(!t){if(t=x(s),t===null)throw Error(o(188));return t!==s?null:s}for(var a=s,n=t;;){var c=a.return;if(c===null)break;var d=c.alternate;if(d===null){if(n=c.return,n!==null){a=n;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===a)return g(c),s;if(d===n)return g(c),t;d=d.sibling}throw Error(o(188))}if(a.return!==n.return)a=c,n=d;else{for(var p=!1,N=c.child;N;){if(N===a){p=!0,a=c,n=d;break}if(N===n){p=!0,n=c,a=d;break}N=N.sibling}if(!p){for(N=d.child;N;){if(N===a){p=!0,a=d,n=c;break}if(N===n){p=!0,n=d,a=c;break}N=N.sibling}if(!p)throw Error(o(189))}}if(a.alternate!==n)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?s:t}function v(s){var t=s.tag;if(t===5||t===26||t===27||t===6)return s;for(s=s.child;s!==null;){if(t=v(s),t!==null)return t;s=s.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),V=Symbol.for("react.consumer"),z=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),te=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),ue=Symbol.iterator;function Se(s){return s===null||typeof s!="object"?null:(s=ue&&s[ue]||s["@@iterator"],typeof s=="function"?s:null)}var oe=Symbol.for("react.client.reference");function je(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===oe?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case O:return"Fragment";case D:return"Profiler";case A:return"StrictMode";case T:return"Suspense";case $:return"SuspenseList";case te:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case w:return"Portal";case z:return s.displayName||"Context";case V:return(s._context.displayName||"Context")+".Consumer";case _:var t=s.render;return s=s.displayName,s||(s=t.displayName||t.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case E:return t=s.displayName||null,t!==null?t:je(s.type)||"Memo";case se:t=s._payload,s=s._init;try{return je(s(t))}catch{}}return null}var be=Array.isArray,U=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},L=[],B=-1;function _e(s){return{current:s}}function Ne(s){0>B||(s.current=L[B],L[B]=null,B--)}function Ce(s,t){B++,L[B]=s.current,s.current=t}var ve=_e(null),ze=_e(null),Q=_e(null),xe=_e(null);function Te(s,t){switch(Ce(Q,t),Ce(ze,s),Ce(ve,null),t.nodeType){case 9:case 11:s=(s=t.documentElement)&&(s=s.namespaceURI)?Lf(s):0;break;default:if(s=t.tagName,t=t.namespaceURI)t=Lf(t),s=Uf(t,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Ne(ve),Ce(ve,s)}function J(){Ne(ve),Ne(ze),Ne(Q)}function le(s){s.memoizedState!==null&&Ce(xe,s);var t=ve.current,a=Uf(t,s.type);t!==a&&(Ce(ze,s),Ce(ve,a))}function qe(s){ze.current===s&&(Ne(ve),Ne(ze)),xe.current===s&&(Ne(xe),rr._currentValue=X)}var We,fe;function ls(s){if(We===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);We=t&&t[1]||"",fe=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+We+s+fe}var G=!1;function Me(s,t){if(!s||G)return"";G=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ae){var Z=ae}Reflect.construct(s,[],he)}else{try{he.call()}catch(ae){Z=ae}s.call(he.prototype)}}else{try{throw Error()}catch(ae){Z=ae}(he=s())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ae){if(ae&&Z&&typeof ae.stack=="string")return[ae.stack,Z.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=n.DetermineComponentFrameRoot(),p=d[0],N=d[1];if(p&&N){var M=p.split(`
`),K=N.split(`
`);for(c=n=0;n<M.length&&!M[n].includes("DetermineComponentFrameRoot");)n++;for(;c<K.length&&!K[c].includes("DetermineComponentFrameRoot");)c++;if(n===M.length||c===K.length)for(n=M.length-1,c=K.length-1;1<=n&&0<=c&&M[n]!==K[c];)c--;for(;1<=n&&0<=c;n--,c--)if(M[n]!==K[c]){if(n!==1||c!==1)do if(n--,c--,0>c||M[n]!==K[c]){var ce=`
`+M[n].replace(" at new "," at ");return s.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",s.displayName)),ce}while(1<=n&&0<=c);break}}}finally{G=!1,Error.prepareStackTrace=a}return(a=s?s.displayName||s.name:"")?ls(a):""}function re(s,t){switch(s.tag){case 26:case 27:case 5:return ls(s.type);case 16:return ls("Lazy");case 13:return s.child!==t&&t!==null?ls("Suspense Fallback"):ls("Suspense");case 19:return ls("SuspenseList");case 0:case 15:return Me(s.type,!1);case 11:return Me(s.type.render,!1);case 1:return Me(s.type,!0);case 31:return ls("Activity");default:return""}}function pe(s){try{var t="",a=null;do t+=re(s,a),a=s,s=s.return;while(s);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var Ee=Object.prototype.hasOwnProperty,Ie=l.unstable_scheduleCallback,$e=l.unstable_cancelCallback,Vt=l.unstable_shouldYield,_t=l.unstable_requestPaint,nt=l.unstable_now,F=l.unstable_getCurrentPriorityLevel,He=l.unstable_ImmediatePriority,De=l.unstable_UserBlockingPriority,ye=l.unstable_NormalPriority,ps=l.unstable_LowPriority,ss=l.unstable_IdlePriority,Es=l.log,Ms=l.unstable_setDisableYieldValue,Ls=null,ts=null;function Pe(s){if(typeof Es=="function"&&Ms(s),ts&&typeof ts.setStrictMode=="function")try{ts.setStrictMode(Ls,s)}catch{}}var Xe=Math.clz32?Math.clz32:Xs,Os=Math.log,kt=Math.LN2;function Xs(s){return s>>>=0,s===0?32:31-(Os(s)/kt|0)|0}var Ss=256,xt=262144,W=4194304;function de(s){var t=s&42;if(t!==0)return t;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ys(s,t,a){var n=s.pendingLanes;if(n===0)return 0;var c=0,d=s.suspendedLanes,p=s.pingedLanes;s=s.warmLanes;var N=n&134217727;return N!==0?(n=N&~d,n!==0?c=de(n):(p&=N,p!==0?c=de(p):a||(a=N&~s,a!==0&&(c=de(a))))):(N=n&~d,N!==0?c=de(N):p!==0?c=de(p):a||(a=n&~s,a!==0&&(c=de(a)))),c===0?0:t!==0&&t!==c&&(t&d)===0&&(d=c&-c,a=t&-t,d>=a||d===32&&(a&4194048)!==0)?t:c}function Tt(s,t){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&t)===0}function Et(s,t){switch(s){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function I(){var s=W;return W<<=1,(W&62914560)===0&&(W=4194304),s}function ge(s){for(var t=[],a=0;31>a;a++)t.push(s);return t}function ke(s,t){s.pendingLanes|=t,t!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Us(s,t,a,n,c,d){var p=s.pendingLanes;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=a,s.entangledLanes&=a,s.errorRecoveryDisabledLanes&=a,s.shellSuspendCounter=0;var N=s.entanglements,M=s.expirationTimes,K=s.hiddenUpdates;for(a=p&~a;0<a;){var ce=31-Xe(a),he=1<<ce;N[ce]=0,M[ce]=-1;var Z=K[ce];if(Z!==null)for(K[ce]=null,ce=0;ce<Z.length;ce++){var ae=Z[ce];ae!==null&&(ae.lane&=-536870913)}a&=~he}n!==0&&Ua(s,n,0),d!==0&&c===0&&s.tag!==0&&(s.suspendedLanes|=d&~(p&~t))}function Ua(s,t,a){s.pendingLanes|=t,s.suspendedLanes&=~t;var n=31-Xe(t);s.entangledLanes|=t,s.entanglements[n]=s.entanglements[n]|1073741824|a&261930}function Ft(s,t){var a=s.entangledLanes|=t;for(s=s.entanglements;a;){var n=31-Xe(a),c=1<<n;c&t|s[n]&t&&(s[n]|=t),a&=~c}}function it(s,t){var a=t&-t;return a=(a&42)!==0?1:It(a),(a&(s.suspendedLanes|t))!==0?0:a}function It(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ht(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Kl(){var s=P.p;return s!==0?s:(s=window.event,s===void 0?32:ip(s.type))}function Lr(s,t){var a=P.p;try{return P.p=s,t()}finally{P.p=a}}var jl=Math.random().toString(36).slice(2),Dt="__reactFiber$"+jl,Qt="__reactProps$"+jl,wn="__reactContainer$"+jl,So="__reactEvents$"+jl,rv="__reactListeners$"+jl,cv="__reactHandles$"+jl,ym="__reactResources$"+jl,yi="__reactMarker$"+jl;function Co(s){delete s[Dt],delete s[Qt],delete s[So],delete s[rv],delete s[cv]}function _n(s){var t=s[Dt];if(t)return t;for(var a=s.parentNode;a;){if(t=a[wn]||a[Dt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(s=Ff(s);s!==null;){if(a=s[Dt])return a;s=Ff(s)}return t}s=a,a=s.parentNode}return null}function Sn(s){if(s=s[Dt]||s[wn]){var t=s.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return s}return null}function wi(s){var t=s.tag;if(t===5||t===26||t===27||t===6)return s.stateNode;throw Error(o(33))}function Cn(s){var t=s[ym];return t||(t=s[ym]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function zt(s){s[yi]=!0}var wm=new Set,_m={};function Xl(s,t){kn(s,t),kn(s+"Capture",t)}function kn(s,t){for(_m[s]=t,s=0;s<t.length;s++)wm.add(t[s])}var ov=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Sm={},Cm={};function dv(s){return Ee.call(Cm,s)?!0:Ee.call(Sm,s)?!1:ov.test(s)?Cm[s]=!0:(Sm[s]=!0,!1)}function Ur(s,t,a){if(dv(t))if(a===null)s.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":s.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){s.removeAttribute(t);return}}s.setAttribute(t,""+a)}}function Br(s,t,a){if(a===null)s.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(t);return}s.setAttribute(t,""+a)}}function Ka(s,t,a,n){if(n===null)s.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttributeNS(t,a,""+n)}}function ha(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function km(s){var t=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function uv(s,t,a){var n=Object.getOwnPropertyDescriptor(s.constructor.prototype,t);if(!s.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var c=n.get,d=n.set;return Object.defineProperty(s,t,{configurable:!0,get:function(){return c.call(this)},set:function(p){a=""+p,d.call(this,p)}}),Object.defineProperty(s,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(p){a=""+p},stopTracking:function(){s._valueTracker=null,delete s[t]}}}}function ko(s){if(!s._valueTracker){var t=km(s)?"checked":"value";s._valueTracker=uv(s,t,""+s[t])}}function Tm(s){if(!s)return!1;var t=s._valueTracker;if(!t)return!0;var a=t.getValue(),n="";return s&&(n=km(s)?s.checked?"true":"false":s.value),s=n,s!==a?(t.setValue(s),!0):!1}function Hr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var mv=/[\n"\\]/g;function fa(s){return s.replace(mv,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function To(s,t,a,n,c,d,p,N){s.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?s.type=p:s.removeAttribute("type"),t!=null?p==="number"?(t===0&&s.value===""||s.value!=t)&&(s.value=""+ha(t)):s.value!==""+ha(t)&&(s.value=""+ha(t)):p!=="submit"&&p!=="reset"||s.removeAttribute("value"),t!=null?Eo(s,p,ha(t)):a!=null?Eo(s,p,ha(a)):n!=null&&s.removeAttribute("value"),c==null&&d!=null&&(s.defaultChecked=!!d),c!=null&&(s.checked=c&&typeof c!="function"&&typeof c!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?s.name=""+ha(N):s.removeAttribute("name")}function Em(s,t,a,n,c,d,p,N){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(s.type=d),t!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||t!=null)){ko(s);return}a=a!=null?""+ha(a):"",t=t!=null?""+ha(t):a,N||t===s.value||(s.value=t),s.defaultValue=t}n=n??c,n=typeof n!="function"&&typeof n!="symbol"&&!!n,s.checked=N?s.checked:!!n,s.defaultChecked=!!n,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(s.name=p),ko(s)}function Eo(s,t,a){t==="number"&&Hr(s.ownerDocument)===s||s.defaultValue===""+a||(s.defaultValue=""+a)}function Tn(s,t,a,n){if(s=s.options,t){t={};for(var c=0;c<a.length;c++)t["$"+a[c]]=!0;for(a=0;a<s.length;a++)c=t.hasOwnProperty("$"+s[a].value),s[a].selected!==c&&(s[a].selected=c),c&&n&&(s[a].defaultSelected=!0)}else{for(a=""+ha(a),t=null,c=0;c<s.length;c++){if(s[c].value===a){s[c].selected=!0,n&&(s[c].defaultSelected=!0);return}t!==null||s[c].disabled||(t=s[c])}t!==null&&(t.selected=!0)}}function zm(s,t,a){if(t!=null&&(t=""+ha(t),t!==s.value&&(s.value=t),a==null)){s.defaultValue!==t&&(s.defaultValue=t);return}s.defaultValue=a!=null?""+ha(a):""}function Mm(s,t,a,n){if(t==null){if(n!=null){if(a!=null)throw Error(o(92));if(be(n)){if(1<n.length)throw Error(o(93));n=n[0]}a=n}a==null&&(a=""),t=a}a=ha(t),s.defaultValue=a,n=s.textContent,n===a&&n!==""&&n!==null&&(s.value=n),ko(s)}function En(s,t){if(t){var a=s.firstChild;if(a&&a===s.lastChild&&a.nodeType===3){a.nodeValue=t;return}}s.textContent=t}var xv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Am(s,t,a){var n=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?n?s.setProperty(t,""):t==="float"?s.cssFloat="":s[t]="":n?s.setProperty(t,a):typeof a!="number"||a===0||xv.has(t)?t==="float"?s.cssFloat=a:s[t]=(""+a).trim():s[t]=a+"px"}function Om(s,t,a){if(t!=null&&typeof t!="object")throw Error(o(62));if(s=s.style,a!=null){for(var n in a)!a.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?s.setProperty(n,""):n==="float"?s.cssFloat="":s[n]="");for(var c in t)n=t[c],t.hasOwnProperty(c)&&a[c]!==n&&Am(s,c,n)}else for(var d in t)t.hasOwnProperty(d)&&Am(s,d,t[d])}function zo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $r(s){return fv.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Xa(){}var Mo=null;function Ao(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var zn=null,Mn=null;function Dm(s){var t=Sn(s);if(t&&(s=t.stateNode)){var a=s[Qt]||null;e:switch(s=t.stateNode,t.type){case"input":if(To(s,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=s;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+fa(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var n=a[t];if(n!==s&&n.form===s.form){var c=n[Qt]||null;if(!c)throw Error(o(90));To(n,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<a.length;t++)n=a[t],n.form===s.form&&Tm(n)}break e;case"textarea":zm(s,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Tn(s,!!a.multiple,t,!1)}}}var Oo=!1;function Rm(s,t,a){if(Oo)return s(t,a);Oo=!0;try{var n=s(t);return n}finally{if(Oo=!1,(zn!==null||Mn!==null)&&(kc(),zn&&(t=zn,s=Mn,Mn=zn=null,Dm(t),s)))for(t=0;t<s.length;t++)Dm(s[t])}}function _i(s,t){var a=s.stateNode;if(a===null)return null;var n=a[Qt]||null;if(n===null)return null;a=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(s=s.type,n=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!n;break e;default:s=!1}if(s)return null;if(a&&typeof a!="function")throw Error(o(231,t,typeof a));return a}var Pa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Do=!1;if(Pa)try{var Si={};Object.defineProperty(Si,"passive",{get:function(){Do=!0}}),window.addEventListener("test",Si,Si),window.removeEventListener("test",Si,Si)}catch{Do=!1}var vl=null,Ro=null,qr=null;function Lm(){if(qr)return qr;var s,t=Ro,a=t.length,n,c="value"in vl?vl.value:vl.textContent,d=c.length;for(s=0;s<a&&t[s]===c[s];s++);var p=a-s;for(n=1;n<=p&&t[a-n]===c[d-n];n++);return qr=c.slice(s,1<n?1-n:void 0)}function Gr(s){var t=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&t===13&&(s=13)):s=t,s===10&&(s=13),32<=s||s===13?s:0}function Vr(){return!0}function Um(){return!1}function Yt(s){function t(a,n,c,d,p){this._reactName=a,this._targetInst=c,this.type=n,this.nativeEvent=d,this.target=p,this.currentTarget=null;for(var N in s)s.hasOwnProperty(N)&&(a=s[N],this[N]=a?a(d):d[N]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Vr:Um,this.isPropagationStopped=Um,this}return y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Vr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Vr)},persist:function(){},isPersistent:Vr}),t}var Pl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fr=Yt(Pl),Ci=y({},Pl,{view:0,detail:0}),pv=Yt(Ci),Lo,Uo,ki,Ir=y({},Ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ho,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ki&&(ki&&s.type==="mousemove"?(Lo=s.screenX-ki.screenX,Uo=s.screenY-ki.screenY):Uo=Lo=0,ki=s),Lo)},movementY:function(s){return"movementY"in s?s.movementY:Uo}}),Bm=Yt(Ir),gv=y({},Ir,{dataTransfer:0}),jv=Yt(gv),vv=y({},Ci,{relatedTarget:0}),Bo=Yt(vv),bv=y({},Pl,{animationName:0,elapsedTime:0,pseudoElement:0}),Nv=Yt(bv),yv=y({},Pl,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),wv=Yt(yv),_v=y({},Pl,{data:0}),Hm=Yt(_v),Sv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tv(s){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(s):(s=kv[s])?!!t[s]:!1}function Ho(){return Tv}var Ev=y({},Ci,{key:function(s){if(s.key){var t=Sv[s.key]||s.key;if(t!=="Unidentified")return t}return s.type==="keypress"?(s=Gr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Cv[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ho,charCode:function(s){return s.type==="keypress"?Gr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Gr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),zv=Yt(Ev),Mv=y({},Ir,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$m=Yt(Mv),Av=y({},Ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ho}),Ov=Yt(Av),Dv=y({},Pl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rv=Yt(Dv),Lv=y({},Ir,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Uv=Yt(Lv),Bv=y({},Pl,{newState:0,oldState:0}),Hv=Yt(Bv),$v=[9,13,27,32],$o=Pa&&"CompositionEvent"in window,Ti=null;Pa&&"documentMode"in document&&(Ti=document.documentMode);var qv=Pa&&"TextEvent"in window&&!Ti,qm=Pa&&(!$o||Ti&&8<Ti&&11>=Ti),Gm=" ",Vm=!1;function Fm(s,t){switch(s){case"keyup":return $v.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Im(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var An=!1;function Gv(s,t){switch(s){case"compositionend":return Im(t);case"keypress":return t.which!==32?null:(Vm=!0,Gm);case"textInput":return s=t.data,s===Gm&&Vm?null:s;default:return null}}function Vv(s,t){if(An)return s==="compositionend"||!$o&&Fm(s,t)?(s=Lm(),qr=Ro=vl=null,An=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qm&&t.locale!=="ko"?null:t.data;default:return null}}var Fv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qm(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t==="input"?!!Fv[s.type]:t==="textarea"}function Ym(s,t,a,n){zn?Mn?Mn.push(n):Mn=[n]:zn=n,t=Dc(t,"onChange"),0<t.length&&(a=new Fr("onChange","change",null,a,n),s.push({event:a,listeners:t}))}var Ei=null,zi=null;function Iv(s){zf(s,0)}function Qr(s){var t=wi(s);if(Tm(t))return s}function Km(s,t){if(s==="change")return t}var Xm=!1;if(Pa){var qo;if(Pa){var Go="oninput"in document;if(!Go){var Pm=document.createElement("div");Pm.setAttribute("oninput","return;"),Go=typeof Pm.oninput=="function"}qo=Go}else qo=!1;Xm=qo&&(!document.documentMode||9<document.documentMode)}function Jm(){Ei&&(Ei.detachEvent("onpropertychange",Zm),zi=Ei=null)}function Zm(s){if(s.propertyName==="value"&&Qr(zi)){var t=[];Ym(t,zi,s,Ao(s)),Rm(Iv,t)}}function Qv(s,t,a){s==="focusin"?(Jm(),Ei=t,zi=a,Ei.attachEvent("onpropertychange",Zm)):s==="focusout"&&Jm()}function Yv(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Qr(zi)}function Kv(s,t){if(s==="click")return Qr(t)}function Xv(s,t){if(s==="input"||s==="change")return Qr(t)}function Pv(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var na=typeof Object.is=="function"?Object.is:Pv;function Mi(s,t){if(na(s,t))return!0;if(typeof s!="object"||s===null||typeof t!="object"||t===null)return!1;var a=Object.keys(s),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var c=a[n];if(!Ee.call(t,c)||!na(s[c],t[c]))return!1}return!0}function Wm(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function ex(s,t){var a=Wm(s);s=0;for(var n;a;){if(a.nodeType===3){if(n=s+a.textContent.length,s<=t&&n>=t)return{node:a,offset:t-s};s=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Wm(a)}}function sx(s,t){return s&&t?s===t?!0:s&&s.nodeType===3?!1:t&&t.nodeType===3?sx(s,t.parentNode):"contains"in s?s.contains(t):s.compareDocumentPosition?!!(s.compareDocumentPosition(t)&16):!1:!1}function tx(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var t=Hr(s.document);t instanceof s.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)s=t.contentWindow;else break;t=Hr(s.document)}return t}function Vo(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t&&(t==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||t==="textarea"||s.contentEditable==="true")}var Jv=Pa&&"documentMode"in document&&11>=document.documentMode,On=null,Fo=null,Ai=null,Io=!1;function ax(s,t,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Io||On==null||On!==Hr(n)||(n=On,"selectionStart"in n&&Vo(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ai&&Mi(Ai,n)||(Ai=n,n=Dc(Fo,"onSelect"),0<n.length&&(t=new Fr("onSelect","select",null,t,a),s.push({event:t,listeners:n}),t.target=On)))}function Jl(s,t){var a={};return a[s.toLowerCase()]=t.toLowerCase(),a["Webkit"+s]="webkit"+t,a["Moz"+s]="moz"+t,a}var Dn={animationend:Jl("Animation","AnimationEnd"),animationiteration:Jl("Animation","AnimationIteration"),animationstart:Jl("Animation","AnimationStart"),transitionrun:Jl("Transition","TransitionRun"),transitionstart:Jl("Transition","TransitionStart"),transitioncancel:Jl("Transition","TransitionCancel"),transitionend:Jl("Transition","TransitionEnd")},Qo={},lx={};Pa&&(lx=document.createElement("div").style,"AnimationEvent"in window||(delete Dn.animationend.animation,delete Dn.animationiteration.animation,delete Dn.animationstart.animation),"TransitionEvent"in window||delete Dn.transitionend.transition);function Zl(s){if(Qo[s])return Qo[s];if(!Dn[s])return s;var t=Dn[s],a;for(a in t)if(t.hasOwnProperty(a)&&a in lx)return Qo[s]=t[a];return s}var nx=Zl("animationend"),ix=Zl("animationiteration"),rx=Zl("animationstart"),Zv=Zl("transitionrun"),Wv=Zl("transitionstart"),eb=Zl("transitioncancel"),cx=Zl("transitionend"),ox=new Map,Yo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yo.push("scrollEnd");function Ta(s,t){ox.set(s,t),Xl(t,[s])}var Yr=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},pa=[],Rn=0,Ko=0;function Kr(){for(var s=Rn,t=Ko=Rn=0;t<s;){var a=pa[t];pa[t++]=null;var n=pa[t];pa[t++]=null;var c=pa[t];pa[t++]=null;var d=pa[t];if(pa[t++]=null,n!==null&&c!==null){var p=n.pending;p===null?c.next=c:(c.next=p.next,p.next=c),n.pending=c}d!==0&&dx(a,c,d)}}function Xr(s,t,a,n){pa[Rn++]=s,pa[Rn++]=t,pa[Rn++]=a,pa[Rn++]=n,Ko|=n,s.lanes|=n,s=s.alternate,s!==null&&(s.lanes|=n)}function Xo(s,t,a,n){return Xr(s,t,a,n),Pr(s)}function Wl(s,t){return Xr(s,null,null,t),Pr(s)}function dx(s,t,a){s.lanes|=a;var n=s.alternate;n!==null&&(n.lanes|=a);for(var c=!1,d=s.return;d!==null;)d.childLanes|=a,n=d.alternate,n!==null&&(n.childLanes|=a),d.tag===22&&(s=d.stateNode,s===null||s._visibility&1||(c=!0)),s=d,d=d.return;return s.tag===3?(d=s.stateNode,c&&t!==null&&(c=31-Xe(a),s=d.hiddenUpdates,n=s[c],n===null?s[c]=[t]:n.push(t),t.lane=a|536870912),d):null}function Pr(s){if(50<er)throw er=0,lu=null,Error(o(185));for(var t=s.return;t!==null;)s=t,t=s.return;return s.tag===3?s.stateNode:null}var Ln={};function sb(s,t,a,n){this.tag=s,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ia(s,t,a,n){return new sb(s,t,a,n)}function Po(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ja(s,t){var a=s.alternate;return a===null?(a=ia(s.tag,t,s.key,s.mode),a.elementType=s.elementType,a.type=s.type,a.stateNode=s.stateNode,a.alternate=s,s.alternate=a):(a.pendingProps=t,a.type=s.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=s.flags&65011712,a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,t=s.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=s.sibling,a.index=s.index,a.ref=s.ref,a.refCleanup=s.refCleanup,a}function ux(s,t){s.flags&=65011714;var a=s.alternate;return a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s}function Jr(s,t,a,n,c,d){var p=0;if(n=s,typeof s=="function")Po(s)&&(p=1);else if(typeof s=="string")p=iN(s,a,ve.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case te:return s=ia(31,a,t,c),s.elementType=te,s.lanes=d,s;case O:return en(a.children,c,d,t);case A:p=8,c|=24;break;case D:return s=ia(12,a,t,c|2),s.elementType=D,s.lanes=d,s;case T:return s=ia(13,a,t,c),s.elementType=T,s.lanes=d,s;case $:return s=ia(19,a,t,c),s.elementType=$,s.lanes=d,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case z:p=10;break e;case V:p=9;break e;case _:p=11;break e;case E:p=14;break e;case se:p=16,n=null;break e}p=29,a=Error(o(130,s===null?"null":typeof s,"")),n=null}return t=ia(p,a,t,c),t.elementType=s,t.type=n,t.lanes=d,t}function en(s,t,a,n){return s=ia(7,s,n,t),s.lanes=a,s}function Jo(s,t,a){return s=ia(6,s,null,t),s.lanes=a,s}function mx(s){var t=ia(18,null,null,0);return t.stateNode=s,t}function Zo(s,t,a){return t=ia(4,s.children!==null?s.children:[],s.key,t),t.lanes=a,t.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},t}var xx=new WeakMap;function ga(s,t){if(typeof s=="object"&&s!==null){var a=xx.get(s);return a!==void 0?a:(t={value:s,source:t,stack:pe(t)},xx.set(s,t),t)}return{value:s,source:t,stack:pe(t)}}var Un=[],Bn=0,Zr=null,Oi=0,ja=[],va=0,bl=null,Ba=1,Ha="";function Za(s,t){Un[Bn++]=Oi,Un[Bn++]=Zr,Zr=s,Oi=t}function hx(s,t,a){ja[va++]=Ba,ja[va++]=Ha,ja[va++]=bl,bl=s;var n=Ba;s=Ha;var c=32-Xe(n)-1;n&=~(1<<c),a+=1;var d=32-Xe(t)+c;if(30<d){var p=c-c%5;d=(n&(1<<p)-1).toString(32),n>>=p,c-=p,Ba=1<<32-Xe(t)+c|a<<c|n,Ha=d+s}else Ba=1<<d|a<<c|n,Ha=s}function Wo(s){s.return!==null&&(Za(s,1),hx(s,1,0))}function ed(s){for(;s===Zr;)Zr=Un[--Bn],Un[Bn]=null,Oi=Un[--Bn],Un[Bn]=null;for(;s===bl;)bl=ja[--va],ja[va]=null,Ha=ja[--va],ja[va]=null,Ba=ja[--va],ja[va]=null}function fx(s,t){ja[va++]=Ba,ja[va++]=Ha,ja[va++]=bl,Ba=t.id,Ha=t.overflow,bl=s}var Rt=null,Ps=null,Cs=!1,Nl=null,ba=!1,sd=Error(o(519));function yl(s){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Di(ga(t,s)),sd}function px(s){var t=s.stateNode,a=s.type,n=s.memoizedProps;switch(t[Dt]=s,t[Qt]=n,a){case"dialog":bs("cancel",t),bs("close",t);break;case"iframe":case"object":case"embed":bs("load",t);break;case"video":case"audio":for(a=0;a<tr.length;a++)bs(tr[a],t);break;case"source":bs("error",t);break;case"img":case"image":case"link":bs("error",t),bs("load",t);break;case"details":bs("toggle",t);break;case"input":bs("invalid",t),Em(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":bs("invalid",t);break;case"textarea":bs("invalid",t),Mm(t,n.value,n.defaultValue,n.children)}a=n.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||n.suppressHydrationWarning===!0||Df(t.textContent,a)?(n.popover!=null&&(bs("beforetoggle",t),bs("toggle",t)),n.onScroll!=null&&bs("scroll",t),n.onScrollEnd!=null&&bs("scrollend",t),n.onClick!=null&&(t.onclick=Xa),t=!0):t=!1,t||yl(s,!0)}function gx(s){for(Rt=s.return;Rt;)switch(Rt.tag){case 5:case 31:case 13:ba=!1;return;case 27:case 3:ba=!0;return;default:Rt=Rt.return}}function Hn(s){if(s!==Rt)return!1;if(!Cs)return gx(s),Cs=!0,!1;var t=s.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=s.type,a=!(a!=="form"&&a!=="button")||vu(s.type,s.memoizedProps)),a=!a),a&&Ps&&yl(s),gx(s),t===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(o(317));Ps=Vf(s)}else if(t===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(o(317));Ps=Vf(s)}else t===27?(t=Ps,Ll(s.type)?(s=_u,_u=null,Ps=s):Ps=t):Ps=Rt?ya(s.stateNode.nextSibling):null;return!0}function sn(){Ps=Rt=null,Cs=!1}function td(){var s=Nl;return s!==null&&(Jt===null?Jt=s:Jt.push.apply(Jt,s),Nl=null),s}function Di(s){Nl===null?Nl=[s]:Nl.push(s)}var ad=_e(null),tn=null,Wa=null;function wl(s,t,a){Ce(ad,t._currentValue),t._currentValue=a}function el(s){s._currentValue=ad.current,Ne(ad)}function ld(s,t,a){for(;s!==null;){var n=s.alternate;if((s.childLanes&t)!==t?(s.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),s===a)break;s=s.return}}function nd(s,t,a,n){var c=s.child;for(c!==null&&(c.return=s);c!==null;){var d=c.dependencies;if(d!==null){var p=c.child;d=d.firstContext;e:for(;d!==null;){var N=d;d=c;for(var M=0;M<t.length;M++)if(N.context===t[M]){d.lanes|=a,N=d.alternate,N!==null&&(N.lanes|=a),ld(d.return,a,s),n||(p=null);break e}d=N.next}}else if(c.tag===18){if(p=c.return,p===null)throw Error(o(341));p.lanes|=a,d=p.alternate,d!==null&&(d.lanes|=a),ld(p,a,s),p=null}else p=c.child;if(p!==null)p.return=c;else for(p=c;p!==null;){if(p===s){p=null;break}if(c=p.sibling,c!==null){c.return=p.return,p=c;break}p=p.return}c=p}}function $n(s,t,a,n){s=null;for(var c=t,d=!1;c!==null;){if(!d){if((c.flags&524288)!==0)d=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var p=c.alternate;if(p===null)throw Error(o(387));if(p=p.memoizedProps,p!==null){var N=c.type;na(c.pendingProps.value,p.value)||(s!==null?s.push(N):s=[N])}}else if(c===xe.current){if(p=c.alternate,p===null)throw Error(o(387));p.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(s!==null?s.push(rr):s=[rr])}c=c.return}s!==null&&nd(t,s,a,n),t.flags|=262144}function Wr(s){for(s=s.firstContext;s!==null;){if(!na(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function an(s){tn=s,Wa=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Lt(s){return jx(tn,s)}function ec(s,t){return tn===null&&an(s),jx(s,t)}function jx(s,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Wa===null){if(s===null)throw Error(o(308));Wa=t,s.dependencies={lanes:0,firstContext:t},s.flags|=524288}else Wa=Wa.next=t;return a}var tb=typeof AbortController<"u"?AbortController:function(){var s=[],t=this.signal={aborted:!1,addEventListener:function(a,n){s.push(n)}};this.abort=function(){t.aborted=!0,s.forEach(function(a){return a()})}},ab=l.unstable_scheduleCallback,lb=l.unstable_NormalPriority,vt={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function id(){return{controller:new tb,data:new Map,refCount:0}}function Ri(s){s.refCount--,s.refCount===0&&ab(lb,function(){s.controller.abort()})}var Li=null,rd=0,qn=0,Gn=null;function nb(s,t){if(Li===null){var a=Li=[];rd=0,qn=du(),Gn={status:"pending",value:void 0,then:function(n){a.push(n)}}}return rd++,t.then(vx,vx),t}function vx(){if(--rd===0&&Li!==null){Gn!==null&&(Gn.status="fulfilled");var s=Li;Li=null,qn=0,Gn=null;for(var t=0;t<s.length;t++)(0,s[t])()}}function ib(s,t){var a=[],n={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return s.then(function(){n.status="fulfilled",n.value=t;for(var c=0;c<a.length;c++)(0,a[c])(t)},function(c){for(n.status="rejected",n.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),n}var bx=U.S;U.S=function(s,t){af=nt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&nb(s,t),bx!==null&&bx(s,t)};var ln=_e(null);function cd(){var s=ln.current;return s!==null?s:Fs.pooledCache}function sc(s,t){t===null?Ce(ln,ln.current):Ce(ln,t.pool)}function Nx(){var s=cd();return s===null?null:{parent:vt._currentValue,pool:s}}var Vn=Error(o(460)),od=Error(o(474)),tc=Error(o(542)),ac={then:function(){}};function yx(s){return s=s.status,s==="fulfilled"||s==="rejected"}function wx(s,t,a){switch(a=s[a],a===void 0?s.push(t):a!==t&&(t.then(Xa,Xa),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw s=t.reason,Sx(s),s;default:if(typeof t.status=="string")t.then(Xa,Xa);else{if(s=Fs,s!==null&&100<s.shellSuspendCounter)throw Error(o(482));s=t,s.status="pending",s.then(function(n){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=n}},function(n){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw s=t.reason,Sx(s),s}throw rn=t,Vn}}function nn(s){try{var t=s._init;return t(s._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(rn=a,Vn):a}}var rn=null;function _x(){if(rn===null)throw Error(o(459));var s=rn;return rn=null,s}function Sx(s){if(s===Vn||s===tc)throw Error(o(483))}var Fn=null,Ui=0;function lc(s){var t=Ui;return Ui+=1,Fn===null&&(Fn=[]),wx(Fn,s,t)}function Bi(s,t){t=t.props.ref,s.ref=t!==void 0?t:null}function nc(s,t){throw t.$$typeof===b?Error(o(525)):(s=Object.prototype.toString.call(t),Error(o(31,s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)))}function Cx(s){function t(q,R){if(s){var Y=q.deletions;Y===null?(q.deletions=[R],q.flags|=16):Y.push(R)}}function a(q,R){if(!s)return null;for(;R!==null;)t(q,R),R=R.sibling;return null}function n(q){for(var R=new Map;q!==null;)q.key!==null?R.set(q.key,q):R.set(q.index,q),q=q.sibling;return R}function c(q,R){return q=Ja(q,R),q.index=0,q.sibling=null,q}function d(q,R,Y){return q.index=Y,s?(Y=q.alternate,Y!==null?(Y=Y.index,Y<R?(q.flags|=67108866,R):Y):(q.flags|=67108866,R)):(q.flags|=1048576,R)}function p(q){return s&&q.alternate===null&&(q.flags|=67108866),q}function N(q,R,Y,me){return R===null||R.tag!==6?(R=Jo(Y,q.mode,me),R.return=q,R):(R=c(R,Y),R.return=q,R)}function M(q,R,Y,me){var Ge=Y.type;return Ge===O?ce(q,R,Y.props.children,me,Y.key):R!==null&&(R.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===se&&nn(Ge)===R.type)?(R=c(R,Y.props),Bi(R,Y),R.return=q,R):(R=Jr(Y.type,Y.key,Y.props,null,q.mode,me),Bi(R,Y),R.return=q,R)}function K(q,R,Y,me){return R===null||R.tag!==4||R.stateNode.containerInfo!==Y.containerInfo||R.stateNode.implementation!==Y.implementation?(R=Zo(Y,q.mode,me),R.return=q,R):(R=c(R,Y.children||[]),R.return=q,R)}function ce(q,R,Y,me,Ge){return R===null||R.tag!==7?(R=en(Y,q.mode,me,Ge),R.return=q,R):(R=c(R,Y),R.return=q,R)}function he(q,R,Y){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=Jo(""+R,q.mode,Y),R.return=q,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case S:return Y=Jr(R.type,R.key,R.props,null,q.mode,Y),Bi(Y,R),Y.return=q,Y;case w:return R=Zo(R,q.mode,Y),R.return=q,R;case se:return R=nn(R),he(q,R,Y)}if(be(R)||Se(R))return R=en(R,q.mode,Y,null),R.return=q,R;if(typeof R.then=="function")return he(q,lc(R),Y);if(R.$$typeof===z)return he(q,ec(q,R),Y);nc(q,R)}return null}function Z(q,R,Y,me){var Ge=R!==null?R.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ge!==null?null:N(q,R,""+Y,me);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case S:return Y.key===Ge?M(q,R,Y,me):null;case w:return Y.key===Ge?K(q,R,Y,me):null;case se:return Y=nn(Y),Z(q,R,Y,me)}if(be(Y)||Se(Y))return Ge!==null?null:ce(q,R,Y,me,null);if(typeof Y.then=="function")return Z(q,R,lc(Y),me);if(Y.$$typeof===z)return Z(q,R,ec(q,Y),me);nc(q,Y)}return null}function ae(q,R,Y,me,Ge){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return q=q.get(Y)||null,N(R,q,""+me,Ge);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case S:return q=q.get(me.key===null?Y:me.key)||null,M(R,q,me,Ge);case w:return q=q.get(me.key===null?Y:me.key)||null,K(R,q,me,Ge);case se:return me=nn(me),ae(q,R,Y,me,Ge)}if(be(me)||Se(me))return q=q.get(Y)||null,ce(R,q,me,Ge,null);if(typeof me.then=="function")return ae(q,R,Y,lc(me),Ge);if(me.$$typeof===z)return ae(q,R,Y,ec(R,me),Ge);nc(R,me)}return null}function Ae(q,R,Y,me){for(var Ge=null,ks=null,Oe=R,ns=R=0,_s=null;Oe!==null&&ns<Y.length;ns++){Oe.index>ns?(_s=Oe,Oe=null):_s=Oe.sibling;var Ts=Z(q,Oe,Y[ns],me);if(Ts===null){Oe===null&&(Oe=_s);break}s&&Oe&&Ts.alternate===null&&t(q,Oe),R=d(Ts,R,ns),ks===null?Ge=Ts:ks.sibling=Ts,ks=Ts,Oe=_s}if(ns===Y.length)return a(q,Oe),Cs&&Za(q,ns),Ge;if(Oe===null){for(;ns<Y.length;ns++)Oe=he(q,Y[ns],me),Oe!==null&&(R=d(Oe,R,ns),ks===null?Ge=Oe:ks.sibling=Oe,ks=Oe);return Cs&&Za(q,ns),Ge}for(Oe=n(Oe);ns<Y.length;ns++)_s=ae(Oe,q,ns,Y[ns],me),_s!==null&&(s&&_s.alternate!==null&&Oe.delete(_s.key===null?ns:_s.key),R=d(_s,R,ns),ks===null?Ge=_s:ks.sibling=_s,ks=_s);return s&&Oe.forEach(function(ql){return t(q,ql)}),Cs&&Za(q,ns),Ge}function Ke(q,R,Y,me){if(Y==null)throw Error(o(151));for(var Ge=null,ks=null,Oe=R,ns=R=0,_s=null,Ts=Y.next();Oe!==null&&!Ts.done;ns++,Ts=Y.next()){Oe.index>ns?(_s=Oe,Oe=null):_s=Oe.sibling;var ql=Z(q,Oe,Ts.value,me);if(ql===null){Oe===null&&(Oe=_s);break}s&&Oe&&ql.alternate===null&&t(q,Oe),R=d(ql,R,ns),ks===null?Ge=ql:ks.sibling=ql,ks=ql,Oe=_s}if(Ts.done)return a(q,Oe),Cs&&Za(q,ns),Ge;if(Oe===null){for(;!Ts.done;ns++,Ts=Y.next())Ts=he(q,Ts.value,me),Ts!==null&&(R=d(Ts,R,ns),ks===null?Ge=Ts:ks.sibling=Ts,ks=Ts);return Cs&&Za(q,ns),Ge}for(Oe=n(Oe);!Ts.done;ns++,Ts=Y.next())Ts=ae(Oe,q,ns,Ts.value,me),Ts!==null&&(s&&Ts.alternate!==null&&Oe.delete(Ts.key===null?ns:Ts.key),R=d(Ts,R,ns),ks===null?Ge=Ts:ks.sibling=Ts,ks=Ts);return s&&Oe.forEach(function(gN){return t(q,gN)}),Cs&&Za(q,ns),Ge}function $s(q,R,Y,me){if(typeof Y=="object"&&Y!==null&&Y.type===O&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case S:e:{for(var Ge=Y.key;R!==null;){if(R.key===Ge){if(Ge=Y.type,Ge===O){if(R.tag===7){a(q,R.sibling),me=c(R,Y.props.children),me.return=q,q=me;break e}}else if(R.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===se&&nn(Ge)===R.type){a(q,R.sibling),me=c(R,Y.props),Bi(me,Y),me.return=q,q=me;break e}a(q,R);break}else t(q,R);R=R.sibling}Y.type===O?(me=en(Y.props.children,q.mode,me,Y.key),me.return=q,q=me):(me=Jr(Y.type,Y.key,Y.props,null,q.mode,me),Bi(me,Y),me.return=q,q=me)}return p(q);case w:e:{for(Ge=Y.key;R!==null;){if(R.key===Ge)if(R.tag===4&&R.stateNode.containerInfo===Y.containerInfo&&R.stateNode.implementation===Y.implementation){a(q,R.sibling),me=c(R,Y.children||[]),me.return=q,q=me;break e}else{a(q,R);break}else t(q,R);R=R.sibling}me=Zo(Y,q.mode,me),me.return=q,q=me}return p(q);case se:return Y=nn(Y),$s(q,R,Y,me)}if(be(Y))return Ae(q,R,Y,me);if(Se(Y)){if(Ge=Se(Y),typeof Ge!="function")throw Error(o(150));return Y=Ge.call(Y),Ke(q,R,Y,me)}if(typeof Y.then=="function")return $s(q,R,lc(Y),me);if(Y.$$typeof===z)return $s(q,R,ec(q,Y),me);nc(q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,R!==null&&R.tag===6?(a(q,R.sibling),me=c(R,Y),me.return=q,q=me):(a(q,R),me=Jo(Y,q.mode,me),me.return=q,q=me),p(q)):a(q,R)}return function(q,R,Y,me){try{Ui=0;var Ge=$s(q,R,Y,me);return Fn=null,Ge}catch(Oe){if(Oe===Vn||Oe===tc)throw Oe;var ks=ia(29,Oe,null,q.mode);return ks.lanes=me,ks.return=q,ks}finally{}}}var cn=Cx(!0),kx=Cx(!1),_l=!1;function dd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ud(s,t){s=s.updateQueue,t.updateQueue===s&&(t.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Sl(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Cl(s,t,a){var n=s.updateQueue;if(n===null)return null;if(n=n.shared,(zs&2)!==0){var c=n.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),n.pending=t,t=Pr(s),dx(s,null,a),t}return Xr(s,n,t,a),Pr(s)}function Hi(s,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var n=t.lanes;n&=s.pendingLanes,a|=n,t.lanes=a,Ft(s,a)}}function md(s,t){var a=s.updateQueue,n=s.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var c=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var p={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?c=d=p:d=d.next=p,a=a.next}while(a!==null);d===null?c=d=t:d=d.next=t}else c=d=t;a={baseState:n.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:n.shared,callbacks:n.callbacks},s.updateQueue=a;return}s=a.lastBaseUpdate,s===null?a.firstBaseUpdate=t:s.next=t,a.lastBaseUpdate=t}var xd=!1;function $i(){if(xd){var s=Gn;if(s!==null)throw s}}function qi(s,t,a,n){xd=!1;var c=s.updateQueue;_l=!1;var d=c.firstBaseUpdate,p=c.lastBaseUpdate,N=c.shared.pending;if(N!==null){c.shared.pending=null;var M=N,K=M.next;M.next=null,p===null?d=K:p.next=K,p=M;var ce=s.alternate;ce!==null&&(ce=ce.updateQueue,N=ce.lastBaseUpdate,N!==p&&(N===null?ce.firstBaseUpdate=K:N.next=K,ce.lastBaseUpdate=M))}if(d!==null){var he=c.baseState;p=0,ce=K=M=null,N=d;do{var Z=N.lane&-536870913,ae=Z!==N.lane;if(ae?(ws&Z)===Z:(n&Z)===Z){Z!==0&&Z===qn&&(xd=!0),ce!==null&&(ce=ce.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Ae=s,Ke=N;Z=t;var $s=a;switch(Ke.tag){case 1:if(Ae=Ke.payload,typeof Ae=="function"){he=Ae.call($s,he,Z);break e}he=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Ke.payload,Z=typeof Ae=="function"?Ae.call($s,he,Z):Ae,Z==null)break e;he=y({},he,Z);break e;case 2:_l=!0}}Z=N.callback,Z!==null&&(s.flags|=64,ae&&(s.flags|=8192),ae=c.callbacks,ae===null?c.callbacks=[Z]:ae.push(Z))}else ae={lane:Z,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ce===null?(K=ce=ae,M=he):ce=ce.next=ae,p|=Z;if(N=N.next,N===null){if(N=c.shared.pending,N===null)break;ae=N,N=ae.next,ae.next=null,c.lastBaseUpdate=ae,c.shared.pending=null}}while(!0);ce===null&&(M=he),c.baseState=M,c.firstBaseUpdate=K,c.lastBaseUpdate=ce,d===null&&(c.shared.lanes=0),Ml|=p,s.lanes=p,s.memoizedState=he}}function Tx(s,t){if(typeof s!="function")throw Error(o(191,s));s.call(t)}function Ex(s,t){var a=s.callbacks;if(a!==null)for(s.callbacks=null,s=0;s<a.length;s++)Tx(a[s],t)}var In=_e(null),ic=_e(0);function zx(s,t){s=ol,Ce(ic,s),Ce(In,t),ol=s|t.baseLanes}function hd(){Ce(ic,ol),Ce(In,In.current)}function fd(){ol=ic.current,Ne(In),Ne(ic)}var ra=_e(null),Na=null;function kl(s){var t=s.alternate;Ce(ft,ft.current&1),Ce(ra,s),Na===null&&(t===null||In.current!==null||t.memoizedState!==null)&&(Na=s)}function pd(s){Ce(ft,ft.current),Ce(ra,s),Na===null&&(Na=s)}function Mx(s){s.tag===22?(Ce(ft,ft.current),Ce(ra,s),Na===null&&(Na=s)):Tl()}function Tl(){Ce(ft,ft.current),Ce(ra,ra.current)}function ca(s){Ne(ra),Na===s&&(Na=null),Ne(ft)}var ft=_e(0);function rc(s){for(var t=s;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||yu(a)||wu(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sl=0,as=null,Bs=null,bt=null,cc=!1,Qn=!1,on=!1,oc=0,Gi=0,Yn=null,rb=0;function rt(){throw Error(o(321))}function gd(s,t){if(t===null)return!1;for(var a=0;a<t.length&&a<s.length;a++)if(!na(s[a],t[a]))return!1;return!0}function jd(s,t,a,n,c,d){return sl=d,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,U.H=s===null||s.memoizedState===null?hh:Od,on=!1,d=a(n,c),on=!1,Qn&&(d=Ox(t,a,n,c)),Ax(s),d}function Ax(s){U.H=Ii;var t=Bs!==null&&Bs.next!==null;if(sl=0,bt=Bs=as=null,cc=!1,Gi=0,Yn=null,t)throw Error(o(300));s===null||Nt||(s=s.dependencies,s!==null&&Wr(s)&&(Nt=!0))}function Ox(s,t,a,n){as=s;var c=0;do{if(Qn&&(Yn=null),Gi=0,Qn=!1,25<=c)throw Error(o(301));if(c+=1,bt=Bs=null,s.updateQueue!=null){var d=s.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}U.H=fh,d=t(a,n)}while(Qn);return d}function cb(){var s=U.H,t=s.useState()[0];return t=typeof t.then=="function"?Vi(t):t,s=s.useState()[0],(Bs!==null?Bs.memoizedState:null)!==s&&(as.flags|=1024),t}function vd(){var s=oc!==0;return oc=0,s}function bd(s,t,a){t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~a}function Nd(s){if(cc){for(s=s.memoizedState;s!==null;){var t=s.queue;t!==null&&(t.pending=null),s=s.next}cc=!1}sl=0,bt=Bs=as=null,Qn=!1,Gi=oc=0,Yn=null}function qt(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?as.memoizedState=bt=s:bt=bt.next=s,bt}function pt(){if(Bs===null){var s=as.alternate;s=s!==null?s.memoizedState:null}else s=Bs.next;var t=bt===null?as.memoizedState:bt.next;if(t!==null)bt=t,Bs=s;else{if(s===null)throw as.alternate===null?Error(o(467)):Error(o(310));Bs=s,s={memoizedState:Bs.memoizedState,baseState:Bs.baseState,baseQueue:Bs.baseQueue,queue:Bs.queue,next:null},bt===null?as.memoizedState=bt=s:bt=bt.next=s}return bt}function dc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vi(s){var t=Gi;return Gi+=1,Yn===null&&(Yn=[]),s=wx(Yn,s,t),t=as,(bt===null?t.memoizedState:bt.next)===null&&(t=t.alternate,U.H=t===null||t.memoizedState===null?hh:Od),s}function uc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Vi(s);if(s.$$typeof===z)return Lt(s)}throw Error(o(438,String(s)))}function yd(s){var t=null,a=as.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var n=as.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=dc(),as.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(s),n=0;n<s;n++)a[n]=ne;return t.index++,a}function tl(s,t){return typeof t=="function"?t(s):t}function mc(s){var t=pt();return wd(t,Bs,s)}function wd(s,t,a){var n=s.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=a;var c=s.baseQueue,d=n.pending;if(d!==null){if(c!==null){var p=c.next;c.next=d.next,d.next=p}t.baseQueue=c=d,n.pending=null}if(d=s.baseState,c===null)s.memoizedState=d;else{t=c.next;var N=p=null,M=null,K=t,ce=!1;do{var he=K.lane&-536870913;if(he!==K.lane?(ws&he)===he:(sl&he)===he){var Z=K.revertLane;if(Z===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),he===qn&&(ce=!0);else if((sl&Z)===Z){K=K.next,Z===qn&&(ce=!0);continue}else he={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},M===null?(N=M=he,p=d):M=M.next=he,as.lanes|=Z,Ml|=Z;he=K.action,on&&a(d,he),d=K.hasEagerState?K.eagerState:a(d,he)}else Z={lane:he,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},M===null?(N=M=Z,p=d):M=M.next=Z,as.lanes|=he,Ml|=he;K=K.next}while(K!==null&&K!==t);if(M===null?p=d:M.next=N,!na(d,s.memoizedState)&&(Nt=!0,ce&&(a=Gn,a!==null)))throw a;s.memoizedState=d,s.baseState=p,s.baseQueue=M,n.lastRenderedState=d}return c===null&&(n.lanes=0),[s.memoizedState,n.dispatch]}function _d(s){var t=pt(),a=t.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=s;var n=a.dispatch,c=a.pending,d=t.memoizedState;if(c!==null){a.pending=null;var p=c=c.next;do d=s(d,p.action),p=p.next;while(p!==c);na(d,t.memoizedState)||(Nt=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),a.lastRenderedState=d}return[d,n]}function Dx(s,t,a){var n=as,c=pt(),d=Cs;if(d){if(a===void 0)throw Error(o(407));a=a()}else a=t();var p=!na((Bs||c).memoizedState,a);if(p&&(c.memoizedState=a,Nt=!0),c=c.queue,kd(Ux.bind(null,n,c,s),[s]),c.getSnapshot!==t||p||bt!==null&&bt.memoizedState.tag&1){if(n.flags|=2048,Kn(9,{destroy:void 0},Lx.bind(null,n,c,a,t),null),Fs===null)throw Error(o(349));d||(sl&127)!==0||Rx(n,t,a)}return a}function Rx(s,t,a){s.flags|=16384,s={getSnapshot:t,value:a},t=as.updateQueue,t===null?(t=dc(),as.updateQueue=t,t.stores=[s]):(a=t.stores,a===null?t.stores=[s]:a.push(s))}function Lx(s,t,a,n){t.value=a,t.getSnapshot=n,Bx(t)&&Hx(s)}function Ux(s,t,a){return a(function(){Bx(t)&&Hx(s)})}function Bx(s){var t=s.getSnapshot;s=s.value;try{var a=t();return!na(s,a)}catch{return!0}}function Hx(s){var t=Wl(s,2);t!==null&&Zt(t,s,2)}function Sd(s){var t=qt();if(typeof s=="function"){var a=s;if(s=a(),on){Pe(!0);try{a()}finally{Pe(!1)}}}return t.memoizedState=t.baseState=s,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tl,lastRenderedState:s},t}function $x(s,t,a,n){return s.baseState=a,wd(s,Bs,typeof n=="function"?n:tl)}function ob(s,t,a,n,c){if(fc(s))throw Error(o(485));if(s=t.action,s!==null){var d={payload:c,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){d.listeners.push(p)}};U.T!==null?a(!0):d.isTransition=!1,n(d),a=t.pending,a===null?(d.next=t.pending=d,qx(t,d)):(d.next=a.next,t.pending=a.next=d)}}function qx(s,t){var a=t.action,n=t.payload,c=s.state;if(t.isTransition){var d=U.T,p={};U.T=p;try{var N=a(c,n),M=U.S;M!==null&&M(p,N),Gx(s,t,N)}catch(K){Cd(s,t,K)}finally{d!==null&&p.types!==null&&(d.types=p.types),U.T=d}}else try{d=a(c,n),Gx(s,t,d)}catch(K){Cd(s,t,K)}}function Gx(s,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){Vx(s,t,n)},function(n){return Cd(s,t,n)}):Vx(s,t,a)}function Vx(s,t,a){t.status="fulfilled",t.value=a,Fx(t),s.state=a,t=s.pending,t!==null&&(a=t.next,a===t?s.pending=null:(a=a.next,t.next=a,qx(s,a)))}function Cd(s,t,a){var n=s.pending;if(s.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=a,Fx(t),t=t.next;while(t!==n)}s.action=null}function Fx(s){s=s.listeners;for(var t=0;t<s.length;t++)(0,s[t])()}function Ix(s,t){return t}function Qx(s,t){if(Cs){var a=Fs.formState;if(a!==null){e:{var n=as;if(Cs){if(Ps){s:{for(var c=Ps,d=ba;c.nodeType!==8;){if(!d){c=null;break s}if(c=ya(c.nextSibling),c===null){c=null;break s}}d=c.data,c=d==="F!"||d==="F"?c:null}if(c){Ps=ya(c.nextSibling),n=c.data==="F!";break e}}yl(n)}n=!1}n&&(t=a[0])}}return a=qt(),a.memoizedState=a.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ix,lastRenderedState:t},a.queue=n,a=uh.bind(null,as,n),n.dispatch=a,n=Sd(!1),d=Ad.bind(null,as,!1,n.queue),n=qt(),c={state:t,dispatch:null,action:s,pending:null},n.queue=c,a=ob.bind(null,as,c,d,a),c.dispatch=a,n.memoizedState=s,[t,a,!1]}function Yx(s){var t=pt();return Kx(t,Bs,s)}function Kx(s,t,a){if(t=wd(s,t,Ix)[0],s=mc(tl)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=Vi(t)}catch(p){throw p===Vn?tc:p}else n=t;t=pt();var c=t.queue,d=c.dispatch;return a!==t.memoizedState&&(as.flags|=2048,Kn(9,{destroy:void 0},db.bind(null,c,a),null)),[n,d,s]}function db(s,t){s.action=t}function Xx(s){var t=pt(),a=Bs;if(a!==null)return Kx(t,a,s);pt(),t=t.memoizedState,a=pt();var n=a.queue.dispatch;return a.memoizedState=s,[t,n,!1]}function Kn(s,t,a,n){return s={tag:s,create:a,deps:n,inst:t,next:null},t=as.updateQueue,t===null&&(t=dc(),as.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=s.next=s:(n=a.next,a.next=s,s.next=n,t.lastEffect=s),s}function Px(){return pt().memoizedState}function xc(s,t,a,n){var c=qt();as.flags|=s,c.memoizedState=Kn(1|t,{destroy:void 0},a,n===void 0?null:n)}function hc(s,t,a,n){var c=pt();n=n===void 0?null:n;var d=c.memoizedState.inst;Bs!==null&&n!==null&&gd(n,Bs.memoizedState.deps)?c.memoizedState=Kn(t,d,a,n):(as.flags|=s,c.memoizedState=Kn(1|t,d,a,n))}function Jx(s,t){xc(8390656,8,s,t)}function kd(s,t){hc(2048,8,s,t)}function ub(s){as.flags|=4;var t=as.updateQueue;if(t===null)t=dc(),as.updateQueue=t,t.events=[s];else{var a=t.events;a===null?t.events=[s]:a.push(s)}}function Zx(s){var t=pt().memoizedState;return ub({ref:t,nextImpl:s}),function(){if((zs&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Wx(s,t){return hc(4,2,s,t)}function eh(s,t){return hc(4,4,s,t)}function sh(s,t){if(typeof t=="function"){s=s();var a=t(s);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return s=s(),t.current=s,function(){t.current=null}}function th(s,t,a){a=a!=null?a.concat([s]):null,hc(4,4,sh.bind(null,t,s),a)}function Td(){}function ah(s,t){var a=pt();t=t===void 0?null:t;var n=a.memoizedState;return t!==null&&gd(t,n[1])?n[0]:(a.memoizedState=[s,t],s)}function lh(s,t){var a=pt();t=t===void 0?null:t;var n=a.memoizedState;if(t!==null&&gd(t,n[1]))return n[0];if(n=s(),on){Pe(!0);try{s()}finally{Pe(!1)}}return a.memoizedState=[n,t],n}function Ed(s,t,a){return a===void 0||(sl&1073741824)!==0&&(ws&261930)===0?s.memoizedState=t:(s.memoizedState=a,s=nf(),as.lanes|=s,Ml|=s,a)}function nh(s,t,a,n){return na(a,t)?a:In.current!==null?(s=Ed(s,a,n),na(s,t)||(Nt=!0),s):(sl&42)===0||(sl&1073741824)!==0&&(ws&261930)===0?(Nt=!0,s.memoizedState=a):(s=nf(),as.lanes|=s,Ml|=s,t)}function ih(s,t,a,n,c){var d=P.p;P.p=d!==0&&8>d?d:8;var p=U.T,N={};U.T=N,Ad(s,!1,t,a);try{var M=c(),K=U.S;if(K!==null&&K(N,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var ce=ib(M,n);Fi(s,t,ce,ua(s))}else Fi(s,t,n,ua(s))}catch(he){Fi(s,t,{then:function(){},status:"rejected",reason:he},ua())}finally{P.p=d,p!==null&&N.types!==null&&(p.types=N.types),U.T=p}}function mb(){}function zd(s,t,a,n){if(s.tag!==5)throw Error(o(476));var c=rh(s).queue;ih(s,c,t,X,a===null?mb:function(){return ch(s),a(n)})}function rh(s){var t=s.memoizedState;if(t!==null)return t;t={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tl,lastRenderedState:X},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tl,lastRenderedState:a},next:null},s.memoizedState=t,s=s.alternate,s!==null&&(s.memoizedState=t),t}function ch(s){var t=rh(s);t.next===null&&(t=s.alternate.memoizedState),Fi(s,t.next.queue,{},ua())}function Md(){return Lt(rr)}function oh(){return pt().memoizedState}function dh(){return pt().memoizedState}function xb(s){for(var t=s.return;t!==null;){switch(t.tag){case 24:case 3:var a=ua();s=Sl(a);var n=Cl(t,s,a);n!==null&&(Zt(n,t,a),Hi(n,t,a)),t={cache:id()},s.payload=t;return}t=t.return}}function hb(s,t,a){var n=ua();a={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},fc(s)?mh(t,a):(a=Xo(s,t,a,n),a!==null&&(Zt(a,s,n),xh(a,t,n)))}function uh(s,t,a){var n=ua();Fi(s,t,a,n)}function Fi(s,t,a,n){var c={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(fc(s))mh(t,c);else{var d=s.alternate;if(s.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var p=t.lastRenderedState,N=d(p,a);if(c.hasEagerState=!0,c.eagerState=N,na(N,p))return Xr(s,t,c,0),Fs===null&&Kr(),!1}catch{}finally{}if(a=Xo(s,t,c,n),a!==null)return Zt(a,s,n),xh(a,t,n),!0}return!1}function Ad(s,t,a,n){if(n={lane:2,revertLane:du(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},fc(s)){if(t)throw Error(o(479))}else t=Xo(s,a,n,2),t!==null&&Zt(t,s,2)}function fc(s){var t=s.alternate;return s===as||t!==null&&t===as}function mh(s,t){Qn=cc=!0;var a=s.pending;a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t}function xh(s,t,a){if((a&4194048)!==0){var n=t.lanes;n&=s.pendingLanes,a|=n,t.lanes=a,Ft(s,a)}}var Ii={readContext:Lt,use:uc,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useLayoutEffect:rt,useInsertionEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useSyncExternalStore:rt,useId:rt,useHostTransitionStatus:rt,useFormState:rt,useActionState:rt,useOptimistic:rt,useMemoCache:rt,useCacheRefresh:rt};Ii.useEffectEvent=rt;var hh={readContext:Lt,use:uc,useCallback:function(s,t){return qt().memoizedState=[s,t===void 0?null:t],s},useContext:Lt,useEffect:Jx,useImperativeHandle:function(s,t,a){a=a!=null?a.concat([s]):null,xc(4194308,4,sh.bind(null,t,s),a)},useLayoutEffect:function(s,t){return xc(4194308,4,s,t)},useInsertionEffect:function(s,t){xc(4,2,s,t)},useMemo:function(s,t){var a=qt();t=t===void 0?null:t;var n=s();if(on){Pe(!0);try{s()}finally{Pe(!1)}}return a.memoizedState=[n,t],n},useReducer:function(s,t,a){var n=qt();if(a!==void 0){var c=a(t);if(on){Pe(!0);try{a(t)}finally{Pe(!1)}}}else c=t;return n.memoizedState=n.baseState=c,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:c},n.queue=s,s=s.dispatch=hb.bind(null,as,s),[n.memoizedState,s]},useRef:function(s){var t=qt();return s={current:s},t.memoizedState=s},useState:function(s){s=Sd(s);var t=s.queue,a=uh.bind(null,as,t);return t.dispatch=a,[s.memoizedState,a]},useDebugValue:Td,useDeferredValue:function(s,t){var a=qt();return Ed(a,s,t)},useTransition:function(){var s=Sd(!1);return s=ih.bind(null,as,s.queue,!0,!1),qt().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,t,a){var n=as,c=qt();if(Cs){if(a===void 0)throw Error(o(407));a=a()}else{if(a=t(),Fs===null)throw Error(o(349));(ws&127)!==0||Rx(n,t,a)}c.memoizedState=a;var d={value:a,getSnapshot:t};return c.queue=d,Jx(Ux.bind(null,n,d,s),[s]),n.flags|=2048,Kn(9,{destroy:void 0},Lx.bind(null,n,d,a,t),null),a},useId:function(){var s=qt(),t=Fs.identifierPrefix;if(Cs){var a=Ha,n=Ba;a=(n&~(1<<32-Xe(n)-1)).toString(32)+a,t="_"+t+"R_"+a,a=oc++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=rb++,t="_"+t+"r_"+a.toString(32)+"_";return s.memoizedState=t},useHostTransitionStatus:Md,useFormState:Qx,useActionState:Qx,useOptimistic:function(s){var t=qt();t.memoizedState=t.baseState=s;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Ad.bind(null,as,!0,a),a.dispatch=t,[s,t]},useMemoCache:yd,useCacheRefresh:function(){return qt().memoizedState=xb.bind(null,as)},useEffectEvent:function(s){var t=qt(),a={impl:s};return t.memoizedState=a,function(){if((zs&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},Od={readContext:Lt,use:uc,useCallback:ah,useContext:Lt,useEffect:kd,useImperativeHandle:th,useInsertionEffect:Wx,useLayoutEffect:eh,useMemo:lh,useReducer:mc,useRef:Px,useState:function(){return mc(tl)},useDebugValue:Td,useDeferredValue:function(s,t){var a=pt();return nh(a,Bs.memoizedState,s,t)},useTransition:function(){var s=mc(tl)[0],t=pt().memoizedState;return[typeof s=="boolean"?s:Vi(s),t]},useSyncExternalStore:Dx,useId:oh,useHostTransitionStatus:Md,useFormState:Yx,useActionState:Yx,useOptimistic:function(s,t){var a=pt();return $x(a,Bs,s,t)},useMemoCache:yd,useCacheRefresh:dh};Od.useEffectEvent=Zx;var fh={readContext:Lt,use:uc,useCallback:ah,useContext:Lt,useEffect:kd,useImperativeHandle:th,useInsertionEffect:Wx,useLayoutEffect:eh,useMemo:lh,useReducer:_d,useRef:Px,useState:function(){return _d(tl)},useDebugValue:Td,useDeferredValue:function(s,t){var a=pt();return Bs===null?Ed(a,s,t):nh(a,Bs.memoizedState,s,t)},useTransition:function(){var s=_d(tl)[0],t=pt().memoizedState;return[typeof s=="boolean"?s:Vi(s),t]},useSyncExternalStore:Dx,useId:oh,useHostTransitionStatus:Md,useFormState:Xx,useActionState:Xx,useOptimistic:function(s,t){var a=pt();return Bs!==null?$x(a,Bs,s,t):(a.baseState=s,[s,a.queue.dispatch])},useMemoCache:yd,useCacheRefresh:dh};fh.useEffectEvent=Zx;function Dd(s,t,a,n){t=s.memoizedState,a=a(n,t),a=a==null?t:y({},t,a),s.memoizedState=a,s.lanes===0&&(s.updateQueue.baseState=a)}var Rd={enqueueSetState:function(s,t,a){s=s._reactInternals;var n=ua(),c=Sl(n);c.payload=t,a!=null&&(c.callback=a),t=Cl(s,c,n),t!==null&&(Zt(t,s,n),Hi(t,s,n))},enqueueReplaceState:function(s,t,a){s=s._reactInternals;var n=ua(),c=Sl(n);c.tag=1,c.payload=t,a!=null&&(c.callback=a),t=Cl(s,c,n),t!==null&&(Zt(t,s,n),Hi(t,s,n))},enqueueForceUpdate:function(s,t){s=s._reactInternals;var a=ua(),n=Sl(a);n.tag=2,t!=null&&(n.callback=t),t=Cl(s,n,a),t!==null&&(Zt(t,s,a),Hi(t,s,a))}};function ph(s,t,a,n,c,d,p){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(n,d,p):t.prototype&&t.prototype.isPureReactComponent?!Mi(a,n)||!Mi(c,d):!0}function gh(s,t,a,n){s=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==s&&Rd.enqueueReplaceState(t,t.state,null)}function dn(s,t){var a=t;if("ref"in t){a={};for(var n in t)n!=="ref"&&(a[n]=t[n])}if(s=s.defaultProps){a===t&&(a=y({},a));for(var c in s)a[c]===void 0&&(a[c]=s[c])}return a}function jh(s){Yr(s)}function vh(s){console.error(s)}function bh(s){Yr(s)}function pc(s,t){try{var a=s.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Nh(s,t,a){try{var n=s.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Ld(s,t,a){return a=Sl(a),a.tag=3,a.payload={element:null},a.callback=function(){pc(s,t)},a}function yh(s){return s=Sl(s),s.tag=3,s}function wh(s,t,a,n){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var d=n.value;s.payload=function(){return c(d)},s.callback=function(){Nh(t,a,n)}}var p=a.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(s.callback=function(){Nh(t,a,n),typeof c!="function"&&(Al===null?Al=new Set([this]):Al.add(this));var N=n.stack;this.componentDidCatch(n.value,{componentStack:N!==null?N:""})})}function fb(s,t,a,n,c){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=a.alternate,t!==null&&$n(t,a,c,!0),a=ra.current,a!==null){switch(a.tag){case 31:case 13:return Na===null?Tc():a.alternate===null&&ct===0&&(ct=3),a.flags&=-257,a.flags|=65536,a.lanes=c,n===ac?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([n]):t.add(n),ru(s,n,c)),!1;case 22:return a.flags|=65536,n===ac?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([n]):a.add(n)),ru(s,n,c)),!1}throw Error(o(435,a.tag))}return ru(s,n,c),Tc(),!1}if(Cs)return t=ra.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,n!==sd&&(s=Error(o(422),{cause:n}),Di(ga(s,a)))):(n!==sd&&(t=Error(o(423),{cause:n}),Di(ga(t,a))),s=s.current.alternate,s.flags|=65536,c&=-c,s.lanes|=c,n=ga(n,a),c=Ld(s.stateNode,n,c),md(s,c),ct!==4&&(ct=2)),!1;var d=Error(o(520),{cause:n});if(d=ga(d,a),Wi===null?Wi=[d]:Wi.push(d),ct!==4&&(ct=2),t===null)return!0;n=ga(n,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,s=c&-c,a.lanes|=s,s=Ld(a.stateNode,n,s),md(a,s),!1;case 1:if(t=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Al===null||!Al.has(d))))return a.flags|=65536,c&=-c,a.lanes|=c,c=yh(c),wh(c,s,a,n),md(a,c),!1}a=a.return}while(a!==null);return!1}var Ud=Error(o(461)),Nt=!1;function Ut(s,t,a,n){t.child=s===null?kx(t,null,a,n):cn(t,s.child,a,n)}function _h(s,t,a,n,c){a=a.render;var d=t.ref;if("ref"in n){var p={};for(var N in n)N!=="ref"&&(p[N]=n[N])}else p=n;return an(t),n=jd(s,t,a,p,d,c),N=vd(),s!==null&&!Nt?(bd(s,t,c),al(s,t,c)):(Cs&&N&&Wo(t),t.flags|=1,Ut(s,t,n,c),t.child)}function Sh(s,t,a,n,c){if(s===null){var d=a.type;return typeof d=="function"&&!Po(d)&&d.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=d,Ch(s,t,d,n,c)):(s=Jr(a.type,null,n,t,t.mode,c),s.ref=t.ref,s.return=t,t.child=s)}if(d=s.child,!Id(s,c)){var p=d.memoizedProps;if(a=a.compare,a=a!==null?a:Mi,a(p,n)&&s.ref===t.ref)return al(s,t,c)}return t.flags|=1,s=Ja(d,n),s.ref=t.ref,s.return=t,t.child=s}function Ch(s,t,a,n,c){if(s!==null){var d=s.memoizedProps;if(Mi(d,n)&&s.ref===t.ref)if(Nt=!1,t.pendingProps=n=d,Id(s,c))(s.flags&131072)!==0&&(Nt=!0);else return t.lanes=s.lanes,al(s,t,c)}return Bd(s,t,a,n,c)}function kh(s,t,a,n){var c=n.children,d=s!==null?s.memoizedState:null;if(s===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((t.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,s!==null){for(n=t.child=s.child,c=0;n!==null;)c=c|n.lanes|n.childLanes,n=n.sibling;n=c&~d}else n=0,t.child=null;return Th(s,t,d,a,n)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},s!==null&&sc(t,d!==null?d.cachePool:null),d!==null?zx(t,d):hd(),Mx(t);else return n=t.lanes=536870912,Th(s,t,d!==null?d.baseLanes|a:a,a,n)}else d!==null?(sc(t,d.cachePool),zx(t,d),Tl(),t.memoizedState=null):(s!==null&&sc(t,null),hd(),Tl());return Ut(s,t,c,a),t.child}function Qi(s,t){return s!==null&&s.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Th(s,t,a,n,c){var d=cd();return d=d===null?null:{parent:vt._currentValue,pool:d},t.memoizedState={baseLanes:a,cachePool:d},s!==null&&sc(t,null),hd(),Mx(t),s!==null&&$n(s,t,n,!0),t.childLanes=c,null}function gc(s,t){return t=vc({mode:t.mode,children:t.children},s.mode),t.ref=s.ref,s.child=t,t.return=s,t}function Eh(s,t,a){return cn(t,s.child,null,a),s=gc(t,t.pendingProps),s.flags|=2,ca(t),t.memoizedState=null,s}function pb(s,t,a){var n=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,s===null){if(Cs){if(n.mode==="hidden")return s=gc(t,n),t.lanes=536870912,Qi(null,s);if(pd(t),(s=Ps)?(s=Gf(s,ba),s=s!==null&&s.data==="&"?s:null,s!==null&&(t.memoizedState={dehydrated:s,treeContext:bl!==null?{id:Ba,overflow:Ha}:null,retryLane:536870912,hydrationErrors:null},a=mx(s),a.return=t,t.child=a,Rt=t,Ps=null)):s=null,s===null)throw yl(t);return t.lanes=536870912,null}return gc(t,n)}var d=s.memoizedState;if(d!==null){var p=d.dehydrated;if(pd(t),c)if(t.flags&256)t.flags&=-257,t=Eh(s,t,a);else if(t.memoizedState!==null)t.child=s.child,t.flags|=128,t=null;else throw Error(o(558));else if(Nt||$n(s,t,a,!1),c=(a&s.childLanes)!==0,Nt||c){if(n=Fs,n!==null&&(p=it(n,a),p!==0&&p!==d.retryLane))throw d.retryLane=p,Wl(s,p),Zt(n,s,p),Ud;Tc(),t=Eh(s,t,a)}else s=d.treeContext,Ps=ya(p.nextSibling),Rt=t,Cs=!0,Nl=null,ba=!1,s!==null&&fx(t,s),t=gc(t,n),t.flags|=4096;return t}return s=Ja(s.child,{mode:n.mode,children:n.children}),s.ref=t.ref,t.child=s,s.return=t,s}function jc(s,t){var a=t.ref;if(a===null)s!==null&&s.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(s===null||s.ref!==a)&&(t.flags|=4194816)}}function Bd(s,t,a,n,c){return an(t),a=jd(s,t,a,n,void 0,c),n=vd(),s!==null&&!Nt?(bd(s,t,c),al(s,t,c)):(Cs&&n&&Wo(t),t.flags|=1,Ut(s,t,a,c),t.child)}function zh(s,t,a,n,c,d){return an(t),t.updateQueue=null,a=Ox(t,n,a,c),Ax(s),n=vd(),s!==null&&!Nt?(bd(s,t,d),al(s,t,d)):(Cs&&n&&Wo(t),t.flags|=1,Ut(s,t,a,d),t.child)}function Mh(s,t,a,n,c){if(an(t),t.stateNode===null){var d=Ln,p=a.contextType;typeof p=="object"&&p!==null&&(d=Lt(p)),d=new a(n,d),t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Rd,t.stateNode=d,d._reactInternals=t,d=t.stateNode,d.props=n,d.state=t.memoizedState,d.refs={},dd(t),p=a.contextType,d.context=typeof p=="object"&&p!==null?Lt(p):Ln,d.state=t.memoizedState,p=a.getDerivedStateFromProps,typeof p=="function"&&(Dd(t,a,p,n),d.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(p=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),p!==d.state&&Rd.enqueueReplaceState(d,d.state,null),qi(t,n,d,c),$i(),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(s===null){d=t.stateNode;var N=t.memoizedProps,M=dn(a,N);d.props=M;var K=d.context,ce=a.contextType;p=Ln,typeof ce=="object"&&ce!==null&&(p=Lt(ce));var he=a.getDerivedStateFromProps;ce=typeof he=="function"||typeof d.getSnapshotBeforeUpdate=="function",N=t.pendingProps!==N,ce||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(N||K!==p)&&gh(t,d,n,p),_l=!1;var Z=t.memoizedState;d.state=Z,qi(t,n,d,c),$i(),K=t.memoizedState,N||Z!==K||_l?(typeof he=="function"&&(Dd(t,a,he,n),K=t.memoizedState),(M=_l||ph(t,a,M,n,Z,K,p))?(ce||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=K),d.props=n,d.state=K,d.context=p,n=M):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{d=t.stateNode,ud(s,t),p=t.memoizedProps,ce=dn(a,p),d.props=ce,he=t.pendingProps,Z=d.context,K=a.contextType,M=Ln,typeof K=="object"&&K!==null&&(M=Lt(K)),N=a.getDerivedStateFromProps,(K=typeof N=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(p!==he||Z!==M)&&gh(t,d,n,M),_l=!1,Z=t.memoizedState,d.state=Z,qi(t,n,d,c),$i();var ae=t.memoizedState;p!==he||Z!==ae||_l||s!==null&&s.dependencies!==null&&Wr(s.dependencies)?(typeof N=="function"&&(Dd(t,a,N,n),ae=t.memoizedState),(ce=_l||ph(t,a,ce,n,Z,ae,M)||s!==null&&s.dependencies!==null&&Wr(s.dependencies))?(K||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(n,ae,M),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(n,ae,M)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||p===s.memoizedProps&&Z===s.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||p===s.memoizedProps&&Z===s.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=ae),d.props=n,d.state=ae,d.context=M,n=ce):(typeof d.componentDidUpdate!="function"||p===s.memoizedProps&&Z===s.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||p===s.memoizedProps&&Z===s.memoizedState||(t.flags|=1024),n=!1)}return d=n,jc(s,t),n=(t.flags&128)!==0,d||n?(d=t.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:d.render(),t.flags|=1,s!==null&&n?(t.child=cn(t,s.child,null,c),t.child=cn(t,null,a,c)):Ut(s,t,a,c),t.memoizedState=d.state,s=t.child):s=al(s,t,c),s}function Ah(s,t,a,n){return sn(),t.flags|=256,Ut(s,t,a,n),t.child}var Hd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $d(s){return{baseLanes:s,cachePool:Nx()}}function qd(s,t,a){return s=s!==null?s.childLanes&~a:0,t&&(s|=da),s}function Oh(s,t,a){var n=t.pendingProps,c=!1,d=(t.flags&128)!==0,p;if((p=d)||(p=s!==null&&s.memoizedState===null?!1:(ft.current&2)!==0),p&&(c=!0,t.flags&=-129),p=(t.flags&32)!==0,t.flags&=-33,s===null){if(Cs){if(c?kl(t):Tl(),(s=Ps)?(s=Gf(s,ba),s=s!==null&&s.data!=="&"?s:null,s!==null&&(t.memoizedState={dehydrated:s,treeContext:bl!==null?{id:Ba,overflow:Ha}:null,retryLane:536870912,hydrationErrors:null},a=mx(s),a.return=t,t.child=a,Rt=t,Ps=null)):s=null,s===null)throw yl(t);return wu(s)?t.lanes=32:t.lanes=536870912,null}var N=n.children;return n=n.fallback,c?(Tl(),c=t.mode,N=vc({mode:"hidden",children:N},c),n=en(n,c,a,null),N.return=t,n.return=t,N.sibling=n,t.child=N,n=t.child,n.memoizedState=$d(a),n.childLanes=qd(s,p,a),t.memoizedState=Hd,Qi(null,n)):(kl(t),Gd(t,N))}var M=s.memoizedState;if(M!==null&&(N=M.dehydrated,N!==null)){if(d)t.flags&256?(kl(t),t.flags&=-257,t=Vd(s,t,a)):t.memoizedState!==null?(Tl(),t.child=s.child,t.flags|=128,t=null):(Tl(),N=n.fallback,c=t.mode,n=vc({mode:"visible",children:n.children},c),N=en(N,c,a,null),N.flags|=2,n.return=t,N.return=t,n.sibling=N,t.child=n,cn(t,s.child,null,a),n=t.child,n.memoizedState=$d(a),n.childLanes=qd(s,p,a),t.memoizedState=Hd,t=Qi(null,n));else if(kl(t),wu(N)){if(p=N.nextSibling&&N.nextSibling.dataset,p)var K=p.dgst;p=K,n=Error(o(419)),n.stack="",n.digest=p,Di({value:n,source:null,stack:null}),t=Vd(s,t,a)}else if(Nt||$n(s,t,a,!1),p=(a&s.childLanes)!==0,Nt||p){if(p=Fs,p!==null&&(n=it(p,a),n!==0&&n!==M.retryLane))throw M.retryLane=n,Wl(s,n),Zt(p,s,n),Ud;yu(N)||Tc(),t=Vd(s,t,a)}else yu(N)?(t.flags|=192,t.child=s.child,t=null):(s=M.treeContext,Ps=ya(N.nextSibling),Rt=t,Cs=!0,Nl=null,ba=!1,s!==null&&fx(t,s),t=Gd(t,n.children),t.flags|=4096);return t}return c?(Tl(),N=n.fallback,c=t.mode,M=s.child,K=M.sibling,n=Ja(M,{mode:"hidden",children:n.children}),n.subtreeFlags=M.subtreeFlags&65011712,K!==null?N=Ja(K,N):(N=en(N,c,a,null),N.flags|=2),N.return=t,n.return=t,n.sibling=N,t.child=n,Qi(null,n),n=t.child,N=s.child.memoizedState,N===null?N=$d(a):(c=N.cachePool,c!==null?(M=vt._currentValue,c=c.parent!==M?{parent:M,pool:M}:c):c=Nx(),N={baseLanes:N.baseLanes|a,cachePool:c}),n.memoizedState=N,n.childLanes=qd(s,p,a),t.memoizedState=Hd,Qi(s.child,n)):(kl(t),a=s.child,s=a.sibling,a=Ja(a,{mode:"visible",children:n.children}),a.return=t,a.sibling=null,s!==null&&(p=t.deletions,p===null?(t.deletions=[s],t.flags|=16):p.push(s)),t.child=a,t.memoizedState=null,a)}function Gd(s,t){return t=vc({mode:"visible",children:t},s.mode),t.return=s,s.child=t}function vc(s,t){return s=ia(22,s,null,t),s.lanes=0,s}function Vd(s,t,a){return cn(t,s.child,null,a),s=Gd(t,t.pendingProps.children),s.flags|=2,t.memoizedState=null,s}function Dh(s,t,a){s.lanes|=t;var n=s.alternate;n!==null&&(n.lanes|=t),ld(s.return,t,a)}function Fd(s,t,a,n,c,d){var p=s.memoizedState;p===null?s.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:c,treeForkCount:d}:(p.isBackwards=t,p.rendering=null,p.renderingStartTime=0,p.last=n,p.tail=a,p.tailMode=c,p.treeForkCount=d)}function Rh(s,t,a){var n=t.pendingProps,c=n.revealOrder,d=n.tail;n=n.children;var p=ft.current,N=(p&2)!==0;if(N?(p=p&1|2,t.flags|=128):p&=1,Ce(ft,p),Ut(s,t,n,a),n=Cs?Oi:0,!N&&s!==null&&(s.flags&128)!==0)e:for(s=t.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Dh(s,a,t);else if(s.tag===19)Dh(s,a,t);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(c){case"forwards":for(a=t.child,c=null;a!==null;)s=a.alternate,s!==null&&rc(s)===null&&(c=a),a=a.sibling;a=c,a===null?(c=t.child,t.child=null):(c=a.sibling,a.sibling=null),Fd(t,!1,c,a,d,n);break;case"backwards":case"unstable_legacy-backwards":for(a=null,c=t.child,t.child=null;c!==null;){if(s=c.alternate,s!==null&&rc(s)===null){t.child=c;break}s=c.sibling,c.sibling=a,a=c,c=s}Fd(t,!0,a,null,d,n);break;case"together":Fd(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function al(s,t,a){if(s!==null&&(t.dependencies=s.dependencies),Ml|=t.lanes,(a&t.childLanes)===0)if(s!==null){if($n(s,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(s!==null&&t.child!==s.child)throw Error(o(153));if(t.child!==null){for(s=t.child,a=Ja(s,s.pendingProps),t.child=a,a.return=t;s.sibling!==null;)s=s.sibling,a=a.sibling=Ja(s,s.pendingProps),a.return=t;a.sibling=null}return t.child}function Id(s,t){return(s.lanes&t)!==0?!0:(s=s.dependencies,!!(s!==null&&Wr(s)))}function gb(s,t,a){switch(t.tag){case 3:Te(t,t.stateNode.containerInfo),wl(t,vt,s.memoizedState.cache),sn();break;case 27:case 5:le(t);break;case 4:Te(t,t.stateNode.containerInfo);break;case 10:wl(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,pd(t),null;break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(kl(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Oh(s,t,a):(kl(t),s=al(s,t,a),s!==null?s.sibling:null);kl(t);break;case 19:var c=(s.flags&128)!==0;if(n=(a&t.childLanes)!==0,n||($n(s,t,a,!1),n=(a&t.childLanes)!==0),c){if(n)return Rh(s,t,a);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Ce(ft,ft.current),n)break;return null;case 22:return t.lanes=0,kh(s,t,a,t.pendingProps);case 24:wl(t,vt,s.memoizedState.cache)}return al(s,t,a)}function Lh(s,t,a){if(s!==null)if(s.memoizedProps!==t.pendingProps)Nt=!0;else{if(!Id(s,a)&&(t.flags&128)===0)return Nt=!1,gb(s,t,a);Nt=(s.flags&131072)!==0}else Nt=!1,Cs&&(t.flags&1048576)!==0&&hx(t,Oi,t.index);switch(t.lanes=0,t.tag){case 16:e:{var n=t.pendingProps;if(s=nn(t.elementType),t.type=s,typeof s=="function")Po(s)?(n=dn(s,n),t.tag=1,t=Mh(null,t,s,n,a)):(t.tag=0,t=Bd(null,t,s,n,a));else{if(s!=null){var c=s.$$typeof;if(c===_){t.tag=11,t=_h(null,t,s,n,a);break e}else if(c===E){t.tag=14,t=Sh(null,t,s,n,a);break e}}throw t=je(s)||s,Error(o(306,t,""))}}return t;case 0:return Bd(s,t,t.type,t.pendingProps,a);case 1:return n=t.type,c=dn(n,t.pendingProps),Mh(s,t,n,c,a);case 3:e:{if(Te(t,t.stateNode.containerInfo),s===null)throw Error(o(387));n=t.pendingProps;var d=t.memoizedState;c=d.element,ud(s,t),qi(t,n,null,a);var p=t.memoizedState;if(n=p.cache,wl(t,vt,n),n!==d.cache&&nd(t,[vt],a,!0),$i(),n=p.element,d.isDehydrated)if(d={element:n,isDehydrated:!1,cache:p.cache},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){t=Ah(s,t,n,a);break e}else if(n!==c){c=ga(Error(o(424)),t),Di(c),t=Ah(s,t,n,a);break e}else{switch(s=t.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Ps=ya(s.firstChild),Rt=t,Cs=!0,Nl=null,ba=!0,a=kx(t,null,n,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(sn(),n===c){t=al(s,t,a);break e}Ut(s,t,n,a)}t=t.child}return t;case 26:return jc(s,t),s===null?(a=Kf(t.type,null,t.pendingProps,null))?t.memoizedState=a:Cs||(a=t.type,s=t.pendingProps,n=Rc(Q.current).createElement(a),n[Dt]=t,n[Qt]=s,Bt(n,a,s),zt(n),t.stateNode=n):t.memoizedState=Kf(t.type,s.memoizedProps,t.pendingProps,s.memoizedState),null;case 27:return le(t),s===null&&Cs&&(n=t.stateNode=If(t.type,t.pendingProps,Q.current),Rt=t,ba=!0,c=Ps,Ll(t.type)?(_u=c,Ps=ya(n.firstChild)):Ps=c),Ut(s,t,t.pendingProps.children,a),jc(s,t),s===null&&(t.flags|=4194304),t.child;case 5:return s===null&&Cs&&((c=n=Ps)&&(n=Yb(n,t.type,t.pendingProps,ba),n!==null?(t.stateNode=n,Rt=t,Ps=ya(n.firstChild),ba=!1,c=!0):c=!1),c||yl(t)),le(t),c=t.type,d=t.pendingProps,p=s!==null?s.memoizedProps:null,n=d.children,vu(c,d)?n=null:p!==null&&vu(c,p)&&(t.flags|=32),t.memoizedState!==null&&(c=jd(s,t,cb,null,null,a),rr._currentValue=c),jc(s,t),Ut(s,t,n,a),t.child;case 6:return s===null&&Cs&&((s=a=Ps)&&(a=Kb(a,t.pendingProps,ba),a!==null?(t.stateNode=a,Rt=t,Ps=null,s=!0):s=!1),s||yl(t)),null;case 13:return Oh(s,t,a);case 4:return Te(t,t.stateNode.containerInfo),n=t.pendingProps,s===null?t.child=cn(t,null,n,a):Ut(s,t,n,a),t.child;case 11:return _h(s,t,t.type,t.pendingProps,a);case 7:return Ut(s,t,t.pendingProps,a),t.child;case 8:return Ut(s,t,t.pendingProps.children,a),t.child;case 12:return Ut(s,t,t.pendingProps.children,a),t.child;case 10:return n=t.pendingProps,wl(t,t.type,n.value),Ut(s,t,n.children,a),t.child;case 9:return c=t.type._context,n=t.pendingProps.children,an(t),c=Lt(c),n=n(c),t.flags|=1,Ut(s,t,n,a),t.child;case 14:return Sh(s,t,t.type,t.pendingProps,a);case 15:return Ch(s,t,t.type,t.pendingProps,a);case 19:return Rh(s,t,a);case 31:return pb(s,t,a);case 22:return kh(s,t,a,t.pendingProps);case 24:return an(t),n=Lt(vt),s===null?(c=cd(),c===null&&(c=Fs,d=id(),c.pooledCache=d,d.refCount++,d!==null&&(c.pooledCacheLanes|=a),c=d),t.memoizedState={parent:n,cache:c},dd(t),wl(t,vt,c)):((s.lanes&a)!==0&&(ud(s,t),qi(t,null,null,a),$i()),c=s.memoizedState,d=t.memoizedState,c.parent!==n?(c={parent:n,cache:n},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),wl(t,vt,n)):(n=d.cache,wl(t,vt,n),n!==c.cache&&nd(t,[vt],a,!0))),Ut(s,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function ll(s){s.flags|=4}function Qd(s,t,a,n,c){if((t=(s.mode&32)!==0)&&(t=!1),t){if(s.flags|=16777216,(c&335544128)===c)if(s.stateNode.complete)s.flags|=8192;else if(df())s.flags|=8192;else throw rn=ac,od}else s.flags&=-16777217}function Uh(s,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Wf(t))if(df())s.flags|=8192;else throw rn=ac,od}function bc(s,t){t!==null&&(s.flags|=4),s.flags&16384&&(t=s.tag!==22?I():536870912,s.lanes|=t,Zn|=t)}function Yi(s,t){if(!Cs)switch(s.tailMode){case"hidden":t=s.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?s.tail=null:a.sibling=null;break;case"collapsed":a=s.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?t||s.tail===null?s.tail=null:s.tail.sibling=null:n.sibling=null}}function Js(s){var t=s.alternate!==null&&s.alternate.child===s.child,a=0,n=0;if(t)for(var c=s.child;c!==null;)a|=c.lanes|c.childLanes,n|=c.subtreeFlags&65011712,n|=c.flags&65011712,c.return=s,c=c.sibling;else for(c=s.child;c!==null;)a|=c.lanes|c.childLanes,n|=c.subtreeFlags,n|=c.flags,c.return=s,c=c.sibling;return s.subtreeFlags|=n,s.childLanes=a,t}function jb(s,t,a){var n=t.pendingProps;switch(ed(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Js(t),null;case 1:return Js(t),null;case 3:return a=t.stateNode,n=null,s!==null&&(n=s.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),el(vt),J(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(Hn(t)?ll(t):s===null||s.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,td())),Js(t),null;case 26:var c=t.type,d=t.memoizedState;return s===null?(ll(t),d!==null?(Js(t),Uh(t,d)):(Js(t),Qd(t,c,null,n,a))):d?d!==s.memoizedState?(ll(t),Js(t),Uh(t,d)):(Js(t),t.flags&=-16777217):(s=s.memoizedProps,s!==n&&ll(t),Js(t),Qd(t,c,s,n,a)),null;case 27:if(qe(t),a=Q.current,c=t.type,s!==null&&t.stateNode!=null)s.memoizedProps!==n&&ll(t);else{if(!n){if(t.stateNode===null)throw Error(o(166));return Js(t),null}s=ve.current,Hn(t)?px(t):(s=If(c,n,a),t.stateNode=s,ll(t))}return Js(t),null;case 5:if(qe(t),c=t.type,s!==null&&t.stateNode!=null)s.memoizedProps!==n&&ll(t);else{if(!n){if(t.stateNode===null)throw Error(o(166));return Js(t),null}if(d=ve.current,Hn(t))px(t);else{var p=Rc(Q.current);switch(d){case 1:d=p.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:d=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":d=p.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":d=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":d=p.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof n.is=="string"?p.createElement("select",{is:n.is}):p.createElement("select"),n.multiple?d.multiple=!0:n.size&&(d.size=n.size);break;default:d=typeof n.is=="string"?p.createElement(c,{is:n.is}):p.createElement(c)}}d[Dt]=t,d[Qt]=n;e:for(p=t.child;p!==null;){if(p.tag===5||p.tag===6)d.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}t.stateNode=d;e:switch(Bt(d,c,n),c){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ll(t)}}return Js(t),Qd(t,t.type,s===null?null:s.memoizedProps,t.pendingProps,a),null;case 6:if(s&&t.stateNode!=null)s.memoizedProps!==n&&ll(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(o(166));if(s=Q.current,Hn(t)){if(s=t.stateNode,a=t.memoizedProps,n=null,c=Rt,c!==null)switch(c.tag){case 27:case 5:n=c.memoizedProps}s[Dt]=t,s=!!(s.nodeValue===a||n!==null&&n.suppressHydrationWarning===!0||Df(s.nodeValue,a)),s||yl(t,!0)}else s=Rc(s).createTextNode(n),s[Dt]=t,t.stateNode=s}return Js(t),null;case 31:if(a=t.memoizedState,s===null||s.memoizedState!==null){if(n=Hn(t),a!==null){if(s===null){if(!n)throw Error(o(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(o(557));s[Dt]=t}else sn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Js(t),s=!1}else a=td(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=a),s=!0;if(!s)return t.flags&256?(ca(t),t):(ca(t),null);if((t.flags&128)!==0)throw Error(o(558))}return Js(t),null;case 13:if(n=t.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(c=Hn(t),n!==null&&n.dehydrated!==null){if(s===null){if(!c)throw Error(o(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));c[Dt]=t}else sn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Js(t),c=!1}else c=td(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(ca(t),t):(ca(t),null)}return ca(t),(t.flags&128)!==0?(t.lanes=a,t):(a=n!==null,s=s!==null&&s.memoizedState!==null,a&&(n=t.child,c=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(c=n.alternate.memoizedState.cachePool.pool),d=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(d=n.memoizedState.cachePool.pool),d!==c&&(n.flags|=2048)),a!==s&&a&&(t.child.flags|=8192),bc(t,t.updateQueue),Js(t),null);case 4:return J(),s===null&&hu(t.stateNode.containerInfo),Js(t),null;case 10:return el(t.type),Js(t),null;case 19:if(Ne(ft),n=t.memoizedState,n===null)return Js(t),null;if(c=(t.flags&128)!==0,d=n.rendering,d===null)if(c)Yi(n,!1);else{if(ct!==0||s!==null&&(s.flags&128)!==0)for(s=t.child;s!==null;){if(d=rc(s),d!==null){for(t.flags|=128,Yi(n,!1),s=d.updateQueue,t.updateQueue=s,bc(t,s),t.subtreeFlags=0,s=a,a=t.child;a!==null;)ux(a,s),a=a.sibling;return Ce(ft,ft.current&1|2),Cs&&Za(t,n.treeForkCount),t.child}s=s.sibling}n.tail!==null&&nt()>Sc&&(t.flags|=128,c=!0,Yi(n,!1),t.lanes=4194304)}else{if(!c)if(s=rc(d),s!==null){if(t.flags|=128,c=!0,s=s.updateQueue,t.updateQueue=s,bc(t,s),Yi(n,!0),n.tail===null&&n.tailMode==="hidden"&&!d.alternate&&!Cs)return Js(t),null}else 2*nt()-n.renderingStartTime>Sc&&a!==536870912&&(t.flags|=128,c=!0,Yi(n,!1),t.lanes=4194304);n.isBackwards?(d.sibling=t.child,t.child=d):(s=n.last,s!==null?s.sibling=d:t.child=d,n.last=d)}return n.tail!==null?(s=n.tail,n.rendering=s,n.tail=s.sibling,n.renderingStartTime=nt(),s.sibling=null,a=ft.current,Ce(ft,c?a&1|2:a&1),Cs&&Za(t,n.treeForkCount),s):(Js(t),null);case 22:case 23:return ca(t),fd(),n=t.memoizedState!==null,s!==null?s.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(a&536870912)!==0&&(t.flags&128)===0&&(Js(t),t.subtreeFlags&6&&(t.flags|=8192)):Js(t),a=t.updateQueue,a!==null&&bc(t,a.retryQueue),a=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==a&&(t.flags|=2048),s!==null&&Ne(ln),null;case 24:return a=null,s!==null&&(a=s.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),el(vt),Js(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function vb(s,t){switch(ed(t),t.tag){case 1:return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 3:return el(vt),J(),s=t.flags,(s&65536)!==0&&(s&128)===0?(t.flags=s&-65537|128,t):null;case 26:case 27:case 5:return qe(t),null;case 31:if(t.memoizedState!==null){if(ca(t),t.alternate===null)throw Error(o(340));sn()}return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 13:if(ca(t),s=t.memoizedState,s!==null&&s.dehydrated!==null){if(t.alternate===null)throw Error(o(340));sn()}return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 19:return Ne(ft),null;case 4:return J(),null;case 10:return el(t.type),null;case 22:case 23:return ca(t),fd(),s!==null&&Ne(ln),s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 24:return el(vt),null;case 25:return null;default:return null}}function Bh(s,t){switch(ed(t),t.tag){case 3:el(vt),J();break;case 26:case 27:case 5:qe(t);break;case 4:J();break;case 31:t.memoizedState!==null&&ca(t);break;case 13:ca(t);break;case 19:Ne(ft);break;case 10:el(t.type);break;case 22:case 23:ca(t),fd(),s!==null&&Ne(ln);break;case 24:el(vt)}}function Ki(s,t){try{var a=t.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var c=n.next;a=c;do{if((a.tag&s)===s){n=void 0;var d=a.create,p=a.inst;n=d(),p.destroy=n}a=a.next}while(a!==c)}}catch(N){Rs(t,t.return,N)}}function El(s,t,a){try{var n=t.updateQueue,c=n!==null?n.lastEffect:null;if(c!==null){var d=c.next;n=d;do{if((n.tag&s)===s){var p=n.inst,N=p.destroy;if(N!==void 0){p.destroy=void 0,c=t;var M=a,K=N;try{K()}catch(ce){Rs(c,M,ce)}}}n=n.next}while(n!==d)}}catch(ce){Rs(t,t.return,ce)}}function Hh(s){var t=s.updateQueue;if(t!==null){var a=s.stateNode;try{Ex(t,a)}catch(n){Rs(s,s.return,n)}}}function $h(s,t,a){a.props=dn(s.type,s.memoizedProps),a.state=s.memoizedState;try{a.componentWillUnmount()}catch(n){Rs(s,t,n)}}function Xi(s,t){try{var a=s.ref;if(a!==null){switch(s.tag){case 26:case 27:case 5:var n=s.stateNode;break;case 30:n=s.stateNode;break;default:n=s.stateNode}typeof a=="function"?s.refCleanup=a(n):a.current=n}}catch(c){Rs(s,t,c)}}function $a(s,t){var a=s.ref,n=s.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(c){Rs(s,t,c)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){Rs(s,t,c)}else a.current=null}function qh(s){var t=s.type,a=s.memoizedProps,n=s.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break e;case"img":a.src?n.src=a.src:a.srcSet&&(n.srcset=a.srcSet)}}catch(c){Rs(s,s.return,c)}}function Yd(s,t,a){try{var n=s.stateNode;qb(n,s.type,a,t),n[Qt]=t}catch(c){Rs(s,s.return,c)}}function Gh(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ll(s.type)||s.tag===4}function Kd(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Gh(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ll(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Xd(s,t,a){var n=s.tag;if(n===5||n===6)s=s.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(s,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(s),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Xa));else if(n!==4&&(n===27&&Ll(s.type)&&(a=s.stateNode,t=null),s=s.child,s!==null))for(Xd(s,t,a),s=s.sibling;s!==null;)Xd(s,t,a),s=s.sibling}function Nc(s,t,a){var n=s.tag;if(n===5||n===6)s=s.stateNode,t?a.insertBefore(s,t):a.appendChild(s);else if(n!==4&&(n===27&&Ll(s.type)&&(a=s.stateNode),s=s.child,s!==null))for(Nc(s,t,a),s=s.sibling;s!==null;)Nc(s,t,a),s=s.sibling}function Vh(s){var t=s.stateNode,a=s.memoizedProps;try{for(var n=s.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);Bt(t,n,a),t[Dt]=s,t[Qt]=a}catch(d){Rs(s,s.return,d)}}var nl=!1,yt=!1,Pd=!1,Fh=typeof WeakSet=="function"?WeakSet:Set,Mt=null;function bb(s,t){if(s=s.containerInfo,gu=Gc,s=tx(s),Vo(s)){if("selectionStart"in s)var a={start:s.selectionStart,end:s.selectionEnd};else e:{a=(a=s.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var c=n.anchorOffset,d=n.focusNode;n=n.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var p=0,N=-1,M=-1,K=0,ce=0,he=s,Z=null;s:for(;;){for(var ae;he!==a||c!==0&&he.nodeType!==3||(N=p+c),he!==d||n!==0&&he.nodeType!==3||(M=p+n),he.nodeType===3&&(p+=he.nodeValue.length),(ae=he.firstChild)!==null;)Z=he,he=ae;for(;;){if(he===s)break s;if(Z===a&&++K===c&&(N=p),Z===d&&++ce===n&&(M=p),(ae=he.nextSibling)!==null)break;he=Z,Z=he.parentNode}he=ae}a=N===-1||M===-1?null:{start:N,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(ju={focusedElem:s,selectionRange:a},Gc=!1,Mt=t;Mt!==null;)if(t=Mt,s=t.child,(t.subtreeFlags&1028)!==0&&s!==null)s.return=t,Mt=s;else for(;Mt!==null;){switch(t=Mt,d=t.alternate,s=t.flags,t.tag){case 0:if((s&4)!==0&&(s=t.updateQueue,s=s!==null?s.events:null,s!==null))for(a=0;a<s.length;a++)c=s[a],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&d!==null){s=void 0,a=t,c=d.memoizedProps,d=d.memoizedState,n=a.stateNode;try{var Ae=dn(a.type,c);s=n.getSnapshotBeforeUpdate(Ae,d),n.__reactInternalSnapshotBeforeUpdate=s}catch(Ke){Rs(a,a.return,Ke)}}break;case 3:if((s&1024)!==0){if(s=t.stateNode.containerInfo,a=s.nodeType,a===9)Nu(s);else if(a===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Nu(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(o(163))}if(s=t.sibling,s!==null){s.return=t.return,Mt=s;break}Mt=t.return}}function Ih(s,t,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:rl(s,a),n&4&&Ki(5,a);break;case 1:if(rl(s,a),n&4)if(s=a.stateNode,t===null)try{s.componentDidMount()}catch(p){Rs(a,a.return,p)}else{var c=dn(a.type,t.memoizedProps);t=t.memoizedState;try{s.componentDidUpdate(c,t,s.__reactInternalSnapshotBeforeUpdate)}catch(p){Rs(a,a.return,p)}}n&64&&Hh(a),n&512&&Xi(a,a.return);break;case 3:if(rl(s,a),n&64&&(s=a.updateQueue,s!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Ex(s,t)}catch(p){Rs(a,a.return,p)}}break;case 27:t===null&&n&4&&Vh(a);case 26:case 5:rl(s,a),t===null&&n&4&&qh(a),n&512&&Xi(a,a.return);break;case 12:rl(s,a);break;case 31:rl(s,a),n&4&&Kh(s,a);break;case 13:rl(s,a),n&4&&Xh(s,a),n&64&&(s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(a=Eb.bind(null,a),Xb(s,a))));break;case 22:if(n=a.memoizedState!==null||nl,!n){t=t!==null&&t.memoizedState!==null||yt,c=nl;var d=yt;nl=n,(yt=t)&&!d?cl(s,a,(a.subtreeFlags&8772)!==0):rl(s,a),nl=c,yt=d}break;case 30:break;default:rl(s,a)}}function Qh(s){var t=s.alternate;t!==null&&(s.alternate=null,Qh(t)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(t=s.stateNode,t!==null&&Co(t)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Zs=null,Kt=!1;function il(s,t,a){for(a=a.child;a!==null;)Yh(s,t,a),a=a.sibling}function Yh(s,t,a){if(ts&&typeof ts.onCommitFiberUnmount=="function")try{ts.onCommitFiberUnmount(Ls,a)}catch{}switch(a.tag){case 26:yt||$a(a,t),il(s,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:yt||$a(a,t);var n=Zs,c=Kt;Ll(a.type)&&(Zs=a.stateNode,Kt=!1),il(s,t,a),lr(a.stateNode),Zs=n,Kt=c;break;case 5:yt||$a(a,t);case 6:if(n=Zs,c=Kt,Zs=null,il(s,t,a),Zs=n,Kt=c,Zs!==null)if(Kt)try{(Zs.nodeType===9?Zs.body:Zs.nodeName==="HTML"?Zs.ownerDocument.body:Zs).removeChild(a.stateNode)}catch(d){Rs(a,t,d)}else try{Zs.removeChild(a.stateNode)}catch(d){Rs(a,t,d)}break;case 18:Zs!==null&&(Kt?(s=Zs,$f(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.stateNode),ii(s)):$f(Zs,a.stateNode));break;case 4:n=Zs,c=Kt,Zs=a.stateNode.containerInfo,Kt=!0,il(s,t,a),Zs=n,Kt=c;break;case 0:case 11:case 14:case 15:El(2,a,t),yt||El(4,a,t),il(s,t,a);break;case 1:yt||($a(a,t),n=a.stateNode,typeof n.componentWillUnmount=="function"&&$h(a,t,n)),il(s,t,a);break;case 21:il(s,t,a);break;case 22:yt=(n=yt)||a.memoizedState!==null,il(s,t,a),yt=n;break;default:il(s,t,a)}}function Kh(s,t){if(t.memoizedState===null&&(s=t.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ii(s)}catch(a){Rs(t,t.return,a)}}}function Xh(s,t){if(t.memoizedState===null&&(s=t.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ii(s)}catch(a){Rs(t,t.return,a)}}function Nb(s){switch(s.tag){case 31:case 13:case 19:var t=s.stateNode;return t===null&&(t=s.stateNode=new Fh),t;case 22:return s=s.stateNode,t=s._retryCache,t===null&&(t=s._retryCache=new Fh),t;default:throw Error(o(435,s.tag))}}function yc(s,t){var a=Nb(s);t.forEach(function(n){if(!a.has(n)){a.add(n);var c=zb.bind(null,s,n);n.then(c,c)}})}function Xt(s,t){var a=t.deletions;if(a!==null)for(var n=0;n<a.length;n++){var c=a[n],d=s,p=t,N=p;e:for(;N!==null;){switch(N.tag){case 27:if(Ll(N.type)){Zs=N.stateNode,Kt=!1;break e}break;case 5:Zs=N.stateNode,Kt=!1;break e;case 3:case 4:Zs=N.stateNode.containerInfo,Kt=!0;break e}N=N.return}if(Zs===null)throw Error(o(160));Yh(d,p,c),Zs=null,Kt=!1,d=c.alternate,d!==null&&(d.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Ph(t,s),t=t.sibling}var Ea=null;function Ph(s,t){var a=s.alternate,n=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Xt(t,s),Pt(s),n&4&&(El(3,s,s.return),Ki(3,s),El(5,s,s.return));break;case 1:Xt(t,s),Pt(s),n&512&&(yt||a===null||$a(a,a.return)),n&64&&nl&&(s=s.updateQueue,s!==null&&(n=s.callbacks,n!==null&&(a=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:var c=Ea;if(Xt(t,s),Pt(s),n&512&&(yt||a===null||$a(a,a.return)),n&4){var d=a!==null?a.memoizedState:null;if(n=s.memoizedState,a===null)if(n===null)if(s.stateNode===null){e:{n=s.type,a=s.memoizedProps,c=c.ownerDocument||c;s:switch(n){case"title":d=c.getElementsByTagName("title")[0],(!d||d[yi]||d[Dt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=c.createElement(n),c.head.insertBefore(d,c.querySelector("head > title"))),Bt(d,n,a),d[Dt]=s,zt(d),n=d;break e;case"link":var p=Jf("link","href",c).get(n+(a.href||""));if(p){for(var N=0;N<p.length;N++)if(d=p[N],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){p.splice(N,1);break s}}d=c.createElement(n),Bt(d,n,a),c.head.appendChild(d);break;case"meta":if(p=Jf("meta","content",c).get(n+(a.content||""))){for(N=0;N<p.length;N++)if(d=p[N],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){p.splice(N,1);break s}}d=c.createElement(n),Bt(d,n,a),c.head.appendChild(d);break;default:throw Error(o(468,n))}d[Dt]=s,zt(d),n=d}s.stateNode=n}else Zf(c,s.type,s.stateNode);else s.stateNode=Pf(c,n,s.memoizedProps);else d!==n?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,n===null?Zf(c,s.type,s.stateNode):Pf(c,n,s.memoizedProps)):n===null&&s.stateNode!==null&&Yd(s,s.memoizedProps,a.memoizedProps)}break;case 27:Xt(t,s),Pt(s),n&512&&(yt||a===null||$a(a,a.return)),a!==null&&n&4&&Yd(s,s.memoizedProps,a.memoizedProps);break;case 5:if(Xt(t,s),Pt(s),n&512&&(yt||a===null||$a(a,a.return)),s.flags&32){c=s.stateNode;try{En(c,"")}catch(Ae){Rs(s,s.return,Ae)}}n&4&&s.stateNode!=null&&(c=s.memoizedProps,Yd(s,c,a!==null?a.memoizedProps:c)),n&1024&&(Pd=!0);break;case 6:if(Xt(t,s),Pt(s),n&4){if(s.stateNode===null)throw Error(o(162));n=s.memoizedProps,a=s.stateNode;try{a.nodeValue=n}catch(Ae){Rs(s,s.return,Ae)}}break;case 3:if(Bc=null,c=Ea,Ea=Lc(t.containerInfo),Xt(t,s),Ea=c,Pt(s),n&4&&a!==null&&a.memoizedState.isDehydrated)try{ii(t.containerInfo)}catch(Ae){Rs(s,s.return,Ae)}Pd&&(Pd=!1,Jh(s));break;case 4:n=Ea,Ea=Lc(s.stateNode.containerInfo),Xt(t,s),Pt(s),Ea=n;break;case 12:Xt(t,s),Pt(s);break;case 31:Xt(t,s),Pt(s),n&4&&(n=s.updateQueue,n!==null&&(s.updateQueue=null,yc(s,n)));break;case 13:Xt(t,s),Pt(s),s.child.flags&8192&&s.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(_c=nt()),n&4&&(n=s.updateQueue,n!==null&&(s.updateQueue=null,yc(s,n)));break;case 22:c=s.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,K=nl,ce=yt;if(nl=K||c,yt=ce||M,Xt(t,s),yt=ce,nl=K,Pt(s),n&8192)e:for(t=s.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(a===null||M||nl||yt||un(s)),a=null,t=s;;){if(t.tag===5||t.tag===26){if(a===null){M=a=t;try{if(d=M.stateNode,c)p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{N=M.stateNode;var he=M.memoizedProps.style,Z=he!=null&&he.hasOwnProperty("display")?he.display:null;N.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(Ae){Rs(M,M.return,Ae)}}}else if(t.tag===6){if(a===null){M=t;try{M.stateNode.nodeValue=c?"":M.memoizedProps}catch(Ae){Rs(M,M.return,Ae)}}}else if(t.tag===18){if(a===null){M=t;try{var ae=M.stateNode;c?qf(ae,!0):qf(M.stateNode,!1)}catch(Ae){Rs(M,M.return,Ae)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===s)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=s.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,yc(s,a))));break;case 19:Xt(t,s),Pt(s),n&4&&(n=s.updateQueue,n!==null&&(s.updateQueue=null,yc(s,n)));break;case 30:break;case 21:break;default:Xt(t,s),Pt(s)}}function Pt(s){var t=s.flags;if(t&2){try{for(var a,n=s.return;n!==null;){if(Gh(n)){a=n;break}n=n.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var c=a.stateNode,d=Kd(s);Nc(s,d,c);break;case 5:var p=a.stateNode;a.flags&32&&(En(p,""),a.flags&=-33);var N=Kd(s);Nc(s,N,p);break;case 3:case 4:var M=a.stateNode.containerInfo,K=Kd(s);Xd(s,K,M);break;default:throw Error(o(161))}}catch(ce){Rs(s,s.return,ce)}s.flags&=-3}t&4096&&(s.flags&=-4097)}function Jh(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var t=s;Jh(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),s=s.sibling}}function rl(s,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Ih(s,t.alternate,t),t=t.sibling}function un(s){for(s=s.child;s!==null;){var t=s;switch(t.tag){case 0:case 11:case 14:case 15:El(4,t,t.return),un(t);break;case 1:$a(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&$h(t,t.return,a),un(t);break;case 27:lr(t.stateNode);case 26:case 5:$a(t,t.return),un(t);break;case 22:t.memoizedState===null&&un(t);break;case 30:un(t);break;default:un(t)}s=s.sibling}}function cl(s,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,c=s,d=t,p=d.flags;switch(d.tag){case 0:case 11:case 15:cl(c,d,a),Ki(4,d);break;case 1:if(cl(c,d,a),n=d,c=n.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(K){Rs(n,n.return,K)}if(n=d,c=n.updateQueue,c!==null){var N=n.stateNode;try{var M=c.shared.hiddenCallbacks;if(M!==null)for(c.shared.hiddenCallbacks=null,c=0;c<M.length;c++)Tx(M[c],N)}catch(K){Rs(n,n.return,K)}}a&&p&64&&Hh(d),Xi(d,d.return);break;case 27:Vh(d);case 26:case 5:cl(c,d,a),a&&n===null&&p&4&&qh(d),Xi(d,d.return);break;case 12:cl(c,d,a);break;case 31:cl(c,d,a),a&&p&4&&Kh(c,d);break;case 13:cl(c,d,a),a&&p&4&&Xh(c,d);break;case 22:d.memoizedState===null&&cl(c,d,a),Xi(d,d.return);break;case 30:break;default:cl(c,d,a)}t=t.sibling}}function Jd(s,t){var a=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(s!=null&&s.refCount++,a!=null&&Ri(a))}function Zd(s,t){s=null,t.alternate!==null&&(s=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==s&&(t.refCount++,s!=null&&Ri(s))}function za(s,t,a,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Zh(s,t,a,n),t=t.sibling}function Zh(s,t,a,n){var c=t.flags;switch(t.tag){case 0:case 11:case 15:za(s,t,a,n),c&2048&&Ki(9,t);break;case 1:za(s,t,a,n);break;case 3:za(s,t,a,n),c&2048&&(s=null,t.alternate!==null&&(s=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==s&&(t.refCount++,s!=null&&Ri(s)));break;case 12:if(c&2048){za(s,t,a,n),s=t.stateNode;try{var d=t.memoizedProps,p=d.id,N=d.onPostCommit;typeof N=="function"&&N(p,t.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(M){Rs(t,t.return,M)}}else za(s,t,a,n);break;case 31:za(s,t,a,n);break;case 13:za(s,t,a,n);break;case 23:break;case 22:d=t.stateNode,p=t.alternate,t.memoizedState!==null?d._visibility&2?za(s,t,a,n):Pi(s,t):d._visibility&2?za(s,t,a,n):(d._visibility|=2,Xn(s,t,a,n,(t.subtreeFlags&10256)!==0||!1)),c&2048&&Jd(p,t);break;case 24:za(s,t,a,n),c&2048&&Zd(t.alternate,t);break;default:za(s,t,a,n)}}function Xn(s,t,a,n,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var d=s,p=t,N=a,M=n,K=p.flags;switch(p.tag){case 0:case 11:case 15:Xn(d,p,N,M,c),Ki(8,p);break;case 23:break;case 22:var ce=p.stateNode;p.memoizedState!==null?ce._visibility&2?Xn(d,p,N,M,c):Pi(d,p):(ce._visibility|=2,Xn(d,p,N,M,c)),c&&K&2048&&Jd(p.alternate,p);break;case 24:Xn(d,p,N,M,c),c&&K&2048&&Zd(p.alternate,p);break;default:Xn(d,p,N,M,c)}t=t.sibling}}function Pi(s,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=s,n=t,c=n.flags;switch(n.tag){case 22:Pi(a,n),c&2048&&Jd(n.alternate,n);break;case 24:Pi(a,n),c&2048&&Zd(n.alternate,n);break;default:Pi(a,n)}t=t.sibling}}var Ji=8192;function Pn(s,t,a){if(s.subtreeFlags&Ji)for(s=s.child;s!==null;)Wh(s,t,a),s=s.sibling}function Wh(s,t,a){switch(s.tag){case 26:Pn(s,t,a),s.flags&Ji&&s.memoizedState!==null&&rN(a,Ea,s.memoizedState,s.memoizedProps);break;case 5:Pn(s,t,a);break;case 3:case 4:var n=Ea;Ea=Lc(s.stateNode.containerInfo),Pn(s,t,a),Ea=n;break;case 22:s.memoizedState===null&&(n=s.alternate,n!==null&&n.memoizedState!==null?(n=Ji,Ji=16777216,Pn(s,t,a),Ji=n):Pn(s,t,a));break;default:Pn(s,t,a)}}function ef(s){var t=s.alternate;if(t!==null&&(s=t.child,s!==null)){t.child=null;do t=s.sibling,s.sibling=null,s=t;while(s!==null)}}function Zi(s){var t=s.deletions;if((s.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];Mt=n,tf(n,s)}ef(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)sf(s),s=s.sibling}function sf(s){switch(s.tag){case 0:case 11:case 15:Zi(s),s.flags&2048&&El(9,s,s.return);break;case 3:Zi(s);break;case 12:Zi(s);break;case 22:var t=s.stateNode;s.memoizedState!==null&&t._visibility&2&&(s.return===null||s.return.tag!==13)?(t._visibility&=-3,wc(s)):Zi(s);break;default:Zi(s)}}function wc(s){var t=s.deletions;if((s.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];Mt=n,tf(n,s)}ef(s)}for(s=s.child;s!==null;){switch(t=s,t.tag){case 0:case 11:case 15:El(8,t,t.return),wc(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,wc(t));break;default:wc(t)}s=s.sibling}}function tf(s,t){for(;Mt!==null;){var a=Mt;switch(a.tag){case 0:case 11:case 15:El(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Ri(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,Mt=n;else e:for(a=s;Mt!==null;){n=Mt;var c=n.sibling,d=n.return;if(Qh(n),n===a){Mt=null;break e}if(c!==null){c.return=d,Mt=c;break e}Mt=d}}}var yb={getCacheForType:function(s){var t=Lt(vt),a=t.data.get(s);return a===void 0&&(a=s(),t.data.set(s,a)),a},cacheSignal:function(){return Lt(vt).controller.signal}},wb=typeof WeakMap=="function"?WeakMap:Map,zs=0,Fs=null,vs=null,ws=0,Ds=0,oa=null,zl=!1,Jn=!1,Wd=!1,ol=0,ct=0,Ml=0,mn=0,eu=0,da=0,Zn=0,Wi=null,Jt=null,su=!1,_c=0,af=0,Sc=1/0,Cc=null,Al=null,St=0,Ol=null,Wn=null,dl=0,tu=0,au=null,lf=null,er=0,lu=null;function ua(){return(zs&2)!==0&&ws!==0?ws&-ws:U.T!==null?du():Kl()}function nf(){if(da===0)if((ws&536870912)===0||Cs){var s=xt;xt<<=1,(xt&3932160)===0&&(xt=262144),da=s}else da=536870912;return s=ra.current,s!==null&&(s.flags|=32),da}function Zt(s,t,a){(s===Fs&&(Ds===2||Ds===9)||s.cancelPendingCommit!==null)&&(ei(s,0),Dl(s,ws,da,!1)),ke(s,a),((zs&2)===0||s!==Fs)&&(s===Fs&&((zs&2)===0&&(mn|=a),ct===4&&Dl(s,ws,da,!1)),qa(s))}function rf(s,t,a){if((zs&6)!==0)throw Error(o(327));var n=!a&&(t&127)===0&&(t&s.expiredLanes)===0||Tt(s,t),c=n?Cb(s,t):iu(s,t,!0),d=n;do{if(c===0){Jn&&!n&&Dl(s,t,0,!1);break}else{if(a=s.current.alternate,d&&!_b(a)){c=iu(s,t,!1),d=!1;continue}if(c===2){if(d=t,s.errorRecoveryDisabledLanes&d)var p=0;else p=s.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){t=p;e:{var N=s;c=Wi;var M=N.current.memoizedState.isDehydrated;if(M&&(ei(N,p).flags|=256),p=iu(N,p,!1),p!==2){if(Wd&&!M){N.errorRecoveryDisabledLanes|=d,mn|=d,c=4;break e}d=Jt,Jt=c,d!==null&&(Jt===null?Jt=d:Jt.push.apply(Jt,d))}c=p}if(d=!1,c!==2)continue}}if(c===1){ei(s,0),Dl(s,t,0,!0);break}e:{switch(n=s,d=c,d){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:Dl(n,t,da,!zl);break e;case 2:Jt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(c=_c+300-nt(),10<c)){if(Dl(n,t,da,!zl),ys(n,0,!0)!==0)break e;dl=t,n.timeoutHandle=Bf(cf.bind(null,n,a,Jt,Cc,su,t,da,mn,Zn,zl,d,"Throttled",-0,0),c);break e}cf(n,a,Jt,Cc,su,t,da,mn,Zn,zl,d,null,-0,0)}}break}while(!0);qa(s)}function cf(s,t,a,n,c,d,p,N,M,K,ce,he,Z,ae){if(s.timeoutHandle=-1,he=t.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xa},Wh(t,d,he);var Ae=(d&62914560)===d?_c-nt():(d&4194048)===d?af-nt():0;if(Ae=cN(he,Ae),Ae!==null){dl=d,s.cancelPendingCommit=Ae(pf.bind(null,s,t,d,a,n,c,p,N,M,ce,he,null,Z,ae)),Dl(s,d,p,!K);return}}pf(s,t,d,a,n,c,p,N,M)}function _b(s){for(var t=s;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var c=a[n],d=c.getSnapshot;c=c.value;try{if(!na(d(),c))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dl(s,t,a,n){t&=~eu,t&=~mn,s.suspendedLanes|=t,s.pingedLanes&=~t,n&&(s.warmLanes|=t),n=s.expirationTimes;for(var c=t;0<c;){var d=31-Xe(c),p=1<<d;n[d]=-1,c&=~p}a!==0&&Ua(s,a,t)}function kc(){return(zs&6)===0?(sr(0),!1):!0}function nu(){if(vs!==null){if(Ds===0)var s=vs.return;else s=vs,Wa=tn=null,Nd(s),Fn=null,Ui=0,s=vs;for(;s!==null;)Bh(s.alternate,s),s=s.return;vs=null}}function ei(s,t){var a=s.timeoutHandle;a!==-1&&(s.timeoutHandle=-1,Fb(a)),a=s.cancelPendingCommit,a!==null&&(s.cancelPendingCommit=null,a()),dl=0,nu(),Fs=s,vs=a=Ja(s.current,null),ws=t,Ds=0,oa=null,zl=!1,Jn=Tt(s,t),Wd=!1,Zn=da=eu=mn=Ml=ct=0,Jt=Wi=null,su=!1,(t&8)!==0&&(t|=t&32);var n=s.entangledLanes;if(n!==0)for(s=s.entanglements,n&=t;0<n;){var c=31-Xe(n),d=1<<c;t|=s[c],n&=~d}return ol=t,Kr(),a}function of(s,t){as=null,U.H=Ii,t===Vn||t===tc?(t=_x(),Ds=3):t===od?(t=_x(),Ds=4):Ds=t===Ud?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,oa=t,vs===null&&(ct=1,pc(s,ga(t,s.current)))}function df(){var s=ra.current;return s===null?!0:(ws&4194048)===ws?Na===null:(ws&62914560)===ws||(ws&536870912)!==0?s===Na:!1}function uf(){var s=U.H;return U.H=Ii,s===null?Ii:s}function mf(){var s=U.A;return U.A=yb,s}function Tc(){ct=4,zl||(ws&4194048)!==ws&&ra.current!==null||(Jn=!0),(Ml&134217727)===0&&(mn&134217727)===0||Fs===null||Dl(Fs,ws,da,!1)}function iu(s,t,a){var n=zs;zs|=2;var c=uf(),d=mf();(Fs!==s||ws!==t)&&(Cc=null,ei(s,t)),t=!1;var p=ct;e:do try{if(Ds!==0&&vs!==null){var N=vs,M=oa;switch(Ds){case 8:nu(),p=6;break e;case 3:case 2:case 9:case 6:ra.current===null&&(t=!0);var K=Ds;if(Ds=0,oa=null,si(s,N,M,K),a&&Jn){p=0;break e}break;default:K=Ds,Ds=0,oa=null,si(s,N,M,K)}}Sb(),p=ct;break}catch(ce){of(s,ce)}while(!0);return t&&s.shellSuspendCounter++,Wa=tn=null,zs=n,U.H=c,U.A=d,vs===null&&(Fs=null,ws=0,Kr()),p}function Sb(){for(;vs!==null;)xf(vs)}function Cb(s,t){var a=zs;zs|=2;var n=uf(),c=mf();Fs!==s||ws!==t?(Cc=null,Sc=nt()+500,ei(s,t)):Jn=Tt(s,t);e:do try{if(Ds!==0&&vs!==null){t=vs;var d=oa;s:switch(Ds){case 1:Ds=0,oa=null,si(s,t,d,1);break;case 2:case 9:if(yx(d)){Ds=0,oa=null,hf(t);break}t=function(){Ds!==2&&Ds!==9||Fs!==s||(Ds=7),qa(s)},d.then(t,t);break e;case 3:Ds=7;break e;case 4:Ds=5;break e;case 7:yx(d)?(Ds=0,oa=null,hf(t)):(Ds=0,oa=null,si(s,t,d,7));break;case 5:var p=null;switch(vs.tag){case 26:p=vs.memoizedState;case 5:case 27:var N=vs;if(p?Wf(p):N.stateNode.complete){Ds=0,oa=null;var M=N.sibling;if(M!==null)vs=M;else{var K=N.return;K!==null?(vs=K,Ec(K)):vs=null}break s}}Ds=0,oa=null,si(s,t,d,5);break;case 6:Ds=0,oa=null,si(s,t,d,6);break;case 8:nu(),ct=6;break e;default:throw Error(o(462))}}kb();break}catch(ce){of(s,ce)}while(!0);return Wa=tn=null,U.H=n,U.A=c,zs=a,vs!==null?0:(Fs=null,ws=0,Kr(),ct)}function kb(){for(;vs!==null&&!Vt();)xf(vs)}function xf(s){var t=Lh(s.alternate,s,ol);s.memoizedProps=s.pendingProps,t===null?Ec(s):vs=t}function hf(s){var t=s,a=t.alternate;switch(t.tag){case 15:case 0:t=zh(a,t,t.pendingProps,t.type,void 0,ws);break;case 11:t=zh(a,t,t.pendingProps,t.type.render,t.ref,ws);break;case 5:Nd(t);default:Bh(a,t),t=vs=ux(t,ol),t=Lh(a,t,ol)}s.memoizedProps=s.pendingProps,t===null?Ec(s):vs=t}function si(s,t,a,n){Wa=tn=null,Nd(t),Fn=null,Ui=0;var c=t.return;try{if(fb(s,c,t,a,ws)){ct=1,pc(s,ga(a,s.current)),vs=null;return}}catch(d){if(c!==null)throw vs=c,d;ct=1,pc(s,ga(a,s.current)),vs=null;return}t.flags&32768?(Cs||n===1?s=!0:Jn||(ws&536870912)!==0?s=!1:(zl=s=!0,(n===2||n===9||n===3||n===6)&&(n=ra.current,n!==null&&n.tag===13&&(n.flags|=16384))),ff(t,s)):Ec(t)}function Ec(s){var t=s;do{if((t.flags&32768)!==0){ff(t,zl);return}s=t.return;var a=jb(t.alternate,t,ol);if(a!==null){vs=a;return}if(t=t.sibling,t!==null){vs=t;return}vs=t=s}while(t!==null);ct===0&&(ct=5)}function ff(s,t){do{var a=vb(s.alternate,s);if(a!==null){a.flags&=32767,vs=a;return}if(a=s.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(s=s.sibling,s!==null)){vs=s;return}vs=s=a}while(s!==null);ct=6,vs=null}function pf(s,t,a,n,c,d,p,N,M){s.cancelPendingCommit=null;do zc();while(St!==0);if((zs&6)!==0)throw Error(o(327));if(t!==null){if(t===s.current)throw Error(o(177));if(d=t.lanes|t.childLanes,d|=Ko,Us(s,a,d,p,N,M),s===Fs&&(vs=Fs=null,ws=0),Wn=t,Ol=s,dl=a,tu=d,au=c,lf=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Mb(ye,function(){return Nf(),null})):(s.callbackNode=null,s.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=U.T,U.T=null,c=P.p,P.p=2,p=zs,zs|=4;try{bb(s,t,a)}finally{zs=p,P.p=c,U.T=n}}St=1,gf(),jf(),vf()}}function gf(){if(St===1){St=0;var s=Ol,t=Wn,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=U.T,U.T=null;var n=P.p;P.p=2;var c=zs;zs|=4;try{Ph(t,s);var d=ju,p=tx(s.containerInfo),N=d.focusedElem,M=d.selectionRange;if(p!==N&&N&&N.ownerDocument&&sx(N.ownerDocument.documentElement,N)){if(M!==null&&Vo(N)){var K=M.start,ce=M.end;if(ce===void 0&&(ce=K),"selectionStart"in N)N.selectionStart=K,N.selectionEnd=Math.min(ce,N.value.length);else{var he=N.ownerDocument||document,Z=he&&he.defaultView||window;if(Z.getSelection){var ae=Z.getSelection(),Ae=N.textContent.length,Ke=Math.min(M.start,Ae),$s=M.end===void 0?Ke:Math.min(M.end,Ae);!ae.extend&&Ke>$s&&(p=$s,$s=Ke,Ke=p);var q=ex(N,Ke),R=ex(N,$s);if(q&&R&&(ae.rangeCount!==1||ae.anchorNode!==q.node||ae.anchorOffset!==q.offset||ae.focusNode!==R.node||ae.focusOffset!==R.offset)){var Y=he.createRange();Y.setStart(q.node,q.offset),ae.removeAllRanges(),Ke>$s?(ae.addRange(Y),ae.extend(R.node,R.offset)):(Y.setEnd(R.node,R.offset),ae.addRange(Y))}}}}for(he=[],ae=N;ae=ae.parentNode;)ae.nodeType===1&&he.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<he.length;N++){var me=he[N];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}Gc=!!gu,ju=gu=null}finally{zs=c,P.p=n,U.T=a}}s.current=t,St=2}}function jf(){if(St===2){St=0;var s=Ol,t=Wn,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=U.T,U.T=null;var n=P.p;P.p=2;var c=zs;zs|=4;try{Ih(s,t.alternate,t)}finally{zs=c,P.p=n,U.T=a}}St=3}}function vf(){if(St===4||St===3){St=0,_t();var s=Ol,t=Wn,a=dl,n=lf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?St=5:(St=0,Wn=Ol=null,bf(s,s.pendingLanes));var c=s.pendingLanes;if(c===0&&(Al=null),ht(a),t=t.stateNode,ts&&typeof ts.onCommitFiberRoot=="function")try{ts.onCommitFiberRoot(Ls,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=U.T,c=P.p,P.p=2,U.T=null;try{for(var d=s.onRecoverableError,p=0;p<n.length;p++){var N=n[p];d(N.value,{componentStack:N.stack})}}finally{U.T=t,P.p=c}}(dl&3)!==0&&zc(),qa(s),c=s.pendingLanes,(a&261930)!==0&&(c&42)!==0?s===lu?er++:(er=0,lu=s):er=0,sr(0)}}function bf(s,t){(s.pooledCacheLanes&=t)===0&&(t=s.pooledCache,t!=null&&(s.pooledCache=null,Ri(t)))}function zc(){return gf(),jf(),vf(),Nf()}function Nf(){if(St!==5)return!1;var s=Ol,t=tu;tu=0;var a=ht(dl),n=U.T,c=P.p;try{P.p=32>a?32:a,U.T=null,a=au,au=null;var d=Ol,p=dl;if(St=0,Wn=Ol=null,dl=0,(zs&6)!==0)throw Error(o(331));var N=zs;if(zs|=4,sf(d.current),Zh(d,d.current,p,a),zs=N,sr(0,!1),ts&&typeof ts.onPostCommitFiberRoot=="function")try{ts.onPostCommitFiberRoot(Ls,d)}catch{}return!0}finally{P.p=c,U.T=n,bf(s,t)}}function yf(s,t,a){t=ga(a,t),t=Ld(s.stateNode,t,2),s=Cl(s,t,2),s!==null&&(ke(s,2),qa(s))}function Rs(s,t,a){if(s.tag===3)yf(s,s,a);else for(;t!==null;){if(t.tag===3){yf(t,s,a);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Al===null||!Al.has(n))){s=ga(a,s),a=yh(2),n=Cl(t,a,2),n!==null&&(wh(a,n,t,s),ke(n,2),qa(n));break}}t=t.return}}function ru(s,t,a){var n=s.pingCache;if(n===null){n=s.pingCache=new wb;var c=new Set;n.set(t,c)}else c=n.get(t),c===void 0&&(c=new Set,n.set(t,c));c.has(a)||(Wd=!0,c.add(a),s=Tb.bind(null,s,t,a),t.then(s,s))}function Tb(s,t,a){var n=s.pingCache;n!==null&&n.delete(t),s.pingedLanes|=s.suspendedLanes&a,s.warmLanes&=~a,Fs===s&&(ws&a)===a&&(ct===4||ct===3&&(ws&62914560)===ws&&300>nt()-_c?(zs&2)===0&&ei(s,0):eu|=a,Zn===ws&&(Zn=0)),qa(s)}function wf(s,t){t===0&&(t=I()),s=Wl(s,t),s!==null&&(ke(s,t),qa(s))}function Eb(s){var t=s.memoizedState,a=0;t!==null&&(a=t.retryLane),wf(s,a)}function zb(s,t){var a=0;switch(s.tag){case 31:case 13:var n=s.stateNode,c=s.memoizedState;c!==null&&(a=c.retryLane);break;case 19:n=s.stateNode;break;case 22:n=s.stateNode._retryCache;break;default:throw Error(o(314))}n!==null&&n.delete(t),wf(s,a)}function Mb(s,t){return Ie(s,t)}var Mc=null,ti=null,cu=!1,Ac=!1,ou=!1,Rl=0;function qa(s){s!==ti&&s.next===null&&(ti===null?Mc=ti=s:ti=ti.next=s),Ac=!0,cu||(cu=!0,Ob())}function sr(s,t){if(!ou&&Ac){ou=!0;do for(var a=!1,n=Mc;n!==null;){if(s!==0){var c=n.pendingLanes;if(c===0)var d=0;else{var p=n.suspendedLanes,N=n.pingedLanes;d=(1<<31-Xe(42|s)+1)-1,d&=c&~(p&~N),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,kf(n,d))}else d=ws,d=ys(n,n===Fs?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(d&3)===0||Tt(n,d)||(a=!0,kf(n,d));n=n.next}while(a);ou=!1}}function Ab(){_f()}function _f(){Ac=cu=!1;var s=0;Rl!==0&&Vb()&&(s=Rl);for(var t=nt(),a=null,n=Mc;n!==null;){var c=n.next,d=Sf(n,t);d===0?(n.next=null,a===null?Mc=c:a.next=c,c===null&&(ti=a)):(a=n,(s!==0||(d&3)!==0)&&(Ac=!0)),n=c}St!==0&&St!==5||sr(s),Rl!==0&&(Rl=0)}function Sf(s,t){for(var a=s.suspendedLanes,n=s.pingedLanes,c=s.expirationTimes,d=s.pendingLanes&-62914561;0<d;){var p=31-Xe(d),N=1<<p,M=c[p];M===-1?((N&a)===0||(N&n)!==0)&&(c[p]=Et(N,t)):M<=t&&(s.expiredLanes|=N),d&=~N}if(t=Fs,a=ws,a=ys(s,s===t?a:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),n=s.callbackNode,a===0||s===t&&(Ds===2||Ds===9)||s.cancelPendingCommit!==null)return n!==null&&n!==null&&$e(n),s.callbackNode=null,s.callbackPriority=0;if((a&3)===0||Tt(s,a)){if(t=a&-a,t===s.callbackPriority)return t;switch(n!==null&&$e(n),ht(a)){case 2:case 8:a=De;break;case 32:a=ye;break;case 268435456:a=ss;break;default:a=ye}return n=Cf.bind(null,s),a=Ie(a,n),s.callbackPriority=t,s.callbackNode=a,t}return n!==null&&n!==null&&$e(n),s.callbackPriority=2,s.callbackNode=null,2}function Cf(s,t){if(St!==0&&St!==5)return s.callbackNode=null,s.callbackPriority=0,null;var a=s.callbackNode;if(zc()&&s.callbackNode!==a)return null;var n=ws;return n=ys(s,s===Fs?n:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),n===0?null:(rf(s,n,t),Sf(s,nt()),s.callbackNode!=null&&s.callbackNode===a?Cf.bind(null,s):null)}function kf(s,t){if(zc())return null;rf(s,t,!0)}function Ob(){Ib(function(){(zs&6)!==0?Ie(He,Ab):_f()})}function du(){if(Rl===0){var s=qn;s===0&&(s=Ss,Ss<<=1,(Ss&261888)===0&&(Ss=256)),Rl=s}return Rl}function Tf(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:$r(""+s)}function Ef(s,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,s.id&&a.setAttribute("form",s.id),t.parentNode.insertBefore(a,t),s=new FormData(s),a.parentNode.removeChild(a),s}function Db(s,t,a,n,c){if(t==="submit"&&a&&a.stateNode===c){var d=Tf((c[Qt]||null).action),p=n.submitter;p&&(t=(t=p[Qt]||null)?Tf(t.formAction):p.getAttribute("formAction"),t!==null&&(d=t,p=null));var N=new Fr("action","action",null,n,c);s.push({event:N,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Rl!==0){var M=p?Ef(c,p):new FormData(c);zd(a,{pending:!0,data:M,method:c.method,action:d},null,M)}}else typeof d=="function"&&(N.preventDefault(),M=p?Ef(c,p):new FormData(c),zd(a,{pending:!0,data:M,method:c.method,action:d},d,M))},currentTarget:c}]})}}for(var uu=0;uu<Yo.length;uu++){var mu=Yo[uu],Rb=mu.toLowerCase(),Lb=mu[0].toUpperCase()+mu.slice(1);Ta(Rb,"on"+Lb)}Ta(nx,"onAnimationEnd"),Ta(ix,"onAnimationIteration"),Ta(rx,"onAnimationStart"),Ta("dblclick","onDoubleClick"),Ta("focusin","onFocus"),Ta("focusout","onBlur"),Ta(Zv,"onTransitionRun"),Ta(Wv,"onTransitionStart"),Ta(eb,"onTransitionCancel"),Ta(cx,"onTransitionEnd"),kn("onMouseEnter",["mouseout","mouseover"]),kn("onMouseLeave",["mouseout","mouseover"]),kn("onPointerEnter",["pointerout","pointerover"]),kn("onPointerLeave",["pointerout","pointerover"]),Xl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xl("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ub=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tr));function zf(s,t){t=(t&4)!==0;for(var a=0;a<s.length;a++){var n=s[a],c=n.event;n=n.listeners;e:{var d=void 0;if(t)for(var p=n.length-1;0<=p;p--){var N=n[p],M=N.instance,K=N.currentTarget;if(N=N.listener,M!==d&&c.isPropagationStopped())break e;d=N,c.currentTarget=K;try{d(c)}catch(ce){Yr(ce)}c.currentTarget=null,d=M}else for(p=0;p<n.length;p++){if(N=n[p],M=N.instance,K=N.currentTarget,N=N.listener,M!==d&&c.isPropagationStopped())break e;d=N,c.currentTarget=K;try{d(c)}catch(ce){Yr(ce)}c.currentTarget=null,d=M}}}}function bs(s,t){var a=t[So];a===void 0&&(a=t[So]=new Set);var n=s+"__bubble";a.has(n)||(Mf(t,s,2,!1),a.add(n))}function xu(s,t,a){var n=0;t&&(n|=4),Mf(a,s,n,t)}var Oc="_reactListening"+Math.random().toString(36).slice(2);function hu(s){if(!s[Oc]){s[Oc]=!0,wm.forEach(function(a){a!=="selectionchange"&&(Ub.has(a)||xu(a,!1,s),xu(a,!0,s))});var t=s.nodeType===9?s:s.ownerDocument;t===null||t[Oc]||(t[Oc]=!0,xu("selectionchange",!1,t))}}function Mf(s,t,a,n){switch(ip(t)){case 2:var c=uN;break;case 8:c=mN;break;default:c=Eu}a=c.bind(null,t,a,s),c=void 0,!Do||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),n?c!==void 0?s.addEventListener(t,a,{capture:!0,passive:c}):s.addEventListener(t,a,!0):c!==void 0?s.addEventListener(t,a,{passive:c}):s.addEventListener(t,a,!1)}function fu(s,t,a,n,c){var d=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var p=n.tag;if(p===3||p===4){var N=n.stateNode.containerInfo;if(N===c)break;if(p===4)for(p=n.return;p!==null;){var M=p.tag;if((M===3||M===4)&&p.stateNode.containerInfo===c)return;p=p.return}for(;N!==null;){if(p=_n(N),p===null)return;if(M=p.tag,M===5||M===6||M===26||M===27){n=d=p;continue e}N=N.parentNode}}n=n.return}Rm(function(){var K=d,ce=Ao(a),he=[];e:{var Z=ox.get(s);if(Z!==void 0){var ae=Fr,Ae=s;switch(s){case"keypress":if(Gr(a)===0)break e;case"keydown":case"keyup":ae=zv;break;case"focusin":Ae="focus",ae=Bo;break;case"focusout":Ae="blur",ae=Bo;break;case"beforeblur":case"afterblur":ae=Bo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Bm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=jv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=Ov;break;case nx:case ix:case rx:ae=Nv;break;case cx:ae=Rv;break;case"scroll":case"scrollend":ae=pv;break;case"wheel":ae=Uv;break;case"copy":case"cut":case"paste":ae=wv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=$m;break;case"toggle":case"beforetoggle":ae=Hv}var Ke=(t&4)!==0,$s=!Ke&&(s==="scroll"||s==="scrollend"),q=Ke?Z!==null?Z+"Capture":null:Z;Ke=[];for(var R=K,Y;R!==null;){var me=R;if(Y=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||Y===null||q===null||(me=_i(R,q),me!=null&&Ke.push(ar(R,me,Y))),$s)break;R=R.return}0<Ke.length&&(Z=new ae(Z,Ae,null,a,ce),he.push({event:Z,listeners:Ke}))}}if((t&7)===0){e:{if(Z=s==="mouseover"||s==="pointerover",ae=s==="mouseout"||s==="pointerout",Z&&a!==Mo&&(Ae=a.relatedTarget||a.fromElement)&&(_n(Ae)||Ae[wn]))break e;if((ae||Z)&&(Z=ce.window===ce?ce:(Z=ce.ownerDocument)?Z.defaultView||Z.parentWindow:window,ae?(Ae=a.relatedTarget||a.toElement,ae=K,Ae=Ae?_n(Ae):null,Ae!==null&&($s=x(Ae),Ke=Ae.tag,Ae!==$s||Ke!==5&&Ke!==27&&Ke!==6)&&(Ae=null)):(ae=null,Ae=K),ae!==Ae)){if(Ke=Bm,me="onMouseLeave",q="onMouseEnter",R="mouse",(s==="pointerout"||s==="pointerover")&&(Ke=$m,me="onPointerLeave",q="onPointerEnter",R="pointer"),$s=ae==null?Z:wi(ae),Y=Ae==null?Z:wi(Ae),Z=new Ke(me,R+"leave",ae,a,ce),Z.target=$s,Z.relatedTarget=Y,me=null,_n(ce)===K&&(Ke=new Ke(q,R+"enter",Ae,a,ce),Ke.target=Y,Ke.relatedTarget=$s,me=Ke),$s=me,ae&&Ae)s:{for(Ke=Bb,q=ae,R=Ae,Y=0,me=q;me;me=Ke(me))Y++;me=0;for(var Ge=R;Ge;Ge=Ke(Ge))me++;for(;0<Y-me;)q=Ke(q),Y--;for(;0<me-Y;)R=Ke(R),me--;for(;Y--;){if(q===R||R!==null&&q===R.alternate){Ke=q;break s}q=Ke(q),R=Ke(R)}Ke=null}else Ke=null;ae!==null&&Af(he,Z,ae,Ke,!1),Ae!==null&&$s!==null&&Af(he,$s,Ae,Ke,!0)}}e:{if(Z=K?wi(K):window,ae=Z.nodeName&&Z.nodeName.toLowerCase(),ae==="select"||ae==="input"&&Z.type==="file")var ks=Km;else if(Qm(Z))if(Xm)ks=Xv;else{ks=Yv;var Oe=Qv}else ae=Z.nodeName,!ae||ae.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?K&&zo(K.elementType)&&(ks=Km):ks=Kv;if(ks&&(ks=ks(s,K))){Ym(he,ks,a,ce);break e}Oe&&Oe(s,Z,K),s==="focusout"&&K&&Z.type==="number"&&K.memoizedProps.value!=null&&Eo(Z,"number",Z.value)}switch(Oe=K?wi(K):window,s){case"focusin":(Qm(Oe)||Oe.contentEditable==="true")&&(On=Oe,Fo=K,Ai=null);break;case"focusout":Ai=Fo=On=null;break;case"mousedown":Io=!0;break;case"contextmenu":case"mouseup":case"dragend":Io=!1,ax(he,a,ce);break;case"selectionchange":if(Jv)break;case"keydown":case"keyup":ax(he,a,ce)}var ns;if($o)e:{switch(s){case"compositionstart":var _s="onCompositionStart";break e;case"compositionend":_s="onCompositionEnd";break e;case"compositionupdate":_s="onCompositionUpdate";break e}_s=void 0}else An?Fm(s,a)&&(_s="onCompositionEnd"):s==="keydown"&&a.keyCode===229&&(_s="onCompositionStart");_s&&(qm&&a.locale!=="ko"&&(An||_s!=="onCompositionStart"?_s==="onCompositionEnd"&&An&&(ns=Lm()):(vl=ce,Ro="value"in vl?vl.value:vl.textContent,An=!0)),Oe=Dc(K,_s),0<Oe.length&&(_s=new Hm(_s,s,null,a,ce),he.push({event:_s,listeners:Oe}),ns?_s.data=ns:(ns=Im(a),ns!==null&&(_s.data=ns)))),(ns=qv?Gv(s,a):Vv(s,a))&&(_s=Dc(K,"onBeforeInput"),0<_s.length&&(Oe=new Hm("onBeforeInput","beforeinput",null,a,ce),he.push({event:Oe,listeners:_s}),Oe.data=ns)),Db(he,s,K,a,ce)}zf(he,t)})}function ar(s,t,a){return{instance:s,listener:t,currentTarget:a}}function Dc(s,t){for(var a=t+"Capture",n=[];s!==null;){var c=s,d=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||d===null||(c=_i(s,a),c!=null&&n.unshift(ar(s,c,d)),c=_i(s,t),c!=null&&n.push(ar(s,c,d))),s.tag===3)return n;s=s.return}return[]}function Bb(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Af(s,t,a,n,c){for(var d=t._reactName,p=[];a!==null&&a!==n;){var N=a,M=N.alternate,K=N.stateNode;if(N=N.tag,M!==null&&M===n)break;N!==5&&N!==26&&N!==27||K===null||(M=K,c?(K=_i(a,d),K!=null&&p.unshift(ar(a,K,M))):c||(K=_i(a,d),K!=null&&p.push(ar(a,K,M)))),a=a.return}p.length!==0&&s.push({event:t,listeners:p})}var Hb=/\r\n?/g,$b=/\u0000|\uFFFD/g;function Of(s){return(typeof s=="string"?s:""+s).replace(Hb,`
`).replace($b,"")}function Df(s,t){return t=Of(t),Of(s)===t}function Hs(s,t,a,n,c,d){switch(a){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||En(s,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&En(s,""+n);break;case"className":Br(s,"class",n);break;case"tabIndex":Br(s,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Br(s,a,n);break;case"style":Om(s,n,d);break;case"data":if(t!=="object"){Br(s,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||a!=="href")){s.removeAttribute(a);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){s.removeAttribute(a);break}n=$r(""+n),s.setAttribute(a,n);break;case"action":case"formAction":if(typeof n=="function"){s.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(t!=="input"&&Hs(s,t,"name",c.name,c,null),Hs(s,t,"formEncType",c.formEncType,c,null),Hs(s,t,"formMethod",c.formMethod,c,null),Hs(s,t,"formTarget",c.formTarget,c,null)):(Hs(s,t,"encType",c.encType,c,null),Hs(s,t,"method",c.method,c,null),Hs(s,t,"target",c.target,c,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){s.removeAttribute(a);break}n=$r(""+n),s.setAttribute(a,n);break;case"onClick":n!=null&&(s.onclick=Xa);break;case"onScroll":n!=null&&bs("scroll",s);break;case"onScrollEnd":n!=null&&bs("scrollend",s);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(o(61));if(a=n.__html,a!=null){if(c.children!=null)throw Error(o(60));s.innerHTML=a}}break;case"multiple":s.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":s.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){s.removeAttribute("xlink:href");break}a=$r(""+n),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?s.setAttribute(a,""+n):s.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?s.setAttribute(a,""):s.removeAttribute(a);break;case"capture":case"download":n===!0?s.setAttribute(a,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?s.setAttribute(a,n):s.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?s.setAttribute(a,n):s.removeAttribute(a);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?s.removeAttribute(a):s.setAttribute(a,n);break;case"popover":bs("beforetoggle",s),bs("toggle",s),Ur(s,"popover",n);break;case"xlinkActuate":Ka(s,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Ka(s,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Ka(s,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Ka(s,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Ka(s,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Ka(s,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Ka(s,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Ka(s,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Ka(s,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":Ur(s,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=hv.get(a)||a,Ur(s,a,n))}}function pu(s,t,a,n,c,d){switch(a){case"style":Om(s,n,d);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(o(61));if(a=n.__html,a!=null){if(c.children!=null)throw Error(o(60));s.innerHTML=a}}break;case"children":typeof n=="string"?En(s,n):(typeof n=="number"||typeof n=="bigint")&&En(s,""+n);break;case"onScroll":n!=null&&bs("scroll",s);break;case"onScrollEnd":n!=null&&bs("scrollend",s);break;case"onClick":n!=null&&(s.onclick=Xa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_m.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),t=a.slice(2,c?a.length-7:void 0),d=s[Qt]||null,d=d!=null?d[a]:null,typeof d=="function"&&s.removeEventListener(t,d,c),typeof n=="function")){typeof d!="function"&&d!==null&&(a in s?s[a]=null:s.hasAttribute(a)&&s.removeAttribute(a)),s.addEventListener(t,n,c);break e}a in s?s[a]=n:n===!0?s.setAttribute(a,""):Ur(s,a,n)}}}function Bt(s,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bs("error",s),bs("load",s);var n=!1,c=!1,d;for(d in a)if(a.hasOwnProperty(d)){var p=a[d];if(p!=null)switch(d){case"src":n=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Hs(s,t,d,p,a,null)}}c&&Hs(s,t,"srcSet",a.srcSet,a,null),n&&Hs(s,t,"src",a.src,a,null);return;case"input":bs("invalid",s);var N=d=p=c=null,M=null,K=null;for(n in a)if(a.hasOwnProperty(n)){var ce=a[n];if(ce!=null)switch(n){case"name":c=ce;break;case"type":p=ce;break;case"checked":M=ce;break;case"defaultChecked":K=ce;break;case"value":d=ce;break;case"defaultValue":N=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(o(137,t));break;default:Hs(s,t,n,ce,a,null)}}Em(s,d,N,M,K,p,c,!1);return;case"select":bs("invalid",s),n=p=d=null;for(c in a)if(a.hasOwnProperty(c)&&(N=a[c],N!=null))switch(c){case"value":d=N;break;case"defaultValue":p=N;break;case"multiple":n=N;default:Hs(s,t,c,N,a,null)}t=d,a=p,s.multiple=!!n,t!=null?Tn(s,!!n,t,!1):a!=null&&Tn(s,!!n,a,!0);return;case"textarea":bs("invalid",s),d=c=n=null;for(p in a)if(a.hasOwnProperty(p)&&(N=a[p],N!=null))switch(p){case"value":n=N;break;case"defaultValue":c=N;break;case"children":d=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(o(91));break;default:Hs(s,t,p,N,a,null)}Mm(s,n,c,d);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(n=a[M],n!=null))switch(M){case"selected":s.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:Hs(s,t,M,n,a,null)}return;case"dialog":bs("beforetoggle",s),bs("toggle",s),bs("cancel",s),bs("close",s);break;case"iframe":case"object":bs("load",s);break;case"video":case"audio":for(n=0;n<tr.length;n++)bs(tr[n],s);break;case"image":bs("error",s),bs("load",s);break;case"details":bs("toggle",s);break;case"embed":case"source":case"link":bs("error",s),bs("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(n=a[K],n!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Hs(s,t,K,n,a,null)}return;default:if(zo(t)){for(ce in a)a.hasOwnProperty(ce)&&(n=a[ce],n!==void 0&&pu(s,t,ce,n,a,void 0));return}}for(N in a)a.hasOwnProperty(N)&&(n=a[N],n!=null&&Hs(s,t,N,n,a,null))}function qb(s,t,a,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,d=null,p=null,N=null,M=null,K=null,ce=null;for(ae in a){var he=a[ae];if(a.hasOwnProperty(ae)&&he!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":M=he;default:n.hasOwnProperty(ae)||Hs(s,t,ae,null,n,he)}}for(var Z in n){var ae=n[Z];if(he=a[Z],n.hasOwnProperty(Z)&&(ae!=null||he!=null))switch(Z){case"type":d=ae;break;case"name":c=ae;break;case"checked":K=ae;break;case"defaultChecked":ce=ae;break;case"value":p=ae;break;case"defaultValue":N=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(o(137,t));break;default:ae!==he&&Hs(s,t,Z,ae,n,he)}}To(s,p,N,M,K,ce,d,c);return;case"select":ae=p=N=Z=null;for(d in a)if(M=a[d],a.hasOwnProperty(d)&&M!=null)switch(d){case"value":break;case"multiple":ae=M;default:n.hasOwnProperty(d)||Hs(s,t,d,null,n,M)}for(c in n)if(d=n[c],M=a[c],n.hasOwnProperty(c)&&(d!=null||M!=null))switch(c){case"value":Z=d;break;case"defaultValue":N=d;break;case"multiple":p=d;default:d!==M&&Hs(s,t,c,d,n,M)}t=N,a=p,n=ae,Z!=null?Tn(s,!!a,Z,!1):!!n!=!!a&&(t!=null?Tn(s,!!a,t,!0):Tn(s,!!a,a?[]:"",!1));return;case"textarea":ae=Z=null;for(N in a)if(c=a[N],a.hasOwnProperty(N)&&c!=null&&!n.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:Hs(s,t,N,null,n,c)}for(p in n)if(c=n[p],d=a[p],n.hasOwnProperty(p)&&(c!=null||d!=null))switch(p){case"value":Z=c;break;case"defaultValue":ae=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(o(91));break;default:c!==d&&Hs(s,t,p,c,n,d)}zm(s,Z,ae);return;case"option":for(var Ae in a)if(Z=a[Ae],a.hasOwnProperty(Ae)&&Z!=null&&!n.hasOwnProperty(Ae))switch(Ae){case"selected":s.selected=!1;break;default:Hs(s,t,Ae,null,n,Z)}for(M in n)if(Z=n[M],ae=a[M],n.hasOwnProperty(M)&&Z!==ae&&(Z!=null||ae!=null))switch(M){case"selected":s.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:Hs(s,t,M,Z,n,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ke in a)Z=a[Ke],a.hasOwnProperty(Ke)&&Z!=null&&!n.hasOwnProperty(Ke)&&Hs(s,t,Ke,null,n,Z);for(K in n)if(Z=n[K],ae=a[K],n.hasOwnProperty(K)&&Z!==ae&&(Z!=null||ae!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(o(137,t));break;default:Hs(s,t,K,Z,n,ae)}return;default:if(zo(t)){for(var $s in a)Z=a[$s],a.hasOwnProperty($s)&&Z!==void 0&&!n.hasOwnProperty($s)&&pu(s,t,$s,void 0,n,Z);for(ce in n)Z=n[ce],ae=a[ce],!n.hasOwnProperty(ce)||Z===ae||Z===void 0&&ae===void 0||pu(s,t,ce,Z,n,ae);return}}for(var q in a)Z=a[q],a.hasOwnProperty(q)&&Z!=null&&!n.hasOwnProperty(q)&&Hs(s,t,q,null,n,Z);for(he in n)Z=n[he],ae=a[he],!n.hasOwnProperty(he)||Z===ae||Z==null&&ae==null||Hs(s,t,he,Z,n,ae)}function Rf(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Gb(){if(typeof performance.getEntriesByType=="function"){for(var s=0,t=0,a=performance.getEntriesByType("resource"),n=0;n<a.length;n++){var c=a[n],d=c.transferSize,p=c.initiatorType,N=c.duration;if(d&&N&&Rf(p)){for(p=0,N=c.responseEnd,n+=1;n<a.length;n++){var M=a[n],K=M.startTime;if(K>N)break;var ce=M.transferSize,he=M.initiatorType;ce&&Rf(he)&&(M=M.responseEnd,p+=ce*(M<N?1:(N-K)/(M-K)))}if(--n,t+=8*(d+p)/(c.duration/1e3),s++,10<s)break}}if(0<s)return t/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var gu=null,ju=null;function Rc(s){return s.nodeType===9?s:s.ownerDocument}function Lf(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Uf(s,t){if(s===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&t==="foreignObject"?0:s}function vu(s,t){return s==="textarea"||s==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bu=null;function Vb(){var s=window.event;return s&&s.type==="popstate"?s===bu?!1:(bu=s,!0):(bu=null,!1)}var Bf=typeof setTimeout=="function"?setTimeout:void 0,Fb=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Ib=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(s){return Hf.resolve(null).then(s).catch(Qb)}:Bf;function Qb(s){setTimeout(function(){throw s})}function Ll(s){return s==="head"}function $f(s,t){var a=t,n=0;do{var c=a.nextSibling;if(s.removeChild(a),c&&c.nodeType===8)if(a=c.data,a==="/$"||a==="/&"){if(n===0){s.removeChild(c),ii(t);return}n--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")n++;else if(a==="html")lr(s.ownerDocument.documentElement);else if(a==="head"){a=s.ownerDocument.head,lr(a);for(var d=a.firstChild;d;){var p=d.nextSibling,N=d.nodeName;d[yi]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=p}}else a==="body"&&lr(s.ownerDocument.body);a=c}while(a);ii(t)}function qf(s,t){var a=s;s=0;do{var n=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(s===0)break;s--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||s++;a=n}while(a)}function Nu(s){var t=s.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Nu(a),Co(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}s.removeChild(a)}}function Yb(s,t,a,n){for(;s.nodeType===1;){var c=a;if(s.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(n){if(!s[yi])switch(t){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(d=s.getAttribute("rel"),d==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(d!==c.rel||s.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||s.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||s.getAttribute("title")!==(c.title==null?null:c.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(d=s.getAttribute("src"),(d!==(c.src==null?null:c.src)||s.getAttribute("type")!==(c.type==null?null:c.type)||s.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&d&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(t==="input"&&s.type==="hidden"){var d=c.name==null?null:""+c.name;if(c.type==="hidden"&&s.getAttribute("name")===d)return s}else return s;if(s=ya(s.nextSibling),s===null)break}return null}function Kb(s,t,a){if(t==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=ya(s.nextSibling),s===null))return null;return s}function Gf(s,t){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!t||(s=ya(s.nextSibling),s===null))return null;return s}function yu(s){return s.data==="$?"||s.data==="$~"}function wu(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Xb(s,t){var a=s.ownerDocument;if(s.data==="$~")s._reactRetry=t;else if(s.data!=="$?"||a.readyState!=="loading")t();else{var n=function(){t(),a.removeEventListener("DOMContentLoaded",n)};a.addEventListener("DOMContentLoaded",n),s._reactRetry=n}}function ya(s){for(;s!=null;s=s.nextSibling){var t=s.nodeType;if(t===1||t===3)break;if(t===8){if(t=s.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return s}var _u=null;function Vf(s){s=s.nextSibling;for(var t=0;s;){if(s.nodeType===8){var a=s.data;if(a==="/$"||a==="/&"){if(t===0)return ya(s.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}s=s.nextSibling}return null}function Ff(s){s=s.previousSibling;for(var t=0;s;){if(s.nodeType===8){var a=s.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return s;t--}else a!=="/$"&&a!=="/&"||t++}s=s.previousSibling}return null}function If(s,t,a){switch(t=Rc(a),s){case"html":if(s=t.documentElement,!s)throw Error(o(452));return s;case"head":if(s=t.head,!s)throw Error(o(453));return s;case"body":if(s=t.body,!s)throw Error(o(454));return s;default:throw Error(o(451))}}function lr(s){for(var t=s.attributes;t.length;)s.removeAttributeNode(t[0]);Co(s)}var wa=new Map,Qf=new Set;function Lc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ul=P.d;P.d={f:Pb,r:Jb,D:Zb,C:Wb,L:eN,m:sN,X:aN,S:tN,M:lN};function Pb(){var s=ul.f(),t=kc();return s||t}function Jb(s){var t=Sn(s);t!==null&&t.tag===5&&t.type==="form"?ch(t):ul.r(s)}var ai=typeof document>"u"?null:document;function Yf(s,t,a){var n=ai;if(n&&typeof t=="string"&&t){var c=fa(t);c='link[rel="'+s+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),Qf.has(c)||(Qf.add(c),s={rel:s,crossOrigin:a,href:t},n.querySelector(c)===null&&(t=n.createElement("link"),Bt(t,"link",s),zt(t),n.head.appendChild(t)))}}function Zb(s){ul.D(s),Yf("dns-prefetch",s,null)}function Wb(s,t){ul.C(s,t),Yf("preconnect",s,t)}function eN(s,t,a){ul.L(s,t,a);var n=ai;if(n&&s&&t){var c='link[rel="preload"][as="'+fa(t)+'"]';t==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+fa(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+fa(a.imageSizes)+'"]')):c+='[href="'+fa(s)+'"]';var d=c;switch(t){case"style":d=li(s);break;case"script":d=ni(s)}wa.has(d)||(s=y({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:s,as:t},a),wa.set(d,s),n.querySelector(c)!==null||t==="style"&&n.querySelector(nr(d))||t==="script"&&n.querySelector(ir(d))||(t=n.createElement("link"),Bt(t,"link",s),zt(t),n.head.appendChild(t)))}}function sN(s,t){ul.m(s,t);var a=ai;if(a&&s){var n=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+fa(n)+'"][href="'+fa(s)+'"]',d=c;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=ni(s)}if(!wa.has(d)&&(s=y({rel:"modulepreload",href:s},t),wa.set(d,s),a.querySelector(c)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ir(d)))return}n=a.createElement("link"),Bt(n,"link",s),zt(n),a.head.appendChild(n)}}}function tN(s,t,a){ul.S(s,t,a);var n=ai;if(n&&s){var c=Cn(n).hoistableStyles,d=li(s);t=t||"default";var p=c.get(d);if(!p){var N={loading:0,preload:null};if(p=n.querySelector(nr(d)))N.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":t},a),(a=wa.get(d))&&Su(s,a);var M=p=n.createElement("link");zt(M),Bt(M,"link",s),M._p=new Promise(function(K,ce){M.onload=K,M.onerror=ce}),M.addEventListener("load",function(){N.loading|=1}),M.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Uc(p,t,n)}p={type:"stylesheet",instance:p,count:1,state:N},c.set(d,p)}}}function aN(s,t){ul.X(s,t);var a=ai;if(a&&s){var n=Cn(a).hoistableScripts,c=ni(s),d=n.get(c);d||(d=a.querySelector(ir(c)),d||(s=y({src:s,async:!0},t),(t=wa.get(c))&&Cu(s,t),d=a.createElement("script"),zt(d),Bt(d,"link",s),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},n.set(c,d))}}function lN(s,t){ul.M(s,t);var a=ai;if(a&&s){var n=Cn(a).hoistableScripts,c=ni(s),d=n.get(c);d||(d=a.querySelector(ir(c)),d||(s=y({src:s,async:!0,type:"module"},t),(t=wa.get(c))&&Cu(s,t),d=a.createElement("script"),zt(d),Bt(d,"link",s),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},n.set(c,d))}}function Kf(s,t,a,n){var c=(c=Q.current)?Lc(c):null;if(!c)throw Error(o(446));switch(s){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=li(a.href),a=Cn(c).hoistableStyles,n=a.get(t),n||(n={type:"style",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){s=li(a.href);var d=Cn(c).hoistableStyles,p=d.get(s);if(p||(c=c.ownerDocument||c,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(s,p),(d=c.querySelector(nr(s)))&&!d._p&&(p.instance=d,p.state.loading=5),wa.has(s)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},wa.set(s,a),d||nN(c,s,a,p.state))),t&&n===null)throw Error(o(528,""));return p}if(t&&n!==null)throw Error(o(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ni(a),a=Cn(c).hoistableScripts,n=a.get(t),n||(n={type:"script",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,s))}}function li(s){return'href="'+fa(s)+'"'}function nr(s){return'link[rel="stylesheet"]['+s+"]"}function Xf(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function nN(s,t,a,n){s.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=s.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),Bt(t,"link",a),zt(t),s.head.appendChild(t))}function ni(s){return'[src="'+fa(s)+'"]'}function ir(s){return"script[async]"+s}function Pf(s,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var n=s.querySelector('style[data-href~="'+fa(a.href)+'"]');if(n)return t.instance=n,zt(n),n;var c=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return n=(s.ownerDocument||s).createElement("style"),zt(n),Bt(n,"style",c),Uc(n,a.precedence,s),t.instance=n;case"stylesheet":c=li(a.href);var d=s.querySelector(nr(c));if(d)return t.state.loading|=4,t.instance=d,zt(d),d;n=Xf(a),(c=wa.get(c))&&Su(n,c),d=(s.ownerDocument||s).createElement("link"),zt(d);var p=d;return p._p=new Promise(function(N,M){p.onload=N,p.onerror=M}),Bt(d,"link",n),t.state.loading|=4,Uc(d,a.precedence,s),t.instance=d;case"script":return d=ni(a.src),(c=s.querySelector(ir(d)))?(t.instance=c,zt(c),c):(n=a,(c=wa.get(d))&&(n=y({},a),Cu(n,c)),s=s.ownerDocument||s,c=s.createElement("script"),zt(c),Bt(c,"link",n),s.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,Uc(n,a.precedence,s));return t.instance}function Uc(s,t,a){for(var n=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=n.length?n[n.length-1]:null,d=c,p=0;p<n.length;p++){var N=n[p];if(N.dataset.precedence===t)d=N;else if(d!==c)break}d?d.parentNode.insertBefore(s,d.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(s,t.firstChild))}function Su(s,t){s.crossOrigin==null&&(s.crossOrigin=t.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=t.referrerPolicy),s.title==null&&(s.title=t.title)}function Cu(s,t){s.crossOrigin==null&&(s.crossOrigin=t.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=t.referrerPolicy),s.integrity==null&&(s.integrity=t.integrity)}var Bc=null;function Jf(s,t,a){if(Bc===null){var n=new Map,c=Bc=new Map;c.set(a,n)}else c=Bc,n=c.get(a),n||(n=new Map,c.set(a,n));if(n.has(s))return n;for(n.set(s,null),a=a.getElementsByTagName(s),c=0;c<a.length;c++){var d=a[c];if(!(d[yi]||d[Dt]||s==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var p=d.getAttribute(t)||"";p=s+p;var N=n.get(p);N?N.push(d):n.set(p,[d])}}return n}function Zf(s,t,a){s=s.ownerDocument||s,s.head.insertBefore(a,t==="title"?s.querySelector("head > title"):null)}function iN(s,t,a){if(a===1||t.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return s=t.disabled,typeof t.precedence=="string"&&s==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Wf(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function rN(s,t,a,n){if(a.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var c=li(n.href),d=t.querySelector(nr(c));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(s.count++,s=Hc.bind(s),t.then(s,s)),a.state.loading|=4,a.instance=d,zt(d);return}d=t.ownerDocument||t,n=Xf(n),(c=wa.get(c))&&Su(n,c),d=d.createElement("link"),zt(d);var p=d;p._p=new Promise(function(N,M){p.onload=N,p.onerror=M}),Bt(d,"link",n),a.instance=d}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(s.count++,a=Hc.bind(s),t.addEventListener("load",a),t.addEventListener("error",a))}}var ku=0;function cN(s,t){return s.stylesheets&&s.count===0&&qc(s,s.stylesheets),0<s.count||0<s.imgCount?function(a){var n=setTimeout(function(){if(s.stylesheets&&qc(s,s.stylesheets),s.unsuspend){var d=s.unsuspend;s.unsuspend=null,d()}},6e4+t);0<s.imgBytes&&ku===0&&(ku=62500*Gb());var c=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&qc(s,s.stylesheets),s.unsuspend)){var d=s.unsuspend;s.unsuspend=null,d()}},(s.imgBytes>ku?50:800)+t);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(n),clearTimeout(c)}}:null}function Hc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)qc(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var $c=null;function qc(s,t){s.stylesheets=null,s.unsuspend!==null&&(s.count++,$c=new Map,t.forEach(oN,s),$c=null,Hc.call(s))}function oN(s,t){if(!(t.state.loading&4)){var a=$c.get(s);if(a)var n=a.get(null);else{a=new Map,$c.set(s,a);for(var c=s.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<c.length;d++){var p=c[d];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(a.set(p.dataset.precedence,p),n=p)}n&&a.set(null,n)}c=t.instance,p=c.getAttribute("data-precedence"),d=a.get(p)||n,d===n&&a.set(null,c),a.set(p,c),this.count++,n=Hc.bind(this),c.addEventListener("load",n),c.addEventListener("error",n),d?d.parentNode.insertBefore(c,d.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(c,s.firstChild)),t.state.loading|=4}}var rr={$$typeof:z,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function dN(s,t,a,n,c,d,p,N,M){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ge(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ge(0),this.hiddenUpdates=ge(null),this.identifierPrefix=n,this.onUncaughtError=c,this.onCaughtError=d,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function ep(s,t,a,n,c,d,p,N,M,K,ce,he){return s=new dN(s,t,a,p,M,K,ce,he,N),t=1,d===!0&&(t|=24),d=ia(3,null,null,t),s.current=d,d.stateNode=s,t=id(),t.refCount++,s.pooledCache=t,t.refCount++,d.memoizedState={element:n,isDehydrated:a,cache:t},dd(d),s}function sp(s){return s?(s=Ln,s):Ln}function tp(s,t,a,n,c,d){c=sp(c),n.context===null?n.context=c:n.pendingContext=c,n=Sl(t),n.payload={element:a},d=d===void 0?null:d,d!==null&&(n.callback=d),a=Cl(s,n,t),a!==null&&(Zt(a,s,t),Hi(a,s,t))}function ap(s,t){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var a=s.retryLane;s.retryLane=a!==0&&a<t?a:t}}function Tu(s,t){ap(s,t),(s=s.alternate)&&ap(s,t)}function lp(s){if(s.tag===13||s.tag===31){var t=Wl(s,67108864);t!==null&&Zt(t,s,67108864),Tu(s,67108864)}}function np(s){if(s.tag===13||s.tag===31){var t=ua();t=It(t);var a=Wl(s,t);a!==null&&Zt(a,s,t),Tu(s,t)}}var Gc=!0;function uN(s,t,a,n){var c=U.T;U.T=null;var d=P.p;try{P.p=2,Eu(s,t,a,n)}finally{P.p=d,U.T=c}}function mN(s,t,a,n){var c=U.T;U.T=null;var d=P.p;try{P.p=8,Eu(s,t,a,n)}finally{P.p=d,U.T=c}}function Eu(s,t,a,n){if(Gc){var c=zu(n);if(c===null)fu(s,t,n,Vc,a),rp(s,n);else if(hN(c,s,t,a,n))n.stopPropagation();else if(rp(s,n),t&4&&-1<xN.indexOf(s)){for(;c!==null;){var d=Sn(c);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var p=de(d.pendingLanes);if(p!==0){var N=d;for(N.pendingLanes|=2,N.entangledLanes|=2;p;){var M=1<<31-Xe(p);N.entanglements[1]|=M,p&=~M}qa(d),(zs&6)===0&&(Sc=nt()+500,sr(0))}}break;case 31:case 13:N=Wl(d,2),N!==null&&Zt(N,d,2),kc(),Tu(d,2)}if(d=zu(n),d===null&&fu(s,t,n,Vc,a),d===c)break;c=d}c!==null&&n.stopPropagation()}else fu(s,t,n,null,a)}}function zu(s){return s=Ao(s),Mu(s)}var Vc=null;function Mu(s){if(Vc=null,s=_n(s),s!==null){var t=x(s);if(t===null)s=null;else{var a=t.tag;if(a===13){if(s=h(t),s!==null)return s;s=null}else if(a===31){if(s=f(t),s!==null)return s;s=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;s=null}else t!==s&&(s=null)}}return Vc=s,null}function ip(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(F()){case He:return 2;case De:return 8;case ye:case ps:return 32;case ss:return 268435456;default:return 32}default:return 32}}var Au=!1,Ul=null,Bl=null,Hl=null,cr=new Map,or=new Map,$l=[],xN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function rp(s,t){switch(s){case"focusin":case"focusout":Ul=null;break;case"dragenter":case"dragleave":Bl=null;break;case"mouseover":case"mouseout":Hl=null;break;case"pointerover":case"pointerout":cr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":or.delete(t.pointerId)}}function dr(s,t,a,n,c,d){return s===null||s.nativeEvent!==d?(s={blockedOn:t,domEventName:a,eventSystemFlags:n,nativeEvent:d,targetContainers:[c]},t!==null&&(t=Sn(t),t!==null&&lp(t)),s):(s.eventSystemFlags|=n,t=s.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),s)}function hN(s,t,a,n,c){switch(t){case"focusin":return Ul=dr(Ul,s,t,a,n,c),!0;case"dragenter":return Bl=dr(Bl,s,t,a,n,c),!0;case"mouseover":return Hl=dr(Hl,s,t,a,n,c),!0;case"pointerover":var d=c.pointerId;return cr.set(d,dr(cr.get(d)||null,s,t,a,n,c)),!0;case"gotpointercapture":return d=c.pointerId,or.set(d,dr(or.get(d)||null,s,t,a,n,c)),!0}return!1}function cp(s){var t=_n(s.target);if(t!==null){var a=x(t);if(a!==null){if(t=a.tag,t===13){if(t=h(a),t!==null){s.blockedOn=t,Lr(s.priority,function(){np(a)});return}}else if(t===31){if(t=f(a),t!==null){s.blockedOn=t,Lr(s.priority,function(){np(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){s.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Fc(s){if(s.blockedOn!==null)return!1;for(var t=s.targetContainers;0<t.length;){var a=zu(s.nativeEvent);if(a===null){a=s.nativeEvent;var n=new a.constructor(a.type,a);Mo=n,a.target.dispatchEvent(n),Mo=null}else return t=Sn(a),t!==null&&lp(t),s.blockedOn=a,!1;t.shift()}return!0}function op(s,t,a){Fc(s)&&a.delete(t)}function fN(){Au=!1,Ul!==null&&Fc(Ul)&&(Ul=null),Bl!==null&&Fc(Bl)&&(Bl=null),Hl!==null&&Fc(Hl)&&(Hl=null),cr.forEach(op),or.forEach(op)}function Ic(s,t){s.blockedOn===t&&(s.blockedOn=null,Au||(Au=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,fN)))}var Qc=null;function dp(s){Qc!==s&&(Qc=s,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Qc===s&&(Qc=null);for(var t=0;t<s.length;t+=3){var a=s[t],n=s[t+1],c=s[t+2];if(typeof n!="function"){if(Mu(n||a)===null)continue;break}var d=Sn(a);d!==null&&(s.splice(t,3),t-=3,zd(d,{pending:!0,data:c,method:a.method,action:n},n,c))}}))}function ii(s){function t(M){return Ic(M,s)}Ul!==null&&Ic(Ul,s),Bl!==null&&Ic(Bl,s),Hl!==null&&Ic(Hl,s),cr.forEach(t),or.forEach(t);for(var a=0;a<$l.length;a++){var n=$l[a];n.blockedOn===s&&(n.blockedOn=null)}for(;0<$l.length&&(a=$l[0],a.blockedOn===null);)cp(a),a.blockedOn===null&&$l.shift();if(a=(s.ownerDocument||s).$$reactFormReplay,a!=null)for(n=0;n<a.length;n+=3){var c=a[n],d=a[n+1],p=c[Qt]||null;if(typeof d=="function")p||dp(a);else if(p){var N=null;if(d&&d.hasAttribute("formAction")){if(c=d,p=d[Qt]||null)N=p.formAction;else if(Mu(c)!==null)continue}else N=p.action;typeof N=="function"?a[n+1]=N:(a.splice(n,3),n-=3),dp(a)}}}function up(){function s(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(p){return c=p})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),n||setTimeout(a,20)}function a(){if(!n&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,c=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){n=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function Ou(s){this._internalRoot=s}Yc.prototype.render=Ou.prototype.render=function(s){var t=this._internalRoot;if(t===null)throw Error(o(409));var a=t.current,n=ua();tp(a,n,s,t,null,null)},Yc.prototype.unmount=Ou.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var t=s.containerInfo;tp(s.current,2,null,s,null,null),kc(),t[wn]=null}};function Yc(s){this._internalRoot=s}Yc.prototype.unstable_scheduleHydration=function(s){if(s){var t=Kl();s={blockedOn:null,target:s,priority:t};for(var a=0;a<$l.length&&t!==0&&t<$l[a].priority;a++);$l.splice(a,0,s),a===0&&cp(s)}};var mp=i.version;if(mp!=="19.2.1")throw Error(o(527,mp,"19.2.1"));P.findDOMNode=function(s){var t=s._reactInternals;if(t===void 0)throw typeof s.render=="function"?Error(o(188)):(s=Object.keys(s).join(","),Error(o(268,s)));return s=j(t),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var pN={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kc.isDisabled&&Kc.supportsFiber)try{Ls=Kc.inject(pN),ts=Kc}catch{}}return mr.createRoot=function(s,t){if(!u(s))throw Error(o(299));var a=!1,n="",c=jh,d=vh,p=bh;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(d=t.onCaughtError),t.onRecoverableError!==void 0&&(p=t.onRecoverableError)),t=ep(s,1,!1,null,null,a,n,null,c,d,p,up),s[wn]=t.current,hu(s),new Ou(t)},mr.hydrateRoot=function(s,t,a){if(!u(s))throw Error(o(299));var n=!1,c="",d=jh,p=vh,N=bh,M=null;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(N=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),t=ep(s,1,!0,t,a??null,n,c,M,d,p,N,up),t.context=sp(null),a=t.current,n=ua(),n=It(n),c=Sl(n),c.callback=null,Cl(a,c,n),a=n,t.current.lanes=a,ke(t,a),qa(t),s[wn]=t.current,hu(s),new Yc(t)},mr.version="19.2.1",mr}var Np;function R0(){if(Np)return Bu.exports;Np=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(i){console.error(i)}}return l(),Bu.exports=D0(),Bu.exports}var L0=R0();function H(...l){return TN(EN(l))}const Ve=m.forwardRef(({className:l,...i},r)=>e.jsx("div",{ref:r,className:H("rounded-xl border bg-card text-card-foreground shadow",l),...i}));Ve.displayName="Card";const rs=m.forwardRef(({className:l,...i},r)=>e.jsx("div",{ref:r,className:H("flex flex-col space-y-1.5 p-6",l),...i}));rs.displayName="CardHeader";const cs=m.forwardRef(({className:l,...i},r)=>e.jsx("div",{ref:r,className:H("font-semibold leading-none tracking-tight",l),...i}));cs.displayName="CardTitle";const st=m.forwardRef(({className:l,...i},r)=>e.jsx("div",{ref:r,className:H("text-sm text-muted-foreground",l),...i}));st.displayName="CardDescription";const gs=m.forwardRef(({className:l,...i},r)=>e.jsx("div",{ref:r,className:H("p-6 pt-0",l),...i}));gs.displayName="CardContent";const tj=m.forwardRef(({className:l,...i},r)=>e.jsx("div",{ref:r,className:H("flex items-center p-6 pt-0",l),...i}));tj.displayName="CardFooter";const Sa=MN,xa=m.forwardRef(({className:l,...i},r)=>e.jsx(Fp,{ref:r,className:H("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",l),...i}));xa.displayName=Fp.displayName;const is=m.forwardRef(({className:l,...i},r)=>e.jsx(Ip,{ref:r,className:H("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",l),...i}));is.displayName=Ip.displayName;const As=m.forwardRef(({className:l,...i},r)=>e.jsx(Qp,{ref:r,className:H("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 data-[state=active]:animate-in data-[state=active]:fade-in data-[state=active]:duration-300",l),...i}));As.displayName=Qp.displayName;const Ze=m.forwardRef(({className:l,children:i,viewportRef:r,...o},u)=>e.jsxs(Yp,{ref:u,className:H("relative overflow-hidden",l),...o,children:[e.jsx(AN,{ref:r,className:"h-full w-full rounded-[inherit]",children:i}),e.jsx(sm,{}),e.jsx(sm,{orientation:"horizontal"}),e.jsx(ON,{})]}));Ze.displayName=Yp.displayName;const sm=m.forwardRef(({className:l,orientation:i="vertical",...r},o)=>e.jsx(Kp,{ref:o,orientation:i,className:H("flex touch-none select-none transition-colors",i==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",i==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",l),...r,children:e.jsx(DN,{className:"relative flex-1 rounded-full bg-border"})}));sm.displayName=Kp.displayName;function aj({className:l,...i}){return e.jsx("div",{className:H("animate-pulse rounded-md bg-primary/10",l),...i})}const gn=m.forwardRef(({className:l,value:i,...r},o)=>e.jsx(Xp,{ref:o,className:H("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",l),...r,children:e.jsx(RN,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(i||0)}%)`}})}));gn.displayName=Xp.displayName;async function we(l,i){const o=i?.body instanceof FormData?{...i?.headers}:{"Content-Type":"application/json",...i?.headers},u={...i,credentials:"include",headers:o},x=await fetch(l,u);if(x.status===401)throw window.location.href="/auth",new Error("");return x}function Is(){return{"Content-Type":"application/json"}}async function U0(){try{await fetch("/api/webui/auth/logout",{method:"POST",credentials:"include"})}catch(l){console.error(":",l)}window.location.href="/auth"}async function om(){try{return(await(await fetch("/api/webui/auth/check",{method:"GET",credentials:"include"})).json()).authenticated===!0}catch{return!1}}const B0={light:"",dark:".dark"},lj=m.createContext(null);function nj(){const l=m.useContext(lj);if(!l)throw new Error("useChart must be used within a <ChartContainer />");return l}const oi=m.forwardRef(({id:l,className:i,children:r,config:o,...u},x)=>{const h=m.useId(),f=`chart-${l||h.replace(/:/g,"")}`;return e.jsx(lj.Provider,{value:{config:o},children:e.jsxs("div",{"data-chart":f,ref:x,className:H("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",i),...u,children:[e.jsx(H0,{id:f,config:o}),e.jsx(JN,{children:r})]})})});oi.displayName="Chart";const H0=({id:l,config:i})=>{const r=Object.entries(i).filter(([,o])=>o.theme||o.color);return r.length?e.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(B0).map(([o,u])=>`
${u} [data-chart=${l}] {
${r.map(([x,h])=>{const f=h.theme?.[o]||h.color;return f?`  --color-${x}: ${f};`:null}).join(`
`)}
}
`).join(`
`)}}):null},xr=ZN,di=m.forwardRef(({active:l,payload:i,className:r,indicator:o="dot",hideLabel:u=!1,hideIndicator:x=!1,label:h,labelFormatter:f,labelClassName:g,formatter:j,color:v,nameKey:y,labelKey:b},S)=>{const{config:w}=nj(),O=m.useMemo(()=>{if(u||!i?.length)return null;const[D]=i,V=`${b||D?.dataKey||D?.name||"value"}`,z=tm(w,D,V),_=!b&&typeof h=="string"?w[h]?.label||h:z?.label;return f?e.jsx("div",{className:H("font-medium",g),children:f(_,i)}):_?e.jsx("div",{className:H("font-medium",g),children:_}):null},[h,f,i,u,g,w,b]);if(!l||!i?.length)return null;const A=i.length===1&&o!=="dot";return e.jsxs("div",{ref:S,className:H("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",r),children:[A?null:O,e.jsx("div",{className:"grid gap-1.5",children:i.filter(D=>D.type!=="none").map((D,V)=>{const z=`${y||D.name||D.dataKey||"value"}`,_=tm(w,D,z),T=v||D.payload.fill||D.color;return e.jsx("div",{className:H("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",o==="dot"&&"items-center"),children:j&&D?.value!==void 0&&D.name?j(D.value,D.name,D,V,D.payload):e.jsxs(e.Fragment,{children:[_?.icon?e.jsx(_.icon,{}):!x&&e.jsx("div",{className:H("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":o==="dot","w-1":o==="line","w-0 border-[1.5px] border-dashed bg-transparent":o==="dashed","my-0.5":A&&o==="dashed"}),style:{"--color-bg":T,"--color-border":T}}),e.jsxs("div",{className:H("flex flex-1 justify-between leading-none",A?"items-end":"items-center"),children:[e.jsxs("div",{className:"grid gap-1.5",children:[A?O:null,e.jsx("span",{className:"text-muted-foreground",children:_?.label||D.name})]}),D.value&&e.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:D.value.toLocaleString()})]})]})},D.dataKey)})})]})});di.displayName="ChartTooltip";const $0=WN,ij=m.forwardRef(({className:l,hideIcon:i=!1,payload:r,verticalAlign:o="bottom",nameKey:u},x)=>{const{config:h}=nj();return r?.length?e.jsx("div",{ref:x,className:H("flex items-center justify-center gap-4",o==="top"?"pb-3":"pt-3",l),children:r.filter(f=>f.type!=="none").map(f=>{const g=`${u||f.dataKey||"value"}`,j=tm(h,f,g);return e.jsxs("div",{className:H("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[j?.icon&&!i?e.jsx(j.icon,{}):e.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:f.color}}),j?.label]},f.value)})}):null});ij.displayName="ChartLegend";function tm(l,i,r){if(typeof i!="object"||i===null)return;const o="payload"in i&&typeof i.payload=="object"&&i.payload!==null?i.payload:void 0;let u=r;return r in i&&typeof i[r]=="string"?u=i[r]:o&&r in o&&typeof o[r]=="string"&&(u=o[r]),u in l?l[u]:l[r]}const Sr=gi("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),C=m.forwardRef(({className:l,variant:i,size:r,asChild:o=!1,...u},x)=>{const h=o?ny:"button";return e.jsx(h,{className:H(Sr({variant:i,size:r,className:l})),ref:x,...u})});C.displayName="Button";const q0=gi("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ye({className:l,variant:i,...r}){return e.jsx("div",{className:H(q0({variant:i}),l),...r})}async function G0(){const l=await we("/api/webui/system/restart",{method:"POST",headers:Is()});if(!l.ok){const i=await l.json();throw new Error(i.detail||"")}return await l.json()}async function V0(){const l=await we("/api/webui/system/status",{method:"GET",headers:Is()});if(!l.ok){const i=await l.json();throw new Error(i.detail||"")}return await l.json()}const ri={INITIAL_DELAY:3e3,CHECK_INTERVAL:2e3,CHECK_TIMEOUT:3e3,MAX_ATTEMPTS:60,PROGRESS_INTERVAL:200,SUCCESS_REDIRECT_DELAY:1500},rj=m.createContext(null);function jn({children:l,onRestartComplete:i,onRestartFailed:r,healthCheckUrl:o="/api/webui/system/status",maxAttempts:u=ri.MAX_ATTEMPTS}){const[x,h]=m.useState({status:"idle",progress:0,elapsedTime:0,checkAttempts:0,maxAttempts:u}),[f,g]=m.useState({}),j=m.useCallback(()=>{f.progress&&clearInterval(f.progress),f.elapsed&&clearInterval(f.elapsed),f.check&&clearTimeout(f.check),g({})},[f]),v=m.useCallback(()=>{j(),h({status:"idle",progress:0,elapsedTime:0,checkAttempts:0,maxAttempts:u})},[j,u]),y=m.useCallback(async()=>{try{const A=new AbortController,D=setTimeout(()=>A.abort(),ri.CHECK_TIMEOUT),V=await fetch(o,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include",signal:A.signal});return clearTimeout(D),V.ok}catch{return!1}},[o]),b=m.useCallback(()=>{let A=0;const D=async()=>{if(A++,h(z=>({...z,status:"checking",checkAttempts:A})),await y())j(),h(z=>({...z,status:"success",progress:100})),setTimeout(()=>{i?.(),window.location.href="/auth"},ri.SUCCESS_REDIRECT_DELAY);else if(A>=u){j();const z=` (${A}/${u})`;h(_=>({..._,status:"failed",error:z})),r?.(z)}else{const z=setTimeout(D,ri.CHECK_INTERVAL);g(_=>({..._,check:z}))}};D()},[y,j,u,i,r]),S=m.useCallback(()=>{h(A=>({...A,status:"checking",checkAttempts:0,error:void 0})),b()},[b]),w=m.useCallback(async A=>{const{delay:D=0,skipApiCall:V=!1}=A??{};if(x.status!=="idle"&&x.status!=="failed")return;if(j(),h({status:"requesting",progress:0,elapsedTime:0,checkAttempts:0,maxAttempts:u}),D>0&&await new Promise(T=>setTimeout(T,D)),V)h(T=>({...T,status:"restarting"}));else try{h(T=>({...T,status:"restarting"})),await Promise.race([G0(),new Promise(T=>setTimeout(T,5e3))])}catch{}const z=setInterval(()=>{h(T=>({...T,progress:T.progress>=90?T.progress:T.progress+1}))},ri.PROGRESS_INTERVAL),_=setInterval(()=>{h(T=>({...T,elapsedTime:T.elapsedTime+1}))},1e3);g({progress:z,elapsed:_}),setTimeout(()=>{b()},ri.INITIAL_DELAY)},[x.status,j,u,b]),O={state:x,isRestarting:x.status!=="idle",triggerRestart:w,resetState:v,retryHealthCheck:S};return e.jsx(rj.Provider,{value:O,children:l})}function Il(){const l=m.useContext(rj);if(!l)throw new Error("useRestart must be used within a RestartProvider");return l}const F0=(l,i,r,o,u)=>({idle:{icon:null,title:"",description:"",tip:""},requesting:{icon:e.jsx(tt,{className:"h-16 w-16 text-primary animate-spin"}),title:o??"",description:u??"...",tip:" ..."},restarting:{icon:e.jsx(tt,{className:"h-16 w-16 text-primary animate-spin"}),title:o??"",description:u??"...",tip:" ..."},checking:{icon:e.jsx(tt,{className:"h-16 w-16 text-primary animate-spin"}),title:"",description:`... (${i}/${r})`,tip:" ..."},success:{icon:e.jsx(aa,{className:"h-16 w-16 text-green-500"}),title:"",description:"...",tip:" "},failed:{icon:e.jsx(Ot,{className:"h-16 w-16 text-destructive"}),title:"",description:"",tip:" "}})[l];function vn({visible:l,onComplete:i,onFailed:r,title:o,description:u,showAnimation:x=!0,className:h}){let f=null;try{f=Il()}catch{}return(f?f.isRestarting:l)?f?e.jsx(cj,{state:f.state,onRetry:f.retryHealthCheck,onComplete:i,onFailed:r,title:o,description:u,showAnimation:x,className:h}):e.jsx(I0,{onComplete:i,onFailed:r,title:o,description:u,showAnimation:x,className:h}):null}function cj({state:l,onRetry:i,onComplete:r,onFailed:o,title:u,description:x,showAnimation:h,className:f}){const{status:g,progress:j,elapsedTime:v,checkAttempts:y,maxAttempts:b}=l;m.useEffect(()=>{g==="success"&&r?r():g==="failed"&&o&&o()},[g,r,o]);const S=F0(g,y,b,u,x),w=O=>{const A=Math.floor(O/60),D=O%60;return`${A}:${D.toString().padStart(2,"0")}`};return e.jsxs("div",{className:H("fixed inset-0 bg-background/95 backdrop-blur-sm z-50 flex items-center justify-center",f),children:[h&&e.jsx(Q0,{}),e.jsxs("div",{className:"max-w-md w-full mx-4 space-y-8 relative z-10",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[S.icon,(g==="restarting"||g==="checking")&&e.jsx("div",{className:"absolute inset-0 rounded-full bg-primary/20 animate-ping"})]}),e.jsx("h2",{className:"text-2xl font-bold",children:S.title}),e.jsx("p",{className:"text-muted-foreground text-center",children:S.description})]}),g!=="failed"&&g!=="idle"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(gn,{value:j,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:[j,"%"]}),e.jsxs("span",{children:[": ",w(v)]})]})]}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:S.tip})}),g==="failed"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(C,{onClick:()=>window.location.reload(),variant:"default",className:"flex-1",children:[e.jsx(At,{className:"mr-2 h-4 w-4"}),""]}),e.jsxs(C,{onClick:i,variant:"secondary",className:"flex-1",children:[e.jsx(yr,{className:"mr-2 h-4 w-4"}),""]})]})]})]})}function I0({onComplete:l,onFailed:i,title:r,description:o,showAnimation:u,className:x}){const[h,f]=m.useState({status:"restarting",progress:0,elapsedTime:0,checkAttempts:0,maxAttempts:60}),g=m.useCallback(()=>{let j=0;const v=60,y=async()=>{j++,f(b=>({...b,status:"checking",checkAttempts:j}));try{if((await fetch("/api/webui/system/status",{method:"GET",signal:AbortSignal.timeout(3e3)})).ok){f(S=>({...S,status:"success",progress:100})),setTimeout(()=>{l?.(),window.location.href="/auth"},1500);return}}catch{}j>=v?(f(b=>({...b,status:"failed"})),i?.()):setTimeout(y,2e3)};y()},[l,i]);return m.useEffect(()=>{const j=setInterval(()=>{f(b=>({...b,progress:b.progress>=90?b.progress:b.progress+1}))},200),v=setInterval(()=>{f(b=>({...b,elapsedTime:b.elapsedTime+1}))},1e3),y=setTimeout(()=>{g()},3e3);return()=>{clearInterval(j),clearInterval(v),clearTimeout(y)}},[g]),e.jsx(cj,{state:h,onRetry:g,onComplete:l,onFailed:i,title:r,description:o,showAnimation:u,className:x})}function Q0(){return e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px]",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border border-primary/10 animate-[ping_3s_ease-in-out_infinite]"}),e.jsx("div",{className:"absolute inset-8 rounded-full border border-primary/10 animate-[ping_3s_ease-in-out_infinite_0.5s]"}),e.jsx("div",{className:"absolute inset-16 rounded-full border border-primary/10 animate-[ping_3s_ease-in-out_infinite_1s]"})]}),e.jsx("div",{className:"absolute top-1/4 left-1/4 w-2 h-2 bg-primary/20 rounded-full animate-bounce"}),e.jsx("div",{className:"absolute top-3/4 right-1/4 w-3 h-3 bg-primary/15 rounded-full animate-bounce delay-150"}),e.jsx("div",{className:"absolute top-1/2 right-1/3 w-2 h-2 bg-primary/20 rounded-full animate-bounce delay-300"})]})}function Y0(){return e.jsx(jn,{children:e.jsx(X0,{})})}const K0=l=>{const i=[];for(let r=0;r<l;r++){const o=r*137.508%360;i.push(`hsl(${o}, 70%, 55%)`)}return i};function X0(){const[l,i]=m.useState(null),[r,o]=m.useState(!0),[u,x]=m.useState(0),[h,f]=m.useState(24),[g,j]=m.useState(!0),[v,y]=m.useState(null),[b,S]=m.useState(!0),[w,O]=m.useState(null),{triggerRestart:A,isRestarting:D}=Il(),V=m.useCallback(async()=>{try{S(!0);const L=await zN.get("https://v1.hitokoto.cn/?c=a&c=b&c=c&c=d&c=h&c=i&c=k");y({hitokoto:L.data.hitokoto,from:L.data.from||L.data.from_who||""})}catch(L){console.error(":",L),y({hitokoto:"",from:""})}finally{S(!1)}},[]),z=m.useCallback(async()=>{try{const L=await we("/api/webui/system/status");if(L.ok){const B=await L.json();O(B)}else O(null)}catch(L){console.error(":",L),O(null)}},[]),_=async()=>{await A()},T=m.useCallback(async()=>{try{const L=await we(`/api/webui/statistics/dashboard?hours=${h}`);if(L.ok){const B=await L.json();i(B)}o(!1),x(100)}catch(L){console.error("Failed to fetch dashboard data:",L),o(!1),x(100)}},[h]);if(m.useEffect(()=>{if(!r)return;x(0);const L=setTimeout(()=>x(15),200),B=setTimeout(()=>x(30),800),_e=setTimeout(()=>x(45),2e3),Ne=setTimeout(()=>x(60),4e3),Ce=setTimeout(()=>x(75),6500),ve=setTimeout(()=>x(85),9e3),ze=setTimeout(()=>x(92),11e3);return()=>{clearTimeout(L),clearTimeout(B),clearTimeout(_e),clearTimeout(Ne),clearTimeout(Ce),clearTimeout(ve),clearTimeout(ze)}},[r]),m.useEffect(()=>{T(),V(),z()},[T,V,z]),m.useEffect(()=>{if(!g)return;const L=setInterval(()=>{T(),z()},3e4);return()=>clearInterval(L)},[g,T,z]),r||!l)return e.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:e.jsxs("div",{className:"text-center space-y-6 w-full max-w-md px-4",children:[e.jsx(At,{className:"h-12 w-12 animate-spin mx-auto text-primary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium",children:"..."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(gn,{value:u,className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[u,"%"]})]})]})});const{summary:$,model_stats:E=[],hourly_data:se=[],daily_data:te=[],recent_activity:ne=[]}=l,ue=$??{total_requests:0,total_cost:0,total_tokens:0,online_time:0,total_messages:0,total_replies:0,avg_response_time:0,cost_per_hour:0,tokens_per_hour:0},Se=L=>{const B=Math.floor(L/3600),_e=Math.floor(L%3600/60);return`${B}${_e}`},oe=L=>{const B=L.toLocaleString("zh-CN");return L>=1e9?{display:`${(L/1e9).toFixed(2)}B`,exact:B,needsExact:!0}:L>=1e6?{display:`${(L/1e6).toFixed(2)}M`,exact:B,needsExact:!0}:L>=1e4?{display:`${(L/1e3).toFixed(1)}K`,exact:B,needsExact:!0}:L>=1e3?{display:`${(L/1e3).toFixed(2)}K`,exact:B,needsExact:!0}:{display:B,exact:B,needsExact:!1}},je=L=>{const B=`${L.toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2})}`;return L>=1e6?{display:`${(L/1e6).toFixed(2)}M`,exact:B,needsExact:!0}:L>=1e4?{display:`${(L/1e3).toFixed(1)}K`,exact:B,needsExact:!0}:L>=1e3?{display:`${(L/1e3).toFixed(2)}K`,exact:B,needsExact:!0}:{display:B,exact:B,needsExact:!1}},be=L=>new Date(L).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),U=K0(E.length),P=E.map((L,B)=>({name:L.model_name,value:L.request_count,fill:U[B]})),X={requests:{label:"",color:"hsl(var(--chart-1))"},cost:{label:"()",color:"hsl(var(--chart-2))"},tokens:{label:"Tokens",color:"hsl(var(--chart-3))"}};return e.jsx(Ze,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Sa,{value:h.toString(),onValueChange:L=>f(Number(L)),children:e.jsxs(xa,{className:"grid grid-cols-3 w-full sm:w-auto",children:[e.jsx(is,{value:"24",children:"24"}),e.jsx(is,{value:"168",children:"7"}),e.jsx(is,{value:"720",children:"30"})]})}),e.jsxs(C,{variant:g?"default":"outline",size:"sm",onClick:()=>j(!g),className:"gap-2",children:[e.jsx(At,{className:`h-4 w-4 ${g?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsx(C,{variant:"outline",size:"sm",onClick:T,children:e.jsx(At,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 rounded-lg border border-dashed border-muted-foreground/30 bg-muted/20",children:[b?e.jsx(aj,{className:"h-5 flex-1"}):v?e.jsxs("p",{className:"flex-1 text-sm text-muted-foreground italic truncate",children:['"',v.hitokoto,'"  ',v.from]}):null,e.jsx(C,{variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:V,disabled:b,children:e.jsx(At,{className:`h-3.5 w-3.5 ${b?"animate-spin":""}`})})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 lg:grid-cols-3",children:[e.jsxs(Ve,{className:"lg:col-span-1",children:[e.jsx(rs,{className:"pb-3",children:e.jsxs(cs,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Mr,{className:"h-4 w-4"}),""]})}),e.jsx(gs,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:w?.running?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-green-500 animate-pulse"}),e.jsxs(Ye,{variant:"outline",className:"text-green-600 border-green-300 bg-green-50",children:[e.jsx(aa,{className:"h-3 w-3 mr-1"}),""]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-red-500"}),e.jsxs(Ye,{variant:"outline",className:"text-red-600 border-red-300 bg-red-50",children:[e.jsx(Ot,{className:"h-3 w-3 mr-1"}),""]})]})}),w&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsxs("span",{children:["v",w.version]}),e.jsx("span",{className:"mx-2",children:"|"}),e.jsxs("span",{children:[" ",Se(w.uptime)]})]})]})})]}),e.jsxs(Ve,{children:[e.jsx(rs,{className:"pb-3",children:e.jsxs(cs,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(hn,{className:"h-4 w-4"}),""]})}),e.jsx(gs,{children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(C,{variant:"outline",size:"sm",onClick:_,disabled:D,className:"gap-2",children:[e.jsx(yr,{className:`h-4 w-4 ${D?"animate-spin":""}`}),D?"...":""]}),e.jsx(C,{variant:"outline",size:"sm",asChild:!0,className:"gap-2",children:e.jsxs(ci,{to:"/logs",children:[e.jsx(Aa,{className:"h-4 w-4"}),""]})}),e.jsx(C,{variant:"outline",size:"sm",asChild:!0,className:"gap-2",children:e.jsxs(ci,{to:"/plugins",children:[e.jsx(Ty,{className:"h-4 w-4"}),""]})}),e.jsx(C,{variant:"outline",size:"sm",asChild:!0,className:"gap-2",children:e.jsxs(ci,{to:"/settings",children:[e.jsx(ji,{className:"h-4 w-4"}),""]})})]})})]}),e.jsxs(Ve,{children:[e.jsxs(rs,{className:"pb-3",children:[e.jsxs(cs,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Ey,{className:"h-4 w-4"}),""]}),e.jsx(st,{className:"text-xs",children:""})]}),e.jsx(gs,{children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(C,{variant:"outline",size:"sm",asChild:!0,className:"gap-2",children:e.jsxs(ci,{to:"/survey/webui-feedback",children:[e.jsx(Aa,{className:"h-4 w-4"}),"WebUI "]})}),e.jsx(C,{variant:"outline",size:"sm",asChild:!0,className:"gap-2",children:e.jsxs(ci,{to:"/survey/maibot-feedback",children:[e.jsx(Fl,{className:"h-4 w-4"}),""]})})]})})]})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 xs:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(Ve,{children:[e.jsxs(rs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(cs,{className:"text-sm font-medium",children:""}),e.jsx(zy,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(gs,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[oe(ue.total_requests).display,oe(ue.total_requests).needsExact&&e.jsxs("span",{className:"text-xs font-normal text-muted-foreground ml-1",children:["(",oe(ue.total_requests).exact,")"]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["",h<48?h+"":Math.floor(h/24)+""]})]})]}),e.jsxs(Ve,{children:[e.jsxs(rs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(cs,{className:"text-sm font-medium",children:""}),e.jsx(My,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(gs,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[je(ue.total_cost).display,je(ue.total_cost).needsExact&&e.jsxs("span",{className:"text-xs font-normal text-muted-foreground ml-1",children:["(",je(ue.total_cost).exact,")"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:ue.cost_per_hour>0?`${ue.cost_per_hour.toFixed(2)}/`:""})]})]}),e.jsxs(Ve,{children:[e.jsxs(rs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(cs,{className:"text-sm font-medium",children:"Token"}),e.jsx(ro,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(gs,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[oe(ue.total_tokens).display,oe(ue.total_tokens).needsExact&&e.jsxs("span",{className:"text-xs font-normal text-muted-foreground ml-1",children:["(",oe(ue.total_tokens).exact,")"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:ue.tokens_per_hour>0?`${oe(ue.tokens_per_hour).display}/`:""})]})]}),e.jsxs(Ve,{children:[e.jsxs(rs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(cs,{className:"text-sm font-medium",children:""}),e.jsx(hn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(gs,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[ue.avg_response_time.toFixed(2),"s"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"API"})]})]})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-3",children:[e.jsxs(Ve,{children:[e.jsxs(rs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(cs,{className:"text-sm font-medium",children:""}),e.jsx(xi,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(gs,{children:e.jsxs("div",{className:"text-xl font-bold",children:[Se(ue.online_time),e.jsxs("span",{className:"text-xs font-normal text-muted-foreground ml-1",children:["(",ue.online_time.toLocaleString(),")"]})]})})]}),e.jsxs(Ve,{children:[e.jsxs(rs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(cs,{className:"text-sm font-medium",children:""}),e.jsx(Fl,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(gs,{children:[e.jsxs("div",{className:"text-xl font-bold",children:[oe(ue.total_messages).display,oe(ue.total_messages).needsExact&&e.jsxs("span",{className:"text-xs font-normal text-muted-foreground ml-1",children:["(",oe(ue.total_messages).exact,")"]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" ",oe(ue.total_replies).display,oe(ue.total_replies).needsExact&&e.jsxs("span",{children:["(",oe(ue.total_replies).exact,")"]})," "]})]})]}),e.jsxs(Ve,{children:[e.jsxs(rs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(cs,{className:"text-sm font-medium",children:""}),e.jsx(Ay,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(gs,{children:[e.jsx("div",{className:"text-xl font-bold",children:ue.total_messages>0?`${(ue.total_cost/ue.total_messages*100).toFixed(2)}`:"0.00"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"100"})]})]})]}),e.jsxs(Sa,{defaultValue:"trends",className:"space-y-4",children:[e.jsxs(xa,{className:"grid w-full grid-cols-2 sm:grid-cols-4",children:[e.jsx(is,{value:"trends",children:""}),e.jsx(is,{value:"models",children:""}),e.jsx(is,{value:"activity",children:""}),e.jsx(is,{value:"daily",children:""})]}),e.jsxs(As,{value:"trends",className:"space-y-4",children:[e.jsxs(Ve,{children:[e.jsxs(rs,{children:[e.jsx(cs,{children:""}),e.jsxs(st,{children:["",h,""]})]}),e.jsx(gs,{children:e.jsx(oi,{config:X,className:"h-[300px] sm:h-[400px] w-full aspect-auto",children:e.jsxs(ey,{data:se,children:[e.jsx(Xc,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground) / 0.2)"}),e.jsx(Pc,{dataKey:"timestamp",tickFormatter:L=>be(L),angle:-45,textAnchor:"end",height:60,stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(ur,{stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(xr,{content:e.jsx(di,{labelFormatter:L=>be(L)})}),e.jsx(sy,{type:"monotone",dataKey:"requests",stroke:"var(--color-requests)",strokeWidth:2})]})})})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 lg:grid-cols-2",children:[e.jsxs(Ve,{children:[e.jsxs(rs,{children:[e.jsx(cs,{children:""}),e.jsx(st,{children:"API"})]}),e.jsx(gs,{children:e.jsx(oi,{config:X,className:"h-[250px] sm:h-[300px] w-full aspect-auto",children:e.jsxs(Ru,{data:se,children:[e.jsx(Xc,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground) / 0.2)"}),e.jsx(Pc,{dataKey:"timestamp",tickFormatter:L=>be(L),angle:-45,textAnchor:"end",height:60,stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(ur,{stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(xr,{content:e.jsx(di,{labelFormatter:L=>be(L)})}),e.jsx(Jc,{dataKey:"cost",fill:"var(--color-cost)"})]})})})]}),e.jsxs(Ve,{children:[e.jsxs(rs,{children:[e.jsx(cs,{children:"Token"}),e.jsx(st,{children:"Token"})]}),e.jsx(gs,{children:e.jsx(oi,{config:X,className:"h-[250px] sm:h-[300px] w-full aspect-auto",children:e.jsxs(Ru,{data:se,children:[e.jsx(Xc,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground) / 0.2)"}),e.jsx(Pc,{dataKey:"timestamp",tickFormatter:L=>be(L),angle:-45,textAnchor:"end",height:60,stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(ur,{stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(xr,{content:e.jsx(di,{labelFormatter:L=>be(L)})}),e.jsx(Jc,{dataKey:"tokens",fill:"var(--color-tokens)"})]})})})]})]})]}),e.jsx(As,{value:"models",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 grid-cols-1 lg:grid-cols-2",children:[e.jsxs(Ve,{children:[e.jsxs(rs,{children:[e.jsx(cs,{children:""}),e.jsxs(st,{children:[" ( ",E.length," )"]})]}),e.jsx(gs,{children:e.jsx(oi,{config:Object.fromEntries(E.map((L,B)=>[L.model_name,{label:L.model_name,color:U[B]}])),className:"h-[300px] sm:h-[400px] w-full aspect-auto",children:e.jsxs(ty,{children:[e.jsx(xr,{content:e.jsx(di,{})}),e.jsx(ay,{data:P,cx:"50%",cy:"50%",labelLine:!1,label:({name:L,percent:B})=>B&&B<.05?"":`${L} ${B?(B*100).toFixed(0):0}%`,outerRadius:100,dataKey:"value",children:P.map((L,B)=>e.jsx(ly,{fill:L.fill},`cell-${B}`))})]})})})]}),e.jsxs(Ve,{children:[e.jsxs(rs,{children:[e.jsx(cs,{children:""}),e.jsx(st,{children:""})]}),e.jsx(gs,{children:e.jsx(Ze,{className:"h-[300px] sm:h-[400px]",children:e.jsx("div",{className:"space-y-3",children:E.map((L,B)=>e.jsxs("div",{className:"p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-sm truncate flex-1 min-w-0",children:L.model_name}),e.jsx("div",{className:"w-3 h-3 rounded-full ml-2 flex-shrink-0",style:{backgroundColor:`hsl(var(--chart-${B%5+1}))`}})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsx("span",{className:"ml-1 font-medium",children:L.request_count.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsxs("span",{className:"ml-1 font-medium",children:["",L.total_cost.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Tokens:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[(L.total_tokens/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsxs("span",{className:"ml-1 font-medium",children:[L.avg_response_time.toFixed(2),"s"]})]})]})]},B))})})})]})]})}),e.jsx(As,{value:"activity",children:e.jsxs(Ve,{children:[e.jsxs(rs,{children:[e.jsx(cs,{children:""}),e.jsx(st,{children:"API"})]}),e.jsx(gs,{children:e.jsx(Ze,{className:"h-[400px] sm:h-[500px]",children:e.jsx("div",{className:"space-y-2",children:ne.map((L,B)=>e.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:L.model}),e.jsx("div",{className:"text-xs text-muted-foreground",children:L.request_type})]}),e.jsx("div",{className:"text-xs text-muted-foreground flex-shrink-0",children:be(L.timestamp)})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Tokens:"}),e.jsx("span",{className:"ml-1",children:L.tokens})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsxs("span",{className:"ml-1",children:["",L.cost.toFixed(4)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsxs("span",{className:"ml-1",children:[L.time_cost.toFixed(2),"s"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsx("span",{className:`ml-1 ${L.status==="success"?"text-green-600":"text-red-600"}`,children:L.status})]})]})]},B))})})})]})}),e.jsx(As,{value:"daily",children:e.jsxs(Ve,{children:[e.jsxs(rs,{children:[e.jsx(cs,{children:""}),e.jsx(st,{children:"7"})]}),e.jsx(gs,{children:e.jsx(oi,{config:{requests:{label:"",color:"hsl(var(--chart-1))"},cost:{label:"()",color:"hsl(var(--chart-2))"}},className:"h-[400px] sm:h-[500px] w-full aspect-auto",children:e.jsxs(Ru,{data:te,children:[e.jsx(Xc,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground) / 0.2)"}),e.jsx(Pc,{dataKey:"timestamp",tickFormatter:L=>{const B=new Date(L);return`${B.getMonth()+1}/${B.getDate()}`},stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(ur,{yAxisId:"left",stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(ur,{yAxisId:"right",orientation:"right",stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(xr,{content:e.jsx(di,{labelFormatter:L=>new Date(L).toLocaleDateString("zh-CN")})}),e.jsx($0,{content:e.jsx(ij,{})}),e.jsx(Jc,{yAxisId:"left",dataKey:"requests",fill:"var(--color-requests)"}),e.jsx(Jc,{yAxisId:"right",dataKey:"cost",fill:"var(--color-cost)"})]})})})]})})]}),e.jsx(vn,{})]})})}const P0={theme:"system",setTheme:()=>null},oj=m.createContext(P0),dm=()=>{const l=m.useContext(oj);if(l===void 0)throw new Error("useTheme must be used within a ThemeProvider");return l},J0=(l,i,r)=>{const o=document.documentElement.classList.contains("no-animations");if(!document.startViewTransition||o){i(l);return}const u=r.clientX,x=r.clientY,h=Math.hypot(Math.max(u,innerWidth-u),Math.max(x,innerHeight-x));document.startViewTransition(()=>{i(l)}).ready.then(()=>{document.documentElement.animate({clipPath:[`circle(0px at ${u}px ${x}px)`,`circle(${h}px at ${u}px ${x}px)`]},{duration:500,easing:"ease-in-out",pseudoElement:"::view-transition-new(root)"})})},dj=m.createContext(void 0),uj=()=>{const l=m.useContext(dj);if(l===void 0)throw new Error("useAnimation must be used within an AnimationProvider");return l},Fe=m.forwardRef(({className:l,...i},r)=>e.jsx(Pp,{className:H("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",l),...i,ref:r,children:e.jsx(LN,{className:H("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Fe.displayName=Pp.displayName;const Z0=gi("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),k=m.forwardRef(({className:l,...i},r)=>e.jsx(dg,{ref:r,className:H(Z0(),l),...i}));k.displayName=dg.displayName;const ie=m.forwardRef(({className:l,type:i,...r},o)=>e.jsx("input",{type:i,className:H("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",l),ref:o,...r}));ie.displayName="Input";const W0=5,ew=5e3;let qu=0;function sw(){return qu=(qu+1)%Number.MAX_SAFE_INTEGER,qu.toString()}const Gu=new Map,yp=l=>{if(Gu.has(l))return;const i=setTimeout(()=>{Gu.delete(l),br({type:"REMOVE_TOAST",toastId:l})},ew);Gu.set(l,i)},tw=(l,i)=>{switch(i.type){case"ADD_TOAST":return{...l,toasts:[i.toast,...l.toasts].slice(0,W0)};case"UPDATE_TOAST":return{...l,toasts:l.toasts.map(r=>r.id===i.toast.id?{...r,...i.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=i;return r?yp(r):l.toasts.forEach(o=>{yp(o.id)}),{...l,toasts:l.toasts.map(o=>o.id===r||r===void 0?{...o,open:!1}:o)}}case"REMOVE_TOAST":return i.toastId===void 0?{...l,toasts:[]}:{...l,toasts:l.toasts.filter(r=>r.id!==i.toastId)}}},no=[];let io={toasts:[]};function br(l){io=tw(io,l),no.forEach(i=>{i(io)})}function aw({...l}){const i=sw(),r=u=>br({type:"UPDATE_TOAST",toast:{...u,id:i}}),o=()=>br({type:"DISMISS_TOAST",toastId:i});return br({type:"ADD_TOAST",toast:{...l,id:i,open:!0,onOpenChange:u=>{u||o()}}}),{id:i,dismiss:o,update:r}}function Ks(){const[l,i]=m.useState(io);return m.useEffect(()=>(no.push(i),()=>{const r=no.indexOf(i);r>-1&&no.splice(r,1)}),[l]),{...l,toast:aw,dismiss:r=>br({type:"DISMISS_TOAST",toastId:r})}}const lw=[{id:"minLength",label:" 10 ",description:"Token  10 ",validate:l=>l.length>=10},{id:"hasUppercase",label:"",description:" (A-Z)",validate:l=>/[A-Z]/.test(l)},{id:"hasLowercase",label:"",description:" (a-z)",validate:l=>/[a-z]/.test(l)},{id:"hasSpecialChar",label:"",description:" (!@#$%^&*()_+-=[]{}|;:,.<>?/)",validate:l=>/[!@#$%^&*()_+\-=[\]{}|;:,.<>?/]/.test(l)}];function nw(l){const i=lw.map(o=>({id:o.id,label:o.label,description:o.description,passed:o.validate(l)}));return{isValid:i.every(o=>o.passed),rules:i}}const go="0.12.0 Beta",um="MaiBot Dashboard",iw=`${um} v${go}`,rw=(l="v")=>`${l}${go}`,Wt={THEME:"maibot-ui-theme",ACCENT_COLOR:"accent-color",ENABLE_ANIMATIONS:"maibot-animations",ENABLE_WAVES_BACKGROUND:"maibot-waves-background",LOG_CACHE_SIZE:"maibot-log-cache-size",LOG_AUTO_SCROLL:"maibot-log-auto-scroll",LOG_FONT_SIZE:"maibot-log-font-size",LOG_LINE_SPACING:"maibot-log-line-spacing",DATA_SYNC_INTERVAL:"maibot-data-sync-interval",WS_RECONNECT_INTERVAL:"maibot-ws-reconnect-interval",WS_MAX_RECONNECT_ATTEMPTS:"maibot-ws-max-reconnect-attempts",COMPLETED_TOURS:"maibot-completed-tours"},Va={theme:"system",accentColor:"blue",enableAnimations:!0,enableWavesBackground:!0,logCacheSize:1e3,logAutoScroll:!0,logFontSize:"xs",logLineSpacing:4,dataSyncInterval:30,wsReconnectInterval:3e3,wsMaxReconnectAttempts:10};function dt(l){const i=mj(l),r=localStorage.getItem(i);if(r===null)return Va[l];const o=Va[l];if(typeof o=="boolean")return r==="true";if(typeof o=="number"){const u=parseFloat(r);return isNaN(u)?o:u}return r}function ui(l,i){const r=mj(l);localStorage.setItem(r,String(i)),window.dispatchEvent(new CustomEvent("maibot-settings-change",{detail:{key:l,value:i}}))}function cw(){return{theme:dt("theme"),accentColor:dt("accentColor"),enableAnimations:dt("enableAnimations"),enableWavesBackground:dt("enableWavesBackground"),logCacheSize:dt("logCacheSize"),logAutoScroll:dt("logAutoScroll"),logFontSize:dt("logFontSize"),logLineSpacing:dt("logLineSpacing"),dataSyncInterval:dt("dataSyncInterval"),wsReconnectInterval:dt("wsReconnectInterval"),wsMaxReconnectAttempts:dt("wsMaxReconnectAttempts")}}function ow(){const l=cw(),i=localStorage.getItem(Wt.COMPLETED_TOURS),r=i?JSON.parse(i):[];return{...l,completedTours:r}}function dw(l){const i=[],r=[];for(const[o,u]of Object.entries(l)){if(o==="completedTours"){Array.isArray(u)?(localStorage.setItem(Wt.COMPLETED_TOURS,JSON.stringify(u)),i.push("completedTours")):r.push("completedTours");continue}if(o in Va){const x=o,h=Va[x];if(typeof u==typeof h){if(x==="theme"&&!["light","dark","system"].includes(u)){r.push(o);continue}if(x==="logFontSize"&&!["xs","sm","base"].includes(u)){r.push(o);continue}ui(x,u),i.push(o)}else r.push(o)}else r.push(o)}return{success:i.length>0,imported:i,skipped:r}}function uw(){for(const l of Object.keys(Va))ui(l,Va[l]);localStorage.removeItem(Wt.COMPLETED_TOURS),window.dispatchEvent(new CustomEvent("maibot-settings-reset"))}function mw(){const l=[],i=[],r=[];for(let o=0;o<localStorage.length;o++){const u=localStorage.key(o);u&&(u.startsWith("maibot")||u.startsWith("accent-color")||u==="access-token")&&r.push(u)}for(const o of r)localStorage.removeItem(o),l.push(o);return{clearedKeys:l,preservedKeys:i}}function wp(){let l=0;const i=[];for(let r=0;r<localStorage.length;r++){const o=localStorage.key(r);if(o){const u=localStorage.getItem(o)||"",x=(o.length+u.length)*2;l+=x,i.push({key:o,size:x})}}return i.sort((r,o)=>o.size-r.size),{used:l,items:localStorage.length,details:i}}function xw(l){if(l===0)return"0 B";const i=1024,r=["B","KB","MB"],o=Math.floor(Math.log(l)/Math.log(i));return parseFloat((l/Math.pow(i,o)).toFixed(2))+" "+r[o]}function mj(l){return{theme:Wt.THEME,accentColor:Wt.ACCENT_COLOR,enableAnimations:Wt.ENABLE_ANIMATIONS,enableWavesBackground:Wt.ENABLE_WAVES_BACKGROUND,logCacheSize:Wt.LOG_CACHE_SIZE,logAutoScroll:Wt.LOG_AUTO_SCROLL,logFontSize:Wt.LOG_FONT_SIZE,logLineSpacing:Wt.LOG_LINE_SPACING,dataSyncInterval:Wt.DATA_SYNC_INTERVAL,wsReconnectInterval:Wt.WS_RECONNECT_INTERVAL,wsMaxReconnectAttempts:Wt.WS_MAX_RECONNECT_ATTEMPTS}[l]}const ma=m.forwardRef(({className:l,...i},r)=>e.jsxs(Jp,{ref:r,className:H("relative flex w-full touch-none select-none items-center",l),...i,children:[e.jsx(UN,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:e.jsx(BN,{className:"absolute h-full bg-primary"})}),e.jsx(HN,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));ma.displayName=Jp.displayName;class hw{ws=null;reconnectTimeout=null;reconnectAttempts=0;heartbeatInterval=null;logCallbacks=new Set;connectionCallbacks=new Set;isConnected=!1;logCache=[];getMaxCacheSize(){return dt("logCacheSize")}getMaxReconnectAttempts(){return dt("wsMaxReconnectAttempts")}getReconnectInterval(){return dt("wsReconnectInterval")}getWebSocketUrl(i){let r;{const o=window.location.protocol==="https:"?"wss:":"ws:",u=window.location.host;r=`${o}//${u}/ws/logs`}return i?`${r}?token=${encodeURIComponent(i)}`:r}async getWsToken(){try{const i=await we("/api/webui/ws-token",{method:"GET",credentials:"include"});if(!i.ok)return console.error(" WebSocket token :",i.status),null;const r=await i.json();return r.success&&r.token?r.token:null}catch(i){return console.error(" WebSocket token :",i),null}}async connect(){if(this.ws?.readyState===WebSocket.OPEN||this.ws?.readyState===WebSocket.CONNECTING)return;const i=await this.getWsToken(),r=this.getWebSocketUrl(i||void 0);try{this.ws=new WebSocket(r),this.ws.onopen=()=>{this.isConnected=!0,this.reconnectAttempts=0,this.notifyConnection(!0),this.startHeartbeat()},this.ws.onmessage=o=>{try{if(o.data==="pong")return;const u=JSON.parse(o.data);this.notifyLog(u)}catch(u){console.error(":",u)}},this.ws.onerror=o=>{console.error(" WebSocket :",o),this.isConnected=!1,this.notifyConnection(!1)},this.ws.onclose=()=>{this.isConnected=!1,this.notifyConnection(!1),this.stopHeartbeat(),this.attemptReconnect()}}catch(o){console.error(" WebSocket :",o),this.attemptReconnect()}}attemptReconnect(){const i=this.getMaxReconnectAttempts();if(this.reconnectAttempts>=i)return;this.reconnectAttempts+=1;const r=this.getReconnectInterval(),o=Math.min(r*this.reconnectAttempts,3e4);this.reconnectTimeout=window.setTimeout(()=>{this.connect()},o)}startHeartbeat(){this.heartbeatInterval=window.setInterval(()=>{this.ws?.readyState===WebSocket.OPEN&&this.ws.send("ping")},3e4)}stopHeartbeat(){this.heartbeatInterval!==null&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}disconnect(){this.reconnectTimeout!==null&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.stopHeartbeat(),this.ws&&(this.ws.close(),this.ws=null),this.isConnected=!1,this.reconnectAttempts=0}onLog(i){return this.logCallbacks.add(i),()=>this.logCallbacks.delete(i)}onConnectionChange(i){return this.connectionCallbacks.add(i),i(this.isConnected),()=>this.connectionCallbacks.delete(i)}notifyLog(i){if(!this.logCache.some(o=>o.id===i.id)){this.logCache.push(i);const o=this.getMaxCacheSize();this.logCache.length>o&&(this.logCache=this.logCache.slice(-o)),this.logCallbacks.forEach(u=>{try{u(i)}catch(x){console.error(":",x)}})}}notifyConnection(i){this.connectionCallbacks.forEach(r=>{try{r(i)}catch(o){console.error(":",o)}})}getAllLogs(){return[...this.logCache]}clearLogs(){this.logCache=[]}getConnectionStatus(){return this.isConnected}}const xn=new hw;typeof window<"u"&&setTimeout(()=>{xn.connect()},100);const Qs=cy,mm=oy,fw=iy,xj=m.forwardRef(({className:l,...i},r)=>e.jsx(ug,{ref:r,className:H("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",l),...i}));xj.displayName=ug.displayName;const qs=m.forwardRef(({className:l,children:i,preventOutsideClose:r=!1,...o},u)=>e.jsxs(fw,{children:[e.jsx(xj,{}),e.jsxs(mg,{ref:u,className:H("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",l),onPointerDownOutside:r?x=>x.preventDefault():void 0,onInteractOutside:r?x=>x.preventDefault():void 0,...o,children:[i,e.jsxs(ry,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(fl,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));qs.displayName=mg.displayName;const Gs=({className:l,...i})=>e.jsx("div",{className:H("flex flex-col space-y-1.5 text-center sm:text-left",l),...i});Gs.displayName="DialogHeader";const at=({className:l,...i})=>e.jsx("div",{className:H("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",l),...i});at.displayName="DialogFooter";const Vs=m.forwardRef(({className:l,...i},r)=>e.jsx(xg,{ref:r,className:H("text-lg font-semibold leading-none tracking-tight",l),...i}));Vs.displayName=xg.displayName;const Ws=m.forwardRef(({className:l,...i},r)=>e.jsx(hg,{ref:r,className:H("text-sm text-muted-foreground",l),...i}));Ws.displayName=hg.displayName;const js=qN,mt=GN,pw=$N,hj=m.forwardRef(({className:l,...i},r)=>e.jsx(Zp,{className:H("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",l),...i,ref:r}));hj.displayName=Zp.displayName;const os=m.forwardRef(({className:l,...i},r)=>e.jsxs(pw,{children:[e.jsx(hj,{}),e.jsx(Wp,{ref:r,className:H("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",l),...i})]}));os.displayName=Wp.displayName;const ds=({className:l,...i})=>e.jsx("div",{className:H("flex flex-col space-y-2 text-center sm:text-left",l),...i});ds.displayName="AlertDialogHeader";const us=({className:l,...i})=>e.jsx("div",{className:H("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",l),...i});us.displayName="AlertDialogFooter";const ms=m.forwardRef(({className:l,...i},r)=>e.jsx(eg,{ref:r,className:H("text-lg font-semibold",l),...i}));ms.displayName=eg.displayName;const xs=m.forwardRef(({className:l,...i},r)=>e.jsx(sg,{ref:r,className:H("text-sm text-muted-foreground",l),...i}));xs.displayName=sg.displayName;const hs=m.forwardRef(({className:l,...i},r)=>e.jsx(tg,{ref:r,className:H(Sr(),l),...i}));hs.displayName=tg.displayName;const fs=m.forwardRef(({className:l,...i},r)=>e.jsx(ag,{ref:r,className:H(Sr({variant:"outline"}),"mt-2 sm:mt-0",l),...i}));fs.displayName=ag.displayName;function gw(){return e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:""})]})}),e.jsxs(Sa,{defaultValue:"appearance",className:"w-full",children:[e.jsxs(xa,{className:"grid w-full grid-cols-2 sm:grid-cols-4 gap-0.5 sm:gap-1 h-auto p-1",children:[e.jsxs(is,{value:"appearance",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[e.jsx(Oy,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4",strokeWidth:2,fill:"none"}),e.jsx("span",{children:""})]}),e.jsxs(is,{value:"security",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[e.jsx(Dy,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4",strokeWidth:2,fill:"none"}),e.jsx("span",{children:""})]}),e.jsxs(is,{value:"other",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[e.jsx(ji,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4",strokeWidth:2,fill:"none"}),e.jsx("span",{children:""})]}),e.jsxs(is,{value:"about",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[e.jsx(Ra,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4",strokeWidth:2,fill:"none"}),e.jsx("span",{children:""})]})]}),e.jsxs(Ze,{className:"h-[calc(100vh-240px)] sm:h-[calc(100vh-280px)] mt-4 sm:mt-6",children:[e.jsx(As,{value:"appearance",className:"mt-0",children:e.jsx(jw,{})}),e.jsx(As,{value:"security",className:"mt-0",children:e.jsx(vw,{})}),e.jsx(As,{value:"other",className:"mt-0",children:e.jsx(bw,{})}),e.jsx(As,{value:"about",className:"mt-0",children:e.jsx(Nw,{})})]})]})]})}function _p(l){const i=document.documentElement,o={blue:{hsl:"221.2 83.2% 53.3%",darkHsl:"217.2 91.2% 59.8%",gradient:null},purple:{hsl:"271 91% 65%",darkHsl:"270 95% 75%",gradient:null},green:{hsl:"142 71% 45%",darkHsl:"142 76% 36%",gradient:null},orange:{hsl:"25 95% 53%",darkHsl:"20 90% 48%",gradient:null},pink:{hsl:"330 81% 60%",darkHsl:"330 85% 70%",gradient:null},red:{hsl:"0 84% 60%",darkHsl:"0 90% 70%",gradient:null},"gradient-sunset":{hsl:"15 95% 60%",darkHsl:"15 95% 65%",gradient:"linear-gradient(135deg, hsl(25 95% 53%) 0%, hsl(330 81% 60%) 100%)"},"gradient-ocean":{hsl:"200 90% 55%",darkHsl:"200 90% 60%",gradient:"linear-gradient(135deg, hsl(221.2 83.2% 53.3%) 0%, hsl(189 94% 43%) 100%)"},"gradient-forest":{hsl:"150 70% 45%",darkHsl:"150 75% 40%",gradient:"linear-gradient(135deg, hsl(142 71% 45%) 0%, hsl(158 64% 52%) 100%)"},"gradient-aurora":{hsl:"310 85% 65%",darkHsl:"310 90% 70%",gradient:"linear-gradient(135deg, hsl(271 91% 65%) 0%, hsl(330 81% 60%) 100%)"},"gradient-fire":{hsl:"15 95% 55%",darkHsl:"15 95% 60%",gradient:"linear-gradient(135deg, hsl(0 84% 60%) 0%, hsl(25 95% 53%) 100%)"},"gradient-twilight":{hsl:"250 90% 60%",darkHsl:"250 95% 65%",gradient:"linear-gradient(135deg, hsl(239 84% 67%) 0%, hsl(271 91% 65%) 100%)"}}[l];if(o)i.style.setProperty("--primary",o.hsl),o.gradient?(i.style.setProperty("--primary-gradient",o.gradient),i.classList.add("has-gradient")):(i.style.removeProperty("--primary-gradient"),i.classList.remove("has-gradient"));else if(l.startsWith("#")){const u=x=>{x=x.replace("#","");const h=parseInt(x.substring(0,2),16)/255,f=parseInt(x.substring(2,4),16)/255,g=parseInt(x.substring(4,6),16)/255,j=Math.max(h,f,g),v=Math.min(h,f,g);let y=0,b=0;const S=(j+v)/2;if(j!==v){const w=j-v;switch(b=S>.5?w/(2-j-v):w/(j+v),j){case h:y=((f-g)/w+(f<g?6:0))/6;break;case f:y=((g-h)/w+2)/6;break;case g:y=((h-f)/w+4)/6;break}}return`${Math.round(y*360)} ${Math.round(b*100)}% ${Math.round(S*100)}%`};i.style.setProperty("--primary",u(l)),i.style.removeProperty("--primary-gradient"),i.classList.remove("has-gradient")}}function jw(){const{theme:l,setTheme:i}=dm(),{enableAnimations:r,setEnableAnimations:o,enableWavesBackground:u,setEnableWavesBackground:x}=uj(),[h,f]=m.useState(()=>localStorage.getItem("accent-color")||"blue");m.useEffect(()=>{const j=localStorage.getItem("accent-color")||"blue";_p(j)},[]);const g=j=>{f(j),localStorage.setItem("accent-color",j),_p(j)};return e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4",children:[e.jsx(Vu,{value:"light",current:l,onChange:i,label:"",description:""}),e.jsx(Vu,{value:"dark",current:l,onChange:i,label:"",description:""}),e.jsx(Vu,{value:"system",current:l,onChange:i,label:"",description:""})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium mb-2 sm:mb-3",children:""}),e.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 sm:gap-3",children:[e.jsx(_a,{value:"blue",current:h,onChange:g,label:"",colorClass:"bg-blue-500"}),e.jsx(_a,{value:"purple",current:h,onChange:g,label:"",colorClass:"bg-purple-500"}),e.jsx(_a,{value:"green",current:h,onChange:g,label:"",colorClass:"bg-green-500"}),e.jsx(_a,{value:"orange",current:h,onChange:g,label:"",colorClass:"bg-orange-500"}),e.jsx(_a,{value:"pink",current:h,onChange:g,label:"",colorClass:"bg-pink-500"}),e.jsx(_a,{value:"red",current:h,onChange:g,label:"",colorClass:"bg-red-500"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium mb-2 sm:mb-3",children:""}),e.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 sm:gap-3",children:[e.jsx(_a,{value:"gradient-sunset",current:h,onChange:g,label:"",colorClass:"bg-gradient-to-r from-orange-500 to-pink-500"}),e.jsx(_a,{value:"gradient-ocean",current:h,onChange:g,label:"",colorClass:"bg-gradient-to-r from-blue-500 to-cyan-500"}),e.jsx(_a,{value:"gradient-forest",current:h,onChange:g,label:"",colorClass:"bg-gradient-to-r from-green-500 to-emerald-500"}),e.jsx(_a,{value:"gradient-aurora",current:h,onChange:g,label:"",colorClass:"bg-gradient-to-r from-purple-500 to-pink-500"}),e.jsx(_a,{value:"gradient-fire",current:h,onChange:g,label:"",colorClass:"bg-gradient-to-r from-red-500 to-orange-500"}),e.jsx(_a,{value:"gradient-twilight",current:h,onChange:g,label:"",colorClass:"bg-gradient-to-r from-indigo-500 to-purple-500"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium mb-2 sm:mb-3",children:""}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"color",value:h.startsWith("#")?h:"#3b82f6",onChange:j=>g(j.target.value),className:"h-10 sm:h-12 w-full rounded-lg border-2 border-border cursor-pointer",title:""})}),e.jsx("div",{className:"flex-1",children:e.jsx(ie,{type:"text",value:h,onChange:j=>g(j.target.value),placeholder:"#3b82f6",className:"font-mono text-sm"})})]}),e.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-2",children:" HEX "})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsx("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5 flex-1",children:[e.jsx(k,{htmlFor:"animations",className:"text-base font-medium cursor-pointer",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Fe,{id:"animations",checked:r,onCheckedChange:o})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5 flex-1",children:[e.jsx(k,{htmlFor:"waves-background",className:"text-base font-medium cursor-pointer",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Fe,{id:"waves-background",checked:u,onCheckedChange:x})]})})]})]})]})}function vw(){const l=ka(),[i,r]=m.useState(""),[o,u]=m.useState(""),[x,h]=m.useState(!1),[f,g]=m.useState(!1),[j,v]=m.useState(!1),[y,b]=m.useState(!1),[S,w]=m.useState(!1),[O,A]=m.useState(!1),[D,V]=m.useState(""),[z,_]=m.useState(!1),{toast:T}=Ks(),$=m.useMemo(()=>nw(o),[o]),E=async oe=>{if(!i){T({title:"",description:"Token  Cookie  Token",variant:"destructive"});return}try{await navigator.clipboard.writeText(oe),w(!0),T({title:"",description:"Token "}),setTimeout(()=>w(!1),2e3)}catch{T({title:"",description:" Token",variant:"destructive"})}},se=async()=>{if(!o.trim()){T({title:"",description:" Token",variant:"destructive"});return}if(!$.isValid){const oe=$.rules.filter(je=>!je.passed).map(je=>je.label).join(", ");T({title:"",description:`Token : ${oe}`,variant:"destructive"});return}v(!0);try{const oe=await fetch("/api/webui/auth/update",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({new_token:o.trim()})}),je=await oe.json();oe.ok&&je.success?(u(""),r(o.trim()),T({title:"",description:"Access Token "}),setTimeout(()=>{l({to:"/auth"})},1500)):T({title:"",description:je.message||" Token",variant:"destructive"})}catch(oe){console.error(" Token :",oe),T({title:"",description:"",variant:"destructive"})}finally{v(!1)}},te=async()=>{b(!0);try{const oe=await fetch("/api/webui/auth/regenerate",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}),je=await oe.json();oe.ok&&je.success?(r(je.token),V(je.token),A(!0),_(!1),T({title:"",description:" Access Token "})):T({title:"",description:je.message||" Token",variant:"destructive"})}catch(oe){console.error(" Token :",oe),T({title:"",description:"",variant:"destructive"})}finally{b(!1)}},ne=async()=>{try{await navigator.clipboard.writeText(D),_(!0),T({title:"",description:"Token "})}catch{T({title:"",description:" Token",variant:"destructive"})}},ue=()=>{A(!1),setTimeout(()=>{V(""),_(!1)},300),setTimeout(()=>{l({to:"/auth"})},500)},Se=oe=>{oe||ue()};return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx(Qs,{open:O,onOpenChange:Se,children:e.jsxs(qs,{className:"sm:max-w-md",children:[e.jsxs(Gs,{children:[e.jsxs(Vs,{className:"flex items-center gap-2",children:[e.jsx(Oa,{className:"h-5 w-5 text-yellow-500"})," Access Token"]}),e.jsx(Ws,{children:" Token"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border-2 border-primary/20 bg-primary/5 p-4",children:[e.jsx(k,{className:"text-xs text-muted-foreground mb-2 block",children:" Token (64)"}),e.jsx("div",{className:"font-mono text-sm break-all select-all bg-background p-3 rounded border",children:D})]}),e.jsx("div",{className:"rounded-lg border border-yellow-200 dark:border-yellow-900 bg-yellow-50 dark:bg-yellow-950/30 p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Oa,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-300 space-y-1",children:[e.jsx("p",{className:"font-semibold",children:""}),e.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-xs",children:[e.jsx("li",{children:" Token "}),e.jsx("li",{children:""}),e.jsx("li",{children:""}),e.jsx("li",{children:" Token "})]})]})]})})]}),e.jsxs(at,{className:"gap-2 sm:gap-0",children:[e.jsx(C,{variant:"outline",onClick:ne,className:"gap-2",children:z?e.jsxs(e.Fragment,{children:[e.jsx(ea,{className:"h-4 w-4 text-green-500"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(co,{className:"h-4 w-4"})," Token"]})}),e.jsx(C,{onClick:ue,children:""})]})]})}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:" Access Token"}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"current-token",className:"text-sm",children:""}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ie,{id:"current-token",type:x?"text":"password",value:i||"",readOnly:!0,className:"pr-10 font-mono text-sm",placeholder:"Token  Cookie "}),e.jsx("button",{onClick:()=>{i?h(!x):T({title:"",description:'Token  Cookie  Token ""'})},className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 hover:bg-accent rounded",title:x?"":"",children:x?e.jsx(wr,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Gt,{className:"h-4 w-4 text-muted-foreground"})})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsx(C,{variant:"outline",size:"icon",onClick:()=>E(i),title:"",className:"flex-shrink-0",disabled:!i,children:S?e.jsx(ea,{className:"h-4 w-4 text-green-500"}):e.jsx(co,{className:"h-4 w-4"})}),e.jsxs(js,{children:[e.jsx(mt,{asChild:!0,children:e.jsxs(C,{variant:"outline",disabled:y,className:"gap-2 flex-1 sm:flex-none",children:[e.jsx(At,{className:H("h-4 w-4",y&&"animate-spin")}),e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"sm:hidden",children:""})]})}),e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:" Token"}),e.jsx(xs,{children:" 64  Token   Token "})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:te,children:""})]})]})]})]})]}),e.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:" Access Token"})]})})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:" Access Token"}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"new-token",className:"text-sm",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx(ie,{id:"new-token",type:f?"text":"password",value:o,onChange:oe=>u(oe.target.value),className:"pr-10 font-mono text-sm",placeholder:" Token"}),e.jsx("button",{onClick:()=>g(!f),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 hover:bg-accent rounded",title:f?"":"",children:f?e.jsx(wr,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Gt,{className:"h-4 w-4 text-muted-foreground"})})]}),o&&e.jsxs("div",{className:"mt-3 space-y-2 p-3 rounded-lg bg-muted/50",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Token :"}),e.jsx("div",{className:"space-y-1.5",children:$.rules.map(oe=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[oe.passed?e.jsx(aa,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):e.jsx(Mg,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsx("span",{className:H(oe.passed?"text-green-600 dark:text-green-400":"text-muted-foreground"),children:oe.label})]},oe.id))}),$.isValid&&e.jsx("div",{className:"mt-2 pt-2 border-t border-border",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 dark:text-green-400",children:[e.jsx(ea,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Token "})]})})]})]}),e.jsx(C,{onClick:se,disabled:j||!$.isValid||!o,className:"w-full sm:w-auto",children:j?"...":" Token"})]})]}),e.jsxs("div",{className:"rounded-lg border border-yellow-200 dark:border-yellow-900 bg-yellow-50 dark:bg-yellow-950/30 p-3 sm:p-4",children:[e.jsx("h4",{className:"text-sm sm:text-base font-semibold text-yellow-900 dark:text-yellow-200 mb-2",children:""}),e.jsxs("ul",{className:"text-xs sm:text-sm text-yellow-800 dark:text-yellow-300 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:" Token  64 "}),e.jsx("li",{children:" Token "}),e.jsx("li",{children:" Token  Token "}),e.jsx("li",{children:" Token"}),e.jsx("li",{children:" Token "}),e.jsx("li",{children:" Token "})]})]})]})}function bw(){const l=ka(),{toast:i}=Ks(),[r,o]=m.useState(!1),[u,x]=m.useState(!1),[h,f]=m.useState(()=>dt("logCacheSize")),[g,j]=m.useState(()=>dt("wsReconnectInterval")),[v,y]=m.useState(()=>dt("wsMaxReconnectAttempts")),[b,S]=m.useState(()=>dt("dataSyncInterval")),[w,O]=m.useState(()=>wp()),[A,D]=m.useState(!1),[V,z]=m.useState(!1),_=m.useRef(null);if(u)throw new Error("");const T=()=>{O(wp())},$=U=>{const P=U[0];f(P),ui("logCacheSize",P)},E=U=>{const P=U[0];j(P),ui("wsReconnectInterval",P)},se=U=>{const P=U[0];y(P),ui("wsMaxReconnectAttempts",P)},te=U=>{const P=U[0];S(P),ui("dataSyncInterval",P)},ne=()=>{xn.clearLogs(),i({title:"",description:""})},ue=()=>{const U=mw();T(),i({title:"",description:` ${U.clearedKeys.length} `})},Se=()=>{D(!0);try{const U=ow(),P=JSON.stringify(U,null,2),X=new Blob([P],{type:"application/json"}),L=URL.createObjectURL(X),B=document.createElement("a");B.href=L,B.download=`maibot-webui-settings-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(B),B.click(),document.body.removeChild(B),URL.revokeObjectURL(L),i({title:"",description:" JSON "})}catch(U){console.error(":",U),i({title:"",description:"",variant:"destructive"})}finally{D(!1)}},oe=U=>{const P=U.target.files?.[0];if(!P)return;z(!0);const X=new FileReader;X.onload=L=>{try{const B=L.target?.result,_e=JSON.parse(B),Ne=dw(_e);Ne.success?(f(dt("logCacheSize")),j(dt("wsReconnectInterval")),y(dt("wsMaxReconnectAttempts")),S(dt("dataSyncInterval")),T(),i({title:"",description:` ${Ne.imported.length} ${Ne.skipped.length>0?` ${Ne.skipped.length} `:""}`}),(Ne.imported.includes("theme")||Ne.imported.includes("accentColor"))&&i({title:"",description:""})):i({title:"",description:"",variant:"destructive"})}catch(B){console.error(":",B),i({title:"",description:"",variant:"destructive"})}finally{z(!1),_.current&&(_.current.value="")}},X.readAsText(P)},je=()=>{uw(),f(Va.logCacheSize),j(Va.wsReconnectInterval),y(Va.wsMaxReconnectAttempts),S(Va.dataSyncInterval),T(),i({title:"",description:""})},be=async()=>{o(!0);try{const U=await we("/api/webui/setup/reset",{method:"POST"}),P=await U.json();U.ok&&P.success?(i({title:"",description:""}),setTimeout(()=>{l({to:"/setup"})},1e3)):i({title:"",description:P.message||"",variant:"destructive"})}catch(U){console.error(":",U),i({title:"",description:"",variant:"destructive"})}finally{o(!1)}};return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(ro,{className:"h-5 w-5"}),""]}),e.jsxs("div",{className:"space-y-4 sm:space-y-5",children:[e.jsxs("div",{className:"rounded-lg bg-muted/50 p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Ry,{className:"h-4 w-4"}),""]}),e.jsx(C,{variant:"ghost",size:"sm",onClick:T,className:"h-7 px-2",children:e.jsx(At,{className:"h-3 w-3"})})]}),e.jsx("div",{className:"text-2xl font-bold text-primary",children:xw(w.used)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[w.items," "]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{className:"text-sm font-medium",children:""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[h," "]})]}),e.jsx(ma,{value:[h],onValueChange:$,min:100,max:5e3,step:100,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{className:"text-sm font-medium",children:""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[b," "]})]}),e.jsx(ma,{value:[b],onValueChange:te,min:10,max:120,step:5,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{className:"text-sm font-medium",children:"WebSocket "}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[g/1e3," "]})]}),e.jsx(ma,{value:[g],onValueChange:E,min:1e3,max:1e4,step:500,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" WebSocket "})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{className:"text-sm font-medium",children:"WebSocket "}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[v," "]})]}),e.jsx(ma,{value:[v],onValueChange:se,min:3,max:30,step:1,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsxs(C,{variant:"outline",size:"sm",onClick:ne,className:"gap-2",children:[e.jsx(es,{className:"h-4 w-4"}),""]}),e.jsxs(js,{children:[e.jsx(mt,{asChild:!0,children:e.jsxs(C,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(es,{className:"h-4 w-4"}),""]})}),e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsx(xs,{children:" "})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:ue,children:""})]})]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(Da,{className:"h-5 w-5"}),"/"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(C,{variant:"outline",onClick:Se,disabled:A,className:"gap-2",children:[e.jsx(Da,{className:"h-4 w-4"}),A?"...":""]}),e.jsx("input",{ref:_,type:"file",accept:".json",onChange:oe,className:"hidden"}),e.jsxs(C,{variant:"outline",onClick:()=>_.current?.click(),disabled:V,className:"gap-2",children:[e.jsx(_r,{className:"h-4 w-4"}),V?"...":""]})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs(js,{children:[e.jsx(mt,{asChild:!0,children:e.jsxs(C,{variant:"outline",size:"sm",className:"gap-2 text-destructive hover:text-destructive",children:[e.jsx(yr,{className:"h-4 w-4"}),""]})}),e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsx(xs,{children:" "})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:je,children:""})]})]})]})})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"space-y-2",children:e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:""})}),e.jsxs(js,{children:[e.jsx(mt,{asChild:!0,children:e.jsxs(C,{variant:"outline",disabled:r,className:"gap-2",children:[e.jsx(yr,{className:H("h-4 w-4",r&&"animate-spin")}),""]})}),e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsx(xs,{children:""})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:be,children:""})]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border border-dashed border-yellow-500/50 bg-yellow-500/5 p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(Oa,{className:"h-5 w-5 text-yellow-500"}),""]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"space-y-2",children:e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:""})}),e.jsxs(js,{children:[e.jsx(mt,{asChild:!0,children:e.jsxs(C,{variant:"destructive",className:"gap-2",children:[e.jsx(Oa,{className:"h-4 w-4"}),""]})}),e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsx(xs,{children:" React  "})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:()=>x(!0),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})]})]})]})]})}function Nw(){return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"rounded-lg border-2 border-primary/30 bg-gradient-to-r from-primary/5 to-primary/10 p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-shrink-0 rounded-lg bg-primary/10 p-2 sm:p-3",children:e.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-foreground mb-2",children:""}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mb-3",children:" GitHub  Star  "}),e.jsxs("a",{href:"https://github.com/Mai-with-u/MaiBot-Dashboard",target:"_blank",rel:"noopener noreferrer",className:H("inline-flex items-center gap-2 px-4 py-2 rounded-lg","bg-primary text-primary-foreground font-medium text-sm","hover:bg-primary/90 transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"),children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})})," GitHub",e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]})}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:[" ",um]}),e.jsxs("div",{className:"space-y-2 text-xs sm:text-sm text-muted-foreground",children:[e.jsxs("p",{children:[": ",go]}),e.jsx("p",{children:"MaiBot Web "})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"MaiBot "}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Mai-with-u"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"WebUI"}),e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:["Mai-with-u ",e.jsx("a",{href:"https://github.com/DrSmoothl",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline",children:"@MotricSeven"})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-xs sm:text-sm text-muted-foreground",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:""}),e.jsxs("ul",{className:"space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"React 19.2.0"}),e.jsx("li",{children:"TypeScript 5.7.2"}),e.jsx("li",{children:"Vite 6.0.7"}),e.jsx("li",{children:"TanStack Router 1.94.2"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:"UI "}),e.jsxs("ul",{className:"space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"shadcn/ui"}),e.jsx("li",{children:"Radix UI"}),e.jsx("li",{children:"Tailwind CSS 3.4.17"}),e.jsx("li",{children:"Lucide Icons"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:""}),e.jsxs("ul",{className:"space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"Python 3.12+"}),e.jsx("li",{children:"FastAPI"}),e.jsx("li",{children:"Uvicorn"}),e.jsx("li",{children:"WebSocket"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:""}),e.jsxs("ul",{className:"space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"Bun / npm"}),e.jsx("li",{children:"ESLint 9.17.0"}),e.jsx("li",{children:"PostCSS"})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-3",children:""}),e.jsx(Ze,{className:"h-[300px] sm:h-[400px]",children:e.jsxs("div",{className:"space-y-4 pr-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"UI "}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(et,{name:"React",description:"",license:"MIT"}),e.jsx(et,{name:"shadcn/ui",description:" React ",license:"MIT"}),e.jsx(et,{name:"Radix UI",description:"",license:"MIT"}),e.jsx(et,{name:"Tailwind CSS",description:" CSS ",license:"MIT"}),e.jsx(et,{name:"Lucide React",description:"",license:"ISC"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(et,{name:"TanStack Router",description:"",license:"MIT"}),e.jsx(et,{name:"Zustand",description:"",license:"MIT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(et,{name:"React Hook Form",description:"",license:"MIT"}),e.jsx(et,{name:"Zod",description:"TypeScript  schema ",license:"MIT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(et,{name:"clsx",description:" className ",license:"MIT"}),e.jsx(et,{name:"tailwind-merge",description:"Tailwind ",license:"MIT"}),e.jsx(et,{name:"class-variance-authority",description:"",license:"Apache-2.0"}),e.jsx(et,{name:"date-fns",description:"",license:"MIT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(et,{name:"Framer Motion",description:"React ",license:"MIT"}),e.jsx(et,{name:"vaul",description:"",license:"MIT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(et,{name:"FastAPI",description:" Python Web ",license:"MIT"}),e.jsx(et,{name:"Uvicorn",description:"ASGI ",license:"BSD-3-Clause"}),e.jsx(et,{name:"Pydantic",description:"",license:"MIT"}),e.jsx(et,{name:"python-multipart",description:"",license:"Apache-2.0"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(et,{name:"TypeScript",description:"JavaScript ",license:"Apache-2.0"}),e.jsx(et,{name:"Vite",description:"",license:"MIT"}),e.jsx(et,{name:"ESLint",description:"JavaScript ",license:"MIT"}),e.jsx(et,{name:"PostCSS",description:"CSS ",license:"MIT"})]})]})]})})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/5 border border-primary/20 p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:e.jsx("div",{className:"rounded-md bg-primary/10 px-2 py-1",children:e.jsx("span",{className:"text-xs sm:text-sm font-bold text-primary",children:"GPLv3"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm sm:text-base font-semibold text-foreground mb-1",children:"MaiBot WebUI"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" GNU General Public License v3.0  "})]})]})}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"MITApache-2.0BSD  "})]})]})]})}function et({name:l,description:i,license:r}){return e.jsxs("div",{className:"flex items-start justify-between gap-2 rounded-lg border bg-muted/30 p-2.5 sm:p-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-foreground truncate",children:l}),e.jsx("p",{className:"text-muted-foreground text-xs mt-0.5",children:i})]}),e.jsx("span",{className:"inline-flex items-center rounded-full bg-primary/10 px-2 py-0.5 text-[10px] font-medium text-primary flex-shrink-0",children:r})]})}function Vu({value:l,current:i,onChange:r,label:o,description:u}){const x=i===l;return e.jsxs("button",{onClick:()=>r(l),className:H("relative rounded-lg border-2 p-3 sm:p-4 text-left transition-all","hover:border-primary/50 hover:bg-accent/50",x?"border-primary bg-accent":"border-border"),children:[x&&e.jsx("div",{className:"absolute top-2 right-2 sm:top-3 sm:right-3 h-2 w-2 rounded-full bg-primary"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm sm:text-base font-medium",children:o}),e.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:u})]}),e.jsxs("div",{className:"mt-2 sm:mt-3 flex gap-1",children:[l==="light"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-200"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-300"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-400"})]}),l==="dark"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-700"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-800"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-900"})]}),l==="system"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-gradient-to-r from-slate-200 to-slate-700"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-gradient-to-r from-slate-300 to-slate-800"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-gradient-to-r from-slate-400 to-slate-900"})]})]})]})}function _a({value:l,current:i,onChange:r,label:o,colorClass:u}){const x=i===l;return e.jsxs("button",{onClick:()=>r(l),className:H("relative rounded-lg border-2 p-2 sm:p-3 text-left transition-all","hover:border-primary/50 hover:bg-accent/50",x?"border-primary bg-accent":"border-border"),children:[x&&e.jsx("div",{className:"absolute top-1.5 right-1.5 sm:top-2 sm:right-2 h-1.5 w-1.5 sm:h-2 sm:w-2 rounded-full bg-primary"}),e.jsxs("div",{className:"flex flex-col items-center gap-1.5 sm:gap-2",children:[e.jsx("div",{className:H("h-8 w-8 sm:h-10 sm:w-10 rounded-full",u)}),e.jsx("div",{className:"text-[10px] sm:text-xs font-medium text-center",children:o})]})]})}class yw{grad3;p;perm;constructor(i=0){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.p=[];for(let r=0;r<256;r++)this.p[r]=Math.floor(Math.random()*256);this.perm=[];for(let r=0;r<512;r++)this.perm[r]=this.p[r&255]}dot(i,r,o){return i[0]*r+i[1]*o}mix(i,r,o){return(1-o)*i+o*r}fade(i){return i*i*i*(i*(i*6-15)+10)}perlin2(i,r){const o=Math.floor(i)&255,u=Math.floor(r)&255;i-=Math.floor(i),r-=Math.floor(r);const x=this.fade(i),h=this.fade(r),f=this.perm[o]+u,g=this.perm[f],j=this.perm[f+1],v=this.perm[o+1]+u,y=this.perm[v],b=this.perm[v+1];return this.mix(this.mix(this.dot(this.grad3[g%12],i,r),this.dot(this.grad3[y%12],i-1,r),x),this.mix(this.dot(this.grad3[j%12],i,r-1),this.dot(this.grad3[b%12],i-1,r-1),x),h)}}function Sp(){const l=m.useRef(null),i=m.useRef(null),r=m.useRef(void 0),o=m.useRef({mouse:{x:-10,y:0,lx:0,ly:0,sx:0,sy:0,v:0,vs:0,a:0,set:!1},lines:[],paths:[],noise:new yw(Math.random()),bounding:null});return m.useEffect(()=>{const u=i.current,x=l.current;if(!u||!x)return;const h=o.current,f=()=>{const O=u.getBoundingClientRect();h.bounding=O,x.style.width=`${O.width}px`,x.style.height=`${O.height}px`},g=()=>{if(!h.bounding)return;const{width:O,height:A}=h.bounding;h.lines=[],h.paths.forEach(te=>te.remove()),h.paths=[];const D=10,V=32,z=O+200,_=A+30,T=Math.ceil(z/D),$=Math.ceil(_/V),E=(O-D*T)/2,se=(A-V*$)/2;for(let te=0;te<=T;te++){const ne=[];for(let Se=0;Se<=$;Se++){const oe={x:E+D*te,y:se+V*Se,wave:{x:0,y:0},cursor:{x:0,y:0,vx:0,vy:0}};ne.push(oe)}const ue=document.createElementNS("http://www.w3.org/2000/svg","path");x.appendChild(ue),h.paths.push(ue),h.lines.push(ne)}},j=O=>{const{lines:A,mouse:D,noise:V}=h;A.forEach(z=>{z.forEach(_=>{const T=V.perlin2((_.x+O*.0125)*.002,(_.y+O*.005)*.0015)*12;_.wave.x=Math.cos(T)*32,_.wave.y=Math.sin(T)*16;const $=_.x-D.sx,E=_.y-D.sy,se=Math.hypot($,E),te=Math.max(175,D.vs);if(se<te){const ne=1-se/te,ue=Math.cos(se*.001)*ne;_.cursor.vx+=Math.cos(D.a)*ue*te*D.vs*65e-5,_.cursor.vy+=Math.sin(D.a)*ue*te*D.vs*65e-5}_.cursor.vx+=(0-_.cursor.x)*.005,_.cursor.vy+=(0-_.cursor.y)*.005,_.cursor.vx*=.925,_.cursor.vy*=.925,_.cursor.x+=_.cursor.vx*2,_.cursor.y+=_.cursor.vy*2,_.cursor.x=Math.min(100,Math.max(-100,_.cursor.x)),_.cursor.y=Math.min(100,Math.max(-100,_.cursor.y))})})},v=(O,A=!0)=>{const D={x:O.x+O.wave.x+(A?O.cursor.x:0),y:O.y+O.wave.y+(A?O.cursor.y:0)};return D.x=Math.round(D.x*10)/10,D.y=Math.round(D.y*10)/10,D},y=()=>{const{lines:O,paths:A}=h;O.forEach((D,V)=>{let z=v(D[0],!1),_=`M ${z.x} ${z.y}`;D.forEach((T,$)=>{const E=$===D.length-1;z=v(T,!E),_+=`L ${z.x} ${z.y}`}),A[V].setAttribute("d",_)})},b=O=>{const{mouse:A}=h;A.sx+=(A.x-A.sx)*.1,A.sy+=(A.y-A.sy)*.1;const D=A.x-A.lx,V=A.y-A.ly,z=Math.hypot(D,V);A.v=z,A.vs+=(z-A.vs)*.1,A.vs=Math.min(100,A.vs),A.lx=A.x,A.ly=A.y,A.a=Math.atan2(V,D),u&&(u.style.setProperty("--x",`${A.sx}px`),u.style.setProperty("--y",`${A.sy}px`)),j(O),y(),r.current=requestAnimationFrame(b)},S=O=>{if(!h.bounding)return;const{mouse:A}=h;A.x=O.pageX-h.bounding.left,A.y=O.pageY-h.bounding.top+window.scrollY,A.set||(A.sx=A.x,A.sy=A.y,A.lx=A.x,A.ly=A.y,A.set=!0)},w=()=>{f(),g()};return f(),g(),window.addEventListener("resize",w),window.addEventListener("mousemove",S),r.current=requestAnimationFrame(b),()=>{window.removeEventListener("resize",w),window.removeEventListener("mousemove",S),r.current&&cancelAnimationFrame(r.current)}},[]),e.jsxs("div",{ref:i,className:"waves-background",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",pointerEvents:"none"},children:[e.jsx("div",{className:"waves-cursor",style:{position:"absolute",top:0,left:0,width:"0.5rem",height:"0.5rem",background:"hsl(var(--primary) / 0.3)",borderRadius:"50%",transform:"translate3d(calc(var(--x, -0.5rem) - 50%), calc(var(--y, 50%) - 50%), 0)",willChange:"transform",pointerEvents:"none"}}),e.jsx("svg",{ref:l,style:{display:"block",width:"100%",height:"100%"},children:e.jsx("style",{children:`
          path {
            fill: none;
            stroke: hsl(var(--primary) / 0.20);
            stroke-width: 1px;
          }
        `})})]})}function ww(){const[l,i]=m.useState(""),[r,o]=m.useState(!1),[u,x]=m.useState(""),[h,f]=m.useState(!0),g=ka(),{enableWavesBackground:j,setEnableWavesBackground:v}=uj(),{theme:y,setTheme:b}=dm();m.useEffect(()=>{(async()=>{try{await om()&&g({to:"/"})}catch{}finally{f(!1)}})()},[g]);const w=y==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":y,O=()=>{b(w==="dark"?"light":"dark")},A=async D=>{if(D.preventDefault(),x(""),!l.trim()){x(" Access Token");return}o(!0);try{const V=await fetch("/api/webui/auth/verify",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({token:l.trim()})}),z=await V.json();V.ok&&z.valid?z.is_first_setup?g({to:"/setup"}):g({to:"/"}):x(z.message||"Token ")}catch(V){console.error("Token :",V),x("")}finally{o(!1)}};return h?e.jsxs("div",{className:"relative flex min-h-screen items-center justify-center overflow-hidden bg-background p-4",children:[j&&e.jsx(Sp,{}),e.jsx("div",{className:"text-muted-foreground",children:"..."})]}):e.jsxs("div",{className:"relative flex min-h-screen items-center justify-center overflow-hidden bg-background p-4",children:[j&&e.jsx(Sp,{}),e.jsxs(Ve,{className:"relative z-10 w-full max-w-md shadow-2xl backdrop-blur-xl bg-card/80 border-border/50",children:[e.jsx("button",{onClick:O,className:"absolute right-4 top-4 rounded-lg p-2 hover:bg-accent transition-colors z-10 text-foreground",title:w==="dark"?"":"",children:w==="dark"?e.jsx(Ag,{className:"h-5 w-5",strokeWidth:2.5,fill:"none"}):e.jsx(Og,{className:"h-5 w-5",strokeWidth:2.5,fill:"none"})}),e.jsxs(rs,{className:"space-y-4 text-center",children:[e.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-primary/10",children:e.jsx(xp,{className:"h-8 w-8 text-primary",strokeWidth:2,fill:"none"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(cs,{className:"text-2xl font-bold",children:" MaiBot"}),e.jsx(st,{className:"text-base",children:" Access Token "})]})]}),e.jsx(gs,{children:e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"token",className:"text-sm font-medium",children:"Access Token"}),e.jsxs("div",{className:"relative",children:[e.jsx(Dg,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground",strokeWidth:2,fill:"none"}),e.jsx(ie,{id:"token",type:"password",placeholder:" Access Token",value:l,onChange:D=>i(D.target.value),className:H("pl-10",u&&"border-red-500 focus-visible:ring-red-500"),disabled:r,autoFocus:!0,autoComplete:"off"})]})]}),u&&e.jsxs("div",{className:"flex items-center gap-2 rounded-md bg-red-50 p-3 text-sm text-red-600 dark:bg-red-950/50 dark:text-red-400",children:[e.jsx(Ot,{className:"h-4 w-4 flex-shrink-0",strokeWidth:2,fill:"none"}),e.jsx("span",{children:u})]}),e.jsx(C,{type:"submit",className:"w-full",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"..."]}):""}),e.jsxs(Qs,{children:[e.jsx(mm,{asChild:!0,children:e.jsxs("button",{className:"w-full text-center text-sm text-primary hover:text-primary/80 transition-colors underline-offset-4 hover:underline flex items-center justify-center gap-1",children:[e.jsx(Rg,{className:"h-4 w-4",strokeWidth:2,fill:"none"})," Token Token"]})}),e.jsxs(qs,{className:"sm:max-w-md",children:[e.jsxs(Gs,{children:[e.jsxs(Vs,{className:"flex items-center gap-2",children:[e.jsx(xp,{className:"h-5 w-5 text-primary",strokeWidth:2,fill:"none"})," Access Token"]}),e.jsx(Ws,{children:"Access Token  MaiBot WebUI "})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-2",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ly,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5",strokeWidth:2,fill:"none"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" MaiBot  WebUI Access Token"}),e.jsxs("div",{className:"rounded bg-background p-2 font-mono text-xs",children:[e.jsx("p",{className:"text-muted-foreground",children:" WebUI Access Token: abc123..."}),e.jsx("p",{className:"text-muted-foreground",children:"  Token  WebUI"})]})]})]})}),e.jsx("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-2",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Aa,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5",strokeWidth:2,fill:"none"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Token "}),e.jsx("div",{className:"rounded bg-background p-2 font-mono text-xs break-all",children:e.jsx("code",{className:"text-primary",children:"data/webui.json"})}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-background rounded",children:"access_token"})," "]})]})]})}),e.jsx("div",{className:"rounded-lg border border-yellow-200 dark:border-yellow-900 bg-yellow-50 dark:bg-yellow-950/30 p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ot,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-500 flex-shrink-0 mt-0.5",strokeWidth:2,fill:"none"}),e.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-300 space-y-1",children:[e.jsx("p",{className:"font-semibold",children:""}),e.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-xs",children:[e.jsx("li",{children:" Token"}),e.jsx("li",{children:" Token"})]})]})]})})]})]})]}),e.jsxs(js,{children:[e.jsx(mt,{asChild:!0,children:e.jsxs("button",{className:"w-full text-center text-sm text-muted-foreground hover:text-foreground transition-colors underline-offset-4 hover:underline flex items-center justify-center gap-1",children:[e.jsx(hn,{className:"h-4 w-4",strokeWidth:2,fill:"none"}),""]})}),e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsxs(ms,{className:"flex items-center gap-2",children:[e.jsx(hn,{className:"h-5 w-5 text-primary",strokeWidth:2,fill:"none"}),""]}),e.jsx(xs,{children:""})]}),e.jsx("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-2",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:""})}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:()=>v(!1),children:""})]})]})]})]})})]}),e.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center text-xs text-muted-foreground",children:e.jsx("p",{children:iw})})]})}const Ys=m.forwardRef(({className:l,...i},r)=>e.jsx("textarea",{className:H("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",l),ref:r,...i}));Ys.displayName="Textarea";const jo=m.forwardRef(({className:l,orientation:i="horizontal",decorative:r=!0,...o},u)=>e.jsx(lg,{ref:u,decorative:r,orientation:i,className:H("shrink-0 bg-border",i==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",l),...o}));jo.displayName=lg.displayName;function _w({config:l,onChange:i}){const r=u=>{u.trim()&&!l.alias_names.includes(u.trim())&&i({...l,alias_names:[...l.alias_names,u.trim()]})},o=u=>{i({...l,alias_names:l.alias_names.filter((x,h)=>h!==u)})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{htmlFor:"qq_account",children:"QQ *"}),e.jsx(ie,{id:"qq_account",type:"number",placeholder:"QQ",value:l.qq_account||"",onChange:u=>i({...l,qq_account:Number(u.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"QQ"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{htmlFor:"nickname",children:" *"}),e.jsx(ie,{id:"nickname",placeholder:"",value:l.nickname,onChange:u=>i({...l,nickname:u.target.value})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{children:""}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:l.alias_names.map((u,x)=>e.jsxs(Ye,{variant:"secondary",className:"gap-1",children:[u,e.jsx("button",{type:"button",onClick:()=>o(x),className:"ml-1 hover:text-destructive",children:e.jsx(fl,{className:"h-3 w-3"})})]},x))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{id:"alias_input",placeholder:"",onKeyPress:u=>{u.key==="Enter"&&(r(u.target.value),u.target.value="")}}),e.jsx(C,{type:"button",variant:"outline",onClick:()=>{const u=document.getElementById("alias_input");u&&(r(u.value),u.value="")},children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})}function Sw({config:l,onChange:i}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{htmlFor:"personality",children:" *"}),e.jsx(Ys,{id:"personality",placeholder:"120",value:l.personality,onChange:r=>i({...l,personality:r.target.value}),rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{htmlFor:"reply_style",children:" *"}),e.jsx(Ys,{id:"reply_style",placeholder:"",value:l.reply_style,onChange:r=>i({...l,reply_style:r.target.value}),rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{htmlFor:"interest",children:" *"}),e.jsx(Ys,{id:"interest",placeholder:"",value:l.interest,onChange:r=>i({...l,interest:r.target.value}),rows:2}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(jo,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{htmlFor:"plan_style",children:" *"}),e.jsx(Ys,{id:"plan_style",placeholder:"",value:l.plan_style,onChange:r=>i({...l,plan_style:r.target.value}),rows:4}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{htmlFor:"private_plan_style",children:" *"}),e.jsx(Ys,{id:"private_plan_style",placeholder:"",value:l.private_plan_style,onChange:r=>i({...l,private_plan_style:r.target.value}),rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})}function Cw({config:l,onChange:i}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{htmlFor:"emoji_chance",children:""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[(l.emoji_chance*100).toFixed(0),"%"]})]}),e.jsx(ie,{id:"emoji_chance",type:"range",min:"0",max:"1",step:"0.1",value:l.emoji_chance,onChange:r=>i({...l,emoji_chance:Number(r.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{htmlFor:"max_reg_num",children:""}),e.jsx(ie,{id:"max_reg_num",type:"number",min:"1",max:"200",value:l.max_reg_num,onChange:r=>i({...l,max_reg_num:Number(r.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(k,{htmlFor:"do_replace",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Fe,{id:"do_replace",checked:l.do_replace,onCheckedChange:r=>i({...l,do_replace:r})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{htmlFor:"check_interval",children:""}),e.jsx(ie,{id:"check_interval",type:"number",min:"1",max:"120",value:l.check_interval,onChange:r=>i({...l,check_interval:Number(r.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(jo,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(k,{htmlFor:"steal_emoji",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Fe,{id:"steal_emoji",checked:l.steal_emoji,onCheckedChange:r=>i({...l,steal_emoji:r})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(k,{htmlFor:"content_filtration",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Fe,{id:"content_filtration",checked:l.content_filtration,onCheckedChange:r=>i({...l,content_filtration:r})})]}),l.content_filtration&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{htmlFor:"filtration_prompt",children:""}),e.jsx(ie,{id:"filtration_prompt",placeholder:"",value:l.filtration_prompt,onChange:r=>i({...l,filtration_prompt:r.target.value})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})}function kw({config:l,onChange:i}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(k,{htmlFor:"enable_tool",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Fe,{id:"enable_tool",checked:l.enable_tool,onCheckedChange:r=>i({...l,enable_tool:r})})]}),e.jsx(jo,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(k,{htmlFor:"all_global",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Fe,{id:"all_global",checked:l.all_global,onCheckedChange:r=>i({...l,all_global:r})})]})]})}function Tw({config:l,onChange:i}){const[r,o]=m.useState(!1);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-lg bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx("svg",{className:"h-5 w-5 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1 text-sm",children:[e.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100 mb-1",children:" (SiliconFlow)"}),e.jsx("p",{className:"text-blue-700 dark:text-blue-300 mb-2",children:" DeepSeek V3Qwen  API Key "}),e.jsxs("a",{href:"https://cloud.siliconflow.cn",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 dark:text-blue-400 hover:underline font-medium",children:[" API Key",e.jsx(ao,{className:"h-3 w-3"})]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{htmlFor:"siliconflow_api_key",children:"SiliconFlow API Key *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ie,{id:"siliconflow_api_key",type:r?"text":"password",placeholder:"sk-...",value:l.api_key,onChange:u=>i({api_key:u.target.value}),className:"font-mono pr-10"}),e.jsx(C,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>o(!r),children:r?e.jsx(wr,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Gt,{className:"h-4 w-4 text-muted-foreground"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" API "})]}),e.jsxs("div",{className:"rounded-lg bg-muted/50 p-4 text-sm space-y-2",children:[e.jsx("p",{className:"font-medium",children:""}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground ml-2",children:[e.jsx("li",{children:"DeepSeek V3 - "}),e.jsx("li",{children:"Qwen3 30B - "}),e.jsx("li",{children:"Qwen3 VL 30B - "}),e.jsx("li",{children:"SenseVoice - "}),e.jsx("li",{children:"BGE-M3 - "}),e.jsx("li",{children:" (LPMM)"})]})]}),e.jsx("div",{className:"rounded-lg border border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-950/30 p-4",children:e.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-100",children:[e.jsx("span",{className:"font-medium",children:" "}),'"  " API ']})})]})}async function Ew(){const l=await we("/api/webui/config/bot",{method:"GET",headers:Is()});if(!l.ok)throw new Error("Bot");const r=(await l.json()).config.bot||{};return{qq_account:r.qq_account||0,nickname:r.nickname||"",alias_names:r.alias_names||[]}}async function zw(){const l=await we("/api/webui/config/bot",{method:"GET",headers:Is()});if(!l.ok)throw new Error("");const r=(await l.json()).config.personality||{};return{personality:r.personality||"",reply_style:r.reply_style||"",interest:r.interest||"",plan_style:r.plan_style||"",private_plan_style:r.private_plan_style||""}}async function Mw(){const l=await we("/api/webui/config/bot",{method:"GET",headers:Is()});if(!l.ok)throw new Error("");const r=(await l.json()).config.emoji||{};return{emoji_chance:r.emoji_chance??.4,max_reg_num:r.max_reg_num??40,do_replace:r.do_replace??!0,check_interval:r.check_interval??10,steal_emoji:r.steal_emoji??!0,content_filtration:r.content_filtration??!1,filtration_prompt:r.filtration_prompt||""}}async function Aw(){const l=await we("/api/webui/config/bot",{method:"GET",headers:Is()});if(!l.ok)throw new Error("");const r=(await l.json()).config,o=r.tool||{},u=r.expression||{};return{enable_tool:o.enable_tool??!0,all_global:u.all_global_jargon??!0}}async function Ow(){const l=await we("/api/webui/config/model",{method:"GET",headers:Is()});if(!l.ok)throw new Error("");return{api_key:((await l.json()).config.api_providers||[]).find(x=>x.name==="SiliconFlow")?.api_key||""}}async function Dw(l){const i=await we("/api/webui/config/bot/section/bot",{method:"POST",headers:Is(),body:JSON.stringify(l)});if(!i.ok){const r=await i.json();throw new Error(r.detail||"Bot")}return await i.json()}async function Rw(l){const i=await we("/api/webui/config/bot/section/personality",{method:"POST",headers:Is(),body:JSON.stringify(l)});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return await i.json()}async function Lw(l){const i=await we("/api/webui/config/bot/section/emoji",{method:"POST",headers:Is(),body:JSON.stringify(l)});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return await i.json()}async function Uw(l){const i=[];i.push(we("/api/webui/config/bot/section/tool",{method:"POST",headers:Is(),body:JSON.stringify({enable_tool:l.enable_tool})})),i.push(we("/api/webui/config/bot/section/expression",{method:"POST",headers:Is(),body:JSON.stringify({all_global_jargon:l.all_global})}));const r=await Promise.all(i);for(const o of r)if(!o.ok){const u=await o.json();throw new Error(u.detail||"")}return{success:!0}}async function Bw(l){const i=await we("/api/webui/config/model",{method:"GET",headers:Is()});if(!i.ok)throw new Error("");const o=(await i.json()).config,u=o.api_providers||[],x=u.findIndex(g=>g.name==="SiliconFlow");x>=0?u[x]={...u[x],api_key:l.api_key}:u.push({name:"SiliconFlow",base_url:"https://api.siliconflow.cn/v1",api_key:l.api_key,client_type:"openai",max_retry:3,timeout:120,retry_interval:5});const h={...o,api_providers:u},f=await we("/api/webui/config/model",{method:"POST",headers:Is(),body:JSON.stringify(h)});if(!f.ok){const g=await f.json();throw new Error(g.detail||"")}return await f.json()}async function Cp(){const l=await we("/api/webui/setup/complete",{method:"POST"});if(!l.ok){const i=await l.json();throw new Error(i.message||"")}return await l.json()}function Hw(){return e.jsx(jn,{children:e.jsx($w,{})})}function $w(){const l=ka(),{toast:i}=Ks(),{triggerRestart:r}=Il(),[o,u]=m.useState(0),[x,h]=m.useState(!1),[f,g]=m.useState(!1),[j,v]=m.useState(!0),[y,b]=m.useState({qq_account:0,nickname:"",alias_names:[]}),[S,w]=m.useState({personality:"",reply_style:"",interest:"",plan_style:`1.****action****
2.
3.
4.
5.`,private_plan_style:`1.****action****
2.
3.`}),[O,A]=m.useState({emoji_chance:.4,max_reg_num:40,do_replace:!0,check_interval:10,steal_emoji:!0,content_filtration:!1,filtration_prompt:""}),[D,V]=m.useState({enable_tool:!0,all_global:!0}),[z,_]=m.useState({api_key:""}),T=[{id:"bot-basic",title:"Bot",description:"",icon:fr},{id:"personality",title:"",description:"",icon:oo},{id:"emoji",title:"",description:"",icon:im},{id:"other",title:"",description:"",icon:ji},{id:"siliconflow",title:"API",description:"API",icon:Dg}],$=(o+1)/T.length*100;m.useEffect(()=>{(async()=>{try{v(!0);const[je,be,U,P,X]=await Promise.all([Ew(),zw(),Mw(),Aw(),Ow()]);b(je),w(be),A(U),V(P),_(X)}catch(je){i({title:"",description:je instanceof Error?je.message:"",variant:"destructive"})}finally{v(!1)}})()},[i]);const E=async()=>{g(!0);try{switch(o){case 0:await Dw(y);break;case 1:await Rw(S);break;case 2:await Lw(O);break;case 3:await Uw(D);break;case 4:await Bw(z);break}return i({title:"",description:`${T[o].title}`}),!0}catch(oe){return i({title:"",description:oe instanceof Error?oe.message:"",variant:"destructive"}),!1}finally{g(!1)}},se=async()=>{await E()&&o<T.length-1&&u(o+1)},te=()=>{o>0&&u(o-1)},ne=async()=>{h(!0);try{if(!await E()){h(!1);return}await Cp(),i({title:"",description:"..."}),await r()}catch(oe){i({title:"",description:oe instanceof Error?oe.message:"",variant:"destructive"})}finally{h(!1)}},ue=async()=>{try{await Cp(),l({to:"/"})}catch(oe){i({title:"",description:oe instanceof Error?oe.message:"",variant:"destructive"})}},Se=()=>{switch(o){case 0:return e.jsx(_w,{config:y,onChange:b});case 1:return e.jsx(Sw,{config:S,onChange:w});case 2:return e.jsx(Cw,{config:O,onChange:A});case 3:return e.jsx(kw,{config:D,onChange:V});case 4:return e.jsx(Tw,{config:z,onChange:_});default:return null}};return e.jsxs("div",{className:"relative flex min-h-screen flex-col items-center justify-center overflow-hidden bg-gradient-to-br from-primary/5 via-background to-secondary/5 p-4 md:p-6",children:[e.jsx(vn,{}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute left-1/4 top-1/4 h-64 w-64 md:h-96 md:w-96 rounded-full bg-primary/5 blur-3xl"}),e.jsx("div",{className:"absolute right-1/4 bottom-1/4 h-64 w-64 md:h-96 md:w-96 rounded-full bg-secondary/5 blur-3xl"})]}),j?e.jsxs("div",{className:"relative z-10 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center",children:e.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-primary border-t-transparent"})}),e.jsx("p",{className:"text-lg font-medium",children:"..."}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:""})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative z-10 w-full max-w-4xl",children:[e.jsxs("div",{className:"mb-6 md:mb-8 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 md:h-16 md:w-16 items-center justify-center rounded-2xl bg-primary/10",children:e.jsx(Uy,{className:"h-6 w-6 md:h-8 md:w-8 text-primary",strokeWidth:2,fill:"none"})}),e.jsx("h1",{className:"mb-2 text-2xl md:text-3xl font-bold",children:""}),e.jsxs("p",{className:"text-sm md:text-base text-muted-foreground",children:[" ",um," "]})]}),e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between text-xs md:text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[" ",o+1," / ",T.length]}),e.jsxs("span",{className:"font-medium text-primary",children:[Math.round($),"%"]})]}),e.jsx(gn,{value:$,className:"h-2"})]}),e.jsx("div",{className:"mb-6 md:mb-8 flex justify-between",children:T.map((oe,je)=>{const be=oe.icon;return e.jsxs("div",{className:H("flex flex-1 flex-col items-center gap-1 md:gap-2",je<T.length-1&&"relative"),children:[je<T.length-1&&e.jsx("div",{className:H("absolute left-1/2 top-3 md:top-4 h-0.5 w-full",je<o?"bg-primary":"bg-border")}),e.jsx("div",{className:H("relative z-10 flex h-6 w-6 md:h-8 md:w-8 items-center justify-center rounded-full border-2 transition-all",je===o||je<o?"border-primary bg-primary text-primary-foreground":"border-border bg-background text-muted-foreground"),children:je<o?e.jsx(aa,{className:"h-3 w-3 md:h-4 md:w-4",strokeWidth:2.5,fill:"none"}):e.jsx(be,{className:"h-3 w-3 md:h-4 md:w-4"})}),e.jsx("span",{className:H("text-[10px] md:text-xs text-center max-w-[60px] md:max-w-none truncate md:whitespace-normal",je===o?"font-medium text-foreground":"text-muted-foreground"),title:oe.title,children:oe.title})]},oe.id)})}),e.jsx(Ve,{className:"mb-6 md:mb-8 shadow-lg",children:e.jsx(gs,{className:"p-4 md:p-8",children:e.jsxs("div",{className:"min-h-[300px] md:min-h-[400px]",children:[e.jsxs("div",{className:"mb-4 md:mb-6",children:[e.jsx("h2",{className:"mb-2 text-xl md:text-2xl font-semibold",children:T[o].title}),e.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:T[o].description})]}),e.jsx(Ze,{className:"h-[400px] md:h-[500px]",children:e.jsx("div",{className:"pr-2",children:Se()})})]})})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 sm:gap-0",children:[e.jsx(C,{variant:"outline",onClick:te,disabled:o===0||f,className:"w-full sm:w-auto order-2 sm:order-1",children:""}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto order-1 sm:order-2",children:[e.jsxs(js,{children:[e.jsx(mt,{asChild:!0,children:e.jsxs(C,{variant:"ghost",className:"flex-1 sm:flex-none gap-2",disabled:f||x,children:[e.jsx(By,{className:"h-4 w-4",strokeWidth:2,fill:"none"}),""]})}),e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsx(xs,{children:""})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:ue,children:""})]})]})]}),o===T.length-1?e.jsx(C,{onClick:ne,disabled:x||f,className:"flex-1 sm:flex-none",children:x||f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),f?"...":"..."]}):e.jsxs(e.Fragment,{children:["",e.jsx(aa,{className:"ml-2 h-4 w-4",strokeWidth:2,fill:"none"})]})}):e.jsx(C,{onClick:se,disabled:f,className:"flex-1 sm:flex-none",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"..."]}):e.jsxs(e.Fragment,{children:["",e.jsx(Hy,{className:"ml-2 h-4 w-4",strokeWidth:2,fill:"none"})]})})]})]})]}),e.jsx("div",{className:"relative z-10 mt-6 md:mt-8 text-center text-xs text-muted-foreground",children:e.jsx("p",{children:""})})]})]})}function fj(){const l=ka();return e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background p-4",children:e.jsxs("div",{className:"w-full max-w-2xl text-center",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("h1",{className:"text-[150px] font-black leading-none text-primary/10 select-none sm:text-[200px]",children:"404"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx($t,{className:"h-20 w-20 text-primary/30 sm:h-24 sm:w-24"})})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground sm:text-3xl",children:""}),e.jsx("p",{className:"text-base text-muted-foreground sm:text-lg max-w-md mx-auto",children:" URL "})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsxs(C,{size:"lg",onClick:()=>l({to:"/"}),className:"gap-2 w-full sm:w-auto",children:[e.jsx(po,{className:"h-4 w-4"}),""]}),e.jsxs(C,{size:"lg",variant:"outline",onClick:()=>window.history.back(),className:"gap-2 w-full sm:w-auto",children:[e.jsx(hi,{className:"h-4 w-4"}),""]})]}),e.jsx("div",{className:"mt-12 pt-8 border-t border-border",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:""})})]})})}const qw=Ct.memo(function({config:i,onChange:r}){const o=()=>{r({...i,platforms:[...i.platforms,""]})},u=j=>{r({...i,platforms:i.platforms.filter((v,y)=>y!==j)})},x=(j,v)=>{const y=[...i.platforms];y[j]=v,r({...i,platforms:y})},h=()=>{r({...i,alias_names:[...i.alias_names,""]})},f=j=>{r({...i,alias_names:i.alias_names.filter((v,y)=>y!==j)})},g=(j,v)=>{const y=[...i.alias_names];y[j]=v,r({...i,alias_names:y})};return e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"platform",children:""}),e.jsx(ie,{id:"platform",value:i.platform,onChange:j=>r({...i,platform:j.target.value}),placeholder:"qq"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"qq_account",children:"QQ"}),e.jsx(ie,{id:"qq_account",value:i.qq_account,onChange:j=>r({...i,qq_account:j.target.value}),placeholder:"123456789"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"nickname",children:""}),e.jsx(ie,{id:"nickname",value:i.nickname,onChange:j=>r({...i,nickname:j.target.value}),placeholder:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{children:""}),e.jsxs(C,{onClick:o,size:"sm",variant:"outline",children:[e.jsx(ut,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-2",children:[i.platforms.map((j,v)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{value:j,onChange:y=>x(v,y.target.value),placeholder:"wx:114514"}),e.jsxs(js,{children:[e.jsx(mt,{asChild:!0,children:e.jsx(C,{size:"icon",variant:"outline",children:e.jsx(es,{className:"h-4 w-4"})})}),e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:[' "',j||"()",'" ']})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:()=>u(v),children:""})]})]})]})]},v)),i.platforms.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{children:""}),e.jsxs(C,{onClick:h,size:"sm",variant:"outline",children:[e.jsx(ut,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-2",children:[i.alias_names.map((j,v)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{value:j,onChange:y=>g(v,y.target.value),placeholder:""}),e.jsxs(js,{children:[e.jsx(mt,{asChild:!0,children:e.jsx(C,{size:"icon",variant:"outline",children:e.jsx(es,{className:"h-4 w-4"})})}),e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:[' "',j||"()",'" ']})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:()=>f(v),children:""})]})]})]})]},v)),i.alias_names.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]})]})]})})}),Gw=Ct.memo(function({config:i,onChange:r}){const o=()=>{r({...i,states:[...i.states,""]})},u=h=>{r({...i,states:i.states.filter((f,g)=>g!==h)})},x=(h,f)=>{const g=[...i.states];g[h]=f,r({...i,states:g})};return e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"personality",children:""}),e.jsx(Ys,{id:"personality",value:i.personality,onChange:h=>r({...i,personality:h.target.value}),placeholder:"120",rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"120"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"reply_style",children:""}),e.jsx(Ys,{id:"reply_style",value:i.reply_style,onChange:h=>r({...i,reply_style:h.target.value}),placeholder:"",rows:3})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"interest",children:""}),e.jsx(Ys,{id:"interest",value:i.interest,onChange:h=>r({...i,interest:h.target.value}),placeholder:"",rows:2})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"plan_style",children:""}),e.jsx(Ys,{id:"plan_style",value:i.plan_style,onChange:h=>r({...i,plan_style:h.target.value}),placeholder:"",rows:5})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"visual_style",children:""}),e.jsx(Ys,{id:"visual_style",value:i.visual_style,onChange:h=>r({...i,visual_style:h.target.value}),placeholder:"",rows:3})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"private_plan_style",children:""}),e.jsx(Ys,{id:"private_plan_style",value:i.private_plan_style,onChange:h=>r({...i,private_plan_style:h.target.value}),placeholder:"",rows:4})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{children:""}),e.jsxs(C,{onClick:o,size:"sm",variant:"outline",children:[e.jsx(ut,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsx("div",{className:"space-y-2",children:i.states.map((h,f)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ys,{value:h,onChange:g=>x(f,g.target.value),placeholder:"",rows:2}),e.jsxs(js,{children:[e.jsx(mt,{asChild:!0,children:e.jsx(C,{size:"icon",variant:"outline",children:e.jsx(es,{className:"h-4 w-4"})})}),e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsx(xs,{children:""})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:()=>u(f),children:""})]})]})]})]},f))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"state_probability",children:""}),e.jsx(ie,{id:"state_probability",type:"number",step:"0.1",min:"0",max:"1",value:i.state_probability,onChange:h=>r({...i,state_probability:parseFloat(h.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" personality 0.0-1.0"})]})]})]})})}),Ue=fy,Be=py,Re=m.forwardRef(({className:l,children:i,...r},o)=>e.jsxs(fg,{ref:o,className:H("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",l),...r,children:[i,e.jsx(dy,{asChild:!0,children:e.jsx(Fa,{className:"h-4 w-4 opacity-50"})})]}));Re.displayName=fg.displayName;const pj=m.forwardRef(({className:l,...i},r)=>e.jsx(pg,{ref:r,className:H("flex cursor-default items-center justify-center py-1",l),...i,children:e.jsx(fi,{className:"h-4 w-4"})}));pj.displayName=pg.displayName;const gj=m.forwardRef(({className:l,...i},r)=>e.jsx(gg,{ref:r,className:H("flex cursor-default items-center justify-center py-1",l),...i,children:e.jsx(Fa,{className:"h-4 w-4"})}));gj.displayName=gg.displayName;const Le=m.forwardRef(({className:l,children:i,position:r="popper",...o},u)=>e.jsx(uy,{children:e.jsxs(jg,{ref:u,className:H("relative z-[100] max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-hidden rounded-md border border-border bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",l),position:r,...o,children:[e.jsx(pj,{}),e.jsx(my,{className:H("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i}),e.jsx(gj,{})]})}));Le.displayName=jg.displayName;const Vw=m.forwardRef(({className:l,...i},r)=>e.jsx(vg,{ref:r,className:H("px-2 py-1.5 text-sm font-semibold",l),...i}));Vw.displayName=vg.displayName;const ee=m.forwardRef(({className:l,children:i,...r},o)=>e.jsxs(bg,{ref:o,className:H("relative flex w-full cursor-default select-none items-center rounded-sm py-2 pl-2 pr-8 text-sm outline-none bg-white dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 focus:bg-gray-100 dark:focus:bg-gray-800 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l),...r,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(xy,{children:e.jsx(ea,{className:"h-4 w-4"})})}),e.jsx(hy,{children:i})]}));ee.displayName=bg.displayName;const Fw=m.forwardRef(({className:l,...i},r)=>e.jsx(Ng,{ref:r,className:H("-mx-1 my-1 h-px bg-muted",l),...i}));Fw.displayName=Ng.displayName;const Ia=FN,Qa=IN,La=m.forwardRef(({className:l,align:i="center",sideOffset:r=4,...o},u)=>e.jsx(VN,{children:e.jsx(ng,{ref:u,align:i,sideOffset:r,className:H("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",l),...o})}));La.displayName=ng.displayName;const Iw=Ct.memo(function({value:i,onChange:r}){const[o,u]=m.useState("00"),[x,h]=m.useState("00"),[f,g]=m.useState("23"),[j,v]=m.useState("59");m.useEffect(()=>{const b=i.split("-");if(b.length===2){const[S,w]=b,[O,A]=S.split(":"),[D,V]=w.split(":");O&&u(O.padStart(2,"0")),A&&h(A.padStart(2,"0")),D&&g(D.padStart(2,"0")),V&&v(V.padStart(2,"0"))}},[i]);const y=(b,S,w,O)=>{const A=`${b}:${S}-${w}:${O}`;r(A)};return e.jsxs(Ia,{children:[e.jsx(Qa,{asChild:!0,children:e.jsxs(C,{variant:"outline",className:"w-full justify-start font-mono text-sm",children:[e.jsx(xi,{className:"h-4 w-4 mr-2"}),i||""]})}),e.jsx(La,{className:"w-72 sm:w-80",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-3",children:""}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-xs",children:""}),e.jsxs(Ue,{value:o,onValueChange:b=>{u(b),y(b,x,f,j)},children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsx(Le,{children:Array.from({length:24},(b,S)=>S).map(b=>e.jsx(ee,{value:b.toString().padStart(2,"0"),children:b.toString().padStart(2,"0")},b))})]})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-xs",children:""}),e.jsxs(Ue,{value:x,onValueChange:b=>{h(b),y(o,b,f,j)},children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsx(Le,{children:Array.from({length:60},(b,S)=>S).map(b=>e.jsx(ee,{value:b.toString().padStart(2,"0"),children:b.toString().padStart(2,"0")},b))})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-3",children:""}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-xs",children:""}),e.jsxs(Ue,{value:f,onValueChange:b=>{g(b),y(o,x,b,j)},children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsx(Le,{children:Array.from({length:24},(b,S)=>S).map(b=>e.jsx(ee,{value:b.toString().padStart(2,"0"),children:b.toString().padStart(2,"0")},b))})]})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-xs",children:""}),e.jsxs(Ue,{value:j,onValueChange:b=>{v(b),y(o,x,f,b)},children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsx(Le,{children:Array.from({length:60},(b,S)=>S).map(b=>e.jsx(ee,{value:b.toString().padStart(2,"0"),children:b.toString().padStart(2,"0")},b))})]})]})]})]})]})})]})}),Qw=Ct.memo(function({rule:i}){const r=`{ target = "${i.target}", time = "${i.time}", value = ${i.value.toFixed(1)} }`;return e.jsxs(Ia,{children:[e.jsx(Qa,{asChild:!0,children:e.jsxs(C,{variant:"outline",size:"sm",children:[e.jsx(Gt,{className:"h-4 w-4 mr-1"}),""]})}),e.jsx(La,{className:"w-80 sm:w-96",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:""}),e.jsx("div",{className:"rounded-md bg-muted p-3 font-mono text-xs break-all",children:r}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" bot_config.toml "})]})})]})}),Yw=Ct.memo(function({config:i,onChange:r}){const o=()=>{r({...i,talk_value_rules:[...i.talk_value_rules,{target:"",time:"00:00-23:59",value:1}]})},u=h=>{r({...i,talk_value_rules:i.talk_value_rules.filter((f,g)=>g!==h)})},x=(h,f,g)=>{const j=[...i.talk_value_rules];j[h]={...j[h],[f]:g},r({...i,talk_value_rules:j})};return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"talk_value",children:""}),e.jsx(ie,{id:"talk_value",type:"number",step:"0.1",min:"0",max:"1",value:i.talk_value,onChange:h=>r({...i,talk_value:parseFloat(h.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" 0-1"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"mentioned_bot_reply",checked:i.mentioned_bot_reply,onCheckedChange:h=>r({...i,mentioned_bot_reply:h})}),e.jsx(k,{htmlFor:"mentioned_bot_reply",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"max_context_size",children:""}),e.jsx(ie,{id:"max_context_size",type:"number",min:"1",value:i.max_context_size,onChange:h=>r({...i,max_context_size:parseInt(h.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"planner_smooth",children:""}),e.jsx(ie,{id:"planner_smooth",type:"number",step:"1",min:"0",value:i.planner_smooth,onChange:h=>r({...i,planner_smooth:parseFloat(h.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" planner  1-50 "})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"enable_talk_value_rules",checked:i.enable_talk_value_rules,onCheckedChange:h=>r({...i,enable_talk_value_rules:h})}),e.jsx(k,{htmlFor:"enable_talk_value_rules",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"include_planner_reasoning",checked:i.include_planner_reasoning,onCheckedChange:h=>r({...i,include_planner_reasoning:h})}),e.jsx(k,{htmlFor:"include_planner_reasoning",className:"cursor-pointer",children:" planner  replyer"})]})]})]}),i.enable_talk_value_rules&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"ID"})]}),e.jsxs(C,{onClick:o,size:"sm",children:[e.jsx(ut,{className:"h-4 w-4 mr-1"}),""]})]}),i.talk_value_rules&&i.talk_value_rules.length>0?e.jsx("div",{className:"space-y-4",children:i.talk_value_rules.map((h,f)=>e.jsxs("div",{className:"rounded-lg border p-4 bg-muted/50 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[" #",f+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qw,{rule:h}),e.jsxs(js,{children:[e.jsx(mt,{asChild:!0,children:e.jsx(C,{variant:"ghost",size:"sm",children:e.jsx(es,{className:"h-4 w-4 text-destructive"})})}),e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:[" #",f+1," "]})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:()=>u(f),children:""})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{className:"text-xs font-medium",children:""}),e.jsxs(Ue,{value:h.target===""?"global":"specific",onValueChange:g=>{g==="global"?x(f,"target",""):x(f,"target","qq::group")},children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"global",children:""}),e.jsx(ee,{value:"specific",children:""})]})]})]}),h.target!==""&&(()=>{const g=h.target.split(":"),j=g[0]||"qq",v=g[1]||"",y=g[2]||"group";return e.jsxs("div",{className:"grid gap-4 p-3 sm:p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{className:"text-xs font-medium",children:""}),e.jsxs(Ue,{value:j,onValueChange:b=>{x(f,"target",`${b}:${v}:${y}`)},children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"qq",children:"QQ"}),e.jsx(ee,{value:"wx",children:""})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{className:"text-xs font-medium",children:" ID"}),e.jsx(ie,{value:v,onChange:b=>{x(f,"target",`${j}:${b.target.value}:${y}`)},placeholder:" ID",className:"font-mono text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{className:"text-xs font-medium",children:""}),e.jsxs(Ue,{value:y,onValueChange:b=>{x(f,"target",`${j}:${v}:${b}`)},children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"group",children:"group"}),e.jsx(ee,{value:"private",children:"private"})]})]})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ID",h.target||""]})]})})(),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{className:"text-xs font-medium",children:" (Time)"}),e.jsx(Iw,{value:h.time,onChange:g=>x(f,"time",g)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" 23:00-02:00"})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{htmlFor:`rule-value-${f}`,className:"text-xs font-medium",children:" (Value)"}),e.jsx(ie,{id:`rule-value-${f}`,type:"number",step:"0.01",min:"0.01",max:"1",value:h.value,onChange:g=>{const j=parseFloat(g.target.value);isNaN(j)||x(f,"value",Math.max(.01,Math.min(1,j)))},className:"w-20 h-8 text-xs"})]}),e.jsx(ma,{value:[h.value],onValueChange:g=>x(f,"value",g[0]),min:.01,max:1,step:.01,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"0.01 ()"}),e.jsx("span",{children:"0.5"}),e.jsx("span",{children:"1.0 ()"})]})]})]})]},f))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{className:"text-sm",children:'""'})}),e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2",children:" "}),e.jsxs("ul",{className:"text-xs text-blue-800 dark:text-blue-200 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Target "}),""]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Target "}),"platform:id:type"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:""}),""]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:""})," 23:00-02:00 112"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:""})," 0-10 1 "]})]})]})]})]})}),Kw=Ct.memo(function({config:i,onChange:r}){return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{checked:i.enable_asr,onCheckedChange:o=>r({...i,enable_asr:o})}),e.jsx(k,{className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})}),Xw=Ct.memo(function({config:i,onChange:r}){return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"LPMM "}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{checked:i.enable,onCheckedChange:o=>r({...i,enable:o})}),e.jsx(k,{className:"cursor-pointer",children:" LPMM "})]}),i.enable&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{children:"LPMM "}),e.jsxs(Ue,{value:i.lpmm_mode,onValueChange:o=>r({...i,lpmm_mode:o}),children:[e.jsx(Re,{children:e.jsx(Be,{placeholder:" LPMM "})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"classic",children:""}),e.jsx(ee,{value:"agent",children:"Agent "})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{children:" TopK"}),e.jsx(ie,{type:"number",min:"1",value:i.rag_synonym_search_top_k,onChange:o=>r({...i,rag_synonym_search_top_k:parseInt(o.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{children:""}),e.jsx(ie,{type:"number",step:"0.1",min:"0",max:"1",value:i.rag_synonym_threshold,onChange:o=>r({...i,rag_synonym_threshold:parseFloat(o.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{children:""}),e.jsx(ie,{type:"number",min:"1",value:i.info_extraction_workers,onChange:o=>r({...i,info_extraction_workers:parseInt(o.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{children:""}),e.jsx(ie,{type:"number",min:"1",value:i.embedding_dimension,onChange:o=>r({...i,embedding_dimension:parseInt(o.target.value)})})]})]})]})]})]})}),Pw=Ct.memo(function({config:i,onChange:r}){const[o,u]=m.useState(""),[x,h]=m.useState("WARNING"),f=()=>{o&&!i.suppress_libraries.includes(o)&&(r({...i,suppress_libraries:[...i.suppress_libraries,o]}),u(""))},g=w=>{r({...i,suppress_libraries:i.suppress_libraries.filter(O=>O!==w)})},j=()=>{o&&!i.library_log_levels[o]&&(r({...i,library_log_levels:{...i.library_log_levels,[o]:x}}),u(""),h("WARNING"))},v=w=>{const O={...i.library_log_levels};delete O[w],r({...i,library_log_levels:O})},y=["DEBUG","INFO","WARNING","ERROR","CRITICAL"],b=["FULL","compact","lite"],S=["none","title","full"];return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{children:""}),e.jsx(ie,{value:i.date_style,onChange:w=>r({...i,date_style:w.target.value}),placeholder:": m-d H:i:s"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"m=, d=, H=, i=, s="})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{children:""}),e.jsxs(Ue,{value:i.log_level_style,onValueChange:w=>r({...i,log_level_style:w}),children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsx(Le,{children:b.map(w=>e.jsx(ee,{value:w,children:w},w))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{children:""}),e.jsxs(Ue,{value:i.color_text,onValueChange:w=>r({...i,color_text:w}),children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsx(Le,{children:S.map(w=>e.jsx(ee,{value:w,children:w},w))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{children:""}),e.jsxs(Ue,{value:i.log_level,onValueChange:w=>r({...i,log_level:w}),children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsx(Le,{children:y.map(w=>e.jsx(ee,{value:w,children:w},w))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{children:""}),e.jsxs(Ue,{value:i.console_log_level,onValueChange:w=>r({...i,console_log_level:w}),children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsx(Le,{children:y.map(w=>e.jsx(ee,{value:w,children:w},w))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{children:""}),e.jsxs(Ue,{value:i.file_log_level,onValueChange:w=>r({...i,file_log_level:w}),children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsx(Le,{children:y.map(w=>e.jsx(ee,{value:w,children:w},w))})]})]})]})]}),e.jsxs("div",{children:[e.jsx(k,{className:"mb-2 block",children:""}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(ie,{value:o,onChange:w=>u(w.target.value),placeholder:"",className:"flex-1",onKeyDown:w=>{w.key==="Enter"&&(w.preventDefault(),f())}}),e.jsx(C,{onClick:f,size:"sm",className:"flex-shrink-0",children:e.jsx(ut,{className:"h-4 w-4",strokeWidth:2,fill:"none"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.suppress_libraries.map(w=>e.jsxs("div",{className:"flex items-center gap-1 bg-secondary px-3 py-1 rounded-md",children:[e.jsx("span",{className:"text-sm",children:w}),e.jsx(C,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>g(w),children:e.jsx(es,{className:"h-3 w-3",strokeWidth:2,fill:"none"})})]},w))})]}),e.jsxs("div",{children:[e.jsx(k,{className:"mb-2 block",children:""}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(ie,{value:o,onChange:w=>u(w.target.value),placeholder:"",className:"flex-1"}),e.jsxs(Ue,{value:x,onValueChange:h,children:[e.jsx(Re,{className:"w-32",children:e.jsx(Be,{})}),e.jsx(Le,{children:y.map(w=>e.jsx(ee,{value:w,children:w},w))})]}),e.jsx(C,{onClick:j,size:"sm",children:e.jsx(ut,{className:"h-4 w-4",strokeWidth:2,fill:"none"})})]}),e.jsx("div",{className:"space-y-2",children:Object.entries(i.library_log_levels).map(([w,O])=>e.jsxs("div",{className:"flex items-center justify-between bg-secondary px-3 py-2 rounded-md",children:[e.jsx("span",{className:"text-sm font-medium",children:w}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:O}),e.jsx(C,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>v(w),children:e.jsx(es,{className:"h-3 w-3",strokeWidth:2,fill:"none"})})]})]},w))})]})]})}),Jw=Ct.memo(function({config:i,onChange:r}){return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(k,{children:" Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Fe,{checked:i.show_prompt,onCheckedChange:o=>r({...i,show_prompt:o})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(k,{children:" Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Fe,{checked:i.show_replyer_prompt,onCheckedChange:o=>r({...i,show_replyer_prompt:o})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(k,{children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Fe,{checked:i.show_replyer_reasoning,onCheckedChange:o=>r({...i,show_replyer_reasoning:o})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(k,{children:" Jargon Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Fe,{checked:i.show_jargon_prompt,onCheckedChange:o=>r({...i,show_jargon_prompt:o})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(k,{children:" Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Fe,{checked:i.show_memory_prompt,onCheckedChange:o=>r({...i,show_memory_prompt:o})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(k,{children:" Planner Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" Planner "})]}),e.jsx(Fe,{checked:i.show_planner_prompt,onCheckedChange:o=>r({...i,show_planner_prompt:o})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(k,{children:" LPMM "}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" LPMM "})]}),e.jsx(Fe,{checked:i.show_lpmm_paragraph,onCheckedChange:o=>r({...i,show_lpmm_paragraph:o})})]})]})]})}),Zw=Ct.memo(function({config:i,onChange:r}){const[o,u]=m.useState(""),x=()=>{o&&!i.auth_token.includes(o)&&(r({...i,auth_token:[...i.auth_token,o]}),u(""))},h=f=>{r({...i,auth_token:i.auth_token.filter((g,j)=>j!==f)})};return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"MaimMessage "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(k,{children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" MaimMessage "})]}),e.jsx(Fe,{checked:i.use_custom,onCheckedChange:f=>r({...i,use_custom:f})})]}),i.use_custom&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{children:""}),e.jsx(ie,{value:i.host,onChange:f=>r({...i,host:f.target.value}),placeholder:"127.0.0.1"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{children:""}),e.jsx(ie,{type:"number",value:i.port,onChange:f=>r({...i,port:parseInt(f.target.value)}),placeholder:"8090"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{children:""}),e.jsxs(Ue,{value:i.mode,onValueChange:f=>r({...i,mode:f}),children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"ws",children:"WebSocket (ws)"}),e.jsx(ee,{value:"tcp",children:"TCP"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{checked:i.use_wss,onCheckedChange:f=>r({...i,use_wss:f}),disabled:i.mode!=="ws"}),e.jsx(k,{children:" WSS "})]})]}),i.use_wss&&i.mode==="ws"&&e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{children:"SSL "}),e.jsx(ie,{value:i.cert_file,onChange:f=>r({...i,cert_file:f.target.value}),placeholder:"cert.pem"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{children:"SSL "}),e.jsx(ie,{value:i.key_file,onChange:f=>r({...i,key_file:f.target.value}),placeholder:"key.pem"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx(k,{className:"mb-2 block",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:" API "}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(ie,{value:o,onChange:f=>u(f.target.value),placeholder:"",onKeyDown:f=>{f.key==="Enter"&&(f.preventDefault(),x())}}),e.jsx(C,{onClick:x,size:"sm",children:e.jsx(ut,{className:"h-4 w-4",strokeWidth:2,fill:"none"})})]}),e.jsx("div",{className:"space-y-2",children:i.auth_token.map((f,g)=>e.jsxs("div",{className:"flex items-center justify-between bg-secondary px-3 py-2 rounded-md",children:[e.jsx("span",{className:"text-sm font-mono",children:f}),e.jsx(C,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>h(g),children:e.jsx(es,{className:"h-3 w-3",strokeWidth:2,fill:"none"})})]},g))})]})]})}),Ww=Ct.memo(function({config:i,onChange:r}){return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(k,{children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Fe,{checked:i.enable,onCheckedChange:o=>r({...i,enable:o})})]})]})}),e1=Ct.memo(function({emojiConfig:i,memoryConfig:r,toolConfig:o,onEmojiChange:u,onMemoryChange:x,onToolChange:h}){return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"enable_tool",checked:o.enable_tool,onCheckedChange:f=>h({...o,enable_tool:f})}),e.jsx(k,{htmlFor:"enable_tool",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:""})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"max_agent_iterations",children:""}),e.jsx(ie,{id:"max_agent_iterations",type:"number",min:"1",value:r.max_agent_iterations,onChange:f=>x({...r,max_agent_iterations:parseInt(f.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" 1"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"agent_timeout_seconds",children:""}),e.jsx(ie,{id:"agent_timeout_seconds",type:"number",min:"1",step:"0.1",value:r.agent_timeout_seconds??120,onChange:f=>x({...r,agent_timeout_seconds:parseFloat(f.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"enable_jargon_detection",checked:r.enable_jargon_detection??!0,onCheckedChange:f=>x({...r,enable_jargon_detection:f})}),e.jsx(k,{htmlFor:"enable_jargon_detection",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground -mt-2",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"global_memory",checked:r.global_memory??!1,onCheckedChange:f=>x({...r,global_memory:f})}),e.jsx(k,{htmlFor:"global_memory",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground -mt-2",children:""})]})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"emoji_chance",children:""}),e.jsx(ie,{id:"emoji_chance",type:"number",step:"0.1",min:"0",max:"1",value:i.emoji_chance,onChange:f=>u({...i,emoji_chance:parseFloat(f.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" 0-1"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"max_reg_num",children:""}),e.jsx(ie,{id:"max_reg_num",type:"number",min:"1",value:i.max_reg_num,onChange:f=>u({...i,max_reg_num:parseInt(f.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"check_interval",children:""}),e.jsx(ie,{id:"check_interval",type:"number",min:"1",value:i.check_interval,onChange:f=>u({...i,check_interval:parseInt(f.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"do_replace",checked:i.do_replace,onCheckedChange:f=>u({...i,do_replace:f})}),e.jsx(k,{htmlFor:"do_replace",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"steal_emoji",checked:i.steal_emoji,onCheckedChange:f=>u({...i,steal_emoji:f})}),e.jsx(k,{htmlFor:"steal_emoji",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground -mt-2",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"content_filtration",checked:i.content_filtration,onCheckedChange:f=>u({...i,content_filtration:f})}),e.jsx(k,{htmlFor:"content_filtration",className:"cursor-pointer",children:""})]}),i.content_filtration&&e.jsxs("div",{className:"grid gap-2 pl-6 border-l-2 border-primary/20",children:[e.jsx(k,{htmlFor:"filtration_prompt",children:""}),e.jsx(ie,{id:"filtration_prompt",value:i.filtration_prompt,onChange:f=>u({...i,filtration_prompt:f.target.value}),placeholder:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})]})})]})}),s1=Ct.memo(function({member:i,groupIndex:r,memberIndex:o,availableChatIds:u,onUpdate:x,onRemove:h}){const f=u.includes(i)||i==="*",[g,j]=m.useState(!f);return e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1 flex gap-2",children:g?e.jsxs(e.Fragment,{children:[e.jsx(ie,{value:i,onChange:v=>x(r,o,v.target.value),placeholder:' "*"  "qq:123456:group"',className:"flex-1"}),u.length>0&&e.jsx(C,{size:"sm",variant:"outline",onClick:()=>j(!1),title:"",children:""})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ue,{value:i,onValueChange:v=>x(r,o,v),children:[e.jsx(Re,{className:"flex-1",children:e.jsx(Be,{placeholder:""})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"*",children:"* ()"}),u.map((v,y)=>e.jsx(ee,{value:v,children:v},y))]})]}),e.jsx(C,{size:"sm",variant:"outline",onClick:()=>j(!0),title:"",children:""})]})}),e.jsxs(js,{children:[e.jsx(mt,{asChild:!0,children:e.jsx(C,{size:"icon",variant:"outline",children:e.jsx(es,{className:"h-4 w-4"})})}),e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:[' "',i||"()",'" ']})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:()=>h(r,o),children:""})]})]})]})]})}),t1=Ct.memo(function({config:i,onChange:r}){const o=()=>{r({...i,learning_list:[...i.learning_list,["","enable","enable","1.0"]]})},u=b=>{r({...i,learning_list:i.learning_list.filter((S,w)=>w!==b)})},x=(b,S,w)=>{const O=[...i.learning_list];O[b][S]=w,r({...i,learning_list:O})},h=({rule:b})=>{const S=`["${b[0]}", "${b[1]}", "${b[2]}", "${b[3]}"]`;return e.jsxs(Ia,{children:[e.jsx(Qa,{asChild:!0,children:e.jsxs(C,{variant:"outline",size:"sm",children:[e.jsx(Gt,{className:"h-4 w-4 mr-1"}),""]})}),e.jsx(La,{className:"w-80 sm:w-96",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:""}),e.jsx("div",{className:"rounded-md bg-muted p-3 font-mono text-xs break-all",children:S}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" bot_config.toml "})]})})]})},f=()=>{r({...i,expression_groups:[...i.expression_groups,[]]})},g=b=>{r({...i,expression_groups:i.expression_groups.filter((S,w)=>w!==b)})},j=b=>{const S=[...i.expression_groups];S[b]=[...S[b],""],r({...i,expression_groups:S})},v=(b,S)=>{const w=[...i.expression_groups];w[b]=w[b].filter((O,A)=>A!==S),r({...i,expression_groups:w})},y=(b,S,w)=>{const O=[...i.expression_groups];O[b][S]=w,r({...i,expression_groups:O})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs(C,{onClick:o,size:"sm",variant:"outline",children:[e.jsx(ut,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-4",children:[i.learning_list.map((b,S)=>{const w=i.learning_list.some((_,T)=>T!==S&&_[0]===""),O=b[0]==="",A=b[0].split(":"),D=A[0]||"qq",V=A[1]||"",z=A[2]||"group";return e.jsxs("div",{className:"rounded-lg border p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",S+1," ",O&&""]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{rule:b}),e.jsxs(js,{children:[e.jsx(mt,{asChild:!0,children:e.jsx(C,{size:"sm",variant:"ghost",children:e.jsx(es,{className:"h-4 w-4"})})}),e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:[" ",S+1," "]})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:()=>u(S),children:""})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{className:"text-xs font-medium",children:""}),e.jsxs(Ue,{value:O?"global":"specific",onValueChange:_=>{_==="global"?x(S,0,""):x(S,0,"qq::group")},disabled:w&&!O,children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"global",children:""}),e.jsx(ee,{value:"specific",disabled:w&&!O,children:""})]})]}),w&&!O&&e.jsx("p",{className:"text-xs text-amber-600",children:""})]}),!O&&e.jsxs("div",{className:"grid gap-4 p-3 sm:p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{className:"text-xs font-medium",children:""}),e.jsxs(Ue,{value:D,onValueChange:_=>{x(S,0,`${_}:${V}:${z}`)},children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"qq",children:"QQ"}),e.jsx(ee,{value:"wx",children:""})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{className:"text-xs font-medium",children:" ID"}),e.jsx(ie,{value:V,onChange:_=>{x(S,0,`${D}:${_.target.value}:${z}`)},placeholder:" ID",className:"font-mono text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{className:"text-xs font-medium",children:""}),e.jsxs(Ue,{value:z,onValueChange:_=>{x(S,0,`${D}:${V}:${_}`)},children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"group",children:"group"}),e.jsx(ee,{value:"private",children:"private"})]})]})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ID",b[0]||""]})]}),e.jsx("div",{className:"grid gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-xs font-medium",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsx(Fe,{checked:b[1]==="enable",onCheckedChange:_=>x(S,1,_?"enable":"disable")})]})}),e.jsx("div",{className:"grid gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-xs font-medium",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsx(Fe,{checked:b[2]==="enable",onCheckedChange:_=>x(S,2,_?"enable":"disable")})]})}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{className:"text-xs font-medium",children:""}),e.jsx(ie,{type:"number",step:"0.1",min:"0",max:"5",value:b[3],onChange:_=>{const T=parseFloat(_.target.value);isNaN(T)||x(S,3,Math.max(0,Math.min(5,T)).toFixed(1))},className:"w-20 h-8 text-xs"})]}),e.jsx(ma,{value:[parseFloat(b[3])||1],onValueChange:_=>x(S,3,_[0].toFixed(1)),min:0,max:5,step:.1,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"0 ()"}),e.jsx("span",{children:"2.5"}),e.jsx("span",{children:"5.0 ()"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" = 300/"})]})]})]},S)}),i.learning_list.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'""'})]})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsx(Fe,{checked:i.reflect,onCheckedChange:b=>r({...i,reflect:b})})]}),i.reflect&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border p-4 space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("span",{className:"text-sm font-medium",children:""})}),e.jsx("div",{className:"space-y-4",children:(()=>{const S=(i.reflect_operator_id||"").split(":"),w=S[0]||"qq",O=S[1]||"",A=S[2]||"private";return e.jsxs("div",{className:"grid gap-4 p-3 sm:p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{className:"text-xs font-medium",children:""}),e.jsxs(Ue,{value:w,onValueChange:D=>{r({...i,reflect_operator_id:`${D}:${O}:${A}`})},children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"qq",children:"QQ"}),e.jsx(ee,{value:"wx",children:""})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{className:"text-xs font-medium",children:"/ ID"}),e.jsx(ie,{value:O,onChange:D=>{r({...i,reflect_operator_id:`${w}:${D.target.value}:${A}`})},placeholder:" ID",className:"font-mono text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{className:"text-xs font-medium",children:""}),e.jsxs(Ue,{value:A,onValueChange:D=>{r({...i,reflect_operator_id:`${w}:${O}:${D}`})},children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"private",children:"private"}),e.jsx(ee,{value:"group",children:"group"})]})]})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ID",i.reflect_operator_id||""]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})})()})]}),e.jsxs("div",{className:"rounded-lg border p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs(C,{onClick:()=>{r({...i,allow_reflect:[...i.allow_reflect||[],"qq::group"]})},size:"sm",variant:"outline",children:[e.jsx(ut,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-2",children:[(i.allow_reflect||[]).map((b,S)=>{const w=b.split(":"),O=w[0]||"qq",A=w[1]||"",D=w[2]||"group";return e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/50",children:[e.jsxs(Ue,{value:O,onValueChange:V=>{const z=[...i.allow_reflect];z[S]=`${V}:${A}:${D}`,r({...i,allow_reflect:z})},children:[e.jsx(Re,{className:"w-24",children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"qq",children:"QQ"}),e.jsx(ee,{value:"wx",children:""})]})]}),e.jsx(ie,{value:A,onChange:V=>{const z=[...i.allow_reflect];z[S]=`${O}:${V.target.value}:${D}`,r({...i,allow_reflect:z})},placeholder:"ID",className:"flex-1 font-mono text-sm"}),e.jsxs(Ue,{value:D,onValueChange:V=>{const z=[...i.allow_reflect];z[S]=`${O}:${A}:${V}`,r({...i,allow_reflect:z})},children:[e.jsx(Re,{className:"w-32",children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"group",children:""}),e.jsx(ee,{value:"private",children:""})]})]}),e.jsx(C,{onClick:()=>{r({...i,allow_reflect:i.allow_reflect.filter((V,z)=>z!==S)})},size:"sm",variant:"ghost",children:e.jsx(es,{className:"h-4 w-4"})})]},S)}),(!i.allow_reflect||i.allow_reflect.length===0)&&e.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:""})]})]})]})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs(C,{onClick:f,size:"sm",variant:"outline",children:[e.jsx(ut,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-4",children:[i.expression_groups.map((b,S)=>{const w=i.learning_list.map(O=>O[0]).filter(O=>O!=="");return e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",S+1,b.length===1&&b[0]==="*"&&""]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{onClick:()=>j(S),size:"sm",variant:"outline",children:e.jsx(ut,{className:"h-4 w-4"})}),e.jsxs(js,{children:[e.jsx(mt,{asChild:!0,children:e.jsx(C,{size:"sm",variant:"ghost",children:e.jsx(es,{className:"h-4 w-4"})})}),e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:[" ",S+1," "]})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:()=>g(S),children:""})]})]})]})]})]}),e.jsx("div",{className:"space-y-2",children:b.map((O,A)=>e.jsx(s1,{member:O,groupIndex:S,memberIndex:A,availableChatIds:w,onUpdate:y,onRemove:v},`${S}-${A}`))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:' "*" '})]},S)}),i.expression_groups.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'""'})]})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"all_global_jargon",checked:i.all_global_jargon??!1,onCheckedChange:b=>r({...i,all_global_jargon:b})}),e.jsx(k,{htmlFor:"all_global_jargon",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:""})]})})]})});function a1({regex:l,reaction:i,onRegexChange:r,onReactionChange:o}){const[u,x]=m.useState(!1),[h,f]=m.useState(""),[g,j]=m.useState(null),[v,y]=m.useState(""),[b,S]=m.useState({}),[w,O]=m.useState(""),A=m.useRef(null),[D,V]=m.useState("build"),z=E=>E.replace(/\(\?P<([^>]+)>/g,"(?<$1>"),_=(E,se=0)=>{const te=A.current;if(!te)return;const ne=te.selectionStart||0,ue=te.selectionEnd||0,Se=l.substring(0,ne)+E+l.substring(ue);r(Se),setTimeout(()=>{const oe=ne+E.length+se;te.setSelectionRange(oe,oe),te.focus()},0)};m.useEffect(()=>{if(!l||!h){j(null),S({}),O(i),y("");return}try{const E=z(l),se=new RegExp(E,"g"),te=h.match(se);j(te),y("");const ue=new RegExp(E).exec(h);if(ue&&ue.groups){S(ue.groups);let Se=i;Object.entries(ue.groups).forEach(([oe,je])=>{Se=Se.replace(new RegExp(`\\[${oe}\\]`,"g"),je||"")}),O(Se)}else S({}),O(i)}catch(E){y(E.message),j(null),S({}),O(i)}},[l,h,i]);const T=()=>{if(!h||!g||g.length===0)return e.jsx("span",{className:"text-muted-foreground",children:h||""});try{const E=z(l),se=new RegExp(E,"g");let te=0;const ne=[];let ue;for(;(ue=se.exec(h))!==null;)ue.index>te&&ne.push(e.jsx("span",{children:h.substring(te,ue.index)},`text-${te}`)),ne.push(e.jsx("span",{className:"bg-yellow-200 dark:bg-yellow-900 font-semibold",children:ue[0]},`match-${ue.index}`)),te=ue.index+ue[0].length;return te<h.length&&ne.push(e.jsx("span",{children:h.substring(te)},`text-${te}`)),e.jsx(e.Fragment,{children:ne})}catch{return e.jsx("span",{children:h})}},$=[{category:"",items:[{label:"",pattern:".",desc:""},{label:"",pattern:"\\d",desc:" 0-9"},{label:"",pattern:"\\D",desc:""},{label:"",pattern:"\\w",desc:""},{label:"",pattern:"\\W",desc:""},{label:"",pattern:"\\s",desc:""},{label:"",pattern:"\\S",desc:""}]},{category:"",items:[{label:"",pattern:"^",desc:""},{label:"",pattern:"$",desc:""},{label:"",pattern:"\\b",desc:""}]},{category:"",items:[{label:"0",pattern:"*",desc:"0"},{label:"1",pattern:"+",desc:"1"},{label:"01",pattern:"?",desc:"01"},{label:"",pattern:"{n}",desc:"nn"},{label:"",pattern:"{m,n}",desc:"mn"}]},{category:"",items:[{label:"",pattern:"()",desc:"",moveCursor:-1},{label:"",pattern:"(?P<name>)",desc:"Python",moveCursor:-1},{label:"",pattern:"(?:)",desc:"",moveCursor:-1}]},{category:"",items:[{label:"",pattern:"[]",desc:"",moveCursor:-1},{label:"",pattern:"[^]",desc:"",moveCursor:-1},{label:"",pattern:"[a-z]",desc:"az"},{label:"",pattern:"[\\u4e00-\\u9fa5]",desc:""}]},{category:"",items:[{label:"",pattern:"(?P<word>\\S+)",desc:""},{label:"",pattern:"(?P<sentence>.+)",desc:""},{label:"",pattern:"(?P<num>\\d+)",desc:""},{label:"",pattern:"(?:1|2)",desc:""}]}];return e.jsxs(Qs,{open:u,onOpenChange:x,children:[e.jsx(mm,{asChild:!0,children:e.jsxs(C,{variant:"outline",size:"sm",children:[e.jsx(rm,{className:"h-4 w-4 mr-1"}),""]})}),e.jsxs(qs,{className:"max-w-[95vw] sm:max-w-[900px] max-h-[90vh]",children:[e.jsxs(Gs,{children:[e.jsx(Vs,{children:""}),e.jsx(Ws,{className:"text-sm",children:""})]}),e.jsx(Ze,{className:"max-h-[calc(90vh-120px)]",children:e.jsxs(Sa,{value:D,onValueChange:E=>V(E),className:"w-full",children:[e.jsxs(xa,{className:"grid w-full grid-cols-2",children:[e.jsx(is,{value:"build",children:" "}),e.jsx(is,{value:"test",children:" "})]}),e.jsxs(As,{value:"build",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{className:"text-sm font-medium",children:""}),e.jsx(ie,{ref:A,value:l,onChange:E=>r(E.target.value),className:"font-mono text-sm",placeholder:"..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{className:"text-sm font-medium",children:"Reaction "}),e.jsx(Ys,{value:i,onChange:E=>o(E.target.value),placeholder:" [] ...",rows:3,className:"text-sm"})]}),e.jsxs("div",{className:"space-y-4 border-t pt-4",children:[$.map(E=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"text-xs font-semibold text-primary",children:E.category}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:E.items.map(se=>e.jsx(C,{variant:"outline",size:"sm",className:"justify-start h-auto py-2 px-3",onClick:()=>_(se.pattern,se.moveCursor||0),children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsx("span",{className:"text-xs font-medium",children:se.label}),e.jsx("code",{className:"ml-auto text-xs bg-muted px-1.5 py-0.5 rounded font-mono",children:se.pattern})]}),e.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:se.desc})]})},se.label))})]},E.category)),e.jsxs("div",{className:"space-y-2 border-t pt-4",children:[e.jsx("h5",{className:"text-xs font-semibold text-primary",children:""}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{variant:"outline",size:"sm",className:"w-full justify-start h-auto py-2 px-3",onClick:()=>r("^(?P<n>\\S{1,20})$"),children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsxs("code",{className:"text-xs font-mono bg-muted px-2 py-1 rounded w-full overflow-x-auto",children:["^(?P<n>\\S","{1,20}",")$"]}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:""})]})}),e.jsx(C,{variant:"outline",size:"sm",className:"w-full justify-start h-auto py-2 px-3",onClick:()=>r("(?:[^.\\s]+\\s*)?(?:)?[]\\s*(?P<action>.+?)[.,]?$"),children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsx("code",{className:"text-xs font-mono bg-muted px-2 py-1 rounded w-full overflow-x-auto",children:"(?:[^.\\s]+\\s*)?(?:)?[]\\s*(?P<action>.+?)[.,]?$"}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:""})]})}),e.jsx(C,{variant:"outline",size:"sm",className:"w-full justify-start h-auto py-2 px-3",onClick:()=>r("(?P<subject>.+?)(?:||)"),children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsx("code",{className:"text-xs font-mono bg-muted px-2 py-1 rounded w-full overflow-x-auto",children:"(?P<subject>.+?)(?:||)"}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:""})]})})]})]})]}),e.jsxs("div",{className:"rounded-md bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-3 space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 dark:text-blue-100",children:" "}),e.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:""}),e.jsxs("li",{children:["",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-1 rounded",children:"(?P<>)"})]}),e.jsxs("li",{children:[" reaction  ",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-1 rounded",children:"[]"})," "]}),e.jsx("li",{children:""})]})]})]}),e.jsxs(As,{value:"test",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{className:"text-sm font-medium",children:""}),e.jsx("div",{className:"rounded-md bg-muted p-3 font-mono text-xs break-all",children:l||"()"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"test-text",className:"text-sm font-medium",children:""}),e.jsx(Ys,{id:"test-text",value:h,onChange:E=>f(E.target.value),placeholder:`...
`,className:"min-h-[100px] text-sm"})]}),v&&e.jsxs("div",{className:"rounded-md bg-destructive/10 border border-destructive/20 p-3",children:[e.jsx("p",{className:"text-sm text-destructive font-medium",children:""}),e.jsx("p",{className:"text-xs text-destructive/80 mt-1",children:v})]}),!v&&h&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:g&&g.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),e.jsxs("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:[" (",g.length," )"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:""})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{className:"text-sm font-medium",children:""}),e.jsx(Ze,{className:"h-40 rounded-md bg-muted p-3",children:e.jsx("div",{className:"text-sm break-words",children:T()})})]}),Object.keys(b).length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{className:"text-sm font-medium",children:""}),e.jsx(Ze,{className:"h-32 rounded-md border p-3",children:e.jsx("div",{className:"space-y-2",children:Object.entries(b).map(([E,se])=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsxs("span",{className:"font-mono font-semibold text-primary min-w-[80px]",children:["[",E,"]"]}),e.jsx("span",{className:"text-muted-foreground",children:"="}),e.jsx("span",{className:"font-mono bg-muted px-2 py-0.5 rounded",children:se})]},E))})})]}),Object.keys(b).length>0&&i&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{className:"text-sm font-medium",children:"Reaction "}),e.jsx(Ze,{className:"h-48 rounded-md bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-3",children:e.jsx("div",{className:"text-sm break-words",children:w})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"reaction  [name] "})]})]}),e.jsxs("div",{className:"rounded-md bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-3 space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 dark:text-blue-100",children:" "}),e.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:""}),e.jsx("li",{children:""}),e.jsx("li",{children:"Reaction "}),e.jsx("li",{children:""})]})]})]})]})})]})]})}const l1=Ct.memo(function({keywordReactionConfig:i,responsePostProcessConfig:r,chineseTypoConfig:o,responseSplitterConfig:u,onKeywordReactionChange:x,onResponsePostProcessChange:h,onChineseTypoChange:f,onResponseSplitterChange:g}){const j=()=>{x({...i,regex_rules:[...i.regex_rules,{regex:[""],reaction:""}]})},v=_=>{x({...i,regex_rules:i.regex_rules.filter((T,$)=>$!==_)})},y=(_,T,$)=>{const E=[...i.regex_rules];T==="regex"&&typeof $=="string"?E[_]={...E[_],regex:[$]}:T==="reaction"&&typeof $=="string"&&(E[_]={...E[_],reaction:$}),x({...i,regex_rules:E})},b=()=>{x({...i,keyword_rules:[...i.keyword_rules,{keywords:[],reaction:""}]})},S=_=>{x({...i,keyword_rules:i.keyword_rules.filter((T,$)=>$!==_)})},w=(_,T,$)=>{const E=[...i.keyword_rules];typeof $=="string"&&(E[_]={...E[_],reaction:$}),x({...i,keyword_rules:E})},O=_=>{const T=[...i.keyword_rules];T[_]={...T[_],keywords:[...T[_].keywords||[],""]},x({...i,keyword_rules:T})},A=(_,T)=>{const $=[...i.keyword_rules];$[_]={...$[_],keywords:($[_].keywords||[]).filter((E,se)=>se!==T)},x({...i,keyword_rules:$})},D=(_,T,$)=>{const E=[...i.keyword_rules],se=[...E[_].keywords||[]];se[T]=$,E[_]={...E[_],keywords:se},x({...i,keyword_rules:E})},V=({rule:_})=>{const T=`{ regex = [${(_.regex||[]).map($=>`"${$}"`).join(", ")}], reaction = "${_.reaction}" }`;return e.jsxs(Ia,{children:[e.jsx(Qa,{asChild:!0,children:e.jsxs(C,{variant:"outline",size:"sm",children:[e.jsx(Gt,{className:"h-4 w-4 mr-1"}),""]})}),e.jsx(La,{className:"w-[95vw] sm:w-[500px]",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:""}),e.jsx(Ze,{className:"h-60 rounded-md bg-muted p-3",children:e.jsx("pre",{className:"font-mono text-xs break-all",children:T})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" bot_config.toml "})]})})]})},z=({rule:_})=>{const T=`[[keyword_reaction.keyword_rules]]
keywords = [${(_.keywords||[]).map($=>`"${$}"`).join(", ")}]
reaction = "${_.reaction}"`;return e.jsxs(Ia,{children:[e.jsx(Qa,{asChild:!0,children:e.jsxs(C,{variant:"outline",size:"sm",children:[e.jsx(Gt,{className:"h-4 w-4 mr-1"}),""]})}),e.jsx(La,{className:"w-[95vw] sm:w-[500px]",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:""}),e.jsx(Ze,{className:"h-60 rounded-md bg-muted p-3",children:e.jsx("pre",{className:"font-mono text-xs whitespace-pre-wrap break-all",children:T})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" bot_config.toml "})]})})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs(C,{onClick:j,size:"sm",variant:"outline",children:[e.jsx(ut,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-3",children:[i.regex_rules.map((_,T)=>e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",T+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a1,{regex:_.regex&&_.regex[0]||"",reaction:_.reaction,onRegexChange:$=>y(T,"regex",$),onReactionChange:$=>y(T,"reaction",$)}),e.jsx(V,{rule:_}),e.jsxs(js,{children:[e.jsx(mt,{asChild:!0,children:e.jsx(C,{size:"sm",variant:"ghost",children:e.jsx(es,{className:"h-4 w-4"})})}),e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:[" ",T+1," "]})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:()=>v(T),children:""})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{className:"text-xs font-medium",children:"Python "}),e.jsx(ie,{value:_.regex&&_.regex[0]||"",onChange:$=>y(T,"regex",$.target.value),placeholder:"^(?P<n>\\\\S{1,20})$ ",className:"font-mono text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:' (?P<name>pattern) reaction  [name] ""'})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{className:"text-xs font-medium",children:""}),e.jsx(Ys,{value:_.reaction,onChange:$=>y(T,"reaction",$.target.value),placeholder:`...
 [] `,rows:3,className:"text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" []  [n] "})]})]})]},T)),i.regex_rules.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'""'})]})]}),e.jsxs("div",{className:"space-y-4 border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs(C,{onClick:b,size:"sm",variant:"outline",children:[e.jsx(ut,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-3",children:[i.keyword_rules.map((_,T)=>e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",T+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{rule:_}),e.jsxs(js,{children:[e.jsx(mt,{asChild:!0,children:e.jsx(C,{size:"sm",variant:"ghost",children:e.jsx(es,{className:"h-4 w-4"})})}),e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:[" ",T+1," "]})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:()=>S(T),children:""})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{className:"text-xs font-medium",children:""}),e.jsxs(C,{onClick:()=>O(T),size:"sm",variant:"ghost",children:[e.jsx(ut,{className:"h-3 w-3 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-2",children:[(_.keywords||[]).map(($,E)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{value:$,onChange:se=>D(T,E,se.target.value),placeholder:"",className:"flex-1"}),e.jsx(C,{onClick:()=>A(T,E),size:"sm",variant:"ghost",children:e.jsx(es,{className:"h-4 w-4"})})]},E)),(!_.keywords||_.keywords.length===0)&&e.jsx("p",{className:"text-xs text-muted-foreground text-center py-2",children:'""'})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{className:"text-xs font-medium",children:""}),e.jsx(Ys,{value:_.reaction,onChange:$=>w(T,"reaction",$.target.value),placeholder:"...",rows:3,className:"text-sm"})]})]})]},T)),i.keyword_rules.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'""'})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"enable_response_post_process",checked:r.enable_response_post_process,onCheckedChange:_=>h({...r,enable_response_post_process:_})}),e.jsx(k,{htmlFor:"enable_response_post_process",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:""})]}),r.enable_response_post_process&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t pt-6 space-y-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Fe,{id:"enable_chinese_typo",checked:o.enable,onCheckedChange:_=>f({...o,enable:_})}),e.jsx(k,{htmlFor:"enable_chinese_typo",className:"cursor-pointer font-semibold",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:""}),o.enable&&e.jsxs("div",{className:"grid gap-4 pl-6 border-l-2 border-primary/20",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"error_rate",className:"text-xs font-medium",children:""}),e.jsx(ie,{id:"error_rate",type:"number",step:"0.001",min:"0",max:"1",value:o.error_rate,onChange:_=>f({...o,error_rate:parseFloat(_.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"min_freq",className:"text-xs font-medium",children:""}),e.jsx(ie,{id:"min_freq",type:"number",min:"0",value:o.min_freq,onChange:_=>f({...o,min_freq:parseInt(_.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"tone_error_rate",className:"text-xs font-medium",children:""}),e.jsx(ie,{id:"tone_error_rate",type:"number",step:"0.01",min:"0",max:"1",value:o.tone_error_rate,onChange:_=>f({...o,tone_error_rate:parseFloat(_.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"word_replace_rate",className:"text-xs font-medium",children:""}),e.jsx(ie,{id:"word_replace_rate",type:"number",step:"0.001",min:"0",max:"1",value:o.word_replace_rate,onChange:_=>f({...o,word_replace_rate:parseFloat(_.target.value)})})]})]})]})}),e.jsx("div",{className:"border-t pt-6 space-y-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Fe,{id:"enable_response_splitter",checked:u.enable,onCheckedChange:_=>g({...u,enable:_})}),e.jsx(k,{htmlFor:"enable_response_splitter",className:"cursor-pointer font-semibold",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:""}),u.enable&&e.jsxs("div",{className:"grid gap-4 pl-6 border-l-2 border-primary/20",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"max_length",className:"text-xs font-medium",children:""}),e.jsx(ie,{id:"max_length",type:"number",min:"1",value:u.max_length,onChange:_=>g({...u,max_length:parseInt(_.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"max_sentence_num",className:"text-xs font-medium",children:""}),e.jsx(ie,{id:"max_sentence_num",type:"number",min:"1",value:u.max_sentence_num,onChange:_=>g({...u,max_sentence_num:parseInt(_.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"enable_kaomoji_protection",checked:u.enable_kaomoji_protection,onCheckedChange:_=>g({...u,enable_kaomoji_protection:_})}),e.jsx(k,{htmlFor:"enable_kaomoji_protection",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"enable_overflow_return_all",checked:u.enable_overflow_return_all,onCheckedChange:_=>g({...u,enable_overflow_return_all:_})}),e.jsx(k,{htmlFor:"enable_overflow_return_all",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground -mt-2",children:""})]})]})})]})]})]})}),Ql="/api/webui/config";async function kp(){const i=await(await we(`${Ql}/bot`)).json();if(!i.success)throw new Error("");return i.config}async function Gl(){const i=await(await we(`${Ql}/model`)).json();if(!i.success)throw new Error("");return i.config}async function Tp(l){const r=await(await we(`${Ql}/bot`,{method:"POST",body:JSON.stringify(l)})).json();if(!r.success)throw new Error(r.message||"")}async function n1(){const i=await(await we(`${Ql}/bot/raw`)).json();if(!i.success)throw new Error("");return i.content}async function i1(l){const r=await(await we(`${Ql}/bot/raw`,{method:"POST",body:JSON.stringify({raw_content:l})})).json();if(!r.success)throw new Error(r.message||"")}async function Nr(l){const r=await(await we(`${Ql}/model`,{method:"POST",body:JSON.stringify(l)})).json();if(!r.success)throw new Error(r.message||"")}async function r1(l,i){const o=await(await we(`${Ql}/bot/section/${l}`,{method:"POST",body:JSON.stringify(i)})).json();if(!o.success)throw new Error(o.message||` ${l} `)}async function am(l,i){const o=await(await we(`${Ql}/model/section/${l}`,{method:"POST",body:JSON.stringify(i)})).json();if(!o.success)throw new Error(o.message||` ${l} `)}async function c1(l,i="openai",r="/models"){const o=new URLSearchParams({provider_name:l,parser:i,endpoint:r}),u=await we(`/api/webui/models/list?${o}`);if(!u.ok){const h=await u.json().catch(()=>({}));throw new Error(h.detail||` (${u.status})`)}const x=await u.json();if(!x.success)throw new Error("");return x.models}async function o1(l){const i=new URLSearchParams({provider_name:l}),r=await we(`/api/webui/models/test-connection-by-name?${i}`,{method:"POST"});if(!r.ok){const o=await r.json().catch(()=>({}));throw new Error(o.detail||` (${r.status})`)}return await r.json()}const d1=gi("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),sa=m.forwardRef(({className:l,variant:i,...r},o)=>e.jsx("div",{ref:o,role:"alert",className:H(d1({variant:i}),l),...r}));sa.displayName="Alert";const u1=m.forwardRef(({className:l,...i},r)=>e.jsx("h5",{ref:r,className:H("mb-1 font-medium leading-none tracking-tight",l),...i}));u1.displayName="AlertTitle";const ta=m.forwardRef(({className:l,...i},r)=>e.jsx("div",{ref:r,className:H("text-sm [&_p]:leading-relaxed",l),...i}));ta.displayName="AlertDescription";const m1={name:"toml",startState:function(){return{inString:!1,stringType:"",lhs:!0,inArray:0}},token:function(l,i){let r;if(!i.inString&&(r=l.match(/^('''|"""|'|")/))&&(i.stringType=r[0],i.inString=!0),l.sol()&&!i.inString&&i.inArray===0&&(i.lhs=!0),i.inString){for(;i.inString;)if(l.match(i.stringType))i.inString=!1;else if(l.peek()==="\\")l.next(),l.next();else{if(l.eol())break;l.match(/^.[^\\\"\']*/)}return i.lhs?"property":"string"}else{if(i.inArray&&l.peek()==="]")return l.next(),i.inArray--,"bracket";if(i.lhs&&l.peek()==="["&&l.skipTo("]"))return l.next(),l.peek()==="]"&&l.next(),"atom";if(l.peek()==="#")return l.skipToEnd(),"comment";if(l.eatSpace())return null;if(i.lhs&&l.eatWhile(function(o){return o!="="&&o!=" "}))return"property";if(i.lhs&&l.peek()==="=")return l.next(),i.lhs=!1,null;if(!i.lhs&&l.match(/^\d\d\d\d[\d\-\:\.T]*Z/))return"atom";if(!i.lhs&&(l.match("true")||l.match("false")))return"atom";if(!i.lhs&&l.peek()==="[")return i.inArray++,l.next(),"bracket";if(!i.lhs&&l.match(/^\-?\d+(?:\.\d+)?/))return"number";l.eatSpace()||l.next()}return null},languageData:{commentTokens:{line:"#"}}},x1={python:[c0()],json:[o0(),d0()],toml:[r0.define(m1)],text:[]};function h1({value:l,onChange:i,language:r="text",readOnly:o=!1,height:u="400px",minHeight:x,maxHeight:h,placeholder:f,theme:g="dark",className:j=""}){const[v,y]=m.useState(!1);if(m.useEffect(()=>{y(!0)},[]),!v)return e.jsx("div",{className:`rounded-md border bg-muted animate-pulse ${j}`,style:{height:u,minHeight:x,maxHeight:h}});const b=[...x1[r]||[],gp.lineWrapping];return o&&b.push(gp.editable.of(!1)),e.jsx("div",{className:`rounded-md overflow-hidden border ${j}`,children:e.jsx(u0,{value:l,height:u,minHeight:x,maxHeight:h,theme:g==="dark"?m0:void 0,extensions:b,onChange:i,placeholder:f,basicSetup:{lineNumbers:!0,highlightActiveLineGutter:!0,highlightSpecialChars:!0,history:!0,foldGutter:!0,drawSelection:!0,dropCursor:!0,allowMultipleSelections:!0,indentOnInput:!0,syntaxHighlighting:!0,bracketMatching:!0,closeBrackets:!0,autocompletion:!0,rectangularSelection:!0,crosshairCursor:!0,highlightActiveLine:!0,highlightSelectionMatches:!0,closeBracketsKeymap:!0,defaultKeymap:!0,searchKeymap:!0,historyKeymap:!0,foldKeymap:!0,completionKeymap:!0,lintKeymap:!0}})})}function f1({id:l,index:i,itemType:r,itemFields:o,value:u,onChange:x,onRemove:h,disabled:f,canRemove:g,placeholder:j}){const{attributes:v,listeners:y,setNodeRef:b,transform:S,transition:w,isDragging:O}=Wg({id:l,disabled:f}),A={transform:ej.Transform.toString(S),transition:w};return e.jsxs("div",{ref:b,style:A,className:H("flex items-start gap-2 group",O&&"opacity-50 z-50"),children:[e.jsx("button",{type:"button",className:H("flex-shrink-0 p-2 cursor-grab active:cursor-grabbing","text-muted-foreground hover:text-foreground transition-colors","opacity-0 group-hover:opacity-100 focus:opacity-100",f&&"cursor-not-allowed opacity-30"),...v,...y,children:e.jsx(Lg,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex-1 min-w-0",children:r==="object"&&o?e.jsx(p1,{value:u,onChange:x,fields:o,disabled:f}):r==="number"?e.jsx(ie,{type:"number",value:u??"",onChange:D=>x(parseFloat(D.target.value)||0),placeholder:j??` ${i+1} `,disabled:f,className:"font-mono"}):e.jsx(ie,{type:"text",value:u??"",onChange:D=>x(D.target.value),placeholder:j??` ${i+1} `,disabled:f})}),e.jsx(C,{type:"button",variant:"ghost",size:"icon",onClick:h,disabled:f||!g,className:H("flex-shrink-0 text-muted-foreground hover:text-destructive","opacity-0 group-hover:opacity-100 focus:opacity-100 transition-opacity"),children:e.jsx(es,{className:"h-4 w-4"})})]})}function p1({value:l,onChange:i,fields:r,disabled:o}){const u=m.useCallback((h,f)=>{i({...l,[h]:f})},[l,i]),x=(h,f)=>{const g=l?.[h];if(f.type==="boolean"||f.type==="switch")return e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsx(k,{className:"text-xs text-muted-foreground",children:f.label??h}),e.jsx(Fe,{checked:!!(g??f.default),onCheckedChange:j=>u(h,j),disabled:o})]});if(f.type==="slider"||f.type==="number"&&f.min!=null&&f.max!=null){const j=g??f.default??f.min??0;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{className:"text-xs text-muted-foreground",children:f.label??h}),e.jsx("span",{className:"text-xs text-muted-foreground",children:j})]}),e.jsx(ma,{value:[j],onValueChange:v=>u(h,v[0]),min:f.min??0,max:f.max??100,step:f.step??1,disabled:o,className:"py-1"})]})}return f.type==="select"&&f.choices?e.jsxs("div",{className:"space-y-1",children:[e.jsx(k,{className:"text-xs text-muted-foreground",children:f.label??h}),e.jsxs(Ue,{value:String(g??f.default??""),onValueChange:j=>u(h,j),disabled:o,children:[e.jsx(Re,{className:"h-8 text-sm",children:e.jsx(Be,{placeholder:f.placeholder??""})}),e.jsx(Le,{children:f.choices.map(j=>e.jsx(ee,{value:String(j),children:String(j)},String(j)))})]})]}):f.type==="number"?e.jsxs("div",{className:"space-y-1",children:[e.jsx(k,{className:"text-xs text-muted-foreground",children:f.label??h}),e.jsx(ie,{type:"number",value:g??f.default??"",onChange:j=>u(h,parseFloat(j.target.value)||0),placeholder:f.placeholder,disabled:o,className:"h-8 text-sm"})]}):e.jsxs("div",{className:"space-y-1",children:[e.jsx(k,{className:"text-xs text-muted-foreground",children:f.label??h}),e.jsx(ie,{type:"text",value:g??f.default??"",onChange:j=>u(h,j.target.value),placeholder:f.placeholder,disabled:o,className:"h-8 text-sm"})]})};return e.jsx(Ve,{className:"p-3 space-y-2 bg-muted/30",children:Object.entries(r).map(([h,f])=>e.jsx("div",{children:x(h,f)},h))})}function g1({value:l,onChange:i,itemType:r="string",itemFields:o,minItems:u,maxItems:x,disabled:h,placeholder:f}){const g=m.useMemo(()=>Array.isArray(l)?l:typeof l=="string"&&l.trim()?l.split(",").map(z=>z.trim()):[],[l]),[j]=m.useState(()=>new Map),v=m.useCallback(z=>(j.has(z)||j.set(z,`item-${Date.now()}-${z}-${Math.random().toString(36).slice(2)}`),j.get(z)),[j]),y=m.useMemo(()=>{const z=[];for(let _=0;_<g.length;_++)z.push(v(_));return z},[g.length,v]),b=Ig(uo(Kg,{activationConstraint:{distance:8}}),uo(Yg,{coordinateGetter:Qg})),S=m.useCallback(z=>{const{active:_,over:T}=z;if(T&&_.id!==T.id){const $=y.indexOf(_.id),E=y.indexOf(T.id),se=Xg(g,$,E);i(se)}},[g,y,i]),w=m.useCallback(()=>{if(x!=null&&g.length>=x)return;let z;r==="object"&&o?z=Object.fromEntries(Object.entries(o).map(([_,T])=>[_,T.default??""])):r==="number"?z=0:z="",i([...g,z])},[g,x,r,o,i]),O=m.useCallback((z,_)=>{const T=[...g];T[z]=_,i(T)},[g,i]),A=m.useCallback(z=>{if(u!=null&&g.length<=u)return;const _=g.filter((T,$)=>$!==z);j.delete(z),i(_)},[g,u,j,i]),D=x==null||g.length<x,V=u==null||g.length>u;return e.jsxs("div",{className:"space-y-2",children:[g.length===0?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground py-4 justify-center border border-dashed rounded-md",children:[e.jsx(Ot,{className:"h-4 w-4"}),e.jsx("span",{children:""})]}):e.jsx(Pg,{sensors:b,collisionDetection:Jg,onDragEnd:S,children:e.jsx(Zg,{items:y,strategy:x0,children:e.jsx("div",{className:"space-y-2",children:g.map((z,_)=>e.jsx(f1,{id:y[_],index:_,itemType:r,itemFields:o,value:z,onChange:T=>O(_,T),onRemove:()=>A(_),disabled:h,canRemove:V,placeholder:f},y[_]))})})}),e.jsxs(C,{type:"button",variant:"outline",size:"sm",onClick:w,disabled:h||!D,className:"w-full",children:[e.jsx(ut,{className:"h-4 w-4 mr-1"}),"",x!==void 0&&e.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",g.length,"/",x,")"]})]}),(u!=null||x!=null)&&(u!==null||x!==null)&&e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:u!=null&&x!=null?` ${u} - ${x} `:u!=null?` ${u} `:` ${x} `})]})}function j1(l,i,r,o={}){const{debounceMs:u=2e3,onSaveSuccess:x,onSaveError:h}=o,f=m.useRef(null),g=m.useCallback(async(b,S)=>{try{i(!0),await r1(b,S),r(!1),x?.()}catch(w){console.error(` ${b} :`,w),r(!0),h?.(w instanceof Error?w:new Error(String(w)))}finally{i(!1)}},[i,r,x,h]),j=m.useCallback((b,S)=>{l||(r(!0),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{g(b,S)},u))},[l,r,g,u]),v=m.useCallback(async(b,S)=>{f.current&&(clearTimeout(f.current),f.current=null),await g(b,S)},[g]),y=m.useCallback(()=>{f.current&&(clearTimeout(f.current),f.current=null)},[]);return m.useEffect(()=>()=>{f.current&&clearTimeout(f.current)},[]),{triggerAutoSave:j,saveNow:v,cancelPendingAutoSave:y}}function Ht(l,i,r,o){m.useEffect(()=>{l&&!r&&o(i,l)},[l])}const v1=500;function b1(){return e.jsx(jn,{children:e.jsx(N1,{})})}function N1(){const[l,i]=m.useState(!0),[r,o]=m.useState(!1),[u,x]=m.useState(!1),[h,f]=m.useState(!1),[g,j]=m.useState("visual"),[v,y]=m.useState(""),[b,S]=m.useState(!1),{toast:w}=Ks(),{triggerRestart:O,isRestarting:A}=Il(),[D,V]=m.useState(null),[z,_]=m.useState(null),[T,$]=m.useState(null),[E,se]=m.useState(null),[te,ne]=m.useState(null),[ue,Se]=m.useState(null),[oe,je]=m.useState(null),[be,U]=m.useState(null),[P,X]=m.useState(null),[L,B]=m.useState(null),[_e,Ne]=m.useState(null),[Ce,ve]=m.useState(null),[ze,Q]=m.useState(null),[xe,Te]=m.useState(null),[J,le]=m.useState(null),[qe,We]=m.useState(null),[fe,ls]=m.useState(null),G=m.useRef(!0),Me=m.useRef({}),re=m.useCallback(ye=>{Me.current=ye,V(ye.bot),_(ye.personality);const ps=ye.chat;ps.talk_value_rules||(ps.talk_value_rules=[]),$(ps),se(ye.expression),ne(ye.emoji),Se(ye.memory),je(ye.tool),U(ye.voice),X(ye.lpmm_knowledge),B(ye.keyword_reaction),Ne(ye.response_post_process),ve(ye.chinese_typo),Q(ye.response_splitter),Te(ye.log),le(ye.debug),We(ye.maim_message),ls(ye.telemetry)},[]),pe=m.useCallback(()=>({...Me.current,bot:D,personality:z,chat:T,expression:E,emoji:te,memory:ue,tool:oe,voice:be,lpmm_knowledge:P,keyword_reaction:L,response_post_process:_e,chinese_typo:Ce,response_splitter:ze,log:xe,debug:J,maim_message:qe,telemetry:fe}),[D,z,T,E,te,ue,oe,be,P,L,_e,Ce,ze,xe,J,qe,fe]),Ee=m.useCallback(async()=>{try{const ps=(await n1()).replace(/"([^"]*)"/g,(ss,Es)=>`"${Es.replace(/\\n/g,`
`).replace(/\\t/g,"	").replace(/\\r/g,"\r").replace(/\\"/g,'"').replace(/\\\\/g,"\\")}"`);y(ps),S(!1)}catch(ye){w({variant:"destructive",title:"",description:ye instanceof Error?ye.message:""})}},[w]),Ie=m.useCallback(async()=>{try{i(!0);const ye=await kp();re(ye),f(!1),G.current=!1,await Ee()}catch(ye){console.error(":",ye),w({title:"",description:"",variant:"destructive"})}finally{i(!1)}},[w,Ee,re]);m.useEffect(()=>{Ie()},[Ie]);const{triggerAutoSave:$e,cancelPendingAutoSave:Vt}=j1(G.current,x,f);Ht(D,"bot",G.current,$e),Ht(z,"personality",G.current,$e),Ht(T,"chat",G.current,$e),Ht(E,"expression",G.current,$e),Ht(te,"emoji",G.current,$e),Ht(ue,"memory",G.current,$e),Ht(oe,"tool",G.current,$e),Ht(be,"voice",G.current,$e),Ht(P,"lpmm_knowledge",G.current,$e),Ht(L,"keyword_reaction",G.current,$e),Ht(_e,"response_post_process",G.current,$e),Ht(Ce,"chinese_typo",G.current,$e),Ht(ze,"response_splitter",G.current,$e),Ht(xe,"log",G.current,$e),Ht(J,"debug",G.current,$e),Ht(qe,"maim_message",G.current,$e),Ht(fe,"telemetry",G.current,$e);const _t=async()=>{try{o(!0);const ye=v.replace(/"([^"]*)"/g,(ps,ss)=>`"${ss.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")}"`);await i1(ye),f(!1),S(!1),w({title:"",description:""}),await Ie()}catch(ye){S(!0),w({variant:"destructive",title:"",description:ye instanceof Error?ye.message:""})}finally{o(!1)}},nt=async ye=>{if(h){w({variant:"destructive",title:"",description:""});return}if(j(ye),ye==="source")await Ee();else try{const ps=await kp();re(ps),f(!1)}catch(ps){console.error(":",ps),w({title:"",description:"",variant:"destructive"})}},F=async()=>{try{o(!0),Vt(),await Tp(pe()),f(!1),w({title:"",description:""})}catch(ye){console.error(":",ye),w({title:"",description:ye.message,variant:"destructive"})}finally{o(!1)}},He=async()=>{await O()},De=async()=>{try{o(!0),Vt(),await Tp(pe()),f(!1),w({title:"",description:"..."}),await new Promise(ye=>setTimeout(ye,v1)),await He()}catch(ye){console.error(":",ye),w({title:"",description:ye.message,variant:"destructive"})}finally{o(!1)}};return l?e.jsx(Ze,{className:"h-full",children:e.jsx("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"..."})})})}):e.jsx(Ze,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 text-xs sm:text-sm",children:""})]}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsxs(C,{onClick:g==="visual"?F:_t,disabled:r||u||!h||A,size:"sm",variant:"outline",className:"w-20 sm:w-24",children:[e.jsx(Ar,{className:"h-4 w-4 flex-shrink-0",strokeWidth:2,fill:"none"}),e.jsx("span",{className:"ml-1 truncate text-xs sm:text-sm",children:r?"":u?"":h?"":""})]}),e.jsxs(js,{children:[e.jsx(mt,{asChild:!0,children:e.jsxs(C,{disabled:r||u||A,size:"sm",className:"w-20 sm:w-28",children:[e.jsx(Mr,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"ml-1 truncate text-xs sm:text-sm",children:A?"":h?"":""})]})}),e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsx(xs,{asChild:!0,children:e.jsx("div",{children:e.jsx("p",{children:h?",":","})})})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:h?De:He,children:h?"":""})]})]})]})]})]}),e.jsx("div",{className:"flex",children:e.jsx(Sa,{value:g,onValueChange:ye=>nt(ye),className:"w-full",children:e.jsxs(xa,{className:"h-8 sm:h-9 w-full grid grid-cols-2",children:[e.jsxs(is,{value:"visual",className:"text-xs sm:text-sm",children:[e.jsx($y,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),""]}),e.jsxs(is,{value:"source",className:"text-xs sm:text-sm",children:[e.jsx(qy,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),""]})]})})})]}),e.jsxs(sa,{children:[e.jsx(Ra,{className:"h-4 w-4"}),e.jsxs(ta,{children:["",e.jsx("strong",{children:""}),'""']})]}),g==="source"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(sa,{children:[e.jsx(Ra,{className:"h-4 w-4"}),e.jsxs(ta,{children:[e.jsx("strong",{children:""})," TOML  TOML ",b&&e.jsx("span",{className:"text-destructive font-semibold ml-2",children:"  TOML "})]})]}),e.jsx(h1,{value:v,onChange:ye=>{y(ye),f(!0),b&&S(!1)},language:"toml",theme:"dark",height:"calc(100vh - 280px)",minHeight:"500px",placeholder:"TOML "})]}),g==="visual"&&e.jsx(e.Fragment,{children:e.jsxs(Sa,{defaultValue:"bot",className:"w-full",children:[e.jsxs(xa,{className:"flex flex-wrap h-auto gap-1 p-1 sm:grid sm:grid-cols-5 lg:grid-cols-9",children:[e.jsx(is,{value:"bot",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(is,{value:"personality",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(is,{value:"chat",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(is,{value:"expression",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(is,{value:"features",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(is,{value:"processing",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(is,{value:"voice",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(is,{value:"lpmm",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(is,{value:"other",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""})]}),e.jsx(As,{value:"bot",className:"space-y-4",children:D&&e.jsx(qw,{config:D,onChange:V})}),e.jsx(As,{value:"personality",className:"space-y-4",children:z&&e.jsx(Gw,{config:z,onChange:_})}),e.jsx(As,{value:"chat",className:"space-y-4",children:T&&e.jsx(Yw,{config:T,onChange:$})}),e.jsx(As,{value:"expression",className:"space-y-4",children:E&&e.jsx(t1,{config:E,onChange:se})}),e.jsx(As,{value:"features",className:"space-y-4",children:te&&ue&&oe&&e.jsx(e1,{emojiConfig:te,memoryConfig:ue,toolConfig:oe,onEmojiChange:ne,onMemoryChange:Se,onToolChange:je})}),e.jsx(As,{value:"processing",className:"space-y-4",children:L&&_e&&Ce&&ze&&e.jsx(l1,{keywordReactionConfig:L,responsePostProcessConfig:_e,chineseTypoConfig:Ce,responseSplitterConfig:ze,onKeywordReactionChange:B,onResponsePostProcessChange:Ne,onChineseTypoChange:ve,onResponseSplitterChange:Q})}),e.jsx(As,{value:"voice",className:"space-y-4",children:be&&e.jsx(Kw,{config:be,onChange:U})}),e.jsx(As,{value:"lpmm",className:"space-y-4",children:P&&e.jsx(Xw,{config:P,onChange:X})}),e.jsxs(As,{value:"other",className:"space-y-4",children:[xe&&e.jsx(Pw,{config:xe,onChange:Te}),J&&e.jsx(Jw,{config:J,onChange:le}),qe&&e.jsx(Zw,{config:qe,onChange:We}),fe&&e.jsx(Ww,{config:fe,onChange:ls})]})]})}),e.jsx(vn,{})]})})}const bn=m.forwardRef(({className:l,...i},r)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:r,className:H("w-full caption-bottom text-sm",l),...i})}));bn.displayName="Table";const Nn=m.forwardRef(({className:l,...i},r)=>e.jsx("thead",{ref:r,className:H("[&_tr]:border-b",l),...i}));Nn.displayName="TableHeader";const yn=m.forwardRef(({className:l,...i},r)=>e.jsx("tbody",{ref:r,className:H("[&_tr:last-child]:border-0",l),...i}));yn.displayName="TableBody";const y1=m.forwardRef(({className:l,...i},r)=>e.jsx("tfoot",{ref:r,className:H("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",l),...i}));y1.displayName="TableFooter";const gt=m.forwardRef(({className:l,...i},r)=>e.jsx("tr",{ref:r,className:H("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",l),...i}));gt.displayName="TableRow";const Je=m.forwardRef(({className:l,...i},r)=>e.jsx("th",{ref:r,className:H("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",l),...i}));Je.displayName="TableHead";const Qe=m.forwardRef(({className:l,...i},r)=>e.jsx("td",{ref:r,className:H("px-4 py-3 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",l),...i}));Qe.displayName="TableCell";const w1=m.forwardRef(({className:l,...i},r)=>e.jsx("caption",{ref:r,className:H("mt-4 text-sm text-muted-foreground",l),...i}));w1.displayName="TableCaption";const vo=m.forwardRef(({className:l,...i},r)=>e.jsx(la,{ref:r,className:H("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",l),...i}));vo.displayName=la.displayName;const bo=m.forwardRef(({className:l,...i},r)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx($t,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(la.Input,{ref:r,className:H("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",l),...i})]}));bo.displayName=la.Input.displayName;const No=m.forwardRef(({className:l,...i},r)=>e.jsx(la.List,{ref:r,className:H("max-h-[300px] overflow-y-auto overflow-x-hidden",l),...i}));No.displayName=la.List.displayName;const yo=m.forwardRef((l,i)=>e.jsx(la.Empty,{ref:i,className:"py-6 text-center text-sm",...l}));yo.displayName=la.Empty.displayName;const Cr=m.forwardRef(({className:l,...i},r)=>e.jsx(la.Group,{ref:r,className:H("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",l),...i}));Cr.displayName=la.Group.displayName;const _1=m.forwardRef(({className:l,...i},r)=>e.jsx(la.Separator,{ref:r,className:H("-mx-1 h-px bg-border",l),...i}));_1.displayName=la.Separator.displayName;const kr=m.forwardRef(({className:l,...i},r)=>e.jsx(la.Item,{ref:r,className:H("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l),...i}));kr.displayName=la.Item.displayName;const jt=m.forwardRef(({className:l,...i},r)=>e.jsx(yg,{ref:r,className:H("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",l),...i,children:e.jsx(gy,{className:H("grid place-content-center text-current"),children:e.jsx(ea,{className:"h-4 w-4"})})}));jt.displayName=yg.displayName;const jj=m.createContext(null),vj="maibot-completed-tours";function S1(){try{const l=localStorage.getItem(vj);return l?new Set(JSON.parse(l)):new Set}catch{return new Set}}function Ep(l){localStorage.setItem(vj,JSON.stringify([...l]))}function C1({children:l}){const[i,r]=m.useState({activeTourId:null,stepIndex:0,isRunning:!1}),o=m.useRef(new Map),[,u]=m.useState(0),[x,h]=m.useState(S1),f=m.useCallback((z,_)=>{o.current.set(z,_),u(T=>T+1)},[]),g=m.useCallback(z=>{o.current.delete(z),r(_=>_.activeTourId===z?{..._,activeTourId:null,isRunning:!1,stepIndex:0}:_)},[]),j=m.useCallback((z,_=0)=>{o.current.has(z)&&r({activeTourId:z,stepIndex:_,isRunning:!0})},[]),v=m.useCallback(()=>{r(z=>({...z,isRunning:!1}))},[]),y=m.useCallback(z=>{r(_=>({..._,stepIndex:z}))},[]),b=m.useCallback(()=>{r(z=>({...z,stepIndex:z.stepIndex+1}))},[]),S=m.useCallback(()=>{r(z=>({...z,stepIndex:Math.max(0,z.stepIndex-1)}))},[]),w=m.useCallback(()=>i.activeTourId?o.current.get(i.activeTourId)||[]:[],[i.activeTourId]),O=m.useCallback(z=>{h(_=>{const T=new Set(_);return T.add(z),Ep(T),T})},[]),A=m.useCallback(z=>{const{action:_,index:T,status:$,type:E}=z,se=["finished","skipped"];if(_==="close"){r(te=>({...te,isRunning:!1,stepIndex:0}));return}se.includes($)?r(te=>($==="finished"&&te.activeTourId&&setTimeout(()=>O(te.activeTourId),0),{...te,isRunning:!1,stepIndex:0})):E==="step:after"&&(_==="next"?r(te=>({...te,stepIndex:T+1})):_==="prev"&&r(te=>({...te,stepIndex:T-1})))},[O]),D=m.useCallback(z=>x.has(z),[x]),V=m.useCallback(z=>{h(_=>{const T=new Set(_);return T.delete(z),Ep(T),T})},[]);return e.jsx(jj.Provider,{value:{state:i,tours:o.current,registerTour:f,unregisterTour:g,startTour:j,stopTour:v,goToStep:y,nextStep:b,prevStep:S,getCurrentSteps:w,handleJoyrideCallback:A,isTourCompleted:D,markTourCompleted:O,resetTourCompleted:V},children:l})}function xm(){const l=m.useContext(jj);if(!l)throw new Error("useTour must be used within a TourProvider");return l}const k1={options:{zIndex:1e4,primaryColor:"hsl(var(--primary))",textColor:"hsl(var(--foreground))",backgroundColor:"hsl(var(--background))",arrowColor:"hsl(var(--background))",overlayColor:"rgba(0, 0, 0, 0.5)"},tooltip:{borderRadius:"var(--radius)",padding:"1rem"},tooltipContainer:{textAlign:"left"},tooltipTitle:{fontSize:"1rem",fontWeight:600,marginBottom:"0.5rem"},tooltipContent:{fontSize:"0.875rem",padding:"0.5rem 0"},buttonNext:{backgroundColor:"hsl(var(--primary))",color:"hsl(var(--primary-foreground))",borderRadius:"calc(var(--radius) - 2px)",fontSize:"0.875rem",padding:"0.5rem 1rem"},buttonBack:{color:"hsl(var(--muted-foreground))",fontSize:"0.875rem",marginRight:"0.5rem"},buttonSkip:{color:"hsl(var(--muted-foreground))",fontSize:"0.875rem"},buttonClose:{color:"hsl(var(--muted-foreground))"},spotlight:{borderRadius:"var(--radius)"}},T1={back:"",close:"",last:"",next:"",nextLabelWithProgress:" ({step}/{steps})",open:"",skip:""};function E1(){const{state:l,getCurrentSteps:i,handleJoyrideCallback:r}=xm(),o=i(),[u,x]=m.useState(!1),h=m.useRef(l.stepIndex),f=m.useRef(null);m.useEffect(()=>{h.current!==l.stepIndex&&(x(!1),h.current=l.stepIndex)},[l.stepIndex]),m.useEffect(()=>{if(!l.isRunning||o.length===0){x(!1);return}const v=o[l.stepIndex];if(!v){x(!1);return}const y=v.target;if(y==="body"){x(!0);return}x(!1);const b=setTimeout(()=>{const S=()=>{const D=document.querySelector(y);if(D){const V=D.getBoundingClientRect();if(V.width>0&&V.height>0)return!0}return!1};if(S()){setTimeout(()=>x(!0),100);return}const w=setInterval(()=>{S()&&(clearInterval(w),setTimeout(()=>x(!0),100))},100),O=setTimeout(()=>{clearInterval(w),x(!0)},5e3),A=()=>{clearInterval(w),clearTimeout(O)};f.current=A},150);return()=>{clearTimeout(b),f.current&&(f.current(),f.current=null)}},[l.isRunning,l.stepIndex,o]);const g=m.useRef(null);if(m.useEffect(()=>{let v=document.getElementById("tour-portal-container");return v||(v=document.createElement("div"),v.id="tour-portal-container",v.style.cssText="position: fixed; top: 0; left: 0; z-index: 99999; pointer-events: none;",document.body.appendChild(v)),g.current=v,()=>{}},[]),!l.isRunning||o.length===0||!u)return null;const j=e.jsx(f0,{steps:o,stepIndex:l.stepIndex,run:l.isRunning,continuous:!0,showSkipButton:!0,showProgress:!0,disableOverlayClose:!0,disableScrolling:!1,disableScrollParentFix:!1,callback:r,styles:k1,locale:T1,scrollOffset:80,scrollToFirstStep:!0,floaterProps:{styles:{floater:{zIndex:99999}},disableAnimation:!0}},`tour-step-${l.stepIndex}`);return g.current?jN.createPortal(j,g.current):j}const Ga="model-assignment-tour",bj=[{target:"body",content:"",placement:"center",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="sidebar-model-provider"]',content:' DeepSeek Siliconflow""',placement:"right",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="add-provider-button"]',content:'""',placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="provider-dialog"]',content:"",placement:"left",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-name-input"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-apikey-input"]',content:" API  API ",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-url-input"]',content:" API API ",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-template-select"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-save-button"]',content:"",placement:"top",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-cancel-button"]',content:"",placement:"top",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="sidebar-model-management"]',content:'""',placement:"right",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="add-model-button"]',content:'""',placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="model-dialog"]',content:"",placement:"left",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-name-input"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-provider-select"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-identifier-input"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-save-button"]',content:"",placement:"top",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-cancel-button"]',content:"",placement:"top",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="tasks-tab-trigger"]',content:'""',placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="task-model-select"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1}],Nj={0:"/config/model",1:"/config/model",2:"/config/modelProvider",3:"/config/modelProvider",4:"/config/modelProvider",5:"/config/modelProvider",6:"/config/modelProvider",7:"/config/modelProvider",8:"/config/modelProvider",9:"/config/modelProvider",10:"/config/modelProvider",11:"/config/model",12:"/config/model",13:"/config/model",14:"/config/model",15:"/config/model",16:"/config/model",17:"/config/model",18:"/config/model",19:"/config/model"},pr=[{id:"siliconflow",name:"SiliconFlow",base_url:"https://api.siliconflow.cn/v1",client_type:"openai",display_name:" (SiliconFlow)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"deepseek",name:"DeepSeek",base_url:"https://api.deepseek.com",client_type:"openai",display_name:"DeepSeek",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"rinkoai",name:"RinkoAI",base_url:"https://rinkoai.com/v1",client_type:"openai",display_name:"RinkoAI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"zhipu",name:"ZhipuAI",base_url:"https://open.bigmodel.cn/api/paas/v4",client_type:"openai",display_name:" AI (ZhipuAI / GLM)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"moonshot",name:"Moonshot",base_url:"https://api.moonshot.cn/v1",client_type:"openai",display_name:" (Moonshot / Kimi)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"doubao",name:"Doubao",base_url:"https://ark.cn-beijing.volces.com/api/v3",client_type:"openai",display_name:" (Doubao)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"alibaba",name:"Alibaba",base_url:"https://dashscope.aliyuncs.com/compatible-mode/v1",client_type:"openai",display_name:" (Alibaba Qwen)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"baichuan",name:"Baichuan",base_url:"https://api.baichuan-ai.com/v1",client_type:"openai",display_name:" (Baichuan)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"minimax",name:"MiniMax",base_url:"https://api.minimax.chat/v1",client_type:"openai",display_name:"MiniMax ( AI)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"stepfun",name:"StepFun",base_url:"https://api.stepfun.com/v1",client_type:"openai",display_name:" (StepFun)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"lingyi",name:"Lingyi",base_url:"https://api.lingyiwanwu.com/v1",client_type:"openai",display_name:" (Lingyi / Yi)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"openai",name:"OpenAI",base_url:"https://api.openai.com/v1",client_type:"openai",display_name:"OpenAI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"xai",name:"xAI",base_url:"https://api.x.ai/v1",client_type:"openai",display_name:"xAI (Grok)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"anthropic",name:"Anthropic",base_url:"https://api.anthropic.com/v1",client_type:"openai",display_name:"Anthropic (Claude)"},{id:"gemini",name:"Gemini",base_url:"https://generativelanguage.googleapis.com/v1beta",client_type:"gemini",display_name:"Google Gemini",modelFetcher:{endpoint:"/models",parser:"gemini"}},{id:"cohere",name:"Cohere",base_url:"https://api.cohere.ai/v1",client_type:"openai",display_name:"Cohere"},{id:"groq",name:"Groq",base_url:"https://api.groq.com/openai/v1",client_type:"openai",display_name:"Groq",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"together",name:"Together AI",base_url:"https://api.together.xyz/v1",client_type:"openai",display_name:"Together AI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"fireworks",name:"Fireworks",base_url:"https://api.fireworks.ai/inference/v1",client_type:"openai",display_name:"Fireworks AI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"mistral",name:"Mistral",base_url:"https://api.mistral.ai/v1",client_type:"openai",display_name:"Mistral AI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"perplexity",name:"Perplexity",base_url:"https://api.perplexity.ai",client_type:"openai",display_name:"Perplexity AI"},{id:"custom",name:"",base_url:"",client_type:"openai",display_name:""}];function zp(l){return l?l.replace(/\/+$/,"").toLowerCase():""}function z1(l){if(!l)return null;const i=zp(l);return pr.find(r=>r.id!=="custom"&&zp(r.base_url)===i)||null}const Wc=l=>({...l,max_retry:l.max_retry??2,timeout:l.timeout??30,retry_interval:l.retry_interval??10}),M1=l=>{const i={};return l?(l.name?.trim()||(i.name=""),l.base_url?.trim()||(i.base_url=" URL"),l.api_key?.trim()||(i.api_key=" API Key"),{isValid:Object.keys(i).length===0,errors:i}):{isValid:!1,errors:{name:""}}};function A1(){return e.jsx(jn,{children:e.jsx(O1,{})})}function O1(){const[l,i]=m.useState([]),[r,o]=m.useState(!0),[u,x]=m.useState(!1),[h,f]=m.useState(!1),[g,j]=m.useState(!1),[v,y]=m.useState(!1),[b,S]=m.useState(null),[w,O]=m.useState(null),[A,D]=m.useState("custom"),[V,z]=m.useState(!1),[_,T]=m.useState(!1),[$,E]=m.useState(null),[se,te]=m.useState(!1),[ne,ue]=m.useState(""),[Se,oe]=m.useState(new Set),[je,be]=m.useState(!1),[U,P]=m.useState(1),[X,L]=m.useState(20),[B,_e]=m.useState(""),[Ne,Ce]=m.useState({isOpen:!1,providersToDelete:[],affectedModels:[],pendingProviders:[],context:"auto",oldProviders:[]}),[ve,ze]=m.useState({}),[Q,xe]=m.useState(new Set),[Te,J]=m.useState(new Map),{toast:le}=Ks(),qe=ka(),{state:We,goToStep:fe,registerTour:ls}=xm(),{triggerRestart:G,isRestarting:Me}=Il(),re=m.useRef(null),pe=m.useRef(!0);m.useEffect(()=>{ls(Ga,bj)},[ls]),m.useEffect(()=>{if(We.activeTourId===Ga&&We.isRunning){const I=Nj[We.stepIndex];I&&!window.location.pathname.endsWith(I.replace("/config/",""))&&qe({to:I})}},[We.stepIndex,We.activeTourId,We.isRunning,qe]);const Ee=m.useRef(We.stepIndex);m.useEffect(()=>{if(We.activeTourId===Ga&&We.isRunning){const I=Ee.current,ge=We.stepIndex;I>=3&&I<=9&&ge<3&&y(!1),I>=10&&ge>=3&&ge<=9&&(ze({}),D("custom"),S({name:"",base_url:"",api_key:"",client_type:"openai",max_retry:2,timeout:30,retry_interval:10}),O(null),te(!1),y(!0)),Ee.current=ge}},[We.stepIndex,We.activeTourId,We.isRunning]),m.useEffect(()=>{if(We.activeTourId!==Ga||!We.isRunning)return;const I=ge=>{const ke=ge.target,Us=We.stepIndex;Us===2&&ke.closest('[data-tour="add-provider-button"]')?setTimeout(()=>fe(3),300):Us===9&&ke.closest('[data-tour="provider-cancel-button"]')&&setTimeout(()=>fe(10),300)};return document.addEventListener("click",I,!0),()=>document.removeEventListener("click",I,!0)},[We,fe]),m.useEffect(()=>{Ie()},[]);const Ie=async()=>{try{o(!0);const I=await Gl();i(I.api_providers||[]),j(!1),pe.current=!1}catch(I){console.error(":",I)}finally{o(!1)}},$e=async()=>{await G()},Vt=async()=>{try{x(!0),re.current&&clearTimeout(re.current);const I=l.map(it=>({...it,max_retry:it.max_retry??2,timeout:it.timeout??30,retry_interval:it.retry_interval??10})),{shouldProceed:ge}=await _t(I,"restart");if(!ge){x(!1);return}const ke=await Gl(),Us=new Set(I.map(it=>it.name)),Ft=(ke.models||[]).filter(it=>Us.has(it.api_provider));ke.api_providers=I,ke.models=Ft,await Nr(ke),j(!1),le({title:"",description:"..."}),await $e()}catch(I){console.error(":",I),le({title:"",description:I.message,variant:"destructive"}),x(!1)}},_t=m.useCallback(async(I,ge="auto")=>{try{const ke=await Gl(),Us=new Set(l.map(ht=>ht.name)),Ua=new Set(I.map(ht=>ht.name)),Ft=Array.from(Us).filter(ht=>!Ua.has(ht));if(Ft.length===0)return{shouldProceed:!0,providers:I};const It=(ke.models||[]).filter(ht=>Ft.includes(ht.api_provider));return It.length===0?{shouldProceed:!0,providers:I}:(Ce({isOpen:!0,providersToDelete:Ft,affectedModels:It,pendingProviders:I,context:ge,oldProviders:[...l]}),{shouldProceed:!1,providers:I})}catch(ke){return console.error(":",ke),{shouldProceed:!0,providers:I}}},[l]),nt=async()=>{try{(Ne.context==="auto"?f:x)(!0),Ce(ht=>({...ht,isOpen:!1}));const ge=await Gl(),ke=Ne.pendingProviders.map(Wc),Us=new Set(ke.map(ht=>ht.name)),Ft=(ge.models||[]).filter(ht=>Us.has(ht.api_provider)),it=new Set(Ne.affectedModels.map(ht=>ht.name)),It=ge.model_task_config;It&&Object.keys(It).forEach(ht=>{const Kl=It[ht];Kl&&Array.isArray(Kl.model_list)&&(Kl.model_list=Kl.model_list.filter(Lr=>!it.has(Lr)))}),ge.api_providers=ke,ge.models=Ft,ge.model_task_config=It,await Nr(ge),i(Ne.pendingProviders),j(!1),le({title:"",description:` ${Ne.providersToDelete.length}  ${Ne.affectedModels.length} `}),Ce({isOpen:!1,providersToDelete:[],affectedModels:[],pendingProviders:[],context:"auto",oldProviders:[]}),oe(new Set),Ne.context==="restart"&&await $e()}catch(I){console.error(":",I),le({title:"",description:I.message,variant:"destructive"})}finally{Ne.context==="auto"?f(!1):x(!1)}},F=()=>{Ne.oldProviders.length>0&&i(Ne.oldProviders),Ce({isOpen:!1,providersToDelete:[],affectedModels:[],pendingProviders:[],context:"auto",oldProviders:[]}),j(!1)},He=m.useCallback(async I=>{if(pe.current)return;const{shouldProceed:ge}=await _t(I,"auto");if(!ge){j(!0);return}try{f(!0);const ke=I.map(Wc);await am("api_providers",ke),j(!1)}catch(ke){console.error(":",ke),le({title:"",description:ke.message,variant:"destructive"}),j(!0)}finally{f(!1)}},[l,_t]);m.useEffect(()=>{if(!pe.current)return j(!0),re.current&&clearTimeout(re.current),re.current=setTimeout(()=>{He(l)},2e3),()=>{re.current&&clearTimeout(re.current)}},[l,He]);const De=async()=>{try{x(!0),re.current&&clearTimeout(re.current);const I=l.map(Wc),{shouldProceed:ge}=await _t(I,"manual");if(!ge){x(!1);return}const ke=await Gl(),Us=new Set(I.map(it=>it.name)),Ua=ke.models||[],Ft=Ua.filter(it=>{const It=Us.has(it.api_provider);return It||console.warn(` "${it.name}"  "${it.api_provider}"`),It});if(Ua.length!==Ft.length){const it=Ua.length-Ft.length;le({title:"",description:` ${it} `,variant:"default"})}console.log(" providers :",I),ke.api_providers=I,ke.models=Ft,console.log(":",ke),await Nr(ke),j(!1),le({title:"",description:""})}catch(I){console.error(":",I),le({title:"",description:I.message,variant:"destructive"})}finally{x(!1)}},ye=(I,ge)=>{if(ze({}),I){const ke=pr.find(Us=>Us.base_url===I.base_url&&Us.client_type===I.client_type);D(ke?.id||"custom"),S(I)}else D("custom"),S({name:"",base_url:"",api_key:"",client_type:"openai",max_retry:2,timeout:30,retry_interval:10});O(ge),te(!1),y(!0)},ps=m.useCallback(I=>{D(I),z(!1);const ge=pr.find(ke=>ke.id===I);ge&&ge.id!=="custom"?S(ke=>({...ke,name:ge.name,base_url:ge.base_url,client_type:ge.client_type})):ge?.id==="custom"&&S(ke=>({...ke,name:"",base_url:"",client_type:"openai"}))},[]),ss=m.useMemo(()=>A!=="custom",[A]),Es=m.useCallback(async()=>{if(b?.api_key)try{await navigator.clipboard.writeText(b.api_key),le({title:"",description:"API Key "})}catch{le({title:"",description:"",variant:"destructive"})}},[b?.api_key,le]),Ms=()=>{if(!b)return;const{isValid:I,errors:ge}=M1(b);if(!I){ze(ge);return}ze({});const ke=Wc(b);if(w!==null){const Us=[...l];Us[w]=ke,i(Us)}else i([...l,ke]);y(!1),S(null),O(null)},Ls=I=>{if(!I&&b){const ge={...b,max_retry:b.max_retry??2,timeout:b.timeout??30,retry_interval:b.retry_interval??10};S(ge)}y(I)},ts=I=>{E(I),T(!0)},Pe=async()=>{if($!==null){const I=l.filter((ke,Us)=>Us!==$),{shouldProceed:ge}=await _t(I,"manual");ge&&(i(I),le({title:"",description:""}))}T(!1),E(null)},Xe=I=>{const ge=new Set(Se);ge.has(I)?ge.delete(I):ge.add(I),oe(ge)},Os=()=>{if(Se.size===Ss.length)oe(new Set);else{const I=Ss.map((ge,ke)=>l.findIndex(Us=>Us===Ss[ke]));oe(new Set(I))}},kt=()=>{if(Se.size===0){le({title:"",description:"",variant:"default"});return}be(!0)},Xs=async()=>{const I=l.filter((ke,Us)=>!Se.has(Us)),{shouldProceed:ge}=await _t(I,"manual");ge&&(i(I),oe(new Set),le({title:"",description:` ${Se.size} `})),be(!1)},Ss=m.useMemo(()=>{if(!ne)return l;const I=ne.toLowerCase();return l.filter(ge=>ge.name.toLowerCase().includes(I)||ge.base_url.toLowerCase().includes(I)||ge.client_type.toLowerCase().includes(I))},[l,ne]),{totalPages:xt,paginatedProviders:W}=m.useMemo(()=>{const I=Math.ceil(Ss.length/X),ge=Ss.slice((U-1)*X,U*X);return{totalPages:I,paginatedProviders:ge}},[Ss,U,X]),de=m.useCallback(()=>{const I=parseInt(B);I>=1&&I<=xt&&(P(I),_e(""))},[B,xt]),ys=async I=>{xe(ge=>new Set(ge).add(I));try{const ge=await o1(I);J(ke=>new Map(ke).set(I,ge)),ge.network_ok?ge.api_key_valid===!0?le({title:"",description:`${I} API Key  (${ge.latency_ms}ms)`}):ge.api_key_valid===!1?le({title:" Key ",description:`${I}  API Key `,variant:"destructive"}):le({title:"",description:`${I}  (${ge.latency_ms}ms)`}):le({title:"",description:ge.error||"",variant:"destructive"})}catch(ge){le({title:"",description:ge.message,variant:"destructive"})}finally{xe(ge=>{const ke=new Set(ge);return ke.delete(I),ke})}},Tt=async()=>{for(const I of l)await ys(I.name)},Et=I=>{const ge=Q.has(I),ke=Te.get(I);return ge?e.jsxs(Ye,{variant:"secondary",className:"gap-1",children:[e.jsx(tt,{className:"h-3 w-3 animate-spin"}),""]}):ke?ke.network_ok?ke.api_key_valid===!0?e.jsxs(Ye,{className:"gap-1 bg-green-600 hover:bg-green-700",children:[e.jsx(aa,{className:"h-3 w-3"}),""]}):ke.api_key_valid===!1?e.jsxs(Ye,{variant:"destructive",className:"gap-1",children:[e.jsx(Ot,{className:"h-3 w-3"}),"Key"]}):e.jsxs(Ye,{className:"gap-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(aa,{className:"h-3 w-3"}),""]}):e.jsxs(Ye,{variant:"destructive",className:"gap-1",children:[e.jsx(Mg,{className:"h-3 w-3"}),""]}):null};return r?e.jsx("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"..."})})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"AI"}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:" AI  API "})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[Se.size>0&&e.jsxs(C,{onClick:kt,size:"sm",variant:"destructive",className:"w-full sm:w-auto",children:[e.jsx(es,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"})," (",Se.size,")"]}),e.jsxs(C,{onClick:Tt,size:"sm",variant:"outline",className:"w-full sm:w-auto",disabled:l.length===0||Q.size>0,children:[e.jsx(hn,{className:"mr-2 h-4 w-4"}),Q.size>0?` (${Q.size})`:""]}),e.jsxs(C,{onClick:()=>ye(null,null),size:"sm",className:"w-full sm:w-auto","data-tour":"add-provider-button",children:[e.jsx(ut,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),""]}),e.jsxs(C,{onClick:De,disabled:u||h||!g||Me,size:"sm",variant:"outline",className:"w-full sm:w-auto sm:min-w-[120px]",children:[e.jsx(Ar,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),u?"...":h?"...":g?"":""]}),e.jsxs(js,{children:[e.jsx(mt,{asChild:!0,children:e.jsxs(C,{disabled:u||h||Me,size:"sm",className:"w-full sm:w-auto sm:min-w-[120px]",children:[e.jsx(Mr,{className:"mr-2 h-4 w-4"}),Me?"...":g?"":""]})}),e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsx(xs,{asChild:!0,children:e.jsx("div",{children:e.jsx("p",{children:g?",":","})})})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:g?Vt:$e,children:g?"":""})]})]})]})]})]}),e.jsxs(sa,{children:[e.jsx(Ra,{className:"h-4 w-4"}),e.jsxs(ta,{children:["",e.jsx("strong",{children:""}),'""']})]}),e.jsxs(Ze,{className:"h-[calc(100vh-260px)]",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 mb-4",children:[e.jsxs("div",{className:"relative w-full sm:flex-1 sm:max-w-sm",children:[e.jsx($t,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{placeholder:"URL ...",value:ne,onChange:I=>ue(I.target.value),className:"pl-9"})]}),ne&&e.jsxs("p",{className:"text-sm text-muted-foreground whitespace-nowrap",children:[" ",Ss.length," "]})]}),e.jsx("div",{className:"md:hidden space-y-3",children:Ss.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-8 rounded-lg border bg-card",children:ne?"":'""'}):W.map((I,ge)=>{const ke=l.findIndex(Us=>Us===I);return e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-semibold text-base truncate",children:I.name}),Et(I.name)]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 break-all",children:I.base_url})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[e.jsx(C,{variant:"outline",size:"sm",onClick:()=>ys(I.name),disabled:Q.has(I.name),title:"",children:Q.has(I.name)?e.jsx(tt,{className:"h-4 w-4 animate-spin"}):e.jsx(hn,{className:"h-4 w-4"})}),e.jsx(C,{variant:"default",size:"sm",onClick:()=>ye(I,ke),children:e.jsx(fn,{className:"h-4 w-4",strokeWidth:2,fill:"none"})}),e.jsx(C,{size:"sm",onClick:()=>ts(ke),className:"bg-red-600 hover:bg-red-700 text-white",children:e.jsx(es,{className:"h-4 w-4",strokeWidth:2,fill:"none"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsx("p",{className:"font-medium",children:I.client_type})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsx("p",{className:"font-medium",children:I.max_retry})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:"()"}),e.jsx("p",{className:"font-medium",children:I.timeout})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:"()"}),e.jsx("p",{className:"font-medium",children:I.retry_interval})]})]})]},ge)})}),e.jsx("div",{className:"hidden md:block rounded-lg border bg-card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(bn,{children:[e.jsx(Nn,{children:e.jsxs(gt,{children:[e.jsx(Je,{className:"w-12",children:e.jsx(jt,{checked:Se.size===Ss.length&&Ss.length>0,onCheckedChange:Os})}),e.jsx(Je,{children:""}),e.jsx(Je,{children:""}),e.jsx(Je,{children:"URL"}),e.jsx(Je,{children:""}),e.jsx(Je,{className:"text-right",children:""}),e.jsx(Je,{className:"text-right",children:"()"}),e.jsx(Je,{className:"text-right",children:"()"}),e.jsx(Je,{className:"text-right",children:""})]})}),e.jsx(yn,{children:W.length===0?e.jsx(gt,{children:e.jsx(Qe,{colSpan:9,className:"text-center text-muted-foreground py-8",children:ne?"":'""'})}):W.map((I,ge)=>{const ke=l.findIndex(Us=>Us===I);return e.jsxs(gt,{children:[e.jsx(Qe,{children:e.jsx(jt,{checked:Se.has(ke),onCheckedChange:()=>Xe(ke)})}),e.jsx(Qe,{children:Et(I.name)||e.jsx(Ye,{variant:"outline",className:"text-muted-foreground",children:""})}),e.jsx(Qe,{className:"font-medium",children:I.name}),e.jsx(Qe,{className:"max-w-xs truncate",title:I.base_url,children:I.base_url}),e.jsx(Qe,{children:I.client_type}),e.jsx(Qe,{className:"text-right",children:I.max_retry}),e.jsx(Qe,{className:"text-right",children:I.timeout}),e.jsx(Qe,{className:"text-right",children:I.retry_interval}),e.jsx(Qe,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(C,{variant:"outline",size:"sm",onClick:()=>ys(I.name),disabled:Q.has(I.name),title:"",children:Q.has(I.name)?e.jsx(tt,{className:"h-4 w-4 animate-spin"}):e.jsx(hn,{className:"h-4 w-4"})}),e.jsxs(C,{variant:"default",size:"sm",onClick:()=>ye(I,ke),children:[e.jsx(fn,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]}),e.jsxs(C,{size:"sm",onClick:()=>ts(ke),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(es,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]})]})})]},ge)})})]})})}),Ss.length>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{htmlFor:"page-size-provider",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(Ue,{value:X.toString(),onValueChange:I=>{L(parseInt(I)),P(1),oe(new Set)},children:[e.jsx(Re,{id:"page-size-provider",className:"w-20",children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"10",children:"10"}),e.jsx(ee,{value:"20",children:"20"}),e.jsx(ee,{value:"50",children:"50"}),e.jsx(ee,{value:"100",children:"100"})]})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",(U-1)*X+1," "," ",Math.min(U*X,Ss.length),"  ",Ss.length," "]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{variant:"outline",size:"sm",onClick:()=>P(1),disabled:U===1,className:"hidden sm:flex",children:e.jsx(vi,{className:"h-4 w-4"})}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>P(I=>Math.max(1,I-1)),disabled:U===1,children:[e.jsx(pl,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{type:"number",value:B,onChange:I=>_e(I.target.value),onKeyDown:I=>I.key==="Enter"&&de(),placeholder:U.toString(),className:"w-16 h-8 text-center",min:1,max:xt}),e.jsx(C,{variant:"outline",size:"sm",onClick:de,disabled:!B,className:"h-8",children:""})]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>P(I=>I+1),disabled:U>=xt,children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(Ya,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(C,{variant:"outline",size:"sm",onClick:()=>P(xt),disabled:U>=xt,className:"hidden sm:flex",children:e.jsx(bi,{className:"h-4 w-4"})})]})]})]}),e.jsx(Qs,{open:v,onOpenChange:Ls,children:e.jsxs(qs,{className:"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto","data-tour":"provider-dialog",preventOutsideClose:We.isRunning,children:[e.jsxs(Gs,{children:[e.jsx(Vs,{children:w!==null?"":""}),e.jsx(Ws,{children:" API "})]}),e.jsxs("form",{onSubmit:I=>{I.preventDefault(),Ms()},autoComplete:"off",children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2","data-tour":"provider-template-select",children:[e.jsx(k,{htmlFor:"template",children:""}),e.jsxs(Ia,{open:V,onOpenChange:z,children:[e.jsx(Qa,{asChild:!0,children:e.jsxs(C,{variant:"outline",role:"combobox","aria-expanded":V,className:"w-full justify-between",children:[A?pr.find(I=>I.id===A)?.display_name:"...",e.jsx(cm,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(La,{className:"p-0",align:"start",style:{width:"var(--radix-popover-trigger-width)"},children:e.jsxs(vo,{children:[e.jsx(bo,{placeholder:"..."}),e.jsx(Ze,{className:"h-[300px]",children:e.jsxs(No,{className:"max-h-none overflow-visible",children:[e.jsx(yo,{children:""}),e.jsx(Cr,{children:pr.map(I=>e.jsxs(kr,{value:I.display_name,onSelect:()=>ps(I.id),children:[e.jsx(ea,{className:`mr-2 h-4 w-4 ${A===I.id?"opacity-100":"opacity-0"}`}),I.display_name]},I.id))})]})})]})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" URL ,"})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"provider-name-input",children:[e.jsx(k,{htmlFor:"name",className:ve.name?"text-destructive":"",children:" *"}),e.jsx(ie,{id:"name",value:b?.name||"",onChange:I=>{S(ge=>ge?{...ge,name:I.target.value}:null),ve.name&&ze(ge=>({...ge,name:void 0}))},placeholder:": DeepSeek, SiliconFlow",className:ve.name?"border-destructive focus-visible:ring-destructive":""}),ve.name&&e.jsx("p",{className:"text-xs text-destructive",children:ve.name})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"provider-url-input",children:[e.jsx(k,{htmlFor:"base_url",className:ve.base_url?"text-destructive":"",children:" URL *"}),e.jsx(ie,{id:"base_url",value:b?.base_url||"",onChange:I=>{S(ge=>ge?{...ge,base_url:I.target.value}:null),ve.base_url&&ze(ge=>({...ge,base_url:void 0}))},placeholder:"https://api.example.com/v1",disabled:ss,className:`${ss?"bg-muted cursor-not-allowed":""} ${ve.base_url?"border-destructive focus-visible:ring-destructive":""}`}),ve.base_url&&e.jsx("p",{className:"text-xs text-destructive",children:ve.base_url}),ss&&!ve.base_url&&e.jsx("p",{className:"text-xs text-muted-foreground",children:' URL ,""'})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"provider-apikey-input",children:[e.jsx(k,{htmlFor:"api_key",className:ve.api_key?"text-destructive":"",children:"API Key *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{id:"api_key",type:se?"text":"password",value:b?.api_key||"",onChange:I=>{S(ge=>ge?{...ge,api_key:I.target.value}:null),ve.api_key&&ze(ge=>({...ge,api_key:void 0}))},placeholder:"sk-...",className:`flex-1 ${ve.api_key?"border-destructive focus-visible:ring-destructive":""}`}),e.jsx(C,{type:"button",variant:"outline",size:"icon",onClick:()=>te(!se),title:se?"":"",children:se?e.jsx(wr,{className:"h-4 w-4"}):e.jsx(Gt,{className:"h-4 w-4"})}),e.jsx(C,{type:"button",variant:"outline",size:"icon",onClick:Es,title:"",children:e.jsx(co,{className:"h-4 w-4"})})]}),ve.api_key&&e.jsx("p",{className:"text-xs text-destructive",children:ve.api_key})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"client_type",children:""}),e.jsxs(Ue,{value:b?.client_type||"openai",onValueChange:I=>S(ge=>ge?{...ge,client_type:I}:null),disabled:ss,children:[e.jsx(Re,{id:"client_type",className:ss?"bg-muted cursor-not-allowed":"",children:e.jsx(Be,{placeholder:""})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"openai",children:"OpenAI"}),e.jsx(ee,{value:"gemini",children:"Gemini"})]})]}),ss&&e.jsx("p",{className:"text-xs text-muted-foreground",children:',""'})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"max_retry",children:""}),e.jsx(ie,{id:"max_retry",type:"number",min:"0",value:b?.max_retry??"",onChange:I=>{const ge=I.target.value===""?null:parseInt(I.target.value);S(ke=>ke?{...ke,max_retry:ge}:null)},placeholder:": 2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"timeout",children:"()"}),e.jsx(ie,{id:"timeout",type:"number",min:"1",value:b?.timeout??"",onChange:I=>{const ge=I.target.value===""?null:parseInt(I.target.value);S(ke=>ke?{...ke,timeout:ge}:null)},placeholder:": 30"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"retry_interval",children:"()"}),e.jsx(ie,{id:"retry_interval",type:"number",min:"1",value:b?.retry_interval??"",onChange:I=>{const ge=I.target.value===""?null:parseInt(I.target.value);S(ke=>ke?{...ke,retry_interval:ge}:null)},placeholder:": 10"})]})]})]}),e.jsxs(at,{children:[e.jsx(C,{type:"button",variant:"outline",onClick:()=>y(!1),"data-tour":"provider-cancel-button",children:""}),e.jsx(C,{type:"submit","data-tour":"provider-save-button",children:""})]})]})]})}),e.jsx(js,{open:_,onOpenChange:T,children:e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:[' "',$!==null?l[$]?.name:"",'"  ']})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:Pe,children:""})]})]})}),e.jsx(js,{open:je,onOpenChange:be,children:e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:[" ",Se.size,"  "]})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:Xs,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),e.jsx(js,{open:Ne.isOpen,onOpenChange:I=>Ce(ge=>({...ge,isOpen:I})),children:e.jsxs(os,{className:"max-w-2xl",children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsx(xs,{asChild:!0,children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{children:["",e.jsx("strong",{className:"text-foreground ml-1",children:Ne.providersToDelete.join(", ")})]}),e.jsxs("p",{className:"text-yellow-600 dark:text-yellow-500 font-medium",children:["  ",Ne.affectedModels.length," "]}),e.jsx(Ze,{className:"h-32 w-full rounded border p-3",children:e.jsx("div",{className:"space-y-1",children:Ne.affectedModels.map((I,ge)=>e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-mono text-muted-foreground",children:""}),e.jsx("span",{className:"ml-2 font-medium",children:I.name}),e.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",I.model_identifier,")"]})]},ge))})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})})]}),e.jsxs(us,{children:[e.jsx(fs,{onClick:F,children:""}),e.jsx(hs,{onClick:nt,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),e.jsx(vn,{})]})}function yj(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`${Date.now().toString(36)}-${Math.random().toString(36).substring(2,11)}`}function wj(l){return typeof l=="boolean"?"boolean":typeof l=="number"?"number":"string"}function D1(l,i){switch(i){case"boolean":return l==="true";case"number":{const r=parseFloat(l);return isNaN(r)?0:r}default:return l}}function Fu(l){return Object.entries(l).map(([i,r])=>({id:yj(),key:i,value:r,type:wj(r)}))}function Iu(l){const i={};for(const r of l)r.key.trim()&&(i[r.key.trim()]=r.value);return i}function Qu(l){if(!l.trim())return{valid:!0,parsed:{}};try{const i=JSON.parse(l);if(typeof i!="object"||i===null||Array.isArray(i))return{valid:!1,error:" JSON  {}"};for(const[r,o]of Object.entries(i))if(o!==null&&!["string","number","boolean"].includes(typeof o))return{valid:!1,error:` "${r}"  string/number/boolean`};return{valid:!0,parsed:i}}catch{return{valid:!1,error:"JSON "}}}function R1(l){switch(l){case"boolean":return"";case"number":return"";default:return""}}function L1(l){switch(l){case"boolean":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400";case"number":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";default:return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"}}function U1({value:l,onChange:i,className:r,placeholder:o="..."}){const[u,x]=m.useState("list"),[h,f]=m.useState(()=>Fu(l||{})),[g,j]=m.useState(()=>Object.keys(l||{}).length>0?JSON.stringify(l,null,2):""),[v,y]=m.useState(null);m.useEffect(()=>{const V=Fu(l||{});f(V),j(Object.keys(l||{}).length>0?JSON.stringify(l,null,2):"")},[l]);const b=m.useMemo(()=>{const V=Qu(g);return V.valid&&V.parsed?{success:!0,data:V.parsed}:{success:!1,data:{}}},[g]),S=m.useCallback(V=>{const z=V;if(z==="json"&&u==="list"){const _=Iu(h);j(Object.keys(_).length>0?JSON.stringify(_,null,2):""),y(null)}else if(z==="list"&&u==="json"){const _=Qu(g);_.valid&&_.parsed&&(f(Fu(_.parsed)),y(null))}x(z)},[u,h,g]),w=m.useCallback(()=>{const V={id:yj(),key:"",value:"",type:"string"},z=[...h,V];f(z)},[h]),O=m.useCallback(V=>{const z=h.filter(_=>_.id!==V);f(z),i(Iu(z))},[h,i]),A=m.useCallback((V,z,_)=>{const T=h.map($=>{if($.id!==V)return $;if(z==="type"){const E=_;let se;return E==="boolean"?se=$.value==="true"||$.value===!0:E==="number"?se=typeof $.value=="number"?$.value:parseFloat(String($.value))||0:se=String($.value),{...$,type:E,value:se}}else return z==="value"?{...$,value:D1(_,$.type)}:{...$,[z]:_}});f(T),i(Iu(T))},[h,i]),D=m.useCallback(V=>{j(V);const z=Qu(V);z.valid&&z.parsed?(y(null),i(z.parsed)):y(z.error||"JSON ")},[i]);return e.jsxs("div",{className:H("space-y-3",r),children:[e.jsx(k,{className:"text-sm font-medium",children:""}),e.jsxs(Sa,{value:u,onValueChange:S,className:"w-full",children:[e.jsxs(xa,{className:"h-8 p-0.5 bg-muted/60",children:[e.jsx(is,{value:"list",className:"h-7 px-3 text-xs data-[state=active]:bg-background data-[state=active]:shadow-sm",children:""}),e.jsx(is,{value:"json",className:"h-7 px-3 text-xs data-[state=active]:bg-background data-[state=active]:shadow-sm",children:"JSON"})]}),e.jsxs(As,{value:"list",className:"mt-3 space-y-2",children:[h.length===0?e.jsx("div",{className:"text-sm text-muted-foreground text-center py-4 border border-dashed rounded-md",children:o}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-[1fr_1fr_90px_32px] gap-2 text-xs text-muted-foreground px-1",children:[e.jsx("span",{children:""}),e.jsx("span",{children:""}),e.jsx("span",{children:""}),e.jsx("span",{})]}),h.map(V=>e.jsxs("div",{className:"grid grid-cols-[1fr_1fr_90px_32px] gap-2 items-center",children:[e.jsx(ie,{value:V.key,onChange:z=>A(V.id,"key",z.target.value),placeholder:"key",className:"h-8 text-sm"}),V.type==="boolean"?e.jsxs("div",{className:"flex items-center h-8 px-3 border rounded-md bg-background",children:[e.jsx(Fe,{checked:V.value===!0,onCheckedChange:z=>A(V.id,"value",String(z))}),e.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:V.value?"true":"false"})]}):e.jsx(ie,{type:V.type==="number"?"number":"text",value:V.value,onChange:z=>A(V.id,"value",z.target.value),placeholder:"value",className:"h-8 text-sm",step:V.type==="number"?"any":void 0}),e.jsxs(Ue,{value:V.type,onValueChange:z=>A(V.id,"type",z),children:[e.jsx(Re,{className:"h-8 text-xs",children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"string",children:""}),e.jsx(ee,{value:"number",children:""}),e.jsx(ee,{value:"boolean",children:""})]})]}),e.jsx(C,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-destructive",onClick:()=>O(V.id),children:e.jsx(es,{className:"h-4 w-4"})})]},V.id))]}),e.jsxs(C,{type:"button",variant:"outline",size:"sm",className:"w-full h-8",onClick:w,children:[e.jsx(ut,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsx(As,{value:"json",className:"mt-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:""}),v?e.jsxs("div",{className:"flex items-center gap-1 text-xs text-destructive",children:[e.jsx(Ot,{className:"h-3 w-3"}),e.jsx("span",{className:"truncate max-w-[150px]",children:v})]}):g.trim()&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400",children:[e.jsx(ea,{className:"h-3 w-3"}),e.jsx("span",{children:""})]})]}),e.jsx(Ys,{value:g,onChange:V=>D(V.target.value),placeholder:`{
  "key": "value"
}`,className:H("font-mono text-sm min-h-[140px] h-[140px] resize-y flex-1",v&&"border-destructive focus-visible:ring-destructive")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" stringnumberboolean "})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"min-h-[140px] h-[140px] flex-1 rounded-md border bg-muted/30 p-3 overflow-auto",children:b.success&&Object.keys(b.data).length>0?e.jsx("div",{className:"space-y-2",children:Object.entries(b.data).map(([V,z])=>{const _=wj(z);return e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("code",{className:"px-1.5 py-0.5 bg-background rounded text-xs font-medium",children:V}),e.jsx("span",{className:"text-muted-foreground",children:"="}),e.jsx("span",{className:H("font-mono",_==="boolean"&&(z?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),_==="number"&&"text-blue-600 dark:text-blue-400",_==="string"&&"text-amber-600 dark:text-amber-400"),children:_==="string"?`"${z}"`:String(z)}),e.jsx(Ye,{variant:"secondary",className:H("h-5 text-[10px] px-1.5",L1(_)),children:R1(_)})]},V)})}):b.success?e.jsx("div",{className:"flex items-center justify-center h-full text-sm text-muted-foreground",children:""}):e.jsx("div",{className:"flex items-center justify-center h-full text-sm text-destructive",children:"JSON "})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})})]})]})}function B1({value:l,label:i,onRemove:r}){const{attributes:o,listeners:u,setNodeRef:x,transform:h,transition:f,isDragging:g}=Wg({id:l}),j={transform:ej.Transform.toString(h),transition:f,opacity:g?.5:1},v=b=>{b.preventDefault(),b.stopPropagation(),r(l)},y=b=>{b.stopPropagation()};return e.jsx("div",{ref:x,style:j,className:H("inline-flex items-center gap-1",g&&"shadow-lg"),children:e.jsxs(Ye,{variant:"secondary",className:"cursor-move hover:bg-secondary/80 flex items-center gap-1",children:[e.jsx("div",{...o,...u,className:"cursor-grab active:cursor-grabbing flex items-center",children:e.jsx(Lg,{className:"h-3 w-3 text-muted-foreground"})}),e.jsx("span",{children:i}),e.jsx("button",{type:"button",className:"ml-1 rounded-sm hover:bg-destructive/20 focus:outline-none focus:ring-1 focus:ring-destructive",onClick:v,onPointerDown:y,onMouseDown:b=>b.stopPropagation(),children:e.jsx(fl,{className:"h-3 w-3 cursor-pointer hover:text-destructive",strokeWidth:2,fill:"none"})})]})})}function H1({options:l,selected:i,onChange:r,placeholder:o="...",emptyText:u="",className:x}){const[h,f]=m.useState(!1),g=Ig(uo(Kg,{activationConstraint:{distance:8}}),uo(Yg,{coordinateGetter:Qg})),j=b=>{i.includes(b)?r(i.filter(S=>S!==b)):r([...i,b])},v=b=>{r(i.filter(S=>S!==b))},y=b=>{const{active:S,over:w}=b;if(w&&S.id!==w.id){const O=i.indexOf(S.id),A=i.indexOf(w.id);r(Xg(i,O,A))}};return e.jsxs(Ia,{open:h,onOpenChange:f,children:[e.jsx(Qa,{asChild:!0,children:e.jsxs(C,{variant:"outline",role:"combobox","aria-expanded":h,className:H("w-full justify-between min-h-10 h-auto",x),children:[e.jsx(Pg,{sensors:g,collisionDetection:Jg,onDragEnd:y,children:e.jsx(Zg,{items:i,strategy:h0,children:e.jsx("div",{className:"flex gap-1 flex-wrap flex-1",children:i.length===0?e.jsx("span",{className:"text-muted-foreground",children:o}):i.map(b=>{const S=l.find(w=>w.value===b);return e.jsx(B1,{value:b,label:S?.label||b,onRemove:v},b)})})})}),e.jsx(cm,{className:"ml-2 h-4 w-4 shrink-0 opacity-50",strokeWidth:2,fill:"none"})]})}),e.jsx(La,{className:"w-full p-0",align:"start",children:e.jsxs(vo,{children:[e.jsx(bo,{placeholder:"...",className:"h-9"}),e.jsxs(No,{children:[e.jsx(yo,{children:u}),e.jsx(Cr,{children:l.map(b=>{const S=i.includes(b.value);return e.jsxs(kr,{value:b.value,onSelect:()=>j(b.value),children:[e.jsx("div",{className:H("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",S?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(ea,{className:"h-3 w-3",strokeWidth:2,fill:"none"})}),e.jsx("span",{children:b.label})]},b.value)})})]})]})})]})}const Ma=Ct.memo(function({title:i,description:r,taskConfig:o,modelNames:u,onChange:x,hideTemperature:h=!1,hideMaxTokens:f=!1,dataTour:g}){const j=v=>{x("model_list",v)};return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-base sm:text-lg",children:i}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:r})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2","data-tour":g,children:[e.jsx(k,{children:""}),e.jsx(H1,{options:u.map(v=>({label:v,value:v})),selected:o.model_list||[],onChange:j,placeholder:"...",emptyText:""})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[!h&&e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{children:""}),e.jsx(ie,{type:"number",step:"0.1",min:"0",max:"1",value:o.temperature??.3,onChange:v=>{const y=parseFloat(v.target.value);!isNaN(y)&&y>=0&&y<=1&&x("temperature",y)},className:"w-20 h-8 text-sm"})]}),e.jsx(ma,{value:[o.temperature??.3],onValueChange:v=>x("temperature",v[0]),min:0,max:1,step:.1,className:"w-full"})]}),!f&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{children:" Token"}),e.jsx(ie,{type:"number",step:"1",min:"1",value:o.max_tokens??1024,onChange:v=>x("max_tokens",parseInt(v.target.value))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{children:" ()"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(ie,{type:"number",step:"1",min:"1",value:o.slow_threshold??15,onChange:v=>{const y=parseInt(v.target.value);!isNaN(y)&&y>=1&&x("slow_threshold",y)},placeholder:"15"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})]})}),$1=Ct.memo(function({paginatedModels:i,allModels:r,onEdit:o,onDelete:u,isModelUsed:x,searchQuery:h}){return i.length===0?e.jsx("div",{className:"md:hidden text-center text-muted-foreground py-8 rounded-lg border bg-card",children:h?"":""}):e.jsx("div",{className:"md:hidden space-y-3",children:i.map((f,g)=>{const j=r.findIndex(y=>y===f),v=x(f.name);return e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-base",children:f.name}),e.jsx(Ye,{variant:v?"default":"secondary",className:v?"bg-green-600 hover:bg-green-700":"",children:v?"":""})]}),e.jsx("p",{className:"text-xs text-muted-foreground break-all",title:f.model_identifier,children:f.model_identifier})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[e.jsxs(C,{variant:"default",size:"sm",onClick:()=>o(f,j),children:[e.jsx(fn,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]}),e.jsxs(C,{size:"sm",onClick:()=>u(j),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(es,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsx("p",{className:"font-medium",children:f.api_provider})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsx("p",{className:"font-medium",children:f.temperature!=null?f.temperature:e.jsx("span",{className:"text-muted-foreground",children:""})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsxs("p",{className:"font-medium",children:["",f.price_in,"/M"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsxs("p",{className:"font-medium",children:["",f.price_out,"/M"]})]})]})]},g)})})}),q1=Ct.memo(function({paginatedModels:i,allModels:r,filteredModels:o,selectedModels:u,onEdit:x,onDelete:h,onToggleSelection:f,onToggleSelectAll:g,isModelUsed:j,searchQuery:v}){return e.jsx("div",{className:"hidden md:block rounded-lg border bg-card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(bn,{children:[e.jsx(Nn,{children:e.jsxs(gt,{children:[e.jsx(Je,{className:"w-12",children:e.jsx(jt,{checked:u.size===o.length&&o.length>0,onCheckedChange:g})}),e.jsx(Je,{className:"w-24",children:""}),e.jsx(Je,{children:""}),e.jsx(Je,{children:""}),e.jsx(Je,{children:""}),e.jsx(Je,{className:"text-center",children:""}),e.jsx(Je,{className:"text-right",children:""}),e.jsx(Je,{className:"text-right",children:""}),e.jsx(Je,{className:"text-right",children:""})]})}),e.jsx(yn,{children:i.length===0?e.jsx(gt,{children:e.jsx(Qe,{colSpan:9,className:"text-center text-muted-foreground py-8",children:v?"":""})}):i.map((y,b)=>{const S=r.findIndex(O=>O===y),w=j(y.name);return e.jsxs(gt,{children:[e.jsx(Qe,{children:e.jsx(jt,{checked:u.has(S),onCheckedChange:()=>f(S)})}),e.jsx(Qe,{children:e.jsx(Ye,{variant:w?"default":"secondary",className:w?"bg-green-600 hover:bg-green-700":"",children:w?"":""})}),e.jsx(Qe,{className:"font-medium",children:y.name}),e.jsx(Qe,{className:"max-w-xs truncate",title:y.model_identifier,children:y.model_identifier}),e.jsx(Qe,{children:y.api_provider}),e.jsx(Qe,{className:"text-center",children:y.temperature!=null?y.temperature:e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsxs(Qe,{className:"text-right",children:["",y.price_in,"/M"]}),e.jsxs(Qe,{className:"text-right",children:["",y.price_out,"/M"]}),e.jsx(Qe,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(C,{variant:"default",size:"sm",onClick:()=>x(y,S),children:[e.jsx(fn,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]}),e.jsxs(C,{size:"sm",onClick:()=>h(S),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(es,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]})]})})]},b)})})]})})})}),G1=300*1e3,Mp=new Map,V1=[10,20,50,100],F1=Ct.memo(function({page:i,pageSize:r,totalItems:o,jumpToPage:u,onPageChange:x,onPageSizeChange:h,onJumpToPageChange:f,onJumpToPage:g,onSelectionClear:j}){const v=Math.ceil(o/r),y=S=>{h(parseInt(S)),x(1),j?.()},b=S=>{S.key==="Enter"&&g()};return o===0?null:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{htmlFor:"page-size-model",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(Ue,{value:r.toString(),onValueChange:y,children:[e.jsx(Re,{id:"page-size-model",className:"w-20",children:e.jsx(Be,{})}),e.jsx(Le,{children:V1.map(S=>e.jsx(ee,{value:S.toString(),children:S},S))})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",(i-1)*r+1," "," ",Math.min(i*r,o),"  ",o," "]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{variant:"outline",size:"sm",onClick:()=>x(1),disabled:i===1,className:"hidden sm:flex",children:e.jsx(vi,{className:"h-4 w-4"})}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>x(Math.max(1,i-1)),disabled:i===1,children:[e.jsx(pl,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{type:"number",value:u,onChange:S=>f(S.target.value),onKeyDown:b,placeholder:i.toString(),className:"w-16 h-8 text-center",min:1,max:v}),e.jsx(C,{variant:"outline",size:"sm",onClick:g,disabled:!u,className:"h-8",children:""})]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>x(i+1),disabled:i>=v,children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(Ya,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(C,{variant:"outline",size:"sm",onClick:()=>x(v),disabled:i>=v,className:"hidden sm:flex",children:e.jsx(bi,{className:"h-4 w-4"})})]})]})});function I1(l){const{models:i,taskConfig:r,debounceMs:o=2e3,onSavingChange:u,onUnsavedChange:x}=l,h=m.useRef(null),f=m.useRef(null),g=m.useRef(!0),j=m.useCallback(()=>{h.current&&(clearTimeout(h.current),h.current=null),f.current&&(clearTimeout(f.current),f.current=null)},[]),v=m.useCallback(S=>{const w={model_identifier:S.model_identifier,name:S.name,api_provider:S.api_provider,price_in:S.price_in??0,price_out:S.price_out??0,force_stream_mode:S.force_stream_mode??!1,extra_params:S.extra_params??{}};return S.temperature!=null&&(w.temperature=S.temperature),S.max_tokens!=null&&(w.max_tokens=S.max_tokens),w},[]),y=m.useCallback(async S=>{try{u?.(!0);const w=S.map(v);await am("models",w),x?.(!1)}catch(w){console.error(":",w),x?.(!0)}finally{u?.(!1)}},[u,x,v]),b=m.useCallback(async S=>{try{u?.(!0),await am("model_task_config",S),x?.(!1)}catch(w){console.error(":",w),x?.(!0)}finally{u?.(!1)}},[u,x]);return m.useEffect(()=>{if(!g.current)return x?.(!0),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{y(i)},o),()=>{h.current&&clearTimeout(h.current)}},[i,y,o,x]),m.useEffect(()=>{if(!(g.current||!r))return x?.(!0),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{b(r)},o),()=>{f.current&&clearTimeout(f.current)}},[r,b,o,x]),m.useEffect(()=>()=>{j()},[j]),{clearTimers:j,initialLoadRef:g}}function Q1(l={}){const{onCloseEditDialog:i}=l,r=ka(),{registerTour:o,startTour:u,state:x,goToStep:h}=xm(),f=m.useRef(x.stepIndex);return m.useEffect(()=>{o(Ga,bj)},[o]),m.useEffect(()=>{if(x.activeTourId===Ga&&x.isRunning){const j=Nj[x.stepIndex];j&&!window.location.pathname.endsWith(j.replace("/config/",""))&&r({to:j})}},[x.stepIndex,x.activeTourId,x.isRunning,r]),m.useEffect(()=>{if(x.activeTourId===Ga&&x.isRunning){const j=f.current,v=x.stepIndex;j>=12&&j<=17&&v<12&&i?.(),f.current=v}},[x.stepIndex,x.activeTourId,x.isRunning,i]),m.useEffect(()=>{if(x.activeTourId!==Ga||!x.isRunning)return;const j=v=>{const y=v.target,b=x.stepIndex;b===2&&y.closest('[data-tour="add-provider-button"]')?setTimeout(()=>h(3),300):b===9&&y.closest('[data-tour="provider-cancel-button"]')?setTimeout(()=>h(10),300):b===11&&y.closest('[data-tour="add-model-button"]')?setTimeout(()=>h(12),300):b===17&&y.closest('[data-tour="model-cancel-button"]')?setTimeout(()=>h(18),300):b===18&&y.closest('[data-tour="tasks-tab-trigger"]')&&setTimeout(()=>h(19),300)};return document.addEventListener("click",j,!0),()=>document.removeEventListener("click",j,!0)},[x,h]),{startTour:m.useCallback(()=>{u(Ga)},[u]),isRunning:x.isRunning&&x.activeTourId===Ga,stepIndex:x.stepIndex}}function Y1(l){const{getProviderConfig:i}=l,[r,o]=m.useState([]),[u,x]=m.useState(!1),[h,f]=m.useState(null),[g,j]=m.useState(null),v=m.useCallback(()=>{o([]),f(null),j(null)},[]),y=m.useCallback(async(b,S=!1)=>{const w=i(b);if(!w?.base_url){o([]),j(null),f('""');return}if(!w.api_key){o([]),j(null),f(' API Key""');return}const O=z1(w.base_url);if(j(O),!O?.modelFetcher){o([]),f(null);return}const A=`${b}:${w.base_url}`,D=Mp.get(A);if(!S&&D&&Date.now()-D.timestamp<G1){o(D.models),f(null);return}x(!0),f(null);try{const V=await c1(b,O.modelFetcher.parser,O.modelFetcher.endpoint);o(V),Mp.set(A,{models:V,timestamp:Date.now()})}catch(V){console.error(":",V);const z=V.message||"";z.includes("")||z.includes("")||z.includes("API Key")?f('API Key ""'):z.includes("")?f(" API Key "):z.includes("timeout")||z.includes("")?f(""):z.includes("")?f(""):f(z),o([])}finally{x(!1)}},[i]);return{availableModels:r,fetchingModels:u,modelFetchError:h,matchedTemplate:g,fetchModelsForProvider:y,clearModels:v}}function K1(){return e.jsx(jn,{children:e.jsx(X1,{})})}function X1(){const[l,i]=m.useState([]),[r,o]=m.useState([]),[u,x]=m.useState([]),[h,f]=m.useState([]),[g,j]=m.useState(null),[v,y]=m.useState(!0),[b,S]=m.useState(!1),[w,O]=m.useState(!1),[A,D]=m.useState(!1),[V,z]=m.useState(!1),[_,T]=m.useState(null),[$,E]=m.useState(null),[se,te]=m.useState(!1),[ne,ue]=m.useState(null),[Se,oe]=m.useState(""),[je,be]=m.useState(new Set),[U,P]=m.useState(!1),[X,L]=m.useState(1),[B,_e]=m.useState(20),[Ne,Ce]=m.useState(""),[ve,ze]=m.useState(!1),[Q,xe]=m.useState({}),{toast:Te}=Ks(),{triggerRestart:J,isRestarting:le}=Il(),{startTour:qe,isRunning:We}=Q1({onCloseEditDialog:()=>z(!1)}),{clearTimers:fe,initialLoadRef:ls}=I1({models:l,taskConfig:g,onSavingChange:O,onUnsavedChange:D}),G=m.useCallback(async()=>{try{y(!0);const W=await Gl(),de=W.models||[];i(de),f(de.map(Tt=>Tt.name));const ys=W.api_providers||[];o(ys.map(Tt=>Tt.name)),x(ys),j(W.model_task_config||null),D(!1),ls.current=!1}catch(W){console.error(":",W)}finally{y(!1)}},[ls]);m.useEffect(()=>{G()},[G]);const Me=m.useCallback(W=>u.find(de=>de.name===W),[u]),{availableModels:re,fetchingModels:pe,modelFetchError:Ee,matchedTemplate:Ie,fetchModelsForProvider:$e,clearModels:Vt}=Y1({getProviderConfig:Me});m.useEffect(()=>{V&&_?.api_provider&&$e(_.api_provider)},[V,_?.api_provider,$e]);const _t=async()=>{await J()},nt=W=>{const de={model_identifier:W.model_identifier,name:W.name,api_provider:W.api_provider,price_in:W.price_in??0,price_out:W.price_out??0,force_stream_mode:W.force_stream_mode??!1,extra_params:W.extra_params??{}};return W.temperature!=null&&(de.temperature=W.temperature),W.max_tokens!=null&&(de.max_tokens=W.max_tokens),de},F=async()=>{try{S(!0),fe();const W=await Gl();W.models=l.map(nt),W.model_task_config=g,await Nr(W),D(!1),Te({title:"",description:"..."}),await _t()}catch(W){console.error(":",W),Te({title:"",description:W.message,variant:"destructive"}),S(!1)}},He=async()=>{try{S(!0),fe();const W=await Gl();W.models=l.map(nt),W.model_task_config=g,await Nr(W),D(!1),Te({title:"",description:""}),await G()}catch(W){console.error(":",W),Te({title:"",description:W.message,variant:"destructive"})}finally{S(!1)}},De=(W,de)=>{xe({}),T(W||{model_identifier:"",name:"",api_provider:r[0]||"",price_in:0,price_out:0,temperature:null,max_tokens:null,force_stream_mode:!1,extra_params:{}}),E(de),z(!0)},ye=()=>{if(!_)return;const W={};if(_.name?.trim()||(W.name=""),_.api_provider?.trim()||(W.api_provider=" API "),_.model_identifier?.trim()||(W.model_identifier=""),Object.keys(W).length>0){xe(W);return}xe({});const de={model_identifier:_.model_identifier,name:_.name,api_provider:_.api_provider,price_in:_.price_in??0,price_out:_.price_out??0,force_stream_mode:_.force_stream_mode??!1,extra_params:_.extra_params??{}};_.temperature!=null&&(de.temperature=_.temperature),_.max_tokens!=null&&(de.max_tokens=_.max_tokens);let ys,Tt=null;if($!==null?(Tt=l[$].name,ys=[...l],ys[$]=de):ys=[...l,de],i(ys),f(ys.map(Et=>Et.name)),Tt&&Tt!==de.name&&g){const Et=I=>I.map(ge=>ge===Tt?de.name:ge);j({...g,utils:{...g.utils,model_list:Et(g.utils?.model_list||[])},utils_small:{...g.utils_small,model_list:Et(g.utils_small?.model_list||[])},tool_use:{...g.tool_use,model_list:Et(g.tool_use?.model_list||[])},replyer:{...g.replyer,model_list:Et(g.replyer?.model_list||[])},planner:{...g.planner,model_list:Et(g.planner?.model_list||[])},vlm:{...g.vlm,model_list:Et(g.vlm?.model_list||[])},voice:{...g.voice,model_list:Et(g.voice?.model_list||[])},embedding:{...g.embedding,model_list:Et(g.embedding?.model_list||[])},lpmm_entity_extract:{...g.lpmm_entity_extract,model_list:Et(g.lpmm_entity_extract?.model_list||[])},lpmm_rdf_build:{...g.lpmm_rdf_build,model_list:Et(g.lpmm_rdf_build?.model_list||[])},lpmm_qa:{...g.lpmm_qa,model_list:Et(g.lpmm_qa?.model_list||[])}})}z(!1),T(null),E(null)},ps=W=>{if(!W&&_){const de={..._,price_in:_.price_in??0,price_out:_.price_out??0};T(de)}z(W)},ss=W=>{ue(W),te(!0)},Es=()=>{if(ne!==null){const W=l.filter((de,ys)=>ys!==ne);i(W),f(W.map(de=>de.name)),Te({title:"",description:""})}te(!1),ue(null)},Ms=W=>{const de=new Set(je);de.has(W)?de.delete(W):de.add(W),be(de)},Ls=()=>{if(je.size===Os.length)be(new Set);else{const W=Os.map((de,ys)=>l.findIndex(Tt=>Tt===Os[ys]));be(new Set(W))}},ts=()=>{if(je.size===0){Te({title:"",description:"",variant:"default"});return}P(!0)},Pe=()=>{const W=l.filter((de,ys)=>!je.has(ys));i(W),f(W.map(de=>de.name)),be(new Set),P(!1),Te({title:"",description:` ${je.size} `})},Xe=(W,de,ys)=>{g&&j({...g,[W]:{...g[W],[de]:ys}})},Os=l.filter(W=>{if(!Se)return!0;const de=Se.toLowerCase();return W.name.toLowerCase().includes(de)||W.model_identifier.toLowerCase().includes(de)||W.api_provider.toLowerCase().includes(de)}),kt=Math.ceil(Os.length/B),Xs=Os.slice((X-1)*B,X*B),Ss=()=>{const W=parseInt(Ne);W>=1&&W<=kt&&(L(W),Ce(""))},xt=W=>g?[g.utils?.model_list||[],g.utils_small?.model_list||[],g.tool_use?.model_list||[],g.replyer?.model_list||[],g.planner?.model_list||[],g.vlm?.model_list||[],g.voice?.model_list||[],g.embedding?.model_list||[],g.lpmm_entity_extract?.model_list||[],g.lpmm_rdf_build?.model_list||[],g.lpmm_qa?.model_list||[]].some(ys=>ys.includes(W)):!1;return v?e.jsx(Ze,{className:"h-full",children:e.jsx("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"..."})})})}):e.jsx(Ze,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:""})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs(C,{onClick:He,disabled:b||w||!A||le,size:"sm",variant:"outline",className:"flex-1 sm:flex-none sm:min-w-[120px]",children:[e.jsx(Ar,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),b?"...":w?"...":A?"":""]}),e.jsxs(js,{children:[e.jsx(mt,{asChild:!0,children:e.jsxs(C,{disabled:b||w||le,size:"sm",className:"flex-1 sm:flex-none sm:min-w-[120px]",children:[e.jsx(Mr,{className:"mr-2 h-4 w-4"}),le?"...":A?"":""]})}),e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsx(xs,{asChild:!0,children:e.jsx("div",{children:e.jsx("p",{children:A?",":","})})})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:A?F:_t,children:A?"":""})]})]})]})]})]}),e.jsxs(sa,{children:[e.jsx(Ra,{className:"h-4 w-4"}),e.jsxs(ta,{children:["",e.jsx("strong",{children:""}),'""']})]}),e.jsxs(sa,{className:"hidden lg:flex border-primary/30 bg-primary/5 cursor-pointer hover:bg-primary/10 transition-colors",onClick:qe,children:[e.jsx(Gy,{className:"h-4 w-4 text-primary"}),e.jsxs(ta,{className:"flex items-center justify-between",children:[e.jsxs("span",{children:[e.jsx("strong",{className:"text-primary",children:""}),""]}),e.jsx(C,{variant:"outline",size:"sm",className:"ml-4 shrink-0",children:""})]})]}),e.jsxs(Sa,{defaultValue:"models",className:"w-full",children:[e.jsxs(xa,{className:"grid w-full max-w-full sm:max-w-md grid-cols-2",children:[e.jsx(is,{value:"models",children:""}),e.jsx(is,{value:"tasks","data-tour":"tasks-tab-trigger",children:""})]}),e.jsxs(As,{value:"models",className:"space-y-4 mt-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:""}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[je.size>0&&e.jsxs(C,{onClick:ts,size:"sm",variant:"destructive",className:"w-full sm:w-auto",children:[e.jsx(es,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"})," (",je.size,")"]}),e.jsxs(C,{onClick:()=>De(null,null),size:"sm",variant:"outline",className:"w-full sm:w-auto","data-tour":"add-model-button",children:[e.jsx(ut,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),""]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[e.jsxs("div",{className:"relative w-full sm:flex-1 sm:max-w-sm",children:[e.jsx($t,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{placeholder:"...",value:Se,onChange:W=>oe(W.target.value),className:"pl-9"})]}),Se&&e.jsxs("p",{className:"text-sm text-muted-foreground whitespace-nowrap",children:[" ",Os.length," "]})]}),e.jsx($1,{paginatedModels:Xs,allModels:l,onEdit:De,onDelete:ss,isModelUsed:xt,searchQuery:Se}),e.jsx(q1,{paginatedModels:Xs,allModels:l,filteredModels:Os,selectedModels:je,onEdit:De,onDelete:ss,onToggleSelection:Ms,onToggleSelectAll:Ls,isModelUsed:xt,searchQuery:Se}),e.jsx(F1,{page:X,pageSize:B,totalItems:Os.length,jumpToPage:Ne,onPageChange:L,onPageSizeChange:_e,onJumpToPageChange:Ce,onJumpToPage:Ss,onSelectionClear:()=>be(new Set)})]}),e.jsxs(As,{value:"tasks",className:"space-y-6 mt-0",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:""}),g&&e.jsxs("div",{className:"grid gap-4 sm:gap-6",children:[e.jsx(Ma,{title:" (utils)",description:"",taskConfig:g.utils,modelNames:h,onChange:(W,de)=>Xe("utils",W,de),dataTour:"task-model-select"}),e.jsx(Ma,{title:" (utils_small)",description:"",taskConfig:g.utils_small,modelNames:h,onChange:(W,de)=>Xe("utils_small",W,de)}),e.jsx(Ma,{title:" (tool_use)",description:"",taskConfig:g.tool_use,modelNames:h,onChange:(W,de)=>Xe("tool_use",W,de)}),e.jsx(Ma,{title:" (replyer)",description:"",taskConfig:g.replyer,modelNames:h,onChange:(W,de)=>Xe("replyer",W,de)}),e.jsx(Ma,{title:" (planner)",description:"",taskConfig:g.planner,modelNames:h,onChange:(W,de)=>Xe("planner",W,de)}),e.jsx(Ma,{title:" (vlm)",description:"",taskConfig:g.vlm,modelNames:h,onChange:(W,de)=>Xe("vlm",W,de),hideTemperature:!0}),e.jsx(Ma,{title:" (voice)",description:"",taskConfig:g.voice,modelNames:h,onChange:(W,de)=>Xe("voice",W,de),hideTemperature:!0,hideMaxTokens:!0}),e.jsx(Ma,{title:" (embedding)",description:"",taskConfig:g.embedding,modelNames:h,onChange:(W,de)=>Xe("embedding",W,de),hideTemperature:!0,hideMaxTokens:!0}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"LPMM "}),e.jsx(Ma,{title:" (lpmm_entity_extract)",description:"",taskConfig:g.lpmm_entity_extract,modelNames:h,onChange:(W,de)=>Xe("lpmm_entity_extract",W,de)}),e.jsx(Ma,{title:"RDF  (lpmm_rdf_build)",description:"",taskConfig:g.lpmm_rdf_build,modelNames:h,onChange:(W,de)=>Xe("lpmm_rdf_build",W,de)}),e.jsx(Ma,{title:" (lpmm_qa)",description:"",taskConfig:g.lpmm_qa,modelNames:h,onChange:(W,de)=>Xe("lpmm_qa",W,de)})]})]})]})]}),e.jsx(Qs,{open:V,onOpenChange:ps,children:e.jsxs(qs,{className:"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto","data-tour":"model-dialog",preventOutsideClose:We,children:[e.jsxs(Gs,{children:[e.jsx(Vs,{children:$!==null?"":""}),e.jsx(Ws,{children:""})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2","data-tour":"model-name-input",children:[e.jsx(k,{htmlFor:"model_name",className:Q.name?"text-destructive":"",children:" *"}),e.jsx(ie,{id:"model_name",value:_?.name||"",onChange:W=>{T(de=>de?{...de,name:W.target.value}:null),Q.name&&xe(de=>({...de,name:void 0}))},placeholder:": qwen3-30b",className:Q.name?"border-destructive focus-visible:ring-destructive":""}),Q.name?e.jsx("p",{className:"text-xs text-destructive",children:Q.name}):e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"model-provider-select",children:[e.jsx(k,{htmlFor:"api_provider",className:Q.api_provider?"text-destructive":"",children:"API  *"}),e.jsxs(Ue,{value:_?.api_provider||"",onValueChange:W=>{T(de=>de?{...de,api_provider:W}:null),Vt(),Q.api_provider&&xe(de=>({...de,api_provider:void 0}))},children:[e.jsx(Re,{id:"api_provider",className:Q.api_provider?"border-destructive focus-visible:ring-destructive":"",children:e.jsx(Be,{placeholder:""})}),e.jsx(Le,{children:r.map(W=>e.jsx(ee,{value:W,children:W},W))})]}),Q.api_provider&&e.jsx("p",{className:"text-xs text-destructive",children:Q.api_provider})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"model-identifier-input",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{htmlFor:"model_identifier",className:Q.model_identifier?"text-destructive":"",children:" *"}),Ie?.modelFetcher&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ye,{variant:"secondary",className:"text-xs",children:Ie.display_name}),e.jsx(C,{variant:"ghost",size:"sm",className:"h-6 px-2",onClick:()=>_?.api_provider&&$e(_.api_provider,!0),disabled:pe,children:pe?e.jsx(tt,{className:"h-3 w-3 animate-spin"}):e.jsx(At,{className:"h-3 w-3"})})]})]}),Ie?.modelFetcher?e.jsxs(Ia,{open:ve,onOpenChange:ze,children:[e.jsx(Qa,{asChild:!0,children:e.jsxs(C,{variant:"outline",role:"combobox","aria-expanded":ve,className:"w-full justify-between font-normal",disabled:pe||!!Ee,children:[pe?e.jsxs("span",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(tt,{className:"h-4 w-4 animate-spin"}),"..."]}):Ee?e.jsx("span",{className:"text-muted-foreground text-sm",children:""}):_?.model_identifier?e.jsx("span",{className:"truncate",children:_.model_identifier}):e.jsx("span",{className:"text-muted-foreground",children:"..."}),e.jsx(cm,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(La,{className:"p-0",align:"start",style:{width:"var(--radix-popover-trigger-width)"},children:e.jsxs(vo,{children:[e.jsx(bo,{placeholder:"..."}),e.jsx(Ze,{className:"h-[300px]",children:e.jsxs(No,{className:"max-h-none overflow-visible",children:[e.jsx(yo,{children:Ee?e.jsxs("div",{className:"py-4 px-2 text-center space-y-2",children:[e.jsx("p",{className:"text-sm text-destructive",children:Ee}),!Ee.includes("API Key")&&e.jsx(C,{variant:"link",size:"sm",onClick:()=>_?.api_provider&&$e(_.api_provider,!0),children:""})]}):""}),e.jsx(Cr,{heading:"",children:re.map(W=>e.jsxs(kr,{value:W.id,onSelect:()=>{T(de=>de?{...de,model_identifier:W.id}:null),ze(!1)},children:[e.jsx(ea,{className:`mr-2 h-4 w-4 ${_?.model_identifier===W.id?"opacity-100":"opacity-0"}`}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:W.id}),W.name!==W.id&&e.jsx("span",{className:"text-xs text-muted-foreground",children:W.name})]})]},W.id))}),e.jsx(Cr,{heading:"",children:e.jsxs(kr,{value:"__manual_input__",onSelect:()=>{ze(!1)},children:[e.jsx(fn,{className:"mr-2 h-4 w-4"}),"..."]})})]})})]})})]}):e.jsx(ie,{id:"model_identifier",value:_?.model_identifier||"",onChange:W=>{T(de=>de?{...de,model_identifier:W.target.value}:null),Q.model_identifier&&xe(de=>({...de,model_identifier:void 0}))},placeholder:"Qwen/Qwen3-30B-A3B-Instruct-2507",className:Q.model_identifier?"border-destructive focus-visible:ring-destructive":""}),Q.model_identifier&&e.jsx("p",{className:"text-xs text-destructive",children:Q.model_identifier}),Ee&&Ie?.modelFetcher&&!Q.model_identifier&&e.jsxs(sa,{variant:"destructive",className:"mt-2 py-2",children:[e.jsx(Ra,{className:"h-4 w-4"}),e.jsx(ta,{className:"text-xs",children:Ee})]}),Ie?.modelFetcher&&e.jsx(ie,{value:_?.model_identifier||"",onChange:W=>{T(de=>de?{...de,model_identifier:W.target.value}:null),Q.model_identifier&&xe(de=>({...de,model_identifier:void 0}))},placeholder:"",className:`mt-2 ${Q.model_identifier?"border-destructive focus-visible:ring-destructive":""}`}),!Q.model_identifier&&e.jsx("p",{className:"text-xs text-muted-foreground",children:Ee?'"" API Key':Ie?.modelFetcher?` ${Ie.display_name}`:"API  ID"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"price_in",children:" (/M token)"}),e.jsx(ie,{id:"price_in",type:"number",step:"0.1",min:"0",value:_?.price_in??"",onChange:W=>{const de=W.target.value===""?null:parseFloat(W.target.value);T(ys=>ys?{...ys,price_in:de}:null)},placeholder:": 0"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"price_out",children:" (/M token)"}),e.jsx(ie,{id:"price_out",type:"number",step:"0.1",min:"0",value:_?.price_out??"",onChange:W=>{const de=W.target.value===""?null:parseFloat(W.target.value);T(ys=>ys?{...ys,price_out:de}:null)},placeholder:": 0"})]})]}),e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(k,{htmlFor:"enable_model_temperature",className:"cursor-pointer",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Fe,{id:"enable_model_temperature",checked:_?.temperature!=null,onCheckedChange:W=>{T(W?de=>de?{...de,temperature:.5}:null:de=>de?{...de,temperature:null}:null)}})]}),_?.temperature!=null&&e.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{className:"text-sm",children:""}),e.jsx("span",{className:"text-sm font-medium tabular-nums",children:_.temperature.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"0"}),e.jsx(ma,{value:[_.temperature],onValueChange:W=>T(de=>de?{...de,temperature:W[0]}:null),min:0,max:1,step:.1,className:"flex-1"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"1"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"0.1-0.30.7-1.0"})]})]}),e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(k,{htmlFor:"enable_model_max_tokens",className:"cursor-pointer",children:" Token"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" Token "})]}),e.jsx(Fe,{id:"enable_model_max_tokens",checked:_?.max_tokens!=null,onCheckedChange:W=>{T(W?de=>de?{...de,max_tokens:2048}:null:de=>de?{...de,max_tokens:null}:null)}})]}),_?.max_tokens!=null&&e.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{className:"text-sm",children:" Token "}),e.jsx(ie,{type:"number",min:"1",max:"128000",value:_.max_tokens,onChange:W=>{const de=parseInt(W.target.value);!isNaN(de)&&de>=1&&T(ys=>ys?{...ys,max_tokens:de}:null)},className:"w-28 h-8 text-sm"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" token "})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"force_stream_mode",checked:_?.force_stream_mode||!1,onCheckedChange:W=>T(de=>de?{...de,force_stream_mode:W}:null)}),e.jsx(k,{htmlFor:"force_stream_mode",className:"cursor-pointer",children:""})]}),e.jsx(U1,{value:_?.extra_params||{},onChange:W=>T(de=>de?{...de,extra_params:W}:null),placeholder:" enable_thinkingtop_p ..."})]}),e.jsxs(at,{children:[e.jsx(C,{variant:"outline",onClick:()=>z(!1),"data-tour":"model-cancel-button",children:""}),e.jsx(C,{onClick:ye,"data-tour":"model-save-button",children:""})]})]})}),e.jsx(js,{open:se,onOpenChange:te,children:e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:[' "',ne!==null?l[ne]?.name:"",'"  ']})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:Es,children:""})]})]})}),e.jsx(js,{open:U,onOpenChange:P,children:e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:[" ",je.size,"  "]})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:Pe,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),e.jsx(vn,{})]})})}const Tr=QN,Er=YN,zr=KN,wo="/api/webui/config";async function P1(){const i=await(await we(`${wo}/adapter-config/path`)).json();return!i.success||!i.path?null:{path:i.path,lastModified:i.lastModified}}async function Ap(l){const r=await(await we(`${wo}/adapter-config/path`,{method:"POST",headers:Is(),body:JSON.stringify({path:l})})).json();if(!r.success)throw new Error(r.message||"")}async function Op(l){const r=await(await we(`${wo}/adapter-config?path=${encodeURIComponent(l)}`)).json();if(!r.success)throw new Error("");return r.content}async function Dp(l,i){const o=await(await we(`${wo}/adapter-config`,{method:"POST",headers:Is(),body:JSON.stringify({path:l,content:i})})).json();if(!o.success)throw new Error(o.message||"")}const ot={inner:{version:"0.1.2"},nickname:{nickname:""},napcat_server:{host:"localhost",port:8095,token:"",heartbeat_interval:30},maibot_server:{host:"localhost",port:8e3},chat:{group_list_type:"whitelist",group_list:[],private_list_type:"whitelist",private_list:[],ban_user_id:[],ban_qq_bot:!1,enable_poke:!0},voice:{use_tts:!1},debug:{level:"INFO"}},Yu={oneclick:{name:"",description:"",path:"../MaiBot-Napcat-Adapter/config.toml",icon:Vl},docker:{name:"Docker",description:"Docker Compose ",path:"/MaiMBot/adapters-config/config.toml",icon:Vy}};function J1(l,i){let r=l.slice(0,i).split(/\r\n|\n|\r/g);return[r.length,r.pop().length+1]}function Z1(l,i,r){let o=l.split(/\r\n|\n|\r/g),u="",x=(Math.log10(i+1)|0)+1;for(let h=i-1;h<=i+1;h++){let f=o[h-1];f&&(u+=h.toString().padEnd(x," "),u+=":  ",u+=f,u+=`
`,h===i&&(u+=" ".repeat(x+r+2),u+=`^
`))}return u}class Ns extends Error{line;column;codeblock;constructor(i,r){const[o,u]=J1(r.toml,r.ptr),x=Z1(r.toml,o,u);super(`Invalid TOML document: ${i}

${x}`,r),this.line=o,this.column=u,this.codeblock=x}}function W1(l,i){let r=0;for(;l[i-++r]==="\\";);return--r&&r%2}function ho(l,i=0,r=l.length){let o=l.indexOf(`
`,i);return l[o-1]==="\r"&&o--,o<=r?o:-1}function hm(l,i){for(let r=i;r<l.length;r++){let o=l[r];if(o===`
`)return r;if(o==="\r"&&l[r+1]===`
`)return r+1;if(o<" "&&o!=="	"||o==="")throw new Ns("control characters are not allowed in comments",{toml:l,ptr:i})}return l.length}function hl(l,i,r,o){let u;for(;(u=l[i])===" "||u==="	"||!r&&(u===`
`||u==="\r"&&l[i+1]===`
`);)i++;return o||u!=="#"?i:hl(l,hm(l,i),r)}function Rp(l,i,r,o,u=!1){if(!o)return i=ho(l,i),i<0?l.length:i;for(let x=i;x<l.length;x++){let h=l[x];if(h==="#")x=ho(l,x);else{if(h===r)return x+1;if(h===o||u&&(h===`
`||h==="\r"&&l[x+1]===`
`))return x}}throw new Ns("cannot find end of structure",{toml:l,ptr:i})}function _j(l,i){let r=l[i],o=r===l[i+1]&&l[i+1]===l[i+2]?l.slice(i,i+3):r;i+=o.length-1;do i=l.indexOf(o,++i);while(i>-1&&r!=="'"&&W1(l,i));return i>-1&&(i+=o.length,o.length>1&&(l[i]===r&&i++,l[i]===r&&i++)),i}let e2=/^(\d{4}-\d{2}-\d{2})?[T ]?(?:(\d{2}):\d{2}:\d{2}(?:\.\d+)?)?(Z|[-+]\d{2}:\d{2})?$/i;class mi extends Date{#s=!1;#t=!1;#e=null;constructor(i){let r=!0,o=!0,u="Z";if(typeof i=="string"){let x=i.match(e2);x?(x[1]||(r=!1,i=`0000-01-01T${i}`),o=!!x[2],o&&i[10]===" "&&(i=i.replace(" ","T")),x[2]&&+x[2]>23?i="":(u=x[3]||null,i=i.toUpperCase(),!u&&o&&(i+="Z"))):i=""}super(i),isNaN(this.getTime())||(this.#s=r,this.#t=o,this.#e=u)}isDateTime(){return this.#s&&this.#t}isLocal(){return!this.#s||!this.#t||!this.#e}isDate(){return this.#s&&!this.#t}isTime(){return this.#t&&!this.#s}isValid(){return this.#s||this.#t}toISOString(){let i=super.toISOString();if(this.isDate())return i.slice(0,10);if(this.isTime())return i.slice(11,23);if(this.#e===null)return i.slice(0,-1);if(this.#e==="Z")return i;let r=+this.#e.slice(1,3)*60+ +this.#e.slice(4,6);return r=this.#e[0]==="-"?r:-r,new Date(this.getTime()-r*6e4).toISOString().slice(0,-1)+this.#e}static wrapAsOffsetDateTime(i,r="Z"){let o=new mi(i);return o.#e=r,o}static wrapAsLocalDateTime(i){let r=new mi(i);return r.#e=null,r}static wrapAsLocalDate(i){let r=new mi(i);return r.#t=!1,r.#e=null,r}static wrapAsLocalTime(i){let r=new mi(i);return r.#s=!1,r.#e=null,r}}let s2=/^((0x[0-9a-fA-F](_?[0-9a-fA-F])*)|(([+-]|0[ob])?\d(_?\d)*))$/,t2=/^[+-]?\d(_?\d)*(\.\d(_?\d)*)?([eE][+-]?\d(_?\d)*)?$/,a2=/^[+-]?0[0-9_]/,l2=/^[0-9a-f]{4,8}$/i,Lp={b:"\b",t:"	",n:`
`,f:"\f",r:"\r",'"':'"',"\\":"\\"};function Sj(l,i=0,r=l.length){let o=l[i]==="'",u=l[i++]===l[i]&&l[i]===l[i+1];u&&(r-=2,l[i+=2]==="\r"&&i++,l[i]===`
`&&i++);let x=0,h,f="",g=i;for(;i<r-1;){let j=l[i++];if(j===`
`||j==="\r"&&l[i]===`
`){if(!u)throw new Ns("newlines are not allowed in strings",{toml:l,ptr:i-1})}else if(j<" "&&j!=="	"||j==="")throw new Ns("control characters are not allowed in strings",{toml:l,ptr:i-1});if(h){if(h=!1,j==="u"||j==="U"){let v=l.slice(i,i+=j==="u"?4:8);if(!l2.test(v))throw new Ns("invalid unicode escape",{toml:l,ptr:x});try{f+=String.fromCodePoint(parseInt(v,16))}catch{throw new Ns("invalid unicode escape",{toml:l,ptr:x})}}else if(u&&(j===`
`||j===" "||j==="	"||j==="\r")){if(i=hl(l,i-1,!0),l[i]!==`
`&&l[i]!=="\r")throw new Ns("invalid escape: only line-ending whitespace may be escaped",{toml:l,ptr:x});i=hl(l,i)}else if(j in Lp)f+=Lp[j];else throw new Ns("unrecognized escape sequence",{toml:l,ptr:x});g=i}else!o&&j==="\\"&&(x=i-1,h=!0,f+=l.slice(g,x))}return f+l.slice(g,r-1)}function n2(l,i,r,o){if(l==="true")return!0;if(l==="false")return!1;if(l==="-inf")return-1/0;if(l==="inf"||l==="+inf")return 1/0;if(l==="nan"||l==="+nan"||l==="-nan")return NaN;if(l==="-0")return o?0n:0;let u=s2.test(l);if(u||t2.test(l)){if(a2.test(l))throw new Ns("leading zeroes are not allowed",{toml:i,ptr:r});l=l.replace(/_/g,"");let h=+l;if(isNaN(h))throw new Ns("invalid number",{toml:i,ptr:r});if(u){if((u=!Number.isSafeInteger(h))&&!o)throw new Ns("integer value cannot be represented losslessly",{toml:i,ptr:r});(u||o===!0)&&(h=BigInt(l))}return h}const x=new mi(l);if(!x.isValid())throw new Ns("invalid value",{toml:i,ptr:r});return x}function i2(l,i,r,o){let u=l.slice(i,r),x=u.indexOf("#");x>-1&&(hm(l,x),u=u.slice(0,x));let h=u.trimEnd();if(!o){let f=u.indexOf(`
`,h.length);if(f>-1)throw new Ns("newlines are not allowed in inline tables",{toml:l,ptr:i+f})}return[h,x]}function fm(l,i,r,o,u){if(o===0)throw new Ns("document contains excessively nested structures. aborting.",{toml:l,ptr:i});let x=l[i];if(x==="["||x==="{"){let[g,j]=x==="["?o2(l,i,o,u):c2(l,i,o,u),v=r?Rp(l,j,",",r):j;if(j-v&&r==="}"){let y=ho(l,j,v);if(y>-1)throw new Ns("newlines are not allowed in inline tables",{toml:l,ptr:y})}return[g,v]}let h;if(x==='"'||x==="'"){h=_j(l,i);let g=Sj(l,i,h);if(r){if(h=hl(l,h,r!=="]"),l[h]&&l[h]!==","&&l[h]!==r&&l[h]!==`
`&&l[h]!=="\r")throw new Ns("unexpected character encountered",{toml:l,ptr:h});h+=+(l[h]===",")}return[g,h]}h=Rp(l,i,",",r);let f=i2(l,i,h-+(l[h-1]===","),r==="]");if(!f[0])throw new Ns("incomplete key-value declaration: no value specified",{toml:l,ptr:i});return r&&f[1]>-1&&(h=hl(l,i+f[1]),h+=+(l[h]===",")),[n2(f[0],l,i,u),h]}let r2=/^[a-zA-Z0-9-_]+[ \t]*$/;function lm(l,i,r="="){let o=i-1,u=[],x=l.indexOf(r,i);if(x<0)throw new Ns("incomplete key-value: cannot find end of key",{toml:l,ptr:i});do{let h=l[i=++o];if(h!==" "&&h!=="	")if(h==='"'||h==="'"){if(h===l[i+1]&&h===l[i+2])throw new Ns("multiline strings are not allowed in keys",{toml:l,ptr:i});let f=_j(l,i);if(f<0)throw new Ns("unfinished string encountered",{toml:l,ptr:i});o=l.indexOf(".",f);let g=l.slice(f,o<0||o>x?x:o),j=ho(g);if(j>-1)throw new Ns("newlines are not allowed in keys",{toml:l,ptr:i+o+j});if(g.trimStart())throw new Ns("found extra tokens after the string part",{toml:l,ptr:f});if(x<f&&(x=l.indexOf(r,f),x<0))throw new Ns("incomplete key-value: cannot find end of key",{toml:l,ptr:i});u.push(Sj(l,i,f))}else{o=l.indexOf(".",i);let f=l.slice(i,o<0||o>x?x:o);if(!r2.test(f))throw new Ns("only letter, numbers, dashes and underscores are allowed in keys",{toml:l,ptr:i});u.push(f.trimEnd())}}while(o+1&&o<x);return[u,hl(l,x+1,!0,!0)]}function c2(l,i,r,o){let u={},x=new Set,h,f=0;for(i++;(h=l[i++])!=="}"&&h;){let g={toml:l,ptr:i-1};if(h===`
`)throw new Ns("newlines are not allowed in inline tables",g);if(h==="#")throw new Ns("inline tables cannot contain comments",g);if(h===",")throw new Ns("expected key-value, found comma",g);if(h!==" "&&h!=="	"){let j,v=u,y=!1,[b,S]=lm(l,i-1);for(let A=0;A<b.length;A++){if(A&&(v=y?v[j]:v[j]={}),j=b[A],(y=Object.hasOwn(v,j))&&(typeof v[j]!="object"||x.has(v[j])))throw new Ns("trying to redefine an already defined value",{toml:l,ptr:i});!y&&j==="__proto__"&&Object.defineProperty(v,j,{enumerable:!0,configurable:!0,writable:!0})}if(y)throw new Ns("trying to redefine an already defined value",{toml:l,ptr:i});let[w,O]=fm(l,S,"}",r-1,o);x.add(w),v[j]=w,i=O,f=l[i-1]===","?i-1:0}}if(f)throw new Ns("trailing commas are not allowed in inline tables",{toml:l,ptr:f});if(!h)throw new Ns("unfinished table encountered",{toml:l,ptr:i});return[u,i]}function o2(l,i,r,o){let u=[],x;for(i++;(x=l[i++])!=="]"&&x;){if(x===",")throw new Ns("expected value, found comma",{toml:l,ptr:i-1});if(x==="#")i=hm(l,i);else if(x!==" "&&x!=="	"&&x!==`
`&&x!=="\r"){let h=fm(l,i-1,"]",r-1,o);u.push(h[0]),i=h[1]}}if(!x)throw new Ns("unfinished array encountered",{toml:l,ptr:i});return[u,i]}function Up(l,i,r,o){let u=i,x=r,h,f=!1,g;for(let j=0;j<l.length;j++){if(j){if(u=f?u[h]:u[h]={},x=(g=x[h]).c,o===0&&(g.t===1||g.t===2))return null;if(g.t===2){let v=u.length-1;u=u[v],x=x[v].c}}if(h=l[j],(f=Object.hasOwn(u,h))&&x[h]?.t===0&&x[h]?.d)return null;f||(h==="__proto__"&&(Object.defineProperty(u,h,{enumerable:!0,configurable:!0,writable:!0}),Object.defineProperty(x,h,{enumerable:!0,configurable:!0,writable:!0})),x[h]={t:j<l.length-1&&o===2?3:o,d:!1,i:0,c:{}})}if(g=x[h],g.t!==o&&!(o===1&&g.t===3)||(o===2&&(g.d||(g.d=!0,u[h]=[]),u[h].push(u={}),g.c[g.i++]=g={t:1,d:!1,i:0,c:{}}),g.d))return null;if(g.d=!0,o===1)u=f?u[h]:u[h]={};else if(o===0&&f)return null;return[h,u,g.c]}function d2(l,{maxDepth:i=1e3,integersAsBigInt:r}={}){let o={},u={},x=o,h=u;for(let f=hl(l,0);f<l.length;){if(l[f]==="["){let g=l[++f]==="[",j=lm(l,f+=+g,"]");if(g){if(l[j[1]-1]!=="]")throw new Ns("expected end of table declaration",{toml:l,ptr:j[1]-1});j[1]++}let v=Up(j[0],o,u,g?2:1);if(!v)throw new Ns("trying to redefine an already defined table or value",{toml:l,ptr:f});h=v[2],x=v[1],f=j[1]}else{let g=lm(l,f),j=Up(g[0],x,h,0);if(!j)throw new Ns("trying to redefine an already defined table or value",{toml:l,ptr:f});let v=fm(l,g[1],void 0,i,r);j[1][j[0]]=v[0],f=v[1]}if(f=hl(l,f,!0),l[f]&&l[f]!==`
`&&l[f]!=="\r")throw new Ns("each key-value declaration must be followed by an end-of-line",{toml:l,ptr:f});f=hl(l,f)}return o}let Cj=/^[a-z0-9-_]+$/i;function Or(l){let i=typeof l;if(i==="object"){if(Array.isArray(l))return"array";if(l instanceof Date)return"date"}return i}function u2(l){for(let i=0;i<l.length;i++)if(Or(l[i])!=="object")return!1;return l.length!=0}function pm(l){return JSON.stringify(l).replace(/\x7f/g,"\\u007f")}function gm(l,i,r,o){if(r===0)throw new Error("Could not stringify the object: maximum object depth exceeded");if(i==="number")return isNaN(l)?"nan":l===1/0?"inf":l===-1/0?"-inf":o&&Number.isInteger(l)?l.toFixed(1):l.toString();if(i==="bigint"||i==="boolean")return l.toString();if(i==="string")return pm(l);if(i==="date"){if(isNaN(l.getTime()))throw new TypeError("cannot serialize invalid date");return l.toISOString()}if(i==="object")return m2(l,r,o);if(i==="array")return x2(l,r,o)}function m2(l,i,r){let o=Object.keys(l);if(o.length===0)return"{}";let u="{ ";for(let x=0;x<o.length;x++){let h=o[x];x&&(u+=", "),u+=Cj.test(h)?h:pm(h),u+=" = ",u+=gm(l[h],Or(l[h]),i-1,r)}return u+" }"}function x2(l,i,r){if(l.length===0)return"[]";let o="[ ";for(let u=0;u<l.length;u++){if(u&&(o+=", "),l[u]===null||l[u]===void 0)throw new TypeError("arrays cannot contain null or undefined values");o+=gm(l[u],Or(l[u]),i-1,r)}return o+" ]"}function h2(l,i,r,o){if(r===0)throw new Error("Could not stringify the object: maximum object depth exceeded");let u="";for(let x=0;x<l.length;x++)u+=`${u&&`
`}[[${i}]]
`,u+=jm(0,l[x],i,r,o);return u}function jm(l,i,r,o,u){if(o===0)throw new Error("Could not stringify the object: maximum object depth exceeded");let x="",h="",f=Object.keys(i);for(let g=0;g<f.length;g++){let j=f[g];if(i[j]!==null&&i[j]!==void 0){let v=Or(i[j]);if(v==="symbol"||v==="function")throw new TypeError(`cannot serialize values of type '${v}'`);let y=Cj.test(j)?j:pm(j);if(v==="array"&&u2(i[j]))h+=(h&&`
`)+h2(i[j],r?`${r}.${y}`:y,o-1,u);else if(v==="object"){let b=r?`${r}.${y}`:y;h+=(h&&`
`)+jm(b,i[j],b,o-1,u)}else x+=y,x+=" = ",x+=gm(i[j],v,o,u),x+=`
`}}return l&&(x||!h)&&(x=x?`[${l}]
${x}`:`[${l}]`),x&&h?`${x}
${h}`:x||h}function f2(l,{maxDepth:i=1e3,numbersAsFloat:r=!1}={}){if(Or(l)!=="object")throw new TypeError("stringify can only be called with an object");let o=jm(0,l,"",i,r);return o[o.length-1]!==`
`?o+`
`:o}function Ku(l){try{const i=d2(l);return{inner:{...ot.inner,...i.inner},nickname:{...ot.nickname,...i.nickname},napcat_server:{...ot.napcat_server,...i.napcat_server},maibot_server:{...ot.maibot_server,...i.maibot_server},chat:{...ot.chat,...i.chat},voice:{...ot.voice,...i.voice},debug:{...ot.debug,...i.debug}}}catch(i){throw console.error("TOML :",i),new Error(` TOML : ${i instanceof Error?i.message:""}`)}}function Xu(l){try{const i=(u,x)=>u===""||u===null||u===void 0?x:u,r={inner:{version:i(l.inner.version,ot.inner.version)},nickname:{nickname:i(l.nickname.nickname,ot.nickname.nickname)},napcat_server:{host:i(l.napcat_server.host,ot.napcat_server.host),port:i(l.napcat_server.port||0,ot.napcat_server.port),token:i(l.napcat_server.token,ot.napcat_server.token),heartbeat_interval:i(l.napcat_server.heartbeat_interval||0,ot.napcat_server.heartbeat_interval)},maibot_server:{host:i(l.maibot_server.host,ot.maibot_server.host),port:i(l.maibot_server.port||0,ot.maibot_server.port)},chat:{group_list_type:i(l.chat.group_list_type,ot.chat.group_list_type),group_list:l.chat.group_list||[],private_list_type:i(l.chat.private_list_type,ot.chat.private_list_type),private_list:l.chat.private_list||[],ban_user_id:l.chat.ban_user_id||[],ban_qq_bot:l.chat.ban_qq_bot??ot.chat.ban_qq_bot,enable_poke:l.chat.enable_poke??ot.chat.enable_poke},voice:{use_tts:l.voice.use_tts??ot.voice.use_tts},debug:{level:i(l.debug.level,ot.debug.level)}};let o=f2(r);return o=p2(o),o}catch(i){throw console.error("TOML :",i),new Error(` TOML : ${i instanceof Error?i.message:""}`)}}function p2(l){const i=l.split(`
`),r=[];for(let o=0;o<i.length;o++){const u=i[o];if(u==="[inner]"){r.push(u);continue}if(u.startsWith("version = ")){r.push(`${u} # `),r.push("# ");continue}if(u==="[nickname]"){r.push("[nickname] # ");continue}if(u==="[napcat_server]"){r.push("[napcat_server] # Napcatws");continue}if(u.startsWith("host = ")&&r[r.length-1]?.includes("[napcat_server]")){r.push(`${u}      # Napcat`);continue}if(u.startsWith("port = ")&&i[o-1]?.includes("host")){r.push(`${u}             # Napcat`);continue}if(u.startsWith("token = ")){r.push(`${u}              # Napcat`);continue}if(u.startsWith("heartbeat_interval = ")){r.push(`${u} # Napcat`);continue}if(u==="[maibot_server]"){r.push("[maibot_server] # ws");continue}if(u.startsWith("host = ")&&r[r.length-1]?.includes("[maibot_server]")){r.push(`${u} # .envHOST`);continue}if(u.startsWith("port = ")&&r[r.length-1]?.includes(".env")){r.push(`${u}        # .envPORT`);continue}if(u==="[chat]"){r.push("[chat] # ");continue}if(u.startsWith("group_list_type = ")){r.push(`${u} # whitelist, blacklist`);continue}if(u.startsWith("group_list = ")){r.push(`${u}               # `),r.push("# group_list_typewhitelist"),r.push("# group_list_typeblacklist");continue}if(u.startsWith("private_list_type = ")){r.push(`${u} # whitelist, blacklist`);continue}if(u.startsWith("private_list = ")){r.push(`${u}               # `),r.push("# private_list_typewhitelist"),r.push("# private_list_typeblacklist");continue}if(u.startsWith("ban_user_id = ")){r.push(`${u}   # `);continue}if(u.startsWith("ban_qq_bot = ")){r.push(`${u} # QQ`);continue}if(u.startsWith("enable_poke = ")){r.push(`${u} # `);continue}if(u==="[voice]"){r.push("[voice] # ");continue}if(u.startsWith("use_tts = ")){r.push(`${u} # ttsttsadapter`);continue}if(u.startsWith("level = ")&&r[r.length-1]==="[debug]"){r.push(`${u} # DEBUG, INFO, WARNING, ERROR, CRITICAL`);continue}r.push(u)}return r.join(`
`)}function Pu(l){if(!l.trim())return{valid:!1,error:""};if(!l.toLowerCase().endsWith(".toml"))return{valid:!1,error:" .toml "};const i=/^([a-zA-Z]:\\|\\\\[^\\]+\\[^\\]+\\).+\.toml$/i,r=/^(\/|~\/).+\.toml$/i,o=/^(\.{1,2}[\\/]|[^:\\/]).+\.toml$/i,u=i.test(l),x=r.test(l),h=o.test(l);return!u&&!x&&!h?{valid:!1,error:""}:/[<>"|?*\x00-\x1F]/.test(l)?{valid:!1,error:""}:{valid:!0,error:""}}function g2(){const[l,i]=m.useState("upload"),[r,o]=m.useState(null),[u,x]=m.useState(""),[h,f]=m.useState(""),[g,j]=m.useState("oneclick"),[v,y]=m.useState(""),[b,S]=m.useState(!1),[w,O]=m.useState(!1),[A,D]=m.useState(!1),[V,z]=m.useState(!1),[_,T]=m.useState(null),[$,E]=m.useState(!1),se=m.useRef(null),{toast:te}=Ks(),ne=m.useRef(null),ue=Q=>{if(f(Q),Q.trim()){const xe=Pu(Q);y(xe.error)}else y("")},Se=m.useCallback(async Q=>{const xe=Yu[Q];O(!0);try{const Te=await Op(xe.path),J=Ku(Te);o(J),j(Q),f(xe.path),await Ap(xe.path),te({title:"",description:`${xe.name}`})}catch(Te){console.error(":",Te),te({title:"",description:Te instanceof Error?Te.message:"",variant:"destructive"})}finally{O(!1)}},[te]),oe=m.useCallback(async Q=>{const xe=Pu(Q);if(!xe.valid){y(xe.error),te({title:"",description:xe.error,variant:"destructive"});return}y(""),O(!0);try{const Te=await Op(Q),J=Ku(Te);o(J),f(Q),await Ap(Q),te({title:"",description:""})}catch(Te){console.error(":",Te),te({title:"",description:Te instanceof Error?Te.message:"",variant:"destructive"})}finally{O(!1)}},[te]);m.useEffect(()=>{(async()=>{try{const xe=await P1();if(xe&&xe.path){f(xe.path);const Te=Object.entries(Yu).find(([,J])=>J.path===xe.path);Te?(i("preset"),j(Te[0]),await Se(Te[0])):(i("path"),await oe(xe.path))}}catch(xe){console.error(":",xe)}})()},[oe,Se]);const je=m.useCallback(Q=>{l!=="path"&&l!=="preset"||!h||(ne.current&&clearTimeout(ne.current),ne.current=setTimeout(async()=>{S(!0);try{const xe=Xu(Q);await Dp(h,xe),te({title:"",description:""})}catch(xe){console.error(":",xe),te({title:"",description:xe instanceof Error?xe.message:"",variant:"destructive"})}finally{S(!1)}},1e3))},[l,h,te]),be=async()=>{if(!r||!h)return;const Q=Pu(h);if(!Q.valid){te({title:"",description:Q.error,variant:"destructive"});return}S(!0);try{const xe=Xu(r);await Dp(h,xe),te({title:"",description:""})}catch(xe){console.error(":",xe),te({title:"",description:xe instanceof Error?xe.message:"",variant:"destructive"})}finally{S(!1)}},U=async()=>{h&&await oe(h)},P=Q=>{if(Q!==l){if(r){T(Q),D(!0);return}X(Q)}},X=Q=>{o(null),x(""),y(""),i(Q),Q==="preset"&&Se("oneclick"),te({title:"",description:{upload:"",path:"",preset:""}[Q]})},L=()=>{_&&(X(_),T(null)),D(!1)},B=()=>{if(r){z(!0);return}_e()},_e=()=>{f(""),o(null),y(""),te({title:"",description:""})},Ne=()=>{_e(),z(!1)},Ce=Q=>{const xe=Q.target.files?.[0];if(!xe)return;const Te=new FileReader;Te.onload=J=>{try{const le=J.target?.result,qe=Ku(le);o(qe),x(xe.name),te({title:"",description:`${xe.name}`})}catch(le){console.error(":",le),te({title:"",description:"",variant:"destructive"})}},Te.readAsText(xe)},ve=()=>{if(!r)return;const Q=Xu(r),xe=new Blob([Q],{type:"text/plain;charset=utf-8"}),Te=URL.createObjectURL(xe),J=document.createElement("a");J.href=Te,J.download=u||"config.toml",document.body.appendChild(J),J.click(),document.body.removeChild(J),URL.revokeObjectURL(Te),te({title:"",description:""})},ze=()=>{o(JSON.parse(JSON.stringify(ot))),x("config.toml"),te({title:"",description:""})};return e.jsx(Ze,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:" QQ "})]})}),e.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg border border-amber-500/50 bg-amber-500/10 text-amber-700 dark:text-amber-400",children:[e.jsx(Ot,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:" WebUI "})]}),e.jsx(Tr,{open:$,onOpenChange:E,children:e.jsxs(Ve,{children:[e.jsx(rs,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(cs,{children:""}),e.jsx(st,{children:""})]}),e.jsx(Er,{asChild:!0,children:e.jsxs(C,{variant:"ghost",size:"sm",className:"w-9 p-0",children:[e.jsx(Fa,{className:`h-4 w-4 transition-transform duration-200 ${$?"transform rotate-180":""}`}),e.jsx("span",{className:"sr-only",children:""})]})})]})}),e.jsx(zr,{children:e.jsxs(gs,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4",children:[e.jsx("div",{className:`border-2 rounded-lg p-3 md:p-4 cursor-pointer transition-all ${l==="preset"?"border-primary bg-primary/5":"border-muted hover:border-primary/50 active:border-primary/70"}`,onClick:()=>P("preset"),children:e.jsxs("div",{className:"flex items-start gap-2 md:gap-3",children:[e.jsx(Vl,{className:"h-4 w-4 md:h-5 md:w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mt-1 line-clamp-2",children:""})]})]})}),e.jsx("div",{className:`border-2 rounded-lg p-3 md:p-4 cursor-pointer transition-all ${l==="upload"?"border-primary bg-primary/5":"border-muted hover:border-primary/50 active:border-primary/70"}`,onClick:()=>P("upload"),children:e.jsxs("div",{className:"flex items-start gap-2 md:gap-3",children:[e.jsx(_r,{className:"h-4 w-4 md:h-5 md:w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mt-1 line-clamp-2",children:""})]})]})}),e.jsx("div",{className:`border-2 rounded-lg p-3 md:p-4 cursor-pointer transition-all ${l==="path"?"border-primary bg-primary/5":"border-muted hover:border-primary/50 active:border-primary/70"}`,onClick:()=>P("path"),children:e.jsxs("div",{className:"flex items-start gap-2 md:gap-3",children:[e.jsx(Fy,{className:"h-4 w-4 md:h-5 md:w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mt-1 line-clamp-2",children:""})]})]})})]}),l==="preset"&&e.jsxs("div",{className:"space-y-3 pt-2 border-t",children:[e.jsx(k,{className:"text-sm md:text-base",children:""}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:Object.entries(Yu).map(([Q,xe])=>{const Te=xe.icon,J=g===Q;return e.jsx("div",{className:`border-2 rounded-lg p-3 cursor-pointer transition-all ${J?"border-primary bg-primary/5":"border-muted hover:border-primary/50"}`,onClick:()=>{j(Q),Se(Q)},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Te,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm",children:xe.name}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:xe.description}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 font-mono break-all",children:xe.path})]})]})},Q)})})]}),l==="path"&&e.jsxs("div",{className:"space-y-3 pt-2 border-t",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"config-path",className:"text-sm md:text-base",children:""}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx(ie,{id:"config-path",value:h,onChange:Q=>ue(Q.target.value),placeholder:": C:\\Adapter\\config.toml",className:`text-sm ${v?"border-destructive":""}`}),v&&e.jsx("p",{className:"text-xs text-destructive",children:v})]}),e.jsx(C,{onClick:()=>oe(h),disabled:w||!h||!!v,className:"w-full sm:w-auto",children:w?e.jsxs(e.Fragment,{children:[e.jsx(At,{className:"h-4 w-4 animate-spin mr-2"}),e.jsx("span",{className:"sm:hidden",children:"..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sm:hidden",children:""}),e.jsx("span",{className:"hidden sm:inline",children:""})]})})]})]}),e.jsxs("details",{className:"rounded-lg bg-muted/50 p-3 group",children:[e.jsxs("summary",{className:"text-xs font-medium cursor-pointer select-none list-none flex items-center justify-between",children:[e.jsx("span",{children:""}),e.jsx("svg",{className:"h-4 w-4 transition-transform group-open:rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsxs("div",{className:"mt-2 space-y-2 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-mono bg-background px-1.5 py-0.5 rounded text-[10px] md:text-xs whitespace-nowrap",children:"Windows"})}),e.jsxs("div",{className:"pl-2 space-y-0.5 text-[10px] md:text-xs break-all",children:[e.jsx("div",{children:"C:\\Adapter\\config.toml"}),e.jsx("div",{className:"hidden sm:block",children:"D:\\MaiBot\\adapter\\config.toml"}),e.jsx("div",{className:"hidden sm:block",children:"\\\\server\\share\\config.toml"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-mono bg-background px-1.5 py-0.5 rounded text-[10px] md:text-xs whitespace-nowrap",children:"Linux"})}),e.jsxs("div",{className:"pl-2 space-y-0.5 text-[10px] md:text-xs break-all",children:[e.jsx("div",{children:"/opt/adapter/config.toml"}),e.jsx("div",{className:"hidden sm:block",children:"/home/user/adapter/config.toml"}),e.jsx("div",{className:"hidden sm:block",children:"~/adapter/config.toml"})]})]}),e.jsx("p",{className:"pt-1 border-t text-[10px] md:text-xs",children:"  1 "})]})]})]})]})})]})}),e.jsxs(sa,{children:[e.jsx(Ra,{className:"h-4 w-4"}),e.jsx(ta,{children:l==="preset"?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:""})," 1 ",b&&" (...)"]}):l==="upload"?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:""}),"      "]}):e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:""})," 1 ",b&&" (...)"]})})]}),l==="upload"&&!r&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full",children:[e.jsx("input",{ref:se,type:"file",accept:".toml",className:"hidden",onChange:Ce}),e.jsxs(C,{onClick:()=>se.current?.click(),size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(_r,{className:"mr-2 h-4 w-4"}),""]}),e.jsxs(C,{onClick:ze,size:"sm",className:"w-full sm:w-auto",children:[e.jsx(Aa,{className:"mr-2 h-4 w-4"}),""]})]}),l==="upload"&&r&&e.jsx("div",{className:"flex gap-2",children:e.jsxs(C,{onClick:ve,size:"sm",className:"w-full sm:w-auto",children:[e.jsx(Da,{className:"mr-2 h-4 w-4"}),""]})}),(l==="preset"||l==="path")&&r&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(C,{onClick:be,size:"sm",disabled:b||!!v,className:"w-full sm:w-auto",children:[e.jsx(Ar,{className:"mr-2 h-4 w-4"}),b?"...":""]}),e.jsxs(C,{onClick:U,size:"sm",variant:"outline",disabled:w,className:"w-full sm:w-auto",children:[e.jsx(At,{className:`mr-2 h-4 w-4 ${w?"animate-spin":""}`}),""]}),l==="path"&&e.jsxs(C,{onClick:B,size:"sm",variant:"destructive",className:"w-full sm:w-auto",children:[e.jsx(es,{className:"mr-2 h-4 w-4"}),""]})]}),r?e.jsxs(Sa,{defaultValue:"napcat",className:"w-full",children:[e.jsx("div",{className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",children:e.jsxs(xa,{className:"inline-flex w-auto min-w-full sm:grid sm:w-full sm:grid-cols-5",children:[e.jsxs(is,{value:"napcat",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:"Napcat "}),e.jsx("span",{className:"sm:hidden",children:"Napcat"})]}),e.jsxs(is,{value:"maibot",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"sm:hidden",children:""})]}),e.jsxs(is,{value:"chat",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"sm:hidden",children:""})]}),e.jsxs(is,{value:"voice",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"sm:hidden",children:""})]}),e.jsx(is,{value:"debug",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:""})]})}),e.jsx(As,{value:"napcat",className:"space-y-4",children:e.jsx(j2,{config:r,onChange:Q=>{o(Q),je(Q)}})}),e.jsx(As,{value:"maibot",className:"space-y-4",children:e.jsx(v2,{config:r,onChange:Q=>{o(Q),je(Q)}})}),e.jsx(As,{value:"chat",className:"space-y-4",children:e.jsx(b2,{config:r,onChange:Q=>{o(Q),je(Q)}})}),e.jsx(As,{value:"voice",className:"space-y-4",children:e.jsx(N2,{config:r,onChange:Q=>{o(Q),je(Q)}})}),e.jsx(As,{value:"debug",className:"space-y-4",children:e.jsx(y2,{config:r,onChange:Q=>{o(Q),je(Q)}})})]}):e.jsx("div",{className:"rounded-lg border bg-card p-6 md:p-12",children:e.jsxs("div",{className:"text-center space-y-3 md:space-y-4",children:[e.jsx(Aa,{className:"h-12 w-12 md:h-16 md:w-16 mx-auto text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold",children:""}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mt-2 px-4",children:l==="preset"?"":l==="upload"?"":""})]})]})}),e.jsx(js,{open:A,onOpenChange:D,children:e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:["",e.jsx("br",{}),e.jsx("span",{className:"text-destructive font-medium",children:""})]})]}),e.jsxs(us,{children:[e.jsx(fs,{onClick:()=>{D(!1),T(null)},children:""}),e.jsx(hs,{onClick:L,children:""})]})]})}),e.jsx(js,{open:V,onOpenChange:z,children:e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:["",e.jsx("br",{}),e.jsx("span",{className:"text-muted-foreground text-sm",children:""})]})]}),e.jsxs(us,{children:[e.jsx(fs,{onClick:()=>z(!1),children:""}),e.jsx(hs,{onClick:Ne,className:"bg-destructive hover:bg-destructive/90",children:""})]})]})})]})})}function j2({config:l,onChange:i}){return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:"Napcat WebSocket "}),e.jsxs("div",{className:"grid gap-3 md:gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"napcat-host",className:"text-sm md:text-base",children:""}),e.jsx(ie,{id:"napcat-host",value:l.napcat_server.host,onChange:r=>i({...l,napcat_server:{...l.napcat_server,host:r.target.value}}),placeholder:"localhost",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Napcat "})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"napcat-port",className:"text-sm md:text-base",children:""}),e.jsx(ie,{id:"napcat-port",type:"number",value:l.napcat_server.port||"",onChange:r=>i({...l,napcat_server:{...l.napcat_server,port:r.target.value?parseInt(r.target.value):0}}),placeholder:"8095",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Napcat  8095"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"napcat-token",className:"text-sm md:text-base",children:"Token"}),e.jsx(ie,{id:"napcat-token",type:"password",value:l.napcat_server.token,onChange:r=>i({...l,napcat_server:{...l.napcat_server,token:r.target.value}}),placeholder:"",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Napcat "})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"napcat-heartbeat",className:"text-sm md:text-base",children:""}),e.jsx(ie,{id:"napcat-heartbeat",type:"number",value:l.napcat_server.heartbeat_interval||"",onChange:r=>i({...l,napcat_server:{...l.napcat_server,heartbeat_interval:r.target.value?parseInt(r.target.value):0}}),placeholder:"30",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" Napcat  30"})]})]})]})})}function v2({config:l,onChange:i}){return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:" WebSocket "}),e.jsxs("div",{className:"grid gap-3 md:gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"maibot-host",className:"text-sm md:text-base",children:""}),e.jsx(ie,{id:"maibot-host",value:l.maibot_server.host,onChange:r=>i({...l,maibot_server:{...l.maibot_server,host:r.target.value}}),placeholder:"localhost",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" .env  HOST "})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{htmlFor:"maibot-port",className:"text-sm md:text-base",children:""}),e.jsx(ie,{id:"maibot-port",type:"number",value:l.maibot_server.port||"",onChange:r=>i({...l,maibot_server:{...l.maibot_server,port:r.target.value?parseInt(r.target.value):0}}),placeholder:"8000",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" .env  PORT  8000"})]})]})]})})}function b2({config:l,onChange:i}){const r=x=>{const h={...l};x==="group"?h.chat.group_list=[...h.chat.group_list,0]:x==="private"?h.chat.private_list=[...h.chat.private_list,0]:h.chat.ban_user_id=[...h.chat.ban_user_id,0],i(h)},o=(x,h)=>{const f={...l};x==="group"?f.chat.group_list=f.chat.group_list.filter((g,j)=>j!==h):x==="private"?f.chat.private_list=f.chat.private_list.filter((g,j)=>j!==h):f.chat.ban_user_id=f.chat.ban_user_id.filter((g,j)=>j!==h),i(f)},u=(x,h,f)=>{const g={...l};x==="group"?g.chat.group_list[h]=f:x==="private"?g.chat.private_list[h]=f:g.chat.ban_user_id[h]=f,i(g)};return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:""}),e.jsxs("div",{className:"grid gap-4 md:gap-6",children:[e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{className:"text-sm md:text-base",children:""}),e.jsxs(Ue,{value:l.chat.group_list_type,onValueChange:x=>i({...l,chat:{...l.chat,group_list_type:x}}),children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"whitelist",children:""}),e.jsx(ee,{value:"blacklist",children:""})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[e.jsx(k,{className:"text-sm md:text-base",children:""}),e.jsxs(C,{onClick:()=>r("group"),size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(Aa,{className:"mr-1 h-4 w-4"}),""]})]}),l.chat.group_list.map((x,h)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{type:"number",value:x,onChange:f=>u("group",h,parseInt(f.target.value)||0),placeholder:"",className:"text-sm md:text-base"}),e.jsxs(js,{children:[e.jsx(mt,{asChild:!0,children:e.jsx(C,{size:"icon",variant:"outline",children:e.jsx(es,{className:"h-4 w-4"})})}),e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:[" ",x," "]})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:()=>o("group",h),children:""})]})]})]})]},h)),l.chat.group_list.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{className:"text-sm md:text-base",children:""}),e.jsxs(Ue,{value:l.chat.private_list_type,onValueChange:x=>i({...l,chat:{...l.chat,private_list_type:x}}),children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"whitelist",children:""}),e.jsx(ee,{value:"blacklist",children:""})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[e.jsx(k,{className:"text-sm md:text-base",children:""}),e.jsxs(C,{onClick:()=>r("private"),size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(Aa,{className:"mr-1 h-4 w-4"}),""]})]}),l.chat.private_list.map((x,h)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{type:"number",value:x,onChange:f=>u("private",h,parseInt(f.target.value)||0),placeholder:"QQ",className:"text-sm md:text-base"}),e.jsxs(js,{children:[e.jsx(mt,{asChild:!0,children:e.jsx(C,{size:"icon",variant:"outline",children:e.jsx(es,{className:"h-4 w-4"})})}),e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:[" ",x," "]})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:()=>o("private",h),children:""})]})]})]})]},h)),l.chat.private_list.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs(C,{onClick:()=>r("ban"),size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(Aa,{className:"mr-1 h-4 w-4"}),""]})]}),l.chat.ban_user_id.map((x,h)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{type:"number",value:x,onChange:f=>u("ban",h,parseInt(f.target.value)||0),placeholder:"QQ",className:"text-sm md:text-base"}),e.jsxs(js,{children:[e.jsx(mt,{asChild:!0,children:e.jsx(C,{size:"icon",variant:"outline",children:e.jsx(es,{className:"h-4 w-4"})})}),e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:[" ",x," "]})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:()=>o("ban",h),children:""})]})]})]})]},h)),l.chat.ban_user_id.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-sm md:text-base",children:"QQ"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"QQ"})]}),e.jsx(Fe,{checked:l.chat.ban_qq_bot,onCheckedChange:x=>i({...l,chat:{...l.chat,ban_qq_bot:x}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsx(Fe,{checked:l.chat.enable_poke,onCheckedChange:x=>i({...l,chat:{...l.chat,enable_poke:x}})})]})]})]})})}function N2({config:l,onChange:i}){return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:""}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-sm md:text-base",children:" TTS "}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:" TTS "})]}),e.jsx(Fe,{checked:l.voice.use_tts,onCheckedChange:r=>i({...l,voice:{use_tts:r}})})]})]})})}function y2({config:l,onChange:i}){return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:""}),e.jsx("div",{className:"grid gap-3 md:gap-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{className:"text-sm md:text-base",children:""}),e.jsxs(Ue,{value:l.debug.level,onValueChange:r=>i({...l,debug:{level:r}}),children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"DEBUG",children:"DEBUG"}),e.jsx(ee,{value:"INFO",children:"INFO"}),e.jsx(ee,{value:"WARNING",children:"WARNING"}),e.jsx(ee,{value:"ERROR",children:"ERROR"}),e.jsx(ee,{value:"CRITICAL",children:"CRITICAL"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})})]})})}const w2=["defaultChecked","defaultValue","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML","accessKey","className","contentEditable","contextMenu","dir","draggable","hidden","id","lang","placeholder","slot","spellCheck","style","tabIndex","title","translate","radioGroup","role","about","datatype","inlist","prefix","property","resource","typeof","vocab","autoCapitalize","autoCorrect","autoSave","color","itemProp","itemScope","itemType","itemID","itemRef","results","security","unselectable","inputMode","is","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],_2=/^(aria-|data-)/,kj=l=>Object.fromEntries(Object.entries(l).filter(([i])=>_2.test(i)||w2.includes(i)));function S2(l,i){const r=kj(l);return Object.keys(l).some(o=>!Object.hasOwn(r,o)&&l[o]!==i[o])}class C2 extends m.Component{container;plugin;componentDidMount(){this.installPlugin()}componentDidUpdate(i){if(i.uppy!==this.props.uppy)this.uninstallPlugin(i),this.installPlugin();else if(S2(this.props,i)){const{uppy:r,...o}={...this.props,target:this.container};this.plugin.setOptions(o)}}componentWillUnmount(){this.uninstallPlugin()}installPlugin(){const{uppy:i,...r}={id:"Dashboard",...this.props,inline:!0,target:this.container};i.use(g0,r),this.plugin=i.getPlugin(r.id)}uninstallPlugin(i=this.props){const{uppy:r}=i;r.removePlugin(this.plugin)}render(){return m.createElement("div",{className:"uppy-Container",ref:i=>{this.container=i},...kj(this.props)})}}function k2({src:l,alt:i="",className:r,maxRetries:o=5,retryInterval:u=1500}){const[x,h]=m.useState("loading"),[f,g]=m.useState(0),[j,v]=m.useState(null),y=m.useCallback(async()=>{try{const b=await fetch(l,{credentials:"include"});if(b.status===202){h("generating"),f<o?setTimeout(()=>{g(O=>O+1)},u):h("error");return}if(!b.ok){h("error");return}const S=await b.blob(),w=URL.createObjectURL(S);v(w),h("loaded")}catch(b){console.error(":",b),h("error")}},[l,f,o,u]);return m.useEffect(()=>{h("loading"),g(0),v(null)},[l]),m.useEffect(()=>{y()},[y]),m.useEffect(()=>()=>{j&&URL.revokeObjectURL(j)},[j]),x==="loading"||x==="generating"?e.jsx(aj,{className:H("w-full h-full",r)}):x==="error"||!j?e.jsx("div",{className:H("w-full h-full flex items-center justify-center bg-muted",r),children:e.jsx(Ug,{className:"h-8 w-8 text-muted-foreground"})}):e.jsx("img",{src:j,alt:i,className:H("w-full h-full object-contain",r)})}function Tj({content:l,className:i=""}){return e.jsx("div",{className:`prose prose-sm dark:prose-invert max-w-none ${i}`,children:e.jsx(v0,{remarkPlugins:[N0,y0],rehypePlugins:[b0],components:{code({inline:r,className:o,children:u,...x}){return r?e.jsx("code",{className:"bg-muted px-1.5 py-0.5 rounded text-sm font-mono",...x,children:u}):e.jsx("code",{className:`${o} block bg-muted p-4 rounded-lg overflow-x-auto`,...x,children:u})},table({children:r,...o}){return e.jsx("div",{className:"overflow-x-auto",children:e.jsx("table",{className:"border-collapse border border-border",...o,children:r})})},th({children:r,...o}){return e.jsx("th",{className:"border border-border bg-muted px-4 py-2 text-left font-semibold",...o,children:r})},td({children:r,...o}){return e.jsx("td",{className:"border border-border px-4 py-2",...o,children:r})},a({children:r,...o}){return e.jsx("a",{className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",...o,children:r})},blockquote({children:r,...o}){return e.jsx("blockquote",{className:"border-l-4 border-primary pl-4 italic text-muted-foreground",...o,children:r})},h1({children:r,...o}){return e.jsx("h1",{className:"text-3xl font-bold mt-6 mb-4",...o,children:r})},h2({children:r,...o}){return e.jsx("h2",{className:"text-2xl font-bold mt-5 mb-3",...o,children:r})},h3({children:r,...o}){return e.jsx("h3",{className:"text-xl font-bold mt-4 mb-2",...o,children:r})},h4({children:r,...o}){return e.jsx("h4",{className:"text-lg font-semibold mt-3 mb-2",...o,children:r})},ul({children:r,...o}){return e.jsx("ul",{className:"list-disc list-inside space-y-1 my-2",...o,children:r})},ol({children:r,...o}){return e.jsx("ol",{className:"list-decimal list-inside space-y-1 my-2",...o,children:r})},p({children:r,...o}){return e.jsx("p",{className:"my-2 leading-relaxed",...o,children:r})},hr({...r}){return e.jsx("hr",{className:"my-4 border-border",...r})}},children:l})})}function T2({children:l,className:i}){return e.jsx(Tj,{content:l,className:i})}const Ca="/api/webui/emoji";async function E2(l){const i=new URLSearchParams;l.page&&i.append("page",l.page.toString()),l.page_size&&i.append("page_size",l.page_size.toString()),l.search&&i.append("search",l.search),l.is_registered!==void 0&&i.append("is_registered",l.is_registered.toString()),l.is_banned!==void 0&&i.append("is_banned",l.is_banned.toString()),l.format&&i.append("format",l.format),l.sort_by&&i.append("sort_by",l.sort_by),l.sort_order&&i.append("sort_order",l.sort_order);const r=await we(`${Ca}/list?${i}`,{});if(!r.ok)throw new Error(`: ${r.statusText}`);return r.json()}async function z2(l){const i=await we(`${Ca}/${l}`,{});if(!i.ok)throw new Error(`: ${i.statusText}`);return i.json()}async function M2(l,i){const r=await we(`${Ca}/${l}`,{method:"PATCH",body:JSON.stringify(i)});if(!r.ok)throw new Error(`: ${r.statusText}`);return r.json()}async function A2(l){const i=await we(`${Ca}/${l}`,{method:"DELETE"});if(!i.ok)throw new Error(`: ${i.statusText}`);return i.json()}async function O2(){const l=await we(`${Ca}/stats/summary`,{});if(!l.ok)throw new Error(`: ${l.statusText}`);return l.json()}async function D2(l){const i=await we(`${Ca}/${l}/register`,{method:"POST"});if(!i.ok)throw new Error(`: ${i.statusText}`);return i.json()}async function R2(l){const i=await we(`${Ca}/${l}/ban`,{method:"POST"});if(!i.ok)throw new Error(`: ${i.statusText}`);return i.json()}function L2(l,i=!1){return i?`${Ca}/${l}/thumbnail?original=true`:`${Ca}/${l}/thumbnail`}function U2(l){return`${Ca}/${l}/thumbnail?original=true`}async function B2(l){const i=await we(`${Ca}/batch/delete`,{method:"POST",body:JSON.stringify({emoji_ids:l})});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return i.json()}function H2(){return`${Ca}/upload`}function $2(){const[l,i]=m.useState([]),[r,o]=m.useState(null),[u,x]=m.useState(!1),[h,f]=m.useState(1),[g,j]=m.useState(0),[v,y]=m.useState(20),[b,S]=m.useState("all"),[w,O]=m.useState("all"),[A,D]=m.useState("all"),[V,z]=m.useState("usage_count"),[_,T]=m.useState("desc"),[$,E]=m.useState(null),[se,te]=m.useState(!1),[ne,ue]=m.useState(!1),[Se,oe]=m.useState(!1),[je,be]=m.useState(new Set),[U,P]=m.useState(!1),[X,L]=m.useState(""),[B,_e]=m.useState("medium"),[Ne,Ce]=m.useState(!1),{toast:ve}=Ks(),ze=m.useCallback(async()=>{try{x(!0);const re=await E2({page:h,page_size:v,is_registered:b==="all"?void 0:b==="registered",is_banned:w==="all"?void 0:w==="banned",format:A==="all"?void 0:A,sort_by:V,sort_order:_});i(re.data),j(re.total)}catch(re){const pe=re instanceof Error?re.message:"";ve({title:"",description:pe,variant:"destructive"})}finally{x(!1)}},[h,v,b,w,A,V,_,ve]),Q=async()=>{try{const re=await O2();o(re.data)}catch(re){console.error(":",re)}};m.useEffect(()=>{ze()},[ze]),m.useEffect(()=>{Q()},[]);const xe=async re=>{try{const pe=await z2(re.id);E(pe.data),te(!0)}catch(pe){const Ee=pe instanceof Error?pe.message:"";ve({title:"",description:Ee,variant:"destructive"})}},Te=re=>{E(re),ue(!0)},J=re=>{E(re),oe(!0)},le=async()=>{if($)try{await A2($.id),ve({title:"",description:""}),oe(!1),E(null),ze(),Q()}catch(re){const pe=re instanceof Error?re.message:"";ve({title:"",description:pe,variant:"destructive"})}},qe=async re=>{try{await D2(re.id),ve({title:"",description:""}),ze(),Q()}catch(pe){const Ee=pe instanceof Error?pe.message:"";ve({title:"",description:Ee,variant:"destructive"})}},We=async re=>{try{await R2(re.id),ve({title:"",description:""}),ze(),Q()}catch(pe){const Ee=pe instanceof Error?pe.message:"";ve({title:"",description:Ee,variant:"destructive"})}},fe=re=>{const pe=new Set(je);pe.has(re)?pe.delete(re):pe.add(re),be(pe)},ls=async()=>{try{const re=await B2(Array.from(je));ve({title:"",description:re.message}),be(new Set),P(!1),ze(),Q()}catch(re){ve({title:"",description:re instanceof Error?re.message:"",variant:"destructive"})}},G=()=>{const re=parseInt(X),pe=Math.ceil(g/v);re>=1&&re<=pe?(f(re),L("")):ve({title:"",description:`1-${pe}`,variant:"destructive"})},Me=r?.formats?Object.keys(r.formats):[];return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs(C,{onClick:()=>Ce(!0),className:"gap-2",children:[e.jsx(_r,{className:"h-4 w-4"}),""]})]}),e.jsx(Ze,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 pr-4",children:[r&&e.jsxs("div",{className:"grid gap-4 grid-cols-2 lg:grid-cols-4",children:[e.jsx(Ve,{children:e.jsxs(rs,{className:"pb-2",children:[e.jsx(st,{children:""}),e.jsx(cs,{className:"text-2xl",children:r.total})]})}),e.jsx(Ve,{children:e.jsxs(rs,{className:"pb-2",children:[e.jsx(st,{children:""}),e.jsx(cs,{className:"text-2xl text-green-600",children:r.registered})]})}),e.jsx(Ve,{children:e.jsxs(rs,{className:"pb-2",children:[e.jsx(st,{children:""}),e.jsx(cs,{className:"text-2xl text-red-600",children:r.banned})]})}),e.jsx(Ve,{children:e.jsxs(rs,{className:"pb-2",children:[e.jsx(st,{children:""}),e.jsx(cs,{className:"text-2xl text-gray-600",children:r.unregistered})]})})]}),e.jsxs(Ve,{children:[e.jsx(rs,{children:e.jsxs(cs,{className:"flex items-center gap-2",children:[e.jsx(lo,{className:"h-5 w-5"}),""]})}),e.jsxs(gs,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:""}),e.jsxs(Ue,{value:`${V}-${_}`,onValueChange:re=>{const[pe,Ee]=re.split("-");z(pe),T(Ee),f(1)},children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"usage_count-desc",children:" ()"}),e.jsx(ee,{value:"usage_count-asc",children:" ()"}),e.jsx(ee,{value:"register_time-desc",children:" ()"}),e.jsx(ee,{value:"register_time-asc",children:" ()"}),e.jsx(ee,{value:"record_time-desc",children:" ()"}),e.jsx(ee,{value:"record_time-asc",children:" ()"}),e.jsx(ee,{value:"last_used_time-desc",children:" ()"}),e.jsx(ee,{value:"last_used_time-asc",children:" ()"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:""}),e.jsxs(Ue,{value:b,onValueChange:re=>{S(re),f(1)},children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"all",children:""}),e.jsx(ee,{value:"registered",children:""}),e.jsx(ee,{value:"unregistered",children:""})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:""}),e.jsxs(Ue,{value:w,onValueChange:re=>{O(re),f(1)},children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"all",children:""}),e.jsx(ee,{value:"banned",children:""}),e.jsx(ee,{value:"unbanned",children:""})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:""}),e.jsxs(Ue,{value:A,onValueChange:re=>{D(re),f(1)},children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"all",children:""}),Me.map(re=>e.jsxs(ee,{value:re,children:[re.toUpperCase()," (",r?.formats[re],")"]},re))]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[je.size>0&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",je.size," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"text-sm whitespace-nowrap",children:""}),e.jsxs(Ue,{value:B,onValueChange:re=>_e(re),children:[e.jsx(Re,{className:"w-24",children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"small",children:""}),e.jsx(ee,{value:"medium",children:""}),e.jsx(ee,{value:"large",children:""})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{htmlFor:"emoji-page-size",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(Ue,{value:v.toString(),onValueChange:re=>{y(parseInt(re)),f(1),be(new Set)},children:[e.jsx(Re,{id:"emoji-page-size",className:"w-20",children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"20",children:"20"}),e.jsx(ee,{value:"40",children:"40"}),e.jsx(ee,{value:"60",children:"60"}),e.jsx(ee,{value:"100",children:"100"})]})]}),je.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(C,{variant:"outline",size:"sm",onClick:()=>be(new Set),children:""}),e.jsxs(C,{variant:"destructive",size:"sm",onClick:()=>P(!0),children:[e.jsx(es,{className:"h-4 w-4 mr-1"}),""]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsxs(C,{variant:"outline",size:"sm",onClick:ze,disabled:u,children:[e.jsx(At,{className:`h-4 w-4 mr-2 ${u?"animate-spin":""}`}),""]})})]})]}),e.jsxs(Ve,{children:[e.jsxs(rs,{children:[e.jsx(cs,{children:""}),e.jsxs(st,{children:[" ",g,"  ",h," "]})]}),e.jsxs(gs,{children:[l.length===0?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:""}):e.jsx("div",{className:`grid gap-3 ${B==="small"?"grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10":B==="medium"?"grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8":"grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"}`,children:l.map(re=>e.jsxs("div",{className:`group relative rounded-lg border bg-card overflow-hidden hover:ring-2 hover:ring-primary transition-all cursor-pointer ${je.has(re.id)?"ring-2 ring-primary bg-primary/5":""}`,onClick:()=>fe(re.id),children:[e.jsx("div",{className:`absolute top-1 left-1 z-10 transition-opacity ${je.has(re.id)?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${je.has(re.id)?"bg-primary border-primary text-primary-foreground":"bg-background/80 border-muted-foreground/50"}`,children:je.has(re.id)&&e.jsx(aa,{className:"h-3 w-3"})})}),e.jsxs("div",{className:"absolute top-1 right-1 z-10 flex flex-col gap-0.5",children:[re.is_registered&&e.jsx(Ye,{variant:"default",className:"bg-green-600 text-[10px] px-1 py-0",children:""}),re.is_banned&&e.jsx(Ye,{variant:"destructive",className:"text-[10px] px-1 py-0",children:""})]}),e.jsx("div",{className:`aspect-square bg-muted flex items-center justify-center overflow-hidden ${B==="small"?"p-1":B==="medium"?"p-2":"p-3"}`,children:e.jsx(k2,{src:L2(re.id),alt:""})}),e.jsxs("div",{className:`border-t bg-card ${B==="small"?"p-1":"p-2"}`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-1 text-xs text-muted-foreground mb-1",children:[e.jsx(Ye,{variant:"outline",className:"text-[10px] px-1 py-0",children:re.format.toUpperCase()}),e.jsxs("span",{className:"font-mono",children:[re.usage_count,""]})]}),e.jsxs("div",{className:`flex gap-1 justify-center opacity-0 group-hover:opacity-100 transition-opacity ${B==="small"?"flex-wrap":""}`,children:[e.jsx(C,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:pe=>{pe.stopPropagation(),Te(re)},title:"",children:e.jsx(pn,{className:"h-3 w-3"})}),e.jsx(C,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:pe=>{pe.stopPropagation(),xe(re)},title:"",children:e.jsx(Ra,{className:"h-3 w-3"})}),!re.is_registered&&e.jsx(C,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-600 hover:text-green-700",onClick:pe=>{pe.stopPropagation(),qe(re)},title:"",children:e.jsx(aa,{className:"h-3 w-3"})}),!re.is_banned&&e.jsx(C,{variant:"ghost",size:"icon",className:"h-6 w-6 text-orange-600 hover:text-orange-700",onClick:pe=>{pe.stopPropagation(),We(re)},title:"",children:e.jsx(Iy,{className:"h-3 w-3"})}),e.jsx(C,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-600 hover:text-red-700",onClick:pe=>{pe.stopPropagation(),J(re)},title:"",children:e.jsx(es,{className:"h-3 w-3"})})]})]})]},re.id))}),g>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",(h-1)*v+1," "," ",Math.min(h*v,g),"  ",g," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{variant:"outline",size:"sm",onClick:()=>f(1),disabled:h===1,className:"hidden sm:flex",children:e.jsx(vi,{className:"h-4 w-4"})}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>f(re=>Math.max(1,re-1)),disabled:h===1,children:[e.jsx(pl,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{type:"number",value:X,onChange:re=>L(re.target.value),onKeyDown:re=>re.key==="Enter"&&G(),placeholder:h.toString(),className:"w-16 h-8 text-center",min:1,max:Math.ceil(g/v)}),e.jsx(C,{variant:"outline",size:"sm",onClick:G,disabled:!X,className:"h-8",children:""})]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>f(re=>re+1),disabled:h>=Math.ceil(g/v),children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(Ya,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(C,{variant:"outline",size:"sm",onClick:()=>f(Math.ceil(g/v)),disabled:h>=Math.ceil(g/v),className:"hidden sm:flex",children:e.jsx(bi,{className:"h-4 w-4"})})]})]})]})]}),e.jsx(q2,{emoji:$,open:se,onOpenChange:te}),e.jsx(G2,{emoji:$,open:ne,onOpenChange:ue,onSuccess:()=>{ze(),Q()}}),e.jsx(V2,{open:Ne,onOpenChange:Ce,onSuccess:()=>{ze(),Q()}})]})}),e.jsx(js,{open:U,onOpenChange:P,children:e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:[" ",je.size," "]})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:ls,children:""})]})]})}),e.jsx(Qs,{open:Se,onOpenChange:oe,children:e.jsxs(qs,{children:[e.jsxs(Gs,{children:[e.jsx(Vs,{children:""}),e.jsx(Ws,{children:""})]}),e.jsxs(at,{children:[e.jsx(C,{variant:"outline",onClick:()=>oe(!1),children:""}),e.jsx(C,{variant:"destructive",onClick:le,children:""})]})]})})]})}function q2({emoji:l,open:i,onOpenChange:r}){if(!l)return null;const o=u=>u?new Date(u*1e3).toLocaleString("zh-CN"):"-";return e.jsx(Qs,{open:i,onOpenChange:r,children:e.jsxs(qs,{className:"max-w-2xl max-h-[90vh]",children:[e.jsx(Gs,{children:e.jsx(Vs,{children:""})}),e.jsx(Ze,{className:"max-h-[calc(90vh-8rem)] pr-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-32 h-32 bg-muted rounded-lg flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:U2(l.id),alt:l.description||"",className:"w-full h-full object-cover",onError:u=>{const x=u.target;x.style.display="none";const h=x.parentElement;h&&(h.innerHTML='<svg class="h-16 w-16 text-muted-foreground" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>')}})})}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-muted-foreground",children:"ID"}),e.jsx("div",{className:"mt-1 font-mono",children:l.id})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1",children:e.jsx(Ye,{variant:"outline",children:l.format.toUpperCase()})})]})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 font-mono text-sm break-all bg-muted p-2 rounded",children:l.full_path})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 font-mono text-sm break-all bg-muted p-2 rounded",children:l.emoji_hash})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-muted-foreground",children:""}),l.description?e.jsx("div",{className:"mt-1 rounded-lg border bg-muted/50 p-3",children:e.jsx(T2,{className:"prose-sm",children:l.description})}):e.jsx("div",{className:"mt-1 text-sm text-muted-foreground",children:"-"})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1",children:l.emotion?e.jsx("span",{className:"text-sm",children:l.emotion}):e.jsx("span",{className:"text-sm text-muted-foreground",children:"-"})})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-muted-foreground",children:""}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[l.is_registered&&e.jsx(Ye,{variant:"default",className:"bg-green-600",children:""}),l.is_banned&&e.jsx(Ye,{variant:"destructive",children:""}),!l.is_registered&&!l.is_banned&&e.jsx(Ye,{variant:"outline",children:""})]})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 font-mono text-lg",children:l.usage_count})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 text-sm",children:o(l.record_time)})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 text-sm",children:o(l.register_time)})]})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 text-sm",children:o(l.last_used_time)})]})]})})]})})}function G2({emoji:l,open:i,onOpenChange:r,onSuccess:o}){const[u,x]=m.useState(""),[h,f]=m.useState(!1),[g,j]=m.useState(!1),[v,y]=m.useState(!1),{toast:b}=Ks();m.useEffect(()=>{l&&(x(l.emotion||""),f(l.is_registered),j(l.is_banned))},[l]);const S=async()=>{if(l)try{y(!0);const w=u.split(/[,,]/).map(O=>O.trim()).filter(Boolean).join(",");await M2(l.id,{emotion:w||void 0,is_registered:h,is_banned:g}),b({title:"",description:""}),r(!1),o()}catch(w){const O=w instanceof Error?w.message:"";b({title:"",description:O,variant:"destructive"})}finally{y(!1)}};return l?e.jsx(Qs,{open:i,onOpenChange:r,children:e.jsxs(qs,{className:"max-w-2xl",children:[e.jsxs(Gs,{children:[e.jsx(Vs,{children:""}),e.jsx(Ws,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(k,{children:""}),e.jsx(Ys,{value:u,onChange:w=>x(w.target.value),placeholder:"...",rows:2,className:"mt-1"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{id:"is_registered",checked:h,onCheckedChange:w=>{w===!0?(f(!0),j(!1)):f(!1)}}),e.jsx(k,{htmlFor:"is_registered",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{id:"is_banned",checked:g,onCheckedChange:w=>{w===!0?(j(!0),f(!1)):j(!1)}}),e.jsx(k,{htmlFor:"is_banned",className:"cursor-pointer",children:""})]})]})]}),e.jsxs(at,{children:[e.jsx(C,{variant:"outline",onClick:()=>r(!1),children:""}),e.jsx(C,{onClick:S,disabled:v,children:v?"...":""})]})]})}):null}function V2({open:l,onOpenChange:i,onSuccess:r}){const[o,u]=m.useState("select"),[x,h]=m.useState([]),[f,g]=m.useState(null),[j,v]=m.useState(!1),{toast:y}=Ks(),b=m.useMemo(()=>new j0({id:"emoji-uploader",autoProceed:!1,restrictions:{maxFileSize:10485760,allowedFileTypes:["image/jpeg","image/png","image/gif","image/webp"],maxNumberOfFiles:20},locale:{pluralize:()=>0,strings:{addMoreFiles:"",addingMoreFiles:"",allowedFileTypes:"%{types}",cancel:"",closeModal:"",complete:"",connectedToInternet:"",copyLink:"",copyLinkToClipboardFallback:"",copyLinkToClipboardSuccess:"",dashboardTitle:"",dashboardWindowTitle:" ESC ",done:"",dropHereOr:" %{browse}",dropHint:"",dropPasteFiles:" %{browseFiles}",dropPasteFolders:" %{browseFolders}",dropPasteBoth:"%{browseFiles}  %{browseFolders}",dropPasteImportFiles:"%{browseFiles} ",dropPasteImportFolders:"%{browseFolders} ",dropPasteImportBoth:"%{browseFiles}%{browseFolders} ",editFile:"",editing:" %{file}",emptyFolderAdded:"",exceedsSize:"%{file}  %{size}",failedToUpload:" %{file} ",fileSource:"%{name}",filesUploadedOfTotal:{0:" %{complete} / %{smart_count} ",1:" %{complete} / %{smart_count} "},filter:"",finishEditingFile:"",folderAdded:{0:" %{folder}  %{smart_count} ",1:" %{folder}  %{smart_count} "},generatingThumbnails:"...",import:"",importFiles:"",importFrom:" %{name} ",loading:"...",logOut:"",myDevice:"",noFilesFound:"",noInternetConnection:"",openFolderNamed:" %{name}",pause:"",pauseUpload:"",paused:"",poweredBy:"%{uppy}",processingXFiles:{0:" %{smart_count} ",1:" %{smart_count} "},recording:"",removeFile:"",resetFilter:"",resume:"",resumeUpload:"",retry:"",retryUpload:"",save:"",saveChanges:"",selectFileNamed:" %{name}",selectX:{0:" %{smart_count}",1:" %{smart_count}"},smile:"",startRecording:"",stopRecording:"",takePicture:"",timedOut:" %{seconds} ",upload:"",uploadComplete:"",uploadFailed:"",uploadPaused:"",uploadXFiles:{0:"%{smart_count} ",1:"%{smart_count} "},uploadXNewFiles:{0:"+%{smart_count} ",1:"+%{smart_count} "},uploading:"",uploadingXFiles:{0:" %{smart_count} ",1:" %{smart_count} "},xFilesSelected:{0:" %{smart_count} ",1:" %{smart_count} "},xMoreFilesAdded:{0:" %{smart_count} ",1:" %{smart_count} "},xTimeLeft:" %{time}",youCanOnlyUploadFileTypes:"%{types}",youCanOnlyUploadX:{0:" %{smart_count} ",1:" %{smart_count} "},youHaveToAtLeastSelectX:{0:" %{smart_count} ",1:" %{smart_count} "},browseFiles:"",browseFolders:"",cancelUpload:"",addMore:"",back:"",editFileWithFilename:" %{file}"}}}),[]);m.useEffect(()=>{const $=()=>{const E=b.getFiles();if(E.length===0)return;const se=E.map(te=>({id:te.id,name:te.name,previewUrl:te.preview||URL.createObjectURL(te.data),emotion:"",description:"",isRegistered:!0,file:te.data}));h(se),E.length===1?(g(se[0].id),u("edit-single")):u("edit-multiple")};return b.on("upload",$),()=>{b.off("upload",$)}},[b]),m.useEffect(()=>{l||(b.cancelAll(),u("select"),h([]),g(null),v(!1))},[l,b]);const S=m.useCallback(($,E)=>{h(se=>se.map(te=>te.id===$?{...te,...E}:te))},[]),w=m.useCallback($=>$.emotion.trim().length>0,[]),O=m.useMemo(()=>x.length>0&&x.every(w),[x,w]),A=m.useMemo(()=>x.find($=>$.id===f)||null,[x,f]),D=m.useCallback(()=>{(o==="edit-single"||o==="edit-multiple")&&(u("select"),h([]),g(null))},[o]),V=m.useCallback(async()=>{if(!O){y({title:"",description:"",variant:"destructive"});return}v(!0);let $=0,E=0;try{for(const se of x){const te=new FormData;te.append("file",se.file),te.append("emotion",se.emotion),te.append("description",se.description),te.append("is_registered",se.isRegistered.toString());try{(await we(H2(),{method:"POST",body:te})).ok?$++:E++}catch{E++}}E===0?(y({title:"",description:` ${$} `}),i(!1),r()):(y({title:"",description:` ${$}  ${E} `,variant:"destructive"}),r())}finally{v(!1)}},[O,x,y,i,r]),z=()=>e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"border rounded-lg overflow-hidden w-full",children:e.jsx(C2,{uppy:b,proudlyDisplayPoweredByUppy:!1,hideProgressDetails:!0,height:350,width:"100%",theme:"auto",note:" JPGPNGGIFWebP  20 "})})}),_=()=>{const $=x[0];return $?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(C,{variant:"ghost",size:"sm",onClick:D,children:[e.jsx(hi,{className:"h-4 w-4 mr-1"}),""]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("div",{className:"w-32 h-32 rounded-lg border overflow-hidden bg-muted flex items-center justify-center",children:e.jsx("img",{src:$.previewUrl,alt:$.name,className:"max-w-full max-h-full object-contain"})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center truncate max-w-32",children:$.name})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"single-emotion",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ie,{id:"single-emotion",value:$.emotion,onChange:E=>S($.id,{emotion:E.target.value}),placeholder:",",className:$.emotion.trim()?"":"border-destructive"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"single-description",children:""}),e.jsx(ie,{id:"single-description",value:$.description,onChange:E=>S($.id,{description:E.target.value}),placeholder:"..."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{id:"single-is-registered",checked:$.isRegistered,onCheckedChange:E=>S($.id,{isRegistered:E===!0})}),e.jsx(k,{htmlFor:"single-is-registered",className:"cursor-pointer",children:""})]})]})]}),e.jsx(at,{children:e.jsx(C,{onClick:V,disabled:!O||j,children:j?"...":""})})]}):null},T=()=>{const $=x.filter(w).length,E=x.length;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(C,{variant:"ghost",size:"sm",onClick:D,children:[e.jsx(hi,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["",$,"/",E," "]})]}),e.jsx(Ye,{variant:O?"default":"secondary",children:O?e.jsxs(e.Fragment,{children:[e.jsx(ea,{className:"h-3 w-3 mr-1"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(fl,{className:"h-3 w-3 mr-1"}),""]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Ze,{className:"h-[350px] pr-2",children:e.jsx("div",{className:"space-y-2",children:x.map(se=>{const te=w(se),ne=f===se.id;return e.jsxs("div",{onClick:()=>g(se.id),className:`
                      flex items-center gap-3 p-3 rounded-lg border-2 cursor-pointer transition-all
                      ${ne?"ring-2 ring-primary":""}
                      ${te?"border-green-500 bg-green-50 dark:bg-green-950/20":"border-border hover:border-muted-foreground/50"}
                    `,children:[e.jsx("div",{className:"w-12 h-12 rounded border overflow-hidden bg-muted flex-shrink-0 flex items-center justify-center",children:e.jsx("img",{src:se.previewUrl,alt:se.name,className:"max-w-full max-h-full object-contain"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:se.name}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:se.emotion||""})]}),te?e.jsx(aa,{className:"h-5 w-5 text-green-500 flex-shrink-0"}):e.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-muted-foreground/30 flex-shrink-0"})]},se.id)})})}),e.jsx("div",{className:"border rounded-lg p-4",children:A?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded border overflow-hidden bg-muted flex items-center justify-center",children:e.jsx("img",{src:A.previewUrl,alt:A.name,className:"max-w-full max-h-full object-contain"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:A.name}),w(A)&&e.jsxs(Ye,{variant:"outline",className:"text-green-600 border-green-600",children:[e.jsx(ea,{className:"h-3 w-3 mr-1"}),""]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"multi-emotion",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ie,{id:"multi-emotion",value:A.emotion,onChange:se=>S(A.id,{emotion:se.target.value}),placeholder:",",className:A.emotion.trim()?"":"border-destructive"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"multi-description",children:""}),e.jsx(ie,{id:"multi-description",value:A.description,onChange:se=>S(A.id,{description:se.target.value}),placeholder:"..."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{id:"multi-is-registered",checked:A.isRegistered,onCheckedChange:se=>S(A.id,{isRegistered:se===!0})}),e.jsx(k,{htmlFor:"multi-is-registered",className:"cursor-pointer text-sm",children:""})]})]}):e.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ug,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:""})]})})})]}),e.jsx(at,{children:e.jsx(C,{onClick:V,disabled:!O||j,children:j?"...":` (${E})`})})]})};return e.jsx(Qs,{open:l,onOpenChange:i,children:e.jsxs(qs,{className:"max-w-3xl max-h-[90vh] overflow-hidden",children:[e.jsxs(Gs,{children:[e.jsxs(Vs,{className:"flex items-center gap-2",children:[e.jsx(_r,{className:"h-5 w-5"}),o==="select"&&" - ",o==="edit-single"&&" - ",o==="edit-multiple"&&" - "]}),e.jsxs(Ws,{children:[o==="select"&&" JPGPNGGIFWebP  10MB",o==="edit-single"&&"",o==="edit-multiple"&&""]})]}),e.jsxs("div",{className:"overflow-y-auto pr-1",children:[o==="select"&&z(),o==="edit-single"&&_(),o==="edit-multiple"&&T()]})]})})}const Yl="/api/webui/expression";async function F2(){const l=await we(`${Yl}/chats`,{});if(!l.ok){const i=await l.json();throw new Error(i.detail||"")}return l.json()}async function I2(l){const i=new URLSearchParams;l.page&&i.append("page",l.page.toString()),l.page_size&&i.append("page_size",l.page_size.toString()),l.search&&i.append("search",l.search),l.chat_id&&i.append("chat_id",l.chat_id);const r=await we(`${Yl}/list?${i}`,{});if(!r.ok){const o=await r.json();throw new Error(o.detail||"")}return r.json()}async function Q2(l){const i=await we(`${Yl}/${l}`,{});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return i.json()}async function Y2(l){const i=await we(`${Yl}/`,{method:"POST",body:JSON.stringify(l)});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return i.json()}async function K2(l,i){const r=await we(`${Yl}/${l}`,{method:"PATCH",body:JSON.stringify(i)});if(!r.ok){const o=await r.json();throw new Error(o.detail||"")}return r.json()}async function X2(l){const i=await we(`${Yl}/${l}`,{method:"DELETE"});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return i.json()}async function P2(l){const i=await we(`${Yl}/batch/delete`,{method:"POST",body:JSON.stringify({ids:l})});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return i.json()}async function J2(){const l=await we(`${Yl}/stats/summary`,{});if(!l.ok){const i=await l.json();throw new Error(i.detail||"")}return l.json()}function Z2(){const[l,i]=m.useState([]),[r,o]=m.useState(!0),[u,x]=m.useState(0),[h,f]=m.useState(1),[g,j]=m.useState(20),[v,y]=m.useState(""),[b,S]=m.useState(null),[w,O]=m.useState(!1),[A,D]=m.useState(!1),[V,z]=m.useState(!1),[_,T]=m.useState(null),[$,E]=m.useState(new Set),[se,te]=m.useState(!1),[ne,ue]=m.useState(""),[Se,oe]=m.useState({total:0,recent_7days:0,chat_count:0,top_chats:{}}),[je,be]=m.useState([]),[U,P]=m.useState(new Map),{toast:X}=Ks(),L=async()=>{try{o(!0);const le=await I2({page:h,page_size:g,search:v||void 0});i(le.data),x(le.total)}catch(le){X({title:"",description:le instanceof Error?le.message:"",variant:"destructive"})}finally{o(!1)}},B=async()=>{try{const le=await J2();le?.data&&oe(le.data)}catch(le){console.error(":",le)}},_e=async()=>{try{const le=await F2();if(le?.data){be(le.data);const qe=new Map;le.data.forEach(We=>{qe.set(We.chat_id,We.chat_name)}),P(qe)}}catch(le){console.error(":",le)}},Ne=le=>U.get(le)||le;m.useEffect(()=>{L(),B(),_e()},[h,g,v]);const Ce=async le=>{try{const qe=await Q2(le.id);S(qe.data),O(!0)}catch(qe){X({title:"",description:qe instanceof Error?qe.message:"",variant:"destructive"})}},ve=le=>{S(le),D(!0)},ze=async le=>{try{await X2(le.id),X({title:"",description:`: ${le.situation}`}),T(null),L(),B()}catch(qe){X({title:"",description:qe instanceof Error?qe.message:"",variant:"destructive"})}},Q=le=>{const qe=new Set($);qe.has(le)?qe.delete(le):qe.add(le),E(qe)},xe=()=>{$.size===l.length&&l.length>0?E(new Set):E(new Set(l.map(le=>le.id)))},Te=async()=>{try{await P2(Array.from($)),X({title:"",description:` ${$.size} `}),E(new Set),te(!1),L(),B()}catch(le){X({title:"",description:le instanceof Error?le.message:"",variant:"destructive"})}},J=()=>{const le=parseInt(ne),qe=Math.ceil(u/g);le>=1&&le<=qe?(f(le),ue("")):X({title:"",description:`1-${qe}`,variant:"destructive"})};return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[e.jsx(Fl,{className:"h-8 w-8",strokeWidth:2}),""]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:""})]}),e.jsxs(C,{onClick:()=>z(!0),className:"gap-2",children:[e.jsx(ut,{className:"h-4 w-4"}),""]})]})}),e.jsx(Ze,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 pr-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:Se.total})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"7"}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-green-600",children:Se.recent_7days})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-blue-600",children:Se.chat_count})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx(k,{htmlFor:"search",children:""}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-2 mt-1.5",children:e.jsxs("div",{className:"flex-1 relative",children:[e.jsx($t,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{id:"search",placeholder:"...",value:v,onChange:le=>y(le.target.value),className:"pl-9"})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mt-4 pt-4 border-t",children:[e.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:$.size>0&&e.jsxs("span",{children:[" ",$.size," "]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{htmlFor:"page-size",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(Ue,{value:g.toString(),onValueChange:le=>{j(parseInt(le)),f(1),E(new Set)},children:[e.jsx(Re,{id:"page-size",className:"w-20",children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"10",children:"10"}),e.jsx(ee,{value:"20",children:"20"}),e.jsx(ee,{value:"50",children:"50"}),e.jsx(ee,{value:"100",children:"100"})]})]}),$.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(C,{variant:"outline",size:"sm",onClick:()=>E(new Set),children:""}),e.jsxs(C,{variant:"destructive",size:"sm",onClick:()=>te(!0),children:[e.jsx(es,{className:"h-4 w-4 mr-1"}),""]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card",children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs(bn,{children:[e.jsx(Nn,{children:e.jsxs(gt,{children:[e.jsx(Je,{className:"w-12",children:e.jsx(jt,{checked:$.size===l.length&&l.length>0,onCheckedChange:xe})}),e.jsx(Je,{children:""}),e.jsx(Je,{children:""}),e.jsx(Je,{children:""}),e.jsx(Je,{className:"text-right",children:""})]})}),e.jsx(yn,{children:r?e.jsx(gt,{children:e.jsx(Qe,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"..."})}):l.length===0?e.jsx(gt,{children:e.jsx(Qe,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:""})}):l.map(le=>e.jsxs(gt,{children:[e.jsx(Qe,{children:e.jsx(jt,{checked:$.has(le.id),onCheckedChange:()=>Q(le.id)})}),e.jsx(Qe,{className:"font-medium max-w-xs truncate",children:le.situation}),e.jsx(Qe,{className:"max-w-xs truncate",children:le.style}),e.jsx(Qe,{className:"max-w-[200px] truncate",title:Ne(le.chat_id),style:{wordBreak:"keep-all"},children:e.jsx("span",{className:"whitespace-nowrap overflow-hidden text-ellipsis block",children:Ne(le.chat_id)})}),e.jsx(Qe,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(C,{variant:"default",size:"sm",onClick:()=>ve(le),children:[e.jsx(pn,{className:"h-4 w-4 mr-1"}),""]}),e.jsx(C,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>Ce(le),title:"",children:e.jsx(Gt,{className:"h-4 w-4"})}),e.jsxs(C,{size:"sm",onClick:()=>T(le),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(es,{className:"h-4 w-4 mr-1"}),""]})]})})]},le.id))})]})}),e.jsx("div",{className:"md:hidden space-y-3 p-4",children:r?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"..."}):l.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:""}):l.map(le=>e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3 overflow-hidden",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(jt,{checked:$.has(le.id),onCheckedChange:()=>Q(le.id),className:"mt-1"}),e.jsxs("div",{className:"min-w-0 flex-1 overflow-hidden space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("h3",{className:"font-semibold text-sm line-clamp-2 w-full break-all",title:le.situation,children:le.situation})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("p",{className:"text-sm line-clamp-2 w-full break-all",title:le.style,children:le.style})]})]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("p",{className:"text-sm truncate",title:Ne(le.chat_id),style:{wordBreak:"keep-all"},children:Ne(le.chat_id)})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 pt-2 border-t overflow-hidden",children:[e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>ve(le),className:"text-xs px-2 py-1 h-auto flex-shrink-0",children:[e.jsx(pn,{className:"h-3 w-3 mr-1"}),""]}),e.jsx(C,{variant:"outline",size:"sm",onClick:()=>Ce(le),className:"text-xs px-2 py-1 h-auto flex-shrink-0",children:e.jsx(Gt,{className:"h-3 w-3"})}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>T(le),className:"text-xs px-2 py-1 h-auto flex-shrink-0 text-destructive hover:text-destructive",children:[e.jsx(es,{className:"h-3 w-3 mr-1"}),""]})]})]},le.id))}),u>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 py-3 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",u,"  ",h," / ",Math.ceil(u/g)," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{variant:"outline",size:"sm",onClick:()=>f(1),disabled:h===1,className:"hidden sm:flex",children:e.jsx(vi,{className:"h-4 w-4"})}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>f(h-1),disabled:h===1,children:[e.jsx(pl,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{type:"number",value:ne,onChange:le=>ue(le.target.value),onKeyDown:le=>le.key==="Enter"&&J(),placeholder:h.toString(),className:"w-16 h-8 text-center",min:1,max:Math.ceil(u/g)}),e.jsx(C,{variant:"outline",size:"sm",onClick:J,disabled:!ne,className:"h-8",children:""})]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>f(h+1),disabled:h>=Math.ceil(u/g),children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(Ya,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(C,{variant:"outline",size:"sm",onClick:()=>f(Math.ceil(u/g)),disabled:h>=Math.ceil(u/g),className:"hidden sm:flex",children:e.jsx(bi,{className:"h-4 w-4"})})]})]})]})]})}),e.jsx(W2,{expression:b,open:w,onOpenChange:O,chatNameMap:U}),e.jsx(e_,{open:V,onOpenChange:z,chatList:je,onSuccess:()=>{L(),B(),z(!1)}}),e.jsx(s_,{expression:b,open:A,onOpenChange:D,chatList:je,onSuccess:()=>{L(),B(),D(!1)}}),e.jsx(js,{open:!!_,onOpenChange:()=>T(null),children:e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:[' "',_?.situation,'"  ']})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:()=>_&&ze(_),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),e.jsx(t_,{open:se,onOpenChange:te,onConfirm:Te,count:$.size})]})}function W2({expression:l,open:i,onOpenChange:r,chatNameMap:o}){if(!l)return null;const u=h=>h?new Date(h*1e3).toLocaleString("zh-CN"):"-",x=h=>o.get(h)||h;return e.jsx(Qs,{open:i,onOpenChange:r,children:e.jsxs(qs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Gs,{children:[e.jsx(Vs,{children:""}),e.jsx(Ws,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(hr,{label:"",value:l.situation}),e.jsx(hr,{label:"",value:l.style}),e.jsx(hr,{label:"",value:x(l.chat_id)}),e.jsx(hr,{icon:pi,label:"ID",value:l.id.toString(),mono:!0})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsx(hr,{icon:xi,label:"",value:u(l.create_date)})})]}),e.jsx(at,{children:e.jsx(C,{onClick:()=>r(!1),children:""})})]})})}function hr({icon:l,label:i,value:r,mono:o=!1}){return e.jsxs("div",{className:"space-y-1",children:[e.jsxs(k,{className:"text-xs text-muted-foreground flex items-center gap-1",children:[l&&e.jsx(l,{className:"h-3 w-3"}),i]}),e.jsx("div",{className:H("text-sm",o&&"font-mono",!r&&"text-muted-foreground"),children:r||"-"})]})}function e_({open:l,onOpenChange:i,chatList:r,onSuccess:o}){const[u,x]=m.useState({situation:"",style:"",chat_id:""}),[h,f]=m.useState(!1),{toast:g}=Ks(),j=async()=>{if(!u.situation||!u.style||!u.chat_id){g({title:"",description:"",variant:"destructive"});return}try{f(!0),await Y2(u),g({title:"",description:""}),x({situation:"",style:"",chat_id:""}),o()}catch(v){g({title:"",description:v instanceof Error?v.message:"",variant:"destructive"})}finally{f(!1)}};return e.jsx(Qs,{open:l,onOpenChange:i,children:e.jsxs(qs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Gs,{children:[e.jsx(Vs,{children:""}),e.jsx(Ws,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"situation",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ie,{id:"situation",value:u.situation,onChange:v=>x({...u,situation:v.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"style",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ie,{id:"style",value:u.style,onChange:v=>x({...u,style:v.target.value}),placeholder:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"chat_id",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(Ue,{value:u.chat_id,onValueChange:v=>x({...u,chat_id:v}),children:[e.jsx(Re,{children:e.jsx(Be,{placeholder:""})}),e.jsx(Le,{children:r.map(v=>e.jsx(ee,{value:v.chat_id,children:e.jsxs("span",{className:"truncate",style:{wordBreak:"keep-all"},children:[v.chat_name,v.is_group&&e.jsx("span",{className:"text-muted-foreground ml-1",children:"()"})]})},v.chat_id))})]})]})]}),e.jsxs(at,{children:[e.jsx(C,{variant:"outline",onClick:()=>i(!1),children:""}),e.jsx(C,{onClick:j,disabled:h,children:h?"...":""})]})]})})}function s_({expression:l,open:i,onOpenChange:r,chatList:o,onSuccess:u}){const[x,h]=m.useState({}),[f,g]=m.useState(!1),{toast:j}=Ks();m.useEffect(()=>{l&&h({situation:l.situation,style:l.style,chat_id:l.chat_id})},[l]);const v=async()=>{if(l)try{g(!0),await K2(l.id,x),j({title:"",description:""}),u()}catch(y){j({title:"",description:y instanceof Error?y.message:"",variant:"destructive"})}finally{g(!1)}};return l?e.jsx(Qs,{open:i,onOpenChange:r,children:e.jsxs(qs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Gs,{children:[e.jsx(Vs,{children:""}),e.jsx(Ws,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"edit_situation",children:""}),e.jsx(ie,{id:"edit_situation",value:x.situation||"",onChange:y=>h({...x,situation:y.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"edit_style",children:""}),e.jsx(ie,{id:"edit_style",value:x.style||"",onChange:y=>h({...x,style:y.target.value}),placeholder:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"edit_chat_id",children:""}),e.jsxs(Ue,{value:x.chat_id||"",onValueChange:y=>h({...x,chat_id:y}),children:[e.jsx(Re,{children:e.jsx(Be,{placeholder:""})}),e.jsx(Le,{children:o.map(y=>e.jsx(ee,{value:y.chat_id,children:e.jsxs("span",{className:"truncate",style:{wordBreak:"keep-all"},children:[y.chat_name,y.is_group&&e.jsx("span",{className:"text-muted-foreground ml-1",children:"()"})]})},y.chat_id))})]})]})]}),e.jsxs(at,{children:[e.jsx(C,{variant:"outline",onClick:()=>r(!1),children:""}),e.jsx(C,{onClick:v,disabled:f,children:f?"...":""})]})]})}):null}function t_({open:l,onOpenChange:i,onConfirm:r,count:o}){return e.jsx(js,{open:l,onOpenChange:i,children:e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:[" ",o," "]})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:r,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})})}const gl="/api/webui/jargon";async function a_(){const l=await we(`${gl}/chats`,{});if(!l.ok){const i=await l.json();throw new Error(i.detail||"")}return l.json()}async function l_(l){const i=new URLSearchParams;l.page&&i.append("page",l.page.toString()),l.page_size&&i.append("page_size",l.page_size.toString()),l.search&&i.append("search",l.search),l.chat_id&&i.append("chat_id",l.chat_id),l.is_jargon!==void 0&&l.is_jargon!==null&&i.append("is_jargon",l.is_jargon.toString()),l.is_global!==void 0&&i.append("is_global",l.is_global.toString());const r=await we(`${gl}/list?${i}`,{});if(!r.ok){const o=await r.json();throw new Error(o.detail||"")}return r.json()}async function n_(l){const i=await we(`${gl}/${l}`,{});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return i.json()}async function i_(l){const i=await we(`${gl}/`,{method:"POST",body:JSON.stringify(l)});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return i.json()}async function r_(l,i){const r=await we(`${gl}/${l}`,{method:"PATCH",body:JSON.stringify(i)});if(!r.ok){const o=await r.json();throw new Error(o.detail||"")}return r.json()}async function c_(l){const i=await we(`${gl}/${l}`,{method:"DELETE"});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return i.json()}async function o_(l){const i=await we(`${gl}/batch/delete`,{method:"POST",body:JSON.stringify({ids:l})});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return i.json()}async function d_(){const l=await we(`${gl}/stats/summary`,{});if(!l.ok){const i=await l.json();throw new Error(i.detail||"")}return l.json()}async function u_(l,i){const r=new URLSearchParams;l.forEach(u=>r.append("ids",u.toString())),r.append("is_jargon",i.toString());const o=await we(`${gl}/batch/set-jargon?${r}`,{method:"POST"});if(!o.ok){const u=await o.json();throw new Error(u.detail||"")}return o.json()}function m_(){const[l,i]=m.useState([]),[r,o]=m.useState(!0),[u,x]=m.useState(0),[h,f]=m.useState(1),[g,j]=m.useState(20),[v,y]=m.useState(""),[b,S]=m.useState("all"),[w,O]=m.useState("all"),[A,D]=m.useState(null),[V,z]=m.useState(!1),[_,T]=m.useState(!1),[$,E]=m.useState(!1),[se,te]=m.useState(null),[ne,ue]=m.useState(new Set),[Se,oe]=m.useState(!1),[je,be]=m.useState(""),[U,P]=m.useState({total:0,confirmed_jargon:0,confirmed_not_jargon:0,pending:0,global_count:0,complete_count:0,chat_count:0,top_chats:{}}),[X,L]=m.useState([]),{toast:B}=Ks(),_e=async()=>{try{o(!0);const fe=await l_({page:h,page_size:g,search:v||void 0,chat_id:b==="all"?void 0:b,is_jargon:w==="all"?void 0:w==="true"?!0:w==="false"?!1:void 0});i(fe.data),x(fe.total)}catch(fe){B({title:"",description:fe instanceof Error?fe.message:"",variant:"destructive"})}finally{o(!1)}},Ne=async()=>{try{const fe=await d_();fe?.data&&P(fe.data)}catch(fe){console.error(":",fe)}},Ce=async()=>{try{const fe=await a_();fe?.data&&L(fe.data)}catch(fe){console.error(":",fe)}};m.useEffect(()=>{_e(),Ne(),Ce()},[h,g,v,b,w]);const ve=async fe=>{try{const ls=await n_(fe.id);D(ls.data),z(!0)}catch(ls){B({title:"",description:ls instanceof Error?ls.message:"",variant:"destructive"})}},ze=fe=>{D(fe),T(!0)},Q=async fe=>{try{await c_(fe.id),B({title:"",description:`: ${fe.content}`}),te(null),_e(),Ne()}catch(ls){B({title:"",description:ls instanceof Error?ls.message:"",variant:"destructive"})}},xe=fe=>{const ls=new Set(ne);ls.has(fe)?ls.delete(fe):ls.add(fe),ue(ls)},Te=()=>{ne.size===l.length&&l.length>0?ue(new Set):ue(new Set(l.map(fe=>fe.id)))},J=async()=>{try{await o_(Array.from(ne)),B({title:"",description:` ${ne.size} `}),ue(new Set),oe(!1),_e(),Ne()}catch(fe){B({title:"",description:fe instanceof Error?fe.message:"",variant:"destructive"})}},le=async fe=>{try{await u_(Array.from(ne),fe),B({title:"",description:` ${ne.size} ${fe?"":""}`}),ue(new Set),_e(),Ne()}catch(ls){B({title:"",description:ls instanceof Error?ls.message:"",variant:"destructive"})}},qe=()=>{const fe=parseInt(je),ls=Math.ceil(u/g);fe>=1&&fe<=ls?(f(fe),be("")):B({title:"",description:`1-${ls}`,variant:"destructive"})},We=fe=>fe===!0?e.jsxs(Ye,{variant:"default",className:"bg-green-600 hover:bg-green-700",children:[e.jsx(ea,{className:"h-3 w-3 mr-1"}),""]}):fe===!1?e.jsxs(Ye,{variant:"secondary",children:[e.jsx(fl,{className:"h-3 w-3 mr-1"}),""]}):e.jsxs(Ye,{variant:"outline",children:[e.jsx(Rg,{className:"h-3 w-3 mr-1"}),""]});return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[e.jsx(Qy,{className:"h-8 w-8",strokeWidth:2}),""]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:""})]}),e.jsxs(C,{onClick:()=>E(!0),className:"gap-2",children:[e.jsx(ut,{className:"h-4 w-4"}),""]})]})}),e.jsx(Ze,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 pr-4",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-7 gap-3",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1",children:U.total})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1 text-green-600",children:U.confirmed_jargon})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1 text-gray-500",children:U.confirmed_not_jargon})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1 text-yellow-600",children:U.pending})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1 text-blue-600",children:U.global_count})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1 text-purple-600",children:U.complete_count})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1",children:U.chat_count})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(k,{htmlFor:"search",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx($t,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{id:"search",placeholder:"...",value:v,onChange:fe=>y(fe.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(k,{children:""}),e.jsxs(Ue,{value:b,onValueChange:S,children:[e.jsx(Re,{children:e.jsx(Be,{placeholder:""})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"all",children:""}),X.map(fe=>e.jsx(ee,{value:fe.chat_id,children:fe.chat_name},fe.chat_id))]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(k,{children:""}),e.jsxs(Ue,{value:w,onValueChange:O,children:[e.jsx(Re,{children:e.jsx(Be,{placeholder:""})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"all",children:""}),e.jsx(ee,{value:"true",children:""}),e.jsx(ee,{value:"false",children:""})]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(k,{htmlFor:"page-size",children:""}),e.jsxs(Ue,{value:g.toString(),onValueChange:fe=>{j(parseInt(fe)),f(1),ue(new Set)},children:[e.jsx(Re,{id:"page-size",children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"10",children:"10"}),e.jsx(ee,{value:"20",children:"20"}),e.jsx(ee,{value:"50",children:"50"}),e.jsx(ee,{value:"100",children:"100"})]})]})]})]}),ne.size>0&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-4 pt-4 border-t",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",ne.size," "]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>le(!0),children:[e.jsx(ea,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>le(!1),children:[e.jsx(fl,{className:"h-4 w-4 mr-1"}),""]}),e.jsx(C,{variant:"outline",size:"sm",onClick:()=>ue(new Set),children:""}),e.jsxs(C,{variant:"destructive",size:"sm",onClick:()=>oe(!0),children:[e.jsx(es,{className:"h-4 w-4 mr-1"}),""]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card",children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs(bn,{children:[e.jsx(Nn,{children:e.jsxs(gt,{children:[e.jsx(Je,{className:"w-12",children:e.jsx(jt,{checked:ne.size===l.length&&l.length>0,onCheckedChange:Te})}),e.jsx(Je,{children:""}),e.jsx(Je,{children:""}),e.jsx(Je,{children:""}),e.jsx(Je,{children:""}),e.jsx(Je,{className:"text-center",children:""}),e.jsx(Je,{className:"text-right",children:""})]})}),e.jsx(yn,{children:r?e.jsx(gt,{children:e.jsx(Qe,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"..."})}):l.length===0?e.jsx(gt,{children:e.jsx(Qe,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:""})}):l.map(fe=>e.jsxs(gt,{children:[e.jsx(Qe,{children:e.jsx(jt,{checked:ne.has(fe.id),onCheckedChange:()=>xe(fe.id)})}),e.jsx(Qe,{className:"font-medium max-w-[200px]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[fe.is_global&&e.jsx("span",{title:"",children:e.jsx(Wu,{className:"h-4 w-4 text-blue-500 flex-shrink-0"})}),e.jsx("span",{className:"truncate",title:fe.content,children:fe.content})]})}),e.jsx(Qe,{className:"max-w-[200px] truncate",title:fe.meaning||"",children:fe.meaning||e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx(Qe,{className:"max-w-[150px] truncate",title:fe.chat_name||fe.chat_id,children:fe.chat_name||fe.chat_id}),e.jsx(Qe,{children:We(fe.is_jargon)}),e.jsx(Qe,{className:"text-center",children:fe.count}),e.jsx(Qe,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(C,{variant:"default",size:"sm",onClick:()=>ze(fe),children:[e.jsx(pn,{className:"h-4 w-4 mr-1"}),""]}),e.jsx(C,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>ve(fe),title:"",children:e.jsx(Gt,{className:"h-4 w-4"})}),e.jsxs(C,{size:"sm",onClick:()=>te(fe),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(es,{className:"h-4 w-4 mr-1"}),""]})]})})]},fe.id))})]})}),e.jsx("div",{className:"md:hidden space-y-3 p-4",children:r?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"..."}):l.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:""}):l.map(fe=>e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(jt,{checked:ne.has(fe.id),onCheckedChange:()=>xe(fe.id),className:"mt-1"}),e.jsxs("div",{className:"min-w-0 flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[fe.is_global&&e.jsx(Wu,{className:"h-4 w-4 text-blue-500 flex-shrink-0"}),e.jsx("h3",{className:"font-semibold text-sm break-all",children:fe.content})]}),fe.meaning&&e.jsx("p",{className:"text-sm text-muted-foreground break-all",children:fe.meaning}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[We(fe.is_jargon),e.jsxs("span",{className:"text-muted-foreground",children:[": ",fe.count]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground truncate",children:[": ",fe.chat_name||fe.chat_id]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 pt-2 border-t",children:[e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>ze(fe),className:"text-xs px-2 py-1 h-auto",children:[e.jsx(pn,{className:"h-3 w-3 mr-1"}),""]}),e.jsx(C,{variant:"outline",size:"sm",onClick:()=>ve(fe),className:"text-xs px-2 py-1 h-auto",children:e.jsx(Gt,{className:"h-3 w-3"})}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>te(fe),className:"text-xs px-2 py-1 h-auto text-destructive hover:text-destructive",children:[e.jsx(es,{className:"h-3 w-3 mr-1"}),""]})]})]},fe.id))}),u>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 py-3 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",u,"  ",h," / ",Math.ceil(u/g)," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{variant:"outline",size:"sm",onClick:()=>f(1),disabled:h===1,className:"hidden sm:flex",children:e.jsx(vi,{className:"h-4 w-4"})}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>f(h-1),disabled:h===1,children:[e.jsx(pl,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{type:"number",value:je,onChange:fe=>be(fe.target.value),onKeyDown:fe=>fe.key==="Enter"&&qe(),placeholder:h.toString(),className:"w-16 h-8 text-center",min:1,max:Math.ceil(u/g)}),e.jsx(C,{variant:"outline",size:"sm",onClick:qe,disabled:!je,className:"h-8",children:""})]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>f(h+1),disabled:h>=Math.ceil(u/g),children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(Ya,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(C,{variant:"outline",size:"sm",onClick:()=>f(Math.ceil(u/g)),disabled:h>=Math.ceil(u/g),className:"hidden sm:flex",children:e.jsx(bi,{className:"h-4 w-4"})})]})]})]})]})}),e.jsx(x_,{jargon:A,open:V,onOpenChange:z}),e.jsx(h_,{open:$,onOpenChange:E,chatList:X,onSuccess:()=>{_e(),Ne(),E(!1)}}),e.jsx(f_,{jargon:A,open:_,onOpenChange:T,chatList:X,onSuccess:()=>{_e(),Ne(),T(!1)}}),e.jsx(js,{open:!!se,onOpenChange:()=>te(null),children:e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:[' "',se?.content,'" ']})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:()=>se&&Q(se),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),e.jsx(js,{open:Se,onOpenChange:oe,children:e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:[" ",ne.size," "]})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:J,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})})]})}function x_({jargon:l,open:i,onOpenChange:r}){return l?e.jsx(Qs,{open:i,onOpenChange:r,children:e.jsxs(qs,{className:"max-w-2xl max-h-[80vh] grid grid-rows-[auto_1fr_auto] overflow-hidden",children:[e.jsxs(Gs,{children:[e.jsx(Vs,{children:""}),e.jsx(Ws,{children:""})]}),e.jsx(Ze,{className:"h-full pr-4",children:e.jsxs("div",{className:"space-y-4 pb-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Ju,{icon:pi,label:"ID",value:l.id.toString(),mono:!0}),e.jsx(Ju,{label:"",value:l.count.toString()})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(k,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"text-sm p-2 bg-muted rounded break-all whitespace-pre-wrap",children:l.content})]}),l.raw_content&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(k,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"text-sm p-2 bg-muted rounded break-all",children:(()=>{try{const o=JSON.parse(l.raw_content);return Array.isArray(o)?o.map((u,x)=>e.jsxs("div",{children:[x>0&&e.jsx("hr",{className:"my-3 border-border"}),e.jsx("div",{className:"whitespace-pre-wrap",children:u})]},x)):e.jsx("div",{className:"whitespace-pre-wrap",children:l.raw_content})}catch{return e.jsx("div",{className:"whitespace-pre-wrap",children:l.raw_content})}})()})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(k,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"text-sm p-2 bg-muted rounded break-all",children:l.meaning?e.jsx(Tj,{content:l.meaning}):"-"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Ju,{label:"",value:l.chat_name||l.chat_id}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(k,{className:"text-xs text-muted-foreground",children:""}),e.jsxs("div",{className:"flex items-center gap-2",children:[l.is_jargon===!0&&e.jsx(Ye,{variant:"default",className:"bg-green-600",children:""}),l.is_jargon===!1&&e.jsx(Ye,{variant:"secondary",children:""}),l.is_jargon===null&&e.jsx(Ye,{variant:"outline",children:""}),l.is_global&&e.jsx(Ye,{variant:"outline",className:"border-blue-500 text-blue-500",children:""}),l.is_complete&&e.jsx(Ye,{variant:"outline",className:"border-purple-500 text-purple-500",children:""})]})]})]}),l.inference_with_context&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(k,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"p-2 bg-muted rounded break-all whitespace-pre-wrap font-mono text-xs max-h-[200px] overflow-y-auto",children:l.inference_with_context})]}),l.inference_content_only&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(k,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"p-2 bg-muted rounded break-all whitespace-pre-wrap font-mono text-xs max-h-[200px] overflow-y-auto",children:l.inference_content_only})]})]})}),e.jsx(at,{className:"flex-shrink-0",children:e.jsx(C,{onClick:()=>r(!1),children:""})})]})}):null}function Ju({icon:l,label:i,value:r,mono:o=!1}){return e.jsxs("div",{className:"space-y-1",children:[e.jsxs(k,{className:"text-xs text-muted-foreground flex items-center gap-1",children:[l&&e.jsx(l,{className:"h-3 w-3"}),i]}),e.jsx("div",{className:H("text-sm",o&&"font-mono",!r&&"text-muted-foreground"),children:r||"-"})]})}function h_({open:l,onOpenChange:i,chatList:r,onSuccess:o}){const[u,x]=m.useState({content:"",meaning:"",chat_id:"",is_global:!1}),[h,f]=m.useState(!1),{toast:g}=Ks(),j=async()=>{if(!u.content||!u.chat_id){g({title:"",description:"",variant:"destructive"});return}try{f(!0),await i_(u),g({title:"",description:""}),x({content:"",meaning:"",chat_id:"",is_global:!1}),o()}catch(v){g({title:"",description:v instanceof Error?v.message:"",variant:"destructive"})}finally{f(!1)}};return e.jsx(Qs,{open:l,onOpenChange:i,children:e.jsxs(qs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Gs,{children:[e.jsx(Vs,{children:""}),e.jsx(Ws,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"content",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ie,{id:"content",value:u.content,onChange:v=>x({...u,content:v.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"meaning",children:""}),e.jsx(Ys,{id:"meaning",value:u.meaning||"",onChange:v=>x({...u,meaning:v.target.value}),placeholder:"",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"chat_id",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(Ue,{value:u.chat_id,onValueChange:v=>x({...u,chat_id:v}),children:[e.jsx(Re,{children:e.jsx(Be,{placeholder:""})}),e.jsx(Le,{children:r.map(v=>e.jsx(ee,{value:v.chat_id,children:v.chat_name},v.chat_id))})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"is_global",checked:u.is_global,onCheckedChange:v=>x({...u,is_global:v})}),e.jsx(k,{htmlFor:"is_global",children:""})]})]}),e.jsxs(at,{children:[e.jsx(C,{variant:"outline",onClick:()=>i(!1),children:""}),e.jsx(C,{onClick:j,disabled:h,children:h?"...":""})]})]})})}function f_({jargon:l,open:i,onOpenChange:r,chatList:o,onSuccess:u}){const[x,h]=m.useState({}),[f,g]=m.useState(!1),{toast:j}=Ks();m.useEffect(()=>{l&&h({content:l.content,meaning:l.meaning||"",chat_id:l.stream_id||l.chat_id,is_global:l.is_global,is_jargon:l.is_jargon})},[l]);const v=async()=>{if(l)try{g(!0),await r_(l.id,x),j({title:"",description:""}),u()}catch(y){j({title:"",description:y instanceof Error?y.message:"",variant:"destructive"})}finally{g(!1)}};return l?e.jsx(Qs,{open:i,onOpenChange:r,children:e.jsxs(qs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Gs,{children:[e.jsx(Vs,{children:""}),e.jsx(Ws,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"edit_content",children:""}),e.jsx(ie,{id:"edit_content",value:x.content||"",onChange:y=>h({...x,content:y.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"edit_meaning",children:""}),e.jsx(Ys,{id:"edit_meaning",value:x.meaning||"",onChange:y=>h({...x,meaning:y.target.value}),placeholder:"",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"edit_chat_id",children:""}),e.jsxs(Ue,{value:x.chat_id||"",onValueChange:y=>h({...x,chat_id:y}),children:[e.jsx(Re,{children:e.jsx(Be,{placeholder:""})}),e.jsx(Le,{children:o.map(y=>e.jsx(ee,{value:y.chat_id,children:y.chat_name},y.chat_id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:""}),e.jsxs(Ue,{value:x.is_jargon===null?"null":x.is_jargon?.toString()||"null",onValueChange:y=>h({...x,is_jargon:y==="null"?null:y==="true"}),children:[e.jsx(Re,{children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"null",children:""}),e.jsx(ee,{value:"true",children:""}),e.jsx(ee,{value:"false",children:""})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"edit_is_global",checked:x.is_global,onCheckedChange:y=>h({...x,is_global:y})}),e.jsx(k,{htmlFor:"edit_is_global",children:""})]})]}),e.jsxs(at,{children:[e.jsx(C,{variant:"outline",onClick:()=>r(!1),children:""}),e.jsx(C,{onClick:v,disabled:f,children:f?"...":""})]})]})}):null}const Ni="/api/webui/person";async function p_(l){const i=new URLSearchParams;l.page&&i.append("page",l.page.toString()),l.page_size&&i.append("page_size",l.page_size.toString()),l.search&&i.append("search",l.search),l.is_known!==void 0&&i.append("is_known",l.is_known.toString()),l.platform&&i.append("platform",l.platform);const r=await we(`${Ni}/list?${i}`,{headers:Is()});if(!r.ok){const o=await r.json();throw new Error(o.detail||"")}return r.json()}async function g_(l){const i=await we(`${Ni}/${l}`,{headers:Is()});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return i.json()}async function j_(l,i){const r=await we(`${Ni}/${l}`,{method:"PATCH",headers:Is(),body:JSON.stringify(i)});if(!r.ok){const o=await r.json();throw new Error(o.detail||"")}return r.json()}async function v_(l){const i=await we(`${Ni}/${l}`,{method:"DELETE",headers:Is()});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return i.json()}async function b_(){const l=await we(`${Ni}/stats/summary`,{headers:Is()});if(!l.ok){const i=await l.json();throw new Error(i.detail||"")}return l.json()}async function N_(l){const i=await we(`${Ni}/batch/delete`,{method:"POST",headers:Is(),body:JSON.stringify({person_ids:l})});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return i.json()}function y_(){const[l,i]=m.useState([]),[r,o]=m.useState(!0),[u,x]=m.useState(0),[h,f]=m.useState(1),[g,j]=m.useState(20),[v,y]=m.useState(""),[b,S]=m.useState(void 0),[w,O]=m.useState(void 0),[A,D]=m.useState(null),[V,z]=m.useState(!1),[_,T]=m.useState(!1),[$,E]=m.useState(null),[se,te]=m.useState({total:0,known:0,unknown:0,platforms:{}}),[ne,ue]=m.useState(new Set),[Se,oe]=m.useState(!1),[je,be]=m.useState(""),{toast:U}=Ks(),P=async()=>{try{o(!0);const J=await p_({page:h,page_size:g,search:v||void 0,is_known:b,platform:w});i(J.data),x(J.total)}catch(J){U({title:"",description:J instanceof Error?J.message:"",variant:"destructive"})}finally{o(!1)}},X=async()=>{try{const J=await b_();J?.data&&te(J.data)}catch(J){console.error(":",J)}};m.useEffect(()=>{P(),X()},[h,g,v,b,w]);const L=async J=>{try{const le=await g_(J.person_id);D(le.data),z(!0)}catch(le){U({title:"",description:le instanceof Error?le.message:"",variant:"destructive"})}},B=J=>{D(J),T(!0)},_e=async J=>{try{await v_(J.person_id),U({title:"",description:`: ${J.person_name||J.nickname||J.user_id}`}),E(null),P(),X()}catch(le){U({title:"",description:le instanceof Error?le.message:"",variant:"destructive"})}},Ne=m.useMemo(()=>Object.keys(se.platforms),[se.platforms]),Ce=J=>{const le=new Set(ne);le.has(J)?le.delete(J):le.add(J),ue(le)},ve=()=>{ne.size===l.length&&l.length>0?ue(new Set):ue(new Set(l.map(J=>J.person_id)))},ze=()=>{if(ne.size===0){U({title:"",description:"",variant:"destructive"});return}oe(!0)},Q=async()=>{try{const J=await N_(Array.from(ne));U({title:"",description:J.message}),ue(new Set),oe(!1),P(),X()}catch(J){U({title:"",description:J instanceof Error?J.message:"",variant:"destructive"})}},xe=()=>{const J=parseInt(je),le=Math.ceil(u/g);J>=1&&J<=le?(f(J),be("")):U({title:"",description:`1-${le}`,variant:"destructive"})},Te=J=>J?new Date(J*1e3).toLocaleString("zh-CN"):"-";return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[e.jsx(em,{className:"h-8 w-8",strokeWidth:2}),""]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:""})]})})}),e.jsx(Ze,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 pr-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:se.total})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-green-600",children:se.known})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-muted-foreground",children:se.unknown})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(k,{htmlFor:"search",children:""}),e.jsxs("div",{className:"relative mt-1.5",children:[e.jsx($t,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{id:"search",placeholder:"ID...",value:v,onChange:J=>y(J.target.value),className:"pl-9"})]})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"filter-known",children:""}),e.jsxs(Ue,{value:b===void 0?"all":b.toString(),onValueChange:J=>{S(J==="all"?void 0:J==="true"),f(1)},children:[e.jsx(Re,{id:"filter-known",className:"mt-1.5",children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"all",children:""}),e.jsx(ee,{value:"true",children:""}),e.jsx(ee,{value:"false",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"filter-platform",children:""}),e.jsxs(Ue,{value:w||"all",onValueChange:J=>{O(J==="all"?void 0:J),f(1)},children:[e.jsx(Re,{id:"filter-platform",className:"mt-1.5",children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"all",children:""}),Ne.map(J=>e.jsxs(ee,{value:J,children:[J," (",se.platforms[J],")"]},J))]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mt-4 pt-4 border-t",children:[e.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:ne.size>0&&e.jsxs("span",{children:[" ",ne.size," "]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{htmlFor:"page-size",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(Ue,{value:g.toString(),onValueChange:J=>{j(parseInt(J)),f(1),ue(new Set)},children:[e.jsx(Re,{id:"page-size",className:"w-20",children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"10",children:"10"}),e.jsx(ee,{value:"20",children:"20"}),e.jsx(ee,{value:"50",children:"50"}),e.jsx(ee,{value:"100",children:"100"})]})]}),ne.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(C,{variant:"outline",size:"sm",onClick:()=>ue(new Set),children:""}),e.jsxs(C,{variant:"destructive",size:"sm",onClick:ze,children:[e.jsx(es,{className:"h-4 w-4 mr-1"}),""]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card",children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs(bn,{children:[e.jsx(Nn,{children:e.jsxs(gt,{children:[e.jsx(Je,{className:"w-12",children:e.jsx(jt,{checked:l.length>0&&ne.size===l.length,onCheckedChange:ve,"aria-label":""})}),e.jsx(Je,{children:""}),e.jsx(Je,{children:""}),e.jsx(Je,{children:""}),e.jsx(Je,{children:""}),e.jsx(Je,{children:"ID"}),e.jsx(Je,{children:""}),e.jsx(Je,{className:"text-right",children:""})]})}),e.jsx(yn,{children:r?e.jsx(gt,{children:e.jsx(Qe,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"..."})}):l.length===0?e.jsx(gt,{children:e.jsx(Qe,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:""})}):l.map(J=>e.jsxs(gt,{children:[e.jsx(Qe,{children:e.jsx(jt,{checked:ne.has(J.person_id),onCheckedChange:()=>Ce(J.person_id),"aria-label":` ${J.person_name||J.nickname||J.user_id}`})}),e.jsx(Qe,{children:e.jsx("div",{className:H("inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",J.is_known?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"),children:J.is_known?"":""})}),e.jsx(Qe,{className:"font-medium",children:J.person_name||e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx(Qe,{children:J.nickname||"-"}),e.jsx(Qe,{children:J.platform}),e.jsx(Qe,{className:"font-mono text-sm",children:J.user_id}),e.jsx(Qe,{className:"text-sm text-muted-foreground",children:Te(J.last_know)}),e.jsx(Qe,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(C,{variant:"default",size:"sm",onClick:()=>L(J),children:[e.jsx(Gt,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(C,{variant:"default",size:"sm",onClick:()=>B(J),children:[e.jsx(pn,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(C,{size:"sm",onClick:()=>E(J),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(es,{className:"h-4 w-4 mr-1"}),""]})]})})]},J.id))})]})}),e.jsx("div",{className:"md:hidden space-y-3 p-4",children:r?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"..."}):l.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:""}):l.map(J=>e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3 overflow-hidden",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(jt,{checked:ne.has(J.person_id),onCheckedChange:()=>Ce(J.person_id),className:"mt-1"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:H("inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium mb-2",J.is_known?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"),children:J.is_known?"":""}),e.jsx("h3",{className:"font-semibold text-sm line-clamp-1 w-full break-all",children:J.person_name||e.jsx("span",{className:"text-muted-foreground",children:""})}),J.nickname&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-1 w-full break-all",children:[": ",J.nickname]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("p",{className:"font-medium text-xs",children:J.platform})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"ID"}),e.jsx("p",{className:"font-mono text-xs truncate",title:J.user_id,children:J.user_id})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("p",{className:"text-xs",children:Te(J.last_know)})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 pt-2 border-t overflow-hidden",children:[e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>L(J),className:"text-xs px-2 py-1 h-auto flex-shrink-0",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),""]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>B(J),className:"text-xs px-2 py-1 h-auto flex-shrink-0",children:[e.jsx(pn,{className:"h-3 w-3 mr-1"}),""]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>E(J),className:"text-xs px-2 py-1 h-auto flex-shrink-0 text-destructive hover:text-destructive",children:[e.jsx(es,{className:"h-3 w-3 mr-1"}),""]})]})]},J.id))}),u>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 py-3 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",u,"  ",h," / ",Math.ceil(u/g)," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{variant:"outline",size:"sm",onClick:()=>f(1),disabled:h===1,className:"hidden sm:flex",children:e.jsx(vi,{className:"h-4 w-4"})}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>f(h-1),disabled:h===1,children:[e.jsx(pl,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{type:"number",value:je,onChange:J=>be(J.target.value),onKeyDown:J=>J.key==="Enter"&&xe(),placeholder:h.toString(),className:"w-16 h-8 text-center",min:1,max:Math.ceil(u/g)}),e.jsx(C,{variant:"outline",size:"sm",onClick:xe,disabled:!je,className:"h-8",children:""})]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>f(h+1),disabled:h>=Math.ceil(u/g),children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(Ya,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(C,{variant:"outline",size:"sm",onClick:()=>f(Math.ceil(u/g)),disabled:h>=Math.ceil(u/g),className:"hidden sm:flex",children:e.jsx(bi,{className:"h-4 w-4"})})]})]})]})]})}),e.jsx(w_,{person:A,open:V,onOpenChange:z}),e.jsx(__,{person:A,open:_,onOpenChange:T,onSuccess:()=>{P(),X(),T(!1)}}),e.jsx(js,{open:!!$,onOpenChange:()=>E(null),children:e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:[' "',$?.person_name||$?.nickname||$?.user_id,'"  ']})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:()=>$&&_e($),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),e.jsx(js,{open:Se,onOpenChange:oe,children:e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:[" ",ne.size,"  "]})]}),e.jsxs(us,{children:[e.jsx(fs,{children:""}),e.jsx(hs,{onClick:Q,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})})]})}function w_({person:l,open:i,onOpenChange:r}){if(!l)return null;const o=u=>u?new Date(u*1e3).toLocaleString("zh-CN"):"-";return e.jsx(Qs,{open:i,onOpenChange:r,children:e.jsxs(qs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Gs,{children:[e.jsx(Vs,{children:""}),e.jsxs(Ws,{children:[" ",l.person_name||l.nickname||l.user_id," "]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ml,{icon:oo,label:"",value:l.person_name}),e.jsx(ml,{icon:Fl,label:"",value:l.nickname}),e.jsx(ml,{icon:pi,label:"ID",value:l.user_id,mono:!0}),e.jsx(ml,{icon:pi,label:"ID",value:l.person_id,mono:!0}),e.jsx(ml,{label:"",value:l.platform}),e.jsx(ml,{label:"",value:l.is_known?"":""})]}),l.name_reason&&e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-3",children:[e.jsx(k,{className:"text-xs text-muted-foreground",children:""}),e.jsx("p",{className:"mt-1 text-sm",children:l.name_reason})]}),l.memory_points&&e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-3",children:[e.jsx(k,{className:"text-xs text-muted-foreground",children:""}),e.jsx("p",{className:"mt-1 text-sm whitespace-pre-wrap",children:l.memory_points})]}),l.group_nick_name&&l.group_nick_name.length>0&&e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-3",children:[e.jsx(k,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"mt-2 space-y-1",children:l.group_nick_name.map((u,x)=>e.jsxs("div",{className:"text-sm flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-xs text-muted-foreground",children:u.group_id}),e.jsx("span",{children:""}),e.jsx("span",{children:u.group_nick_name})]},x))})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(ml,{icon:xi,label:"",value:o(l.know_times)}),e.jsx(ml,{icon:xi,label:"",value:o(l.know_since)}),e.jsx(ml,{icon:xi,label:"",value:o(l.last_know)})]})]}),e.jsx(at,{children:e.jsx(C,{onClick:()=>r(!1),children:""})})]})})}function ml({icon:l,label:i,value:r,mono:o=!1}){return e.jsxs("div",{className:"space-y-1",children:[e.jsxs(k,{className:"text-xs text-muted-foreground flex items-center gap-1",children:[l&&e.jsx(l,{className:"h-3 w-3"}),i]}),e.jsx("div",{className:H("text-sm",o&&"font-mono",!r&&"text-muted-foreground"),children:r||"-"})]})}function __({person:l,open:i,onOpenChange:r,onSuccess:o}){const[u,x]=m.useState({}),[h,f]=m.useState(!1),{toast:g}=Ks();m.useEffect(()=>{l&&x({person_name:l.person_name||"",name_reason:l.name_reason||"",nickname:l.nickname||"",memory_points:l.memory_points||"",is_known:l.is_known})},[l]);const j=async()=>{if(l)try{f(!0),await j_(l.person_id,u),g({title:"",description:""}),o()}catch(v){g({title:"",description:v instanceof Error?v.message:"",variant:"destructive"})}finally{f(!1)}};return l?e.jsx(Qs,{open:i,onOpenChange:r,children:e.jsxs(qs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Gs,{children:[e.jsx(Vs,{children:""}),e.jsxs(Ws,{children:[" ",l.person_name||l.nickname||l.user_id," "]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"person_name",children:""}),e.jsx(ie,{id:"person_name",value:u.person_name||"",onChange:v=>x({...u,person_name:v.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"nickname",children:""}),e.jsx(ie,{id:"nickname",value:u.nickname||"",onChange:v=>x({...u,nickname:v.target.value}),placeholder:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"name_reason",children:""}),e.jsx(Ys,{id:"name_reason",value:u.name_reason||"",onChange:v=>x({...u,name_reason:v.target.value}),placeholder:"",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"memory_points",children:""}),e.jsx(Ys,{id:"memory_points",value:u.memory_points||"",onChange:v=>x({...u,memory_points:v.target.value}),placeholder:"...",rows:4})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"is_known",className:"text-base font-medium",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Fe,{id:"is_known",checked:u.is_known,onCheckedChange:v=>x({...u,is_known:v})})]})]}),e.jsxs(at,{children:[e.jsx(C,{variant:"outline",onClick:()=>r(!1),children:""}),e.jsx(C,{onClick:j,disabled:h,children:h?"...":""})]})]})}):null}var S_=w0();const Bp=kN(S_),vm="/api/webui";async function C_(l=100,i="all"){const r=`${vm}/knowledge/graph?limit=${l}&node_type=${i}`,o=await fetch(r);if(!o.ok)throw new Error(`: ${o.status}`);return o.json()}async function k_(){const l=await fetch(`${vm}/knowledge/stats`);if(!l.ok)throw new Error("");return l.json()}async function T_(l){const i=await fetch(`${vm}/knowledge/search?query=${encodeURIComponent(l)}`);if(!i.ok)throw new Error("");return i.json()}const Ej=m.memo(({data:l})=>e.jsxs("div",{className:"px-4 py-2 shadow-md rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 border-2 border-blue-700 min-w-[120px]",children:[e.jsx(mo,{type:"target",position:xo.Top}),e.jsx("div",{className:"font-semibold text-white text-sm truncate max-w-[200px]",title:l.content,children:l.label}),e.jsx(mo,{type:"source",position:xo.Bottom})]}));Ej.displayName="EntityNode";const zj=m.memo(({data:l})=>e.jsxs("div",{className:"px-3 py-2 shadow-md rounded-md bg-gradient-to-br from-green-500 to-green-600 border-2 border-green-700 min-w-[100px]",children:[e.jsx(mo,{type:"target",position:xo.Top}),e.jsx("div",{className:"font-medium text-white text-xs truncate max-w-[150px]",title:l.content,children:l.label}),e.jsx(mo,{type:"source",position:xo.Bottom})]}));zj.displayName="ParagraphNode";const E_={entity:Ej,paragraph:zj};function z_(l,i){const r=new Bp.graphlib.Graph;r.setDefaultEdgeLabel(()=>({})),r.setGraph({rankdir:"TB",ranksep:100,nodesep:80});const o=[],u=[];return l.forEach(x=>{r.setNode(x.id,{width:150,height:50})}),i.forEach(x=>{r.setEdge(x.source,x.target)}),Bp.layout(r),l.forEach(x=>{const h=r.node(x.id);o.push({id:x.id,type:x.type,position:{x:h.x-75,y:h.y-25},data:{label:x.content.slice(0,20)+(x.content.length>20?"...":""),content:x.content}})}),i.forEach((x,h)=>{const f={id:`edge-${h}`,source:x.source,target:x.target,animated:l.length<=200&&x.weight>5,style:{strokeWidth:Math.min(x.weight/2,5),opacity:.6}};x.weight>10&&l.length<100&&(f.label=`${x.weight.toFixed(0)}`),u.push(f)}),{nodes:o,edges:u}}function M_(){const l=ka(),[i,r]=m.useState(!1),[o,u]=m.useState(null),[x,h]=m.useState(""),[f,g]=m.useState("all"),[j,v]=m.useState(50),[y,b]=m.useState("50"),[S,w]=m.useState(!1),[O,A]=m.useState(!0),[D,V]=m.useState(!1),[z,_]=m.useState(!1),[T,$,E]=_0([]),[se,te,ne]=S0([]),[ue,Se]=m.useState(0),[oe,je]=m.useState(null),[be,U]=m.useState(null),{toast:P}=Ks(),X=m.useCallback(Q=>Q.type==="entity"?"#6366f1":Q.type==="paragraph"?"#10b981":"#6b7280",[]),L=m.useCallback(async(Q=!1)=>{try{if(!Q&&j>200){_(!0);return}r(!0);const[xe,Te]=await Promise.all([C_(j,f),k_()]);if(u(Te),xe.nodes.length===0){P({title:"",description:""}),$([]),te([]);return}const{nodes:J,edges:le}=z_(xe.nodes,xe.edges);$(J),te(le),Se(J.length),Te&&Te.total_nodes>j&&P({title:"",description:` ${Te.total_nodes}  ${J.length} `}),P({title:"",description:` ${J.length} ${le.length} `})}catch(xe){console.error(":",xe),P({title:"",description:xe instanceof Error?xe.message:"",variant:"destructive"})}finally{r(!1)}},[j,f,P]),B=m.useCallback(async()=>{if(!x.trim()){P({title:"",description:""});return}try{const Q=await T_(x);if(Q.length===0){P({title:"",description:""});return}const xe=new Set(Q.map(Te=>Te.id));$(Te=>Te.map(J=>({...J,style:{...J.style,opacity:xe.has(J.id)?1:.3,filter:xe.has(J.id)?"brightness(1.2)":"brightness(0.8)"}}))),P({title:"",description:` ${Q.length} `})}catch(Q){console.error(":",Q),P({title:"",description:Q instanceof Error?Q.message:"",variant:"destructive"})}},[x,P]),_e=m.useCallback(()=>{$(Q=>Q.map(xe=>({...xe,style:{...xe.style,opacity:1,filter:"brightness(1)"}})))},[]),Ne=m.useCallback(()=>{A(!1),V(!0),L()},[L]),Ce=m.useCallback(()=>{_(!1),setTimeout(()=>{L(!0)},0)},[L]),ve=m.useCallback((Q,xe)=>{T.find(J=>J.id===xe.id)&&je({id:xe.id,type:xe.type,content:xe.data.content})},[T]);m.useEffect(()=>{O||D&&L()},[j,f,O,D]);const ze=m.useCallback((Q,xe)=>{const Te=T.find(qe=>qe.id===xe.source),J=T.find(qe=>qe.id===xe.target),le=se.find(qe=>qe.id===xe.id);Te&&J&&le&&U({source:{id:Te.id,type:Te.type,content:Te.data.content},target:{id:J.id,type:J.type,content:J.data.content},edge:{source:xe.source,target:xe.target,weight:parseFloat(xe.label||"0")}})},[T,se]);return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0 p-4 border-b bg-background",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1",children:""})]}),o&&e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(Ye,{variant:"outline",className:"gap-1",children:[e.jsx(ro,{className:"h-3 w-3"}),": ",o.total_nodes]}),e.jsxs(Ye,{variant:"outline",className:"gap-1",children:[e.jsx(Bg,{className:"h-3 w-3"}),": ",o.total_edges]}),e.jsxs(Ye,{variant:"outline",className:"gap-1",children:[e.jsx(Ra,{className:"h-3 w-3"}),": ",o.entity_nodes]}),e.jsxs(Ye,{variant:"outline",className:"gap-1",children:[e.jsx(Aa,{className:"h-3 w-3"}),": ",o.paragraph_nodes]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-4",children:[e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx(ie,{placeholder:"...",value:x,onChange:Q=>h(Q.target.value),onKeyDown:Q=>Q.key==="Enter"&&B(),className:"flex-1"}),e.jsx(C,{onClick:B,size:"sm",children:e.jsx($t,{className:"h-4 w-4"})}),e.jsx(C,{onClick:_e,variant:"outline",size:"sm",children:""})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ue,{value:f,onValueChange:Q=>g(Q),children:[e.jsx(Re,{className:"w-[120px]",children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"all",children:""}),e.jsx(ee,{value:"entity",children:""}),e.jsx(ee,{value:"paragraph",children:""})]})]}),e.jsxs(Ue,{value:j===1e4?"all":S?"custom":j.toString(),onValueChange:Q=>{Q==="custom"?(w(!0),b(j.toString())):Q==="all"?(w(!1),v(1e4)):(w(!1),v(Number(Q)))},children:[e.jsx(Re,{className:"w-[120px]",children:e.jsx(Be,{})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"50",children:"50 "}),e.jsx(ee,{value:"100",children:"100 "}),e.jsx(ee,{value:"200",children:"200 "}),e.jsx(ee,{value:"500",children:"500 "}),e.jsx(ee,{value:"1000",children:"1000 "}),e.jsx(ee,{value:"all",children:" (10000)"}),e.jsx(ee,{value:"custom",children:"..."})]})]}),S&&e.jsx(ie,{type:"number",min:"50",value:y,onChange:Q=>b(Q.target.value),onBlur:()=>{const Q=parseInt(y);!isNaN(Q)&&Q>=50?v(Q):(b("50"),v(50))},onKeyDown:Q=>{if(Q.key==="Enter"){const xe=parseInt(y);!isNaN(xe)&&xe>=50?v(xe):(b("50"),v(50))}},placeholder:"50",className:"w-[120px]"}),e.jsx(C,{onClick:()=>L(),variant:"outline",size:"sm",disabled:i,children:e.jsx(At,{className:H("h-4 w-4",i&&"animate-spin")})})]})]})]}),e.jsx("div",{className:"flex-1 relative",children:i?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(At,{className:"h-8 w-8 animate-spin mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"..."})]})}):T.length===0?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ro,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-muted-foreground",children:""})]})}):e.jsxs(C0,{nodes:T,edges:se,onNodesChange:E,onEdgesChange:ne,onNodeClick:ve,onEdgeClick:ze,nodeTypes:E_,fitView:!0,minZoom:.05,maxZoom:1.5,defaultViewport:{x:0,y:0,zoom:.5},elevateNodesOnSelect:ue<=500,nodesDraggable:ue<=1e3,attributionPosition:"bottom-left",children:[e.jsx(k0,{variant:T0.Dots,gap:12,size:1}),e.jsx(E0,{}),ue<=500&&e.jsx(z0,{nodeColor:X,nodeBorderRadius:8,pannable:!0,zoomable:!0}),e.jsxs(M0,{position:"top-right",className:"bg-background/95 backdrop-blur-sm rounded-lg border p-3 shadow-lg",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:""}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-gradient-to-br from-blue-500 to-blue-600 border-2 border-blue-700"}),e.jsx("span",{children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-gradient-to-br from-green-500 to-green-600 border-2 border-green-700"}),e.jsx("span",{children:""})]}),ue>200&&e.jsxs("div",{className:"mt-2 pt-2 border-t text-yellow-600 dark:text-yellow-500",children:[e.jsx("div",{className:"font-semibold",children:""}),e.jsx("div",{children:""}),ue>500&&e.jsx("div",{children:""})]})]})]})]})}),e.jsx(Qs,{open:!!oe,onOpenChange:Q=>!Q&&je(null),children:e.jsxs(qs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx(Gs,{children:e.jsx(Vs,{children:""})}),oe&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1",children:e.jsx(Ye,{variant:oe.type==="entity"?"default":"secondary",children:oe.type==="entity"?" ":" "})})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"ID"}),e.jsx("code",{className:"mt-1 block p-2 bg-muted rounded text-xs break-all",children:oe.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:""}),e.jsx(Ze,{className:"mt-1 h-40 p-3 bg-muted rounded",children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:oe.content})})]})]})]})}),e.jsx(Qs,{open:!!be,onOpenChange:Q=>!Q&&U(null),children:e.jsxs(qs,{className:"max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsx(Gs,{children:e.jsx(Vs,{children:""})}),be&&e.jsx(Ze,{className:"flex-1 pr-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0 p-3 bg-blue-50 dark:bg-blue-950 rounded border-2 border-blue-200 dark:border-blue-800",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("div",{className:"font-medium text-sm mb-2 truncate",children:be.source.content}),e.jsxs("code",{className:"text-xs text-muted-foreground truncate block",children:[be.source.id.slice(0,40),"..."]})]}),e.jsx("div",{className:"text-2xl text-muted-foreground flex-shrink-0",children:""}),e.jsxs("div",{className:"flex-1 min-w-0 p-3 bg-green-50 dark:bg-green-950 rounded border-2 border-green-200 dark:border-green-800",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("div",{className:"font-medium text-sm mb-2 truncate",children:be.target.content}),e.jsxs("code",{className:"text-xs text-muted-foreground truncate block",children:[be.target.id.slice(0,40),"..."]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1",children:e.jsx(Ye,{variant:"outline",className:"text-base font-mono",children:be.edge.weight.toFixed(4)})})]})]})})]})}),e.jsx(js,{open:O,onOpenChange:A,children:e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:""}),e.jsxs(xs,{children:["",e.jsx("br",{}),"?"]})]}),e.jsxs(us,{children:[e.jsx(fs,{onClick:()=>l({to:"/"}),children:" ()"}),e.jsx(hs,{onClick:Ne,children:""})]})]})}),e.jsx(js,{open:z,onOpenChange:_,children:e.jsxs(os,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:" "}),e.jsx(xs,{asChild:!0,children:e.jsxs("div",{children:[e.jsxs("p",{children:[" ",e.jsx("strong",{className:"text-orange-600",children:j>=1e4?" (10000)":j})," "]}),e.jsx("p",{className:"mt-4",children:":"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:""}),e.jsx("li",{children:""}),e.jsx("li",{children:""})]}),e.jsx("p",{className:"mt-4",children:" (50-200 )"})]})})]}),e.jsxs(us,{children:[e.jsx(fs,{onClick:()=>{_(!1),j>200&&(v(50),w(!1))},children:""}),e.jsx(hs,{onClick:Ce,className:"bg-orange-600 hover:bg-orange-700",children:""})]})]})})]})}function Hp({className:l,classNames:i,showOutsideDays:r=!0,captionLayout:o="label",buttonVariant:u="ghost",formatters:x,components:h,...f}){const g=sj();return e.jsx(p0,{showOutsideDays:r,className:H("bg-background group/calendar p-3 [--cell-size:2rem] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,l),captionLayout:o,formatters:{formatMonthDropdown:j=>j.toLocaleString("default",{month:"short"}),...x},classNames:{root:H("w-fit",g.root),months:H("relative flex flex-col gap-4 md:flex-row",g.months),month:H("flex w-full flex-col gap-4",g.month),nav:H("absolute inset-x-0 top-0 flex w-full items-center justify-between gap-1",g.nav),button_previous:H(Sr({variant:u}),"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50",g.button_previous),button_next:H(Sr({variant:u}),"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50",g.button_next),month_caption:H("flex h-[--cell-size] w-full items-center justify-center px-[--cell-size]",g.month_caption),dropdowns:H("flex h-[--cell-size] w-full items-center justify-center gap-1.5 text-sm font-medium",g.dropdowns),dropdown_root:H("has-focus:border-ring border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] relative rounded-md border",g.dropdown_root),dropdown:H("bg-popover absolute inset-0 opacity-0",g.dropdown),caption_label:H("select-none font-medium",o==="label"?"text-sm":"[&>svg]:text-muted-foreground flex h-8 items-center gap-1 rounded-md pl-2 pr-1 text-sm [&>svg]:size-3.5",g.caption_label),table:"w-full border-collapse",weekdays:H("flex",g.weekdays),weekday:H("text-muted-foreground flex-1 select-none rounded-md text-[0.8rem] font-normal",g.weekday),week:H("mt-2 flex w-full",g.week),week_number_header:H("w-[--cell-size] select-none",g.week_number_header),week_number:H("text-muted-foreground select-none text-[0.8rem]",g.week_number),day:H("group/day relative aspect-square h-full w-full select-none p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md",g.day),range_start:H("bg-accent rounded-l-md",g.range_start),range_middle:H("rounded-none",g.range_middle),range_end:H("bg-accent rounded-r-md",g.range_end),today:H("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",g.today),outside:H("text-muted-foreground aria-selected:text-muted-foreground",g.outside),disabled:H("text-muted-foreground opacity-50",g.disabled),hidden:H("invisible",g.hidden),...i},components:{Root:({className:j,rootRef:v,...y})=>e.jsx("div",{"data-slot":"calendar",ref:v,className:H(j),...y}),Chevron:({className:j,orientation:v,...y})=>v==="left"?e.jsx(pl,{className:H("size-4",j),...y}):v==="right"?e.jsx(Ya,{className:H("size-4",j),...y}):e.jsx(Fa,{className:H("size-4",j),...y}),DayButton:A_,WeekNumber:({children:j,...v})=>e.jsx("td",{...v,children:e.jsx("div",{className:"flex size-[--cell-size] items-center justify-center text-center",children:j})}),...h},...f})}function A_({className:l,day:i,modifiers:r,...o}){const u=sj(),x=m.useRef(null);return m.useEffect(()=>{r.focused&&x.current?.focus()},[r.focused]),e.jsx(C,{ref:x,variant:"ghost",size:"icon","data-day":i.date.toLocaleDateString(),"data-selected-single":r.selected&&!r.range_start&&!r.range_end&&!r.range_middle,"data-range-start":r.range_start,"data-range-end":r.range_end,"data-range-middle":r.range_middle,className:H("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 flex aspect-square h-auto w-full min-w-[--cell-size] flex-col gap-1 font-normal leading-none data-[range-end=true]:rounded-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] [&>span]:text-xs [&>span]:opacity-70",u.day,l),...o})}const eo={xs:{label:"",rowHeight:28,class:"text-[10px] sm:text-xs"},sm:{label:"",rowHeight:36,class:"text-xs sm:text-sm"},base:{label:"",rowHeight:44,class:"text-sm sm:text-base"}};function O_(){const[l,i]=m.useState([]),[r,o]=m.useState(""),[u,x]=m.useState("all"),[h,f]=m.useState("all"),[g,j]=m.useState(void 0),[v,y]=m.useState(void 0),[b,S]=m.useState(!0),[w,O]=m.useState(!1),[A,D]=m.useState("xs"),[V,z]=m.useState(4),[_,T]=m.useState(!1),$=m.useRef(null);m.useEffect(()=>{const B=xn.getAllLogs();i(B);const _e=xn.onLog(()=>{i(xn.getAllLogs())}),Ne=xn.onConnectionChange(Ce=>{O(Ce)});return()=>{_e(),Ne()}},[]);const E=m.useMemo(()=>{const B=new Set(l.map(_e=>_e.module).filter(_e=>_e&&_e.trim()!==""));return Array.from(B).sort()},[l]),se=B=>{switch(B){case"DEBUG":return"text-muted-foreground";case"INFO":return"text-blue-500 dark:text-blue-400";case"WARNING":return"text-yellow-600 dark:text-yellow-500";case"ERROR":return"text-red-600 dark:text-red-500";case"CRITICAL":return"text-red-700 dark:text-red-400 font-bold";default:return"text-foreground"}},te=B=>{switch(B){case"DEBUG":return"bg-gray-800/30 dark:bg-gray-800/50";case"INFO":return"bg-blue-900/20 dark:bg-blue-500/20";case"WARNING":return"bg-yellow-900/20 dark:bg-yellow-500/20";case"ERROR":return"bg-red-900/20 dark:bg-red-500/20";case"CRITICAL":return"bg-red-900/30 dark:bg-red-600/30";default:return"bg-gray-800/20 dark:bg-gray-800/30"}},ne=()=>{window.location.reload()},ue=()=>{xn.clearLogs(),i([])},Se=()=>{const B=be.map(ve=>`${ve.timestamp} [${ve.level.padEnd(8)}] [${ve.module}] ${ve.message}`).join(`
`),_e=new Blob([B],{type:"text/plain;charset=utf-8"}),Ne=URL.createObjectURL(_e),Ce=document.createElement("a");Ce.href=Ne,Ce.download=`logs-${Du(new Date,"yyyy-MM-dd-HHmmss")}.txt`,Ce.click(),URL.revokeObjectURL(Ne)},oe=()=>{S(!b)},je=()=>{j(void 0),y(void 0)},be=m.useMemo(()=>l.filter(B=>{const _e=r===""||B.message.toLowerCase().includes(r.toLowerCase())||B.module.toLowerCase().includes(r.toLowerCase()),Ne=u==="all"||B.level===u,Ce=h==="all"||B.module===h;let ve=!0;if(g||v){const ze=new Date(B.timestamp);if(g){const Q=new Date(g);Q.setHours(0,0,0,0),ve=ve&&ze>=Q}if(v){const Q=new Date(v);Q.setHours(23,59,59,999),ve=ve&&ze<=Q}}return _e&&Ne&&Ce&&ve}),[l,r,u,h,g,v]),U=eo[A].rowHeight+V,P=vN({count:be.length,getScrollElement:()=>$.current,estimateSize:()=>U,overscan:50}),X=m.useRef(!1),L=m.useRef(be.length);return m.useEffect(()=>{const B=$.current;if(!B)return;const _e=()=>{if(X.current)return;const{scrollTop:Ne,scrollHeight:Ce,clientHeight:ve}=B,ze=Ce-Ne-ve;ze>100&&b?S(!1):ze<50&&!b&&S(!0)};return B.addEventListener("scroll",_e,{passive:!0}),()=>B.removeEventListener("scroll",_e)},[b]),m.useEffect(()=>{const B=be.length>L.current;L.current=be.length,b&&be.length>0&&B&&(X.current=!0,P.scrollToIndex(be.length-1,{align:"end",behavior:"auto"}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{X.current=!1})}))},[be.length,b,P]),e.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex-shrink-0 space-y-2 sm:space-y-3 p-2 sm:p-3 lg:p-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg sm:text-xl lg:text-2xl font-bold",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5 hidden sm:block",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:H("h-2 w-2 sm:h-2.5 sm:w-2.5 rounded-full",w?"bg-green-500 animate-pulse":"bg-red-500")}),e.jsx("span",{className:"text-xs text-muted-foreground",children:w?"":""})]})]}),e.jsx(Ve,{className:"p-2 sm:p-3",children:e.jsx(Tr,{open:_,onOpenChange:T,children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 relative min-w-0",children:[e.jsx($t,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"}),e.jsx(ie,{placeholder:"...",value:r,onChange:B=>o(B.target.value),className:"pl-8 h-8 text-xs sm:text-sm"})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[e.jsxs(C,{variant:b?"default":"outline",size:"sm",onClick:oe,className:"h-8 px-2",title:b?"":"",children:[b?e.jsx(Yy,{className:"h-3.5 w-3.5"}):e.jsx(Ky,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"ml-1 text-xs hidden sm:inline",children:b?"":""})]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:ue,className:"h-8 px-2",title:"",children:[e.jsx(es,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"ml-1 text-xs hidden md:inline",children:""})]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:Se,className:"h-8 px-2 hidden sm:flex",title:"",children:[e.jsx(Da,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"ml-1 text-xs hidden lg:inline",children:""})]}),e.jsx(Er,{asChild:!0,children:e.jsxs(C,{variant:"outline",size:"sm",className:"h-8 px-2",title:_?"":"",children:[e.jsx(lo,{className:"h-3.5 w-3.5"}),_?e.jsx(fi,{className:"h-3.5 w-3.5 ml-1"}):e.jsx(Fa,{className:"h-3.5 w-3.5 ml-1"})]})})]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground text-center sm:text-right -mt-1",children:[e.jsxs("span",{className:"font-mono",children:[be.length," / ",l.length]}),e.jsx("span",{className:"ml-1",children:""})]}),e.jsxs(zr,{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-2",children:[e.jsxs(Ue,{value:u,onValueChange:x,children:[e.jsxs(Re,{className:"w-full sm:flex-1 h-8 text-xs",children:[e.jsx(lo,{className:"h-3.5 w-3.5 mr-1.5"}),e.jsx(Be,{placeholder:""})]}),e.jsxs(Le,{children:[e.jsx(ee,{value:"all",children:""}),e.jsx(ee,{value:"DEBUG",children:"DEBUG"}),e.jsx(ee,{value:"INFO",children:"INFO"}),e.jsx(ee,{value:"WARNING",children:"WARNING"}),e.jsx(ee,{value:"ERROR",children:"ERROR"}),e.jsx(ee,{value:"CRITICAL",children:"CRITICAL"})]})]}),e.jsxs(Ue,{value:h,onValueChange:f,children:[e.jsxs(Re,{className:"w-full sm:flex-1 h-8 text-xs",children:[e.jsx(lo,{className:"h-3.5 w-3.5 mr-1.5"}),e.jsx(Be,{placeholder:""})]}),e.jsxs(Le,{children:[e.jsx(ee,{value:"all",children:""}),E.map(B=>e.jsx(ee,{value:B,children:B},B))]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-2",children:[e.jsxs(Ia,{children:[e.jsx(Qa,{asChild:!0,children:e.jsxs(C,{variant:"outline",size:"sm",className:H("w-full sm:flex-1 justify-start text-left font-normal h-8",!g&&"text-muted-foreground"),children:[e.jsx(hp,{className:"mr-1.5 h-3.5 w-3.5"}),e.jsx("span",{className:"text-xs",children:g?Du(g,"PP",{locale:Zc}):""})]})}),e.jsx(La,{className:"w-auto p-0",align:"start",children:e.jsx(Hp,{mode:"single",selected:g,onSelect:j,initialFocus:!0,locale:Zc})})]}),e.jsxs(Ia,{children:[e.jsx(Qa,{asChild:!0,children:e.jsxs(C,{variant:"outline",size:"sm",className:H("w-full sm:flex-1 justify-start text-left font-normal h-8",!v&&"text-muted-foreground"),children:[e.jsx(hp,{className:"mr-1.5 h-3.5 w-3.5"}),e.jsx("span",{className:"text-xs",children:v?Du(v,"PP",{locale:Zc}):""})]})}),e.jsx(La,{className:"w-auto p-0",align:"start",children:e.jsx(Hp,{mode:"single",selected:v,onSelect:y,initialFocus:!0,locale:Zc})})]}),(g||v)&&e.jsxs(C,{variant:"outline",size:"sm",onClick:je,className:"w-full sm:w-auto h-8",children:[e.jsx(fl,{className:"h-3.5 w-3.5 sm:mr-1"}),e.jsx("span",{className:"text-xs",children:""})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3 pt-2 border-t border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(Xy,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"flex gap-1",children:Object.keys(eo).map(B=>e.jsx(C,{variant:A===B?"default":"outline",size:"sm",onClick:()=>D(B),className:"h-6 px-2 text-xs",children:eo[B].label},B))})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1 max-w-[200px]",children:[e.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:""}),e.jsx(ma,{value:[V],onValueChange:([B])=>z(B),min:0,max:12,step:2,className:"flex-1"}),e.jsxs("span",{className:"text-xs text-muted-foreground w-7",children:[V,"px"]})]}),e.jsxs("div",{className:"flex gap-2 sm:hidden",children:[e.jsxs(C,{variant:"outline",size:"sm",onClick:ne,className:"flex-1 h-8",children:[e.jsx(At,{className:"h-3.5 w-3.5 mr-1"}),e.jsx("span",{className:"text-xs",children:""})]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:Se,className:"flex-1 h-8",children:[e.jsx(Da,{className:"h-3.5 w-3.5 mr-1"}),e.jsx("span",{className:"text-xs",children:""})]})]})]})]})]})})})]}),e.jsx("div",{className:"flex-1 min-h-0 px-2 sm:px-3 lg:px-4 pb-2 sm:pb-3 lg:pb-4",children:e.jsx(Ve,{className:"bg-black dark:bg-gray-950 border-gray-800 dark:border-gray-900 h-full overflow-hidden",children:e.jsx("div",{ref:$,className:H("h-full overflow-auto","[&::-webkit-scrollbar]:w-2.5","[&::-webkit-scrollbar-track]:bg-transparent","[&::-webkit-scrollbar-thumb]:bg-border [&::-webkit-scrollbar-thumb]:rounded-full","[&::-webkit-scrollbar-thumb:hover]:bg-border/80"),children:e.jsx("div",{className:H("p-2 sm:p-3 font-mono relative",eo[A].class),style:{height:`${P.getTotalSize()}px`},children:be.length===0?e.jsx("div",{className:"text-gray-500 dark:text-gray-600 text-center py-8 text-xs sm:text-sm",children:""}):P.getVirtualItems().map(B=>{const _e=be[B.index];return e.jsxs("div",{"data-index":B.index,ref:P.measureElement,className:H("absolute top-0 left-0 w-full px-2 sm:px-3 rounded hover:bg-white/5 transition-colors",te(_e.level)),style:{transform:`translateY(${B.start}px)`,paddingTop:`${V/2}px`,paddingBottom:`${V/2}px`},children:[e.jsxs("div",{className:"flex flex-col gap-0.5 sm:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-600 text-[10px]",children:_e.timestamp}),e.jsxs("span",{className:H("font-semibold text-[10px]",se(_e.level)),children:["[",_e.level,"]"]})]}),e.jsx("div",{className:"text-cyan-400 dark:text-cyan-500 truncate text-[10px]",children:_e.module}),e.jsx("div",{className:"text-gray-300 dark:text-gray-400 whitespace-pre-wrap break-words text-[10px]",children:_e.message})]}),e.jsxs("div",{className:"hidden sm:flex gap-2 items-start",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-600 flex-shrink-0 w-[130px] lg:w-[160px]",children:_e.timestamp}),e.jsxs("span",{className:H("flex-shrink-0 w-[65px] lg:w-[75px] font-semibold",se(_e.level)),children:["[",_e.level,"]"]}),e.jsx("span",{className:"text-cyan-400 dark:text-cyan-500 flex-shrink-0 w-[100px] lg:w-[130px] truncate",children:_e.module}),e.jsx("span",{className:"text-gray-300 dark:text-gray-400 flex-1 whitespace-pre-wrap break-words",children:_e.message})]})]},B.key)})})})})})]})}const D_="Mai-with-u",R_="plugin-repo",L_="main",U_="plugin_details.json";async function B_(){try{const l=await we("/api/webui/plugins/fetch-raw",{method:"POST",body:JSON.stringify({owner:D_,repo:R_,branch:L_,file_path:U_})});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);const i=await l.json();if(!i.success||!i.data)throw new Error(i.error||"");return JSON.parse(i.data).filter(u=>!u?.id||!u?.manifest?(console.warn(":",u),!1):!u.manifest.name||!u.manifest.version?(console.warn(":",u.id),!1):!0).map(u=>({id:u.id,manifest:{manifest_version:u.manifest.manifest_version||1,name:u.manifest.name,version:u.manifest.version,description:u.manifest.description||"",author:u.manifest.author||{name:"Unknown"},license:u.manifest.license||"Unknown",host_application:u.manifest.host_application||{min_version:"0.0.0"},homepage_url:u.manifest.homepage_url,repository_url:u.manifest.repository_url,keywords:u.manifest.keywords||[],categories:u.manifest.categories||[],default_locale:u.manifest.default_locale||"zh-CN",locales_path:u.manifest.locales_path},downloads:0,rating:0,review_count:0,installed:!1,published_at:new Date().toISOString(),updated_at:new Date().toISOString()}))}catch(l){throw console.error("Failed to fetch plugin list:",l),l}}async function H_(){try{const l=await we("/api/webui/plugins/git-status");if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);return await l.json()}catch(l){return console.error("Failed to check Git status:",l),{installed:!1,error:" Git "}}}async function $_(){try{const l=await we("/api/webui/plugins/version");if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);return await l.json()}catch(l){return console.error("Failed to get Maimai version:",l),{version:"0.0.0",version_major:0,version_minor:0,version_patch:0}}}function q_(l,i,r){const o=l.split(".").map(f=>parseInt(f)||0),u=o[0]||0,x=o[1]||0,h=o[2]||0;if(r.version_major<u||r.version_major===u&&r.version_minor<x||r.version_major===u&&r.version_minor===x&&r.version_patch<h)return!1;if(i){const f=i.split(".").map(y=>parseInt(y)||0),g=f[0]||0,j=f[1]||0,v=f[2]||0;if(r.version_major>g||r.version_major===g&&r.version_minor>j||r.version_major===g&&r.version_minor===j&&r.version_patch>v)return!1}return!0}async function G_(){try{const l=await we("/api/webui/ws-token");if(!l.ok)return console.error(" WebSocket token :",l.status),null;const i=await l.json();return i.success&&i.token?i.token:null}catch(l){return console.error(" WebSocket token :",l),null}}async function V_(l,i){const r=await G_(),o=window.location.protocol==="https:"?"wss:":"ws:",u=window.location.host;let x=`${o}//${u}/api/webui/ws/plugin-progress`;r&&(x+=`?token=${encodeURIComponent(r)}`);try{const h=new WebSocket(x);return h.onopen=()=>{console.log("Plugin progress WebSocket connected");const f=setInterval(()=>{h.readyState===WebSocket.OPEN?h.send("ping"):clearInterval(f)},3e4)},h.onmessage=f=>{try{if(f.data==="pong")return;const g=JSON.parse(f.data);l(g)}catch(g){console.error("Failed to parse progress data:",g)}},h.onerror=f=>{console.error("Plugin progress WebSocket error:",f),i?.(f)},h.onclose=()=>{console.log("Plugin progress WebSocket disconnected")},h}catch(h){return console.error(" WebSocket :",h),null}}async function gr(){try{const l=await we("/api/webui/plugins/installed",{headers:Is()});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);const i=await l.json();if(!i.success)throw new Error(i.message||"");return i.plugins||[]}catch(l){return console.error("Failed to get installed plugins:",l),[]}}function so(l,i){return i.some(r=>r.id===l)}function to(l,i){const r=i.find(o=>o.id===l);if(r)return r.manifest?.version||r.version}async function F_(l,i,r="main"){const o=await we("/api/webui/plugins/install",{method:"POST",body:JSON.stringify({plugin_id:l,repository_url:i,branch:r})});if(!o.ok){const u=await o.json();throw new Error(u.detail||"")}return await o.json()}async function I_(l){const i=await we("/api/webui/plugins/uninstall",{method:"POST",body:JSON.stringify({plugin_id:l})});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return await i.json()}async function Q_(l,i,r="main"){const o=await we("/api/webui/plugins/update",{method:"POST",body:JSON.stringify({plugin_id:l,repository_url:i,branch:r})});if(!o.ok){const u=await o.json();throw new Error(u.detail||"")}return await o.json()}async function Y_(l){const i=await we(`/api/webui/plugins/config/${l}/schema`,{headers:Is()});if(!i.ok){const o=await i.json();throw new Error(o.detail||" Schema ")}const r=await i.json();if(!r.success)throw new Error(r.message||" Schema ");return r.schema}async function K_(l){const i=await we(`/api/webui/plugins/config/${l}`,{headers:Is()});if(!i.ok){const o=await i.json();throw new Error(o.detail||"")}const r=await i.json();if(!r.success)throw new Error(r.message||"");return r.config}async function X_(l,i){const r=await we(`/api/webui/plugins/config/${l}`,{method:"PUT",body:JSON.stringify({config:i})});if(!r.ok){const o=await r.json();throw new Error(o.detail||"")}return await r.json()}async function P_(l){const i=await we(`/api/webui/plugins/config/${l}/reset`,{method:"POST",headers:Is()});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return await i.json()}async function J_(l){const i=await we(`/api/webui/plugins/config/${l}/toggle`,{method:"POST",headers:Is()});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return await i.json()}const Dr="https://maibot-plugin-stats.maibot-webui.workers.dev";async function Mj(l){try{const i=await fetch(`${Dr}/stats/${l}`);return i.ok?await i.json():(console.error("Failed to fetch plugin stats:",i.statusText),null)}catch(i){return console.error("Error fetching plugin stats:",i),null}}async function Z_(l,i){try{const r=i||bm(),o=await fetch(`${Dr}/stats/like`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:l,user_id:r})}),u=await o.json();return o.status===429?{success:!1,error:""}:o.ok?{success:!0,...u}:{success:!1,error:u.error||""}}catch(r){return console.error("Error liking plugin:",r),{success:!1,error:""}}}async function W_(l,i){try{const r=i||bm(),o=await fetch(`${Dr}/stats/dislike`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:l,user_id:r})}),u=await o.json();return o.status===429?{success:!1,error:""}:o.ok?{success:!0,...u}:{success:!1,error:u.error||""}}catch(r){return console.error("Error disliking plugin:",r),{success:!1,error:""}}}async function eS(l,i,r,o){if(i<1||i>5)return{success:!1,error:" 1-5 "};try{const u=o||bm(),x=await fetch(`${Dr}/stats/rate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:l,rating:i,comment:r,user_id:u})}),h=await x.json();return x.status===429?{success:!1,error:" 3 "}:x.ok?{success:!0,...h}:{success:!1,error:h.error||""}}catch(u){return console.error("Error rating plugin:",u),{success:!1,error:""}}}async function sS(l){try{const i=await fetch(`${Dr}/stats/download`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:l})}),r=await i.json();return i.status===429?(console.warn("Download recording rate limited"),{success:!0}):i.ok?{success:!0,...r}:(console.error("Failed to record download:",r.error),{success:!1,error:r.error})}catch(i){return console.error("Error recording download:",i),{success:!1,error:""}}}function tS(){const l=navigator,i=[navigator.userAgent,navigator.language,navigator.languages?.join(",")||"",navigator.platform,navigator.hardwareConcurrency||0,screen.width,screen.height,screen.colorDepth,screen.pixelDepth,new Date().getTimezoneOffset(),Intl.DateTimeFormat().resolvedOptions().timeZone,navigator.maxTouchPoints||0,l.deviceMemory||0].join("|");let r=0;for(let o=0;o<i.length;o++){const u=i.charCodeAt(o);r=(r<<5)-r+u,r=r&r}return`fp_${Math.abs(r).toString(36)}`}function bm(){const l="maibot_user_id";let i=localStorage.getItem(l);if(!i){const r=tS(),o=Date.now().toString(36),u=Math.random().toString(36).substring(2,15);i=`${r}_${o}_${u}`,localStorage.setItem(l,i)}return i}function aS({pluginId:l,compact:i=!1}){const[r,o]=m.useState(null),[u,x]=m.useState(!0),[h,f]=m.useState(0),[g,j]=m.useState(""),[v,y]=m.useState(!1),{toast:b}=Ks(),S=async()=>{x(!0);const D=await Mj(l);D&&o(D),x(!1)};m.useEffect(()=>{S()},[l]);const w=async()=>{const D=await Z_(l);D.success?(b({title:"",description:""}),S()):b({title:"",description:D.error||"",variant:"destructive"})},O=async()=>{const D=await W_(l);D.success?(b({title:"",description:""}),S()):b({title:"",description:D.error||"",variant:"destructive"})},A=async()=>{if(h===0){b({title:"",description:" 1 ",variant:"destructive"});return}const D=await eS(l,h,g||void 0);D.success?(b({title:"",description:""}),y(!1),f(0),j(""),S()):b({title:"",description:D.error||"",variant:"destructive"})};return u?e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Da,{className:"h-4 w-4"}),e.jsx("span",{children:"-"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(xl,{className:"h-4 w-4"}),e.jsx("span",{children:"-"})]})]}):r?i?e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",title:`: ${r.downloads.toLocaleString()}`,children:[e.jsx(Da,{className:"h-4 w-4"}),e.jsx("span",{children:r.downloads.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-1",title:`: ${r.rating.toFixed(1)} (${r.rating_count} )`,children:[e.jsx(xl,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{children:r.rating.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-1",title:`: ${r.likes}`,children:[e.jsx(Lu,{className:"h-4 w-4"}),e.jsx("span",{children:r.likes})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border bg-card",children:[e.jsx(Da,{className:"h-5 w-5 text-muted-foreground mb-1"}),e.jsx("span",{className:"text-2xl font-bold",children:r.downloads.toLocaleString()}),e.jsx("span",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border bg-card",children:[e.jsx(xl,{className:"h-5 w-5 text-yellow-400 mb-1 fill-yellow-400"}),e.jsx("span",{className:"text-2xl font-bold",children:r.rating.toFixed(1)}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[r.rating_count," "]})]}),e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border bg-card",children:[e.jsx(Lu,{className:"h-5 w-5 text-green-500 mb-1"}),e.jsx("span",{className:"text-2xl font-bold",children:r.likes}),e.jsx("span",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border bg-card",children:[e.jsx(fp,{className:"h-5 w-5 text-red-500 mb-1"}),e.jsx("span",{className:"text-2xl font-bold",children:r.dislikes}),e.jsx("span",{className:"text-xs text-muted-foreground",children:""})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(C,{variant:"outline",size:"sm",onClick:w,children:[e.jsx(Lu,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:O,children:[e.jsx(fp,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(Qs,{open:v,onOpenChange:y,children:[e.jsx(mm,{asChild:!0,children:e.jsxs(C,{variant:"default",size:"sm",children:[e.jsx(xl,{className:"h-4 w-4 mr-1"}),""]})}),e.jsxs(qs,{children:[e.jsxs(Gs,{children:[e.jsx(Vs,{children:""}),e.jsx(Ws,{children:""})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(D=>e.jsx("button",{onClick:()=>f(D),className:"focus:outline-none",children:e.jsx(xl,{className:`h-8 w-8 transition-colors ${D<=h?"fill-yellow-400 text-yellow-400":"text-muted-foreground hover:text-yellow-300"}`})},D))}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[h===0&&"",h===1&&"",h===2&&"",h===3&&"",h===4&&"",h===5&&""]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:""}),e.jsx(Ys,{value:g,onChange:D=>j(D.target.value),placeholder:"...",rows:4,maxLength:500}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1 text-right",children:[g.length," / 500"]})]})]}),e.jsxs(at,{children:[e.jsx(C,{variant:"outline",onClick:()=>y(!1),children:""}),e.jsx(C,{onClick:A,disabled:h===0,children:""})]})]})]})]}),r.recent_ratings&&r.recent_ratings.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-semibold",children:""}),e.jsx("div",{className:"space-y-3",children:r.recent_ratings.map((D,V)=>e.jsxs("div",{className:"p-3 rounded-lg border bg-muted/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(z=>e.jsx(xl,{className:`h-3 w-3 ${z<=D.rating?"fill-yellow-400 text-yellow-400":"text-muted-foreground"}`},z))}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(D.created_at).toLocaleDateString()})]}),D.comment&&e.jsx("p",{className:"text-sm text-muted-foreground",children:D.comment})]},V))})]})]}):null}const $p={"Group Management":"","Entertainment & Interaction":"","Utility Tools":"","Content Generation":"",Multimedia:"","External Integration":"","Data Analysis & Insights":"",Other:""};function lS(){return e.jsx(jn,{children:e.jsx(nS,{})})}function nS(){const l=ka(),{triggerRestart:i,isRestarting:r}=Il(),[o,u]=m.useState(null),[x,h]=m.useState(""),[f,g]=m.useState("all"),[j,v]=m.useState("all"),[y,b]=m.useState(!0),[S,w]=m.useState([]),[O,A]=m.useState(!0),[D,V]=m.useState(null),[z,_]=m.useState(null),[T,$]=m.useState(null),[E,se]=m.useState(null),[,te]=m.useState([]),[ne,ue]=m.useState({}),[Se,oe]=m.useState(!1),[je,be]=m.useState(null),[U,P]=m.useState("main"),[X,L]=m.useState(""),[B,_e]=m.useState("preset"),[Ne,Ce]=m.useState(!1),{toast:ve}=Ks(),ze=async G=>{const Me=G.map(async Ee=>{try{const Ie=await Mj(Ee.id);return{id:Ee.id,stats:Ie}}catch(Ie){return console.warn(`Failed to load stats for ${Ee.id}:`,Ie),{id:Ee.id,stats:null}}}),re=await Promise.all(Me),pe={};re.forEach(({id:Ee,stats:Ie})=>{Ie&&(pe[Ee]=Ie)}),ue(pe)};m.useEffect(()=>{let G=null,Me=!1;return(async()=>{if(G=await V_(pe=>{Me||($(pe),pe.stage==="success"?setTimeout(()=>{Me||$(null)},2e3):pe.stage==="error"&&(A(!1),V(pe.error||"")))},pe=>{console.error("WebSocket error:",pe),Me||ve({title:"WebSocket ",description:"",variant:"destructive"})}),await new Promise(pe=>{if(!G){pe();return}const Ee=()=>{G&&G.readyState===WebSocket.OPEN?(console.log("WebSocket connected, starting to load plugins"),pe()):G&&G.readyState===WebSocket.CLOSED?(console.warn("WebSocket closed before loading plugins"),pe()):setTimeout(Ee,100)};Ee()}),!Me){const pe=await H_();_(pe),pe.installed||ve({title:"Git ",description:pe.error||" Git ",variant:"destructive"})}if(!Me){const pe=await $_();se(pe)}if(!Me)try{A(!0),V(null);const pe=await B_();if(!Me){const Ee=await gr();te(Ee);const Ie=pe.map($e=>{const Vt=so($e.id,Ee),_t=to($e.id,Ee);return{...$e,installed:Vt,installed_version:_t}});for(const $e of Ee)!Ie.some(_t=>_t.id===$e.id)&&$e.manifest&&Ie.push({id:$e.id,manifest:{manifest_version:$e.manifest.manifest_version||1,name:$e.manifest.name,version:$e.manifest.version,description:$e.manifest.description||"",author:$e.manifest.author,license:$e.manifest.license||"Unknown",host_application:$e.manifest.host_application,homepage_url:$e.manifest.homepage_url,repository_url:$e.manifest.repository_url,keywords:$e.manifest.keywords||[],categories:$e.manifest.categories||[],default_locale:$e.manifest.default_locale||"zh-CN",locales_path:$e.manifest.locales_path},downloads:0,rating:0,review_count:0,installed:!0,installed_version:$e.manifest.version,published_at:new Date().toISOString(),updated_at:new Date().toISOString()});w(Ie),ze(Ie)}}catch(pe){if(!Me){const Ee=pe instanceof Error?pe.message:"";V(Ee),ve({title:"",description:Ee,variant:"destructive"})}}finally{Me||A(!1)}})(),()=>{Me=!0,G&&G.close()}},[ve]);const Q=G=>{if(!G.installed&&E&&!xe(G))return e.jsxs(Ye,{variant:"destructive",className:"gap-1",children:[e.jsx(Ot,{className:"h-3 w-3"}),""]});if(G.installed){const Me=G.installed_version?.trim(),re=G.manifest.version?.trim();if(Me!==re){const pe=Me?.split(".").map(Number)||[0,0,0],Ee=re?.split(".").map(Number)||[0,0,0];for(let Ie=0;Ie<3;Ie++){if((Ee[Ie]||0)>(pe[Ie]||0))return e.jsxs(Ye,{variant:"outline",className:"gap-1 text-orange-600 border-orange-600",children:[e.jsx(Ot,{className:"h-3 w-3"}),""]});if((Ee[Ie]||0)<(pe[Ie]||0))break}}return e.jsxs(Ye,{variant:"default",className:"gap-1",children:[e.jsx(aa,{className:"h-3 w-3"}),""]})}return null},xe=G=>!E||!G.manifest?.host_application?!0:q_(G.manifest.host_application.min_version,G.manifest.host_application.max_version,E),Te=G=>{if(!G.installed||!G.installed_version||!G.manifest?.version)return!1;const Me=G.installed_version.trim(),re=G.manifest.version.trim();if(Me===re)return!1;const pe=Me.split(".").map(Number),Ee=re.split(".").map(Number);for(let Ie=0;Ie<3;Ie++){if((Ee[Ie]||0)>(pe[Ie]||0))return!0;if((Ee[Ie]||0)<(pe[Ie]||0))return!1}return!1},J=S.filter(G=>{if(!G.manifest)return console.warn("[]  manifest :",G.id),!1;const Me=x===""||G.manifest.name?.toLowerCase().includes(x.toLowerCase())||G.manifest.description?.toLowerCase().includes(x.toLowerCase())||G.manifest.keywords&&G.manifest.keywords.some(Ie=>Ie.toLowerCase().includes(x.toLowerCase())),re=f==="all"||G.manifest.categories&&G.manifest.categories.includes(f);let pe=!0;j==="installed"?pe=G.installed===!0:j==="updates"&&(pe=G.installed===!0&&Te(G));const Ee=!y||!E||xe(G);return Me&&re&&pe&&Ee}),le=()=>{u(null)},qe=G=>{if(!z?.installed){ve({title:"",description:"Git ",variant:"destructive"});return}if(E&&!xe(G)){ve({title:"",description:"",variant:"destructive"});return}be(G),P("main"),L(""),_e("preset"),Ce(!1),oe(!0)},We=async()=>{if(!je)return;const G=B==="custom"?X:U;if(!G||G.trim()===""){ve({title:"",variant:"destructive"});return}try{oe(!1),await F_(je.id,je.manifest.repository_url||"",G),sS(je.id).catch(re=>{console.warn("Failed to record download:",re)}),ve({title:"",description:`${je.manifest.name} `});const Me=await gr();te(Me),w(re=>re.map(pe=>{if(pe.id===je.id){const Ee=so(pe.id,Me),Ie=to(pe.id,Me);return{...pe,installed:Ee,installed_version:Ie}}return pe}))}catch(Me){ve({title:"",description:Me instanceof Error?Me.message:"",variant:"destructive"})}finally{be(null)}},fe=async G=>{try{await I_(G.id),ve({title:"",description:`${G.manifest.name} `});const Me=await gr();te(Me),w(re=>re.map(pe=>{if(pe.id===G.id){const Ee=so(pe.id,Me),Ie=to(pe.id,Me);return{...pe,installed:Ee,installed_version:Ie}}return pe}))}catch(Me){ve({title:"",description:Me instanceof Error?Me.message:"",variant:"destructive"})}},ls=async G=>{if(!z?.installed){ve({title:"",description:"Git ",variant:"destructive"});return}try{const Me=await Q_(G.id,G.manifest.repository_url||"","main");ve({title:"",description:`${G.manifest.name}  ${Me.old_version}  ${Me.new_version}`});const re=await gr();te(re),w(pe=>pe.map(Ee=>{if(Ee.id===G.id){const Ie=so(Ee.id,re),$e=to(Ee.id,re);return{...Ee,installed:Ie,installed_version:$e}}return Ee}))}catch(Me){ve({title:"",description:Me instanceof Error?Me.message:"",variant:"destructive"})}};return e.jsx(Ze,{className:"h-full",children:e.jsxs("div",{className:"space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-2",children:""})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(C,{variant:"outline",onClick:()=>i(),disabled:r,children:[e.jsx(Hg,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),""]}),e.jsxs(C,{onClick:()=>l({to:"/plugin-mirrors"}),children:[e.jsx(Py,{className:"h-4 w-4 mr-2"}),""]})]})]}),e.jsx(Ve,{className:"border-blue-200 bg-blue-50 dark:bg-blue-950/20 dark:border-blue-900",children:e.jsx(gs,{className:"py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ra,{className:"h-4 w-4 text-blue-600 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["",e.jsx("span",{className:"font-semibold",children:""}),""]})]})})}),z&&!z.installed&&e.jsxs(Ve,{className:"border-orange-600 bg-orange-50 dark:bg-orange-950/20",children:[e.jsx(rs,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oa,{className:"h-5 w-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx(cs,{className:"text-lg text-orange-900 dark:text-orange-100",children:"Git "}),e.jsx(st,{className:"text-orange-800 dark:text-orange-200",children:z.error||" Git "})]})]})}),e.jsx(gs,{children:e.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:[" ",e.jsx("a",{href:"https://git-scm.com/downloads",target:"_blank",rel:"noopener noreferrer",className:"underline font-medium",children:"git-scm.com"}),"  Git "]})})]}),e.jsx(Ve,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx($t,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{placeholder:"...",value:x,onChange:G=>h(G.target.value),className:"pl-9"})]}),e.jsxs(Ue,{value:f,onValueChange:g,children:[e.jsx(Re,{className:"w-full sm:w-[200px]",children:e.jsx(Be,{placeholder:""})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"all",children:""}),e.jsx(ee,{value:"Group Management",children:""}),e.jsx(ee,{value:"Entertainment & Interaction",children:""}),e.jsx(ee,{value:"Utility Tools",children:""}),e.jsx(ee,{value:"Content Generation",children:""}),e.jsx(ee,{value:"Multimedia",children:""}),e.jsx(ee,{value:"External Integration",children:""}),e.jsx(ee,{value:"Data Analysis & Insights",children:""}),e.jsx(ee,{value:"Other",children:""})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{id:"compatible-only",checked:y,onCheckedChange:G=>b(G===!0)}),e.jsx("label",{htmlFor:"compatible-only",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:""})]})]})}),e.jsx(Sa,{value:j,onValueChange:v,className:"w-full",children:e.jsxs(xa,{className:"grid w-full grid-cols-3",children:[e.jsxs(is,{value:"all",children:[" (",S.filter(G=>{if(!G.manifest)return!1;const Me=x===""||G.manifest.name?.toLowerCase().includes(x.toLowerCase())||G.manifest.description?.toLowerCase().includes(x.toLowerCase())||G.manifest.keywords&&G.manifest.keywords.some(Ee=>Ee.toLowerCase().includes(x.toLowerCase())),re=f==="all"||G.manifest.categories&&G.manifest.categories.includes(f),pe=!y||!E||xe(G);return Me&&re&&pe}).length,")"]}),e.jsxs(is,{value:"installed",children:[" (",S.filter(G=>{if(!G.manifest)return!1;const Me=x===""||G.manifest.name?.toLowerCase().includes(x.toLowerCase())||G.manifest.description?.toLowerCase().includes(x.toLowerCase())||G.manifest.keywords&&G.manifest.keywords.some(Ee=>Ee.toLowerCase().includes(x.toLowerCase())),re=f==="all"||G.manifest.categories&&G.manifest.categories.includes(f),pe=!y||!E||xe(G);return G.installed&&Me&&re&&pe}).length,")"]}),e.jsxs(is,{value:"updates",children:[" (",S.filter(G=>{if(!G.manifest)return!1;const Me=x===""||G.manifest.name?.toLowerCase().includes(x.toLowerCase())||G.manifest.description?.toLowerCase().includes(x.toLowerCase())||G.manifest.keywords&&G.manifest.keywords.some(Ee=>Ee.toLowerCase().includes(x.toLowerCase())),re=f==="all"||G.manifest.categories&&G.manifest.categories.includes(f),pe=!y||!E||xe(G);return G.installed&&Te(G)&&Me&&re&&pe}).length,")"]})]})}),T&&T.stage==="loading"&&T.operation==="fetch"&&e.jsx(Ve,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm font-medium",children:""})]}),e.jsxs("span",{className:"text-sm font-medium",children:[T.progress,"%"]})]}),e.jsx(gn,{value:T.progress,className:"h-2"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:T.message}),T.total_plugins>0&&e.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:[" ",T.loaded_plugins," / ",T.total_plugins," "]})]})}),T&&T.stage==="error"&&T.error&&e.jsx(Ve,{className:"border-destructive bg-destructive/10",children:e.jsx(rs,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oa,{className:"h-5 w-5 text-destructive"}),e.jsxs("div",{children:[e.jsx(cs,{className:"text-lg text-destructive",children:""}),e.jsx(st,{className:"text-destructive/80",children:T.error})]})]})})}),O?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(tt,{className:"h-8 w-8 animate-spin text-muted-foreground"}),e.jsx("span",{className:"ml-3 text-muted-foreground",children:"..."})]}):D?e.jsx(Ve,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(Oa,{className:"h-12 w-12 text-destructive mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:D}),e.jsx(C,{onClick:()=>window.location.reload(),children:""})]})}):J.length===0?e.jsx(Ve,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx($t,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x||f!=="all"?"":""})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:J.map(G=>e.jsxs(Ve,{className:"flex flex-col hover:shadow-lg transition-shadow h-full",children:[e.jsxs(rs,{children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx(cs,{className:"text-xl",children:G.manifest?.name||G.id}),e.jsxs("div",{className:"flex flex-col gap-1",children:[G.manifest?.categories&&G.manifest.categories[0]&&e.jsx(Ye,{variant:"secondary",className:"text-xs whitespace-nowrap",children:$p[G.manifest.categories[0]]||G.manifest.categories[0]}),Q(G)]})]}),e.jsx(st,{className:"line-clamp-2",children:G.manifest?.description||""})]}),e.jsx(gs,{className:"flex-1",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Da,{className:"h-4 w-4"}),e.jsx("span",{children:(ne[G.id]?.downloads??G.downloads??0).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(xl,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{children:(ne[G.id]?.rating??G.rating??0).toFixed(1)})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[G.manifest?.keywords&&G.manifest.keywords.slice(0,3).map(Me=>e.jsx(Ye,{variant:"outline",className:"text-xs",children:Me},Me)),G.manifest?.keywords&&G.manifest.keywords.length>3&&e.jsxs(Ye,{variant:"outline",className:"text-xs",children:["+",G.manifest.keywords.length-3]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t space-y-1",children:[e.jsxs("div",{children:["v",G.manifest?.version||"unknown","  ",G.manifest?.author?.name||"Unknown"]}),G.manifest?.host_application&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:":"}),e.jsxs("span",{className:"font-medium",children:[G.manifest.host_application.min_version,G.manifest.host_application.max_version?` - ${G.manifest.host_application.max_version}`:" - "]})]})]})]})}),e.jsx(tj,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2 w-full",children:[e.jsx(C,{variant:"outline",size:"sm",onClick:()=>u(G),children:""}),G.installed?Te(G)?e.jsxs(C,{size:"sm",disabled:!z?.installed,title:z?.installed?void 0:"Git ",onClick:()=>ls(G),children:[e.jsx(At,{className:"h-4 w-4 mr-1"}),""]}):e.jsxs(C,{variant:"destructive",size:"sm",disabled:!z?.installed,title:z?.installed?void 0:"Git ",onClick:()=>fe(G),children:[e.jsx(es,{className:"h-4 w-4 mr-1"}),""]}):e.jsxs(C,{size:"sm",disabled:!z?.installed||T?.operation==="install"||E!==null&&!xe(G),title:z?.installed?E!==null&&!xe(G)?` ( ${G.manifest?.host_application?.min_version||""}${G.manifest?.host_application?.max_version?` - ${G.manifest.host_application.max_version}`:"+"} ${E?.version})`:void 0:"Git ",onClick:()=>qe(G),children:[e.jsx(Da,{className:"h-4 w-4 mr-1"}),T?.operation==="install"&&T?.plugin_id===G.id?"...":""]})]})}),T&&(T.stage==="loading"||T.stage==="success"||T.stage==="error")&&T.operation!=="fetch"&&T.plugin_id===G.id&&e.jsx("div",{className:"px-6 pb-4 -mt-2",children:e.jsxs("div",{className:`space-y-2 p-3 rounded-lg border ${T.stage==="success"?"bg-green-50 dark:bg-green-950/20 border-green-200 dark:border-green-900":T.stage==="error"?"bg-red-50 dark:bg-red-950/20 border-red-200 dark:border-red-900":"bg-muted/50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[T.stage==="loading"?e.jsx(tt,{className:"h-3 w-3 animate-spin"}):T.stage==="success"?e.jsx(aa,{className:"h-3 w-3 text-green-600"}):e.jsx(Ot,{className:"h-3 w-3 text-red-600"}),e.jsx("span",{className:`text-xs font-medium ${T.stage==="success"?"text-green-700 dark:text-green-300":T.stage==="error"?"text-red-700 dark:text-red-300":""}`,children:T.stage==="loading"?e.jsxs(e.Fragment,{children:[T.operation==="install"&&"",T.operation==="uninstall"&&"",T.operation==="update"&&""]}):T.stage==="success"?e.jsxs(e.Fragment,{children:[T.operation==="install"&&"",T.operation==="uninstall"&&"",T.operation==="update"&&""]}):e.jsxs(e.Fragment,{children:[T.operation==="install"&&"",T.operation==="uninstall"&&"",T.operation==="update"&&""]})})]}),T.stage!=="error"&&e.jsxs("span",{className:`text-xs font-medium ${T.stage==="success"?"text-green-700 dark:text-green-300":""}`,children:[T.progress,"%"]})]}),T.stage!=="error"&&e.jsx(gn,{value:T.progress,className:`h-1.5 ${T.stage==="success"?"[&>div]:bg-green-500":""}`}),e.jsx("div",{className:`text-xs ${T.stage==="success"?"text-green-600 dark:text-green-400 truncate":T.stage==="error"?"text-red-600 dark:text-red-400":"text-muted-foreground truncate"}`,children:T.stage==="error"?T.error||T.message||"":T.message})]})})]},G.id))}),e.jsx(Qs,{open:o!==null,onOpenChange:le,children:o&&o.manifest&&e.jsx(qs,{className:"max-w-2xl max-h-[80vh] p-0 flex flex-col",children:e.jsx(Ze,{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx(Gs,{children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(Vs,{className:"text-2xl",children:o.manifest.name}),e.jsxs(Ws,{children:[": ",o.manifest.author?.name||"Unknown",o.manifest.author?.url&&e.jsx("a",{href:o.manifest.author.url,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-primary hover:underline",children:e.jsx(ao,{className:"h-3 w-3 inline"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[o.manifest.categories&&o.manifest.categories[0]&&e.jsx(Ye,{variant:"secondary",children:$p[o.manifest.categories[0]]||o.manifest.categories[0]}),Q(o)]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(aS,{pluginId:o.id}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["v",o.manifest?.version||"unknown"]}),o.installed&&o.installed_version&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[": v",o.installed_version]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:(ne[o.id]?.downloads??o.downloads??0).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(xl,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[(ne[o.id]?.rating??o.rating??0).toFixed(1)," (",ne[o.id]?.rating_count??o.review_count??0,")"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o.manifest.license||"Unknown"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.manifest.host_application?.min_version||"",o.manifest.host_application?.max_version?` - ${o.manifest.host_application.max_version}`:" - "]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:""}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.manifest.keywords&&o.manifest.keywords.map(G=>e.jsx(Ye,{variant:"outline",children:G},G))})]}),o.detailed_description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-line",children:o.detailed_description})]}),!o.detailed_description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o.manifest.description||""})]}),e.jsxs("div",{className:"space-y-2",children:[o.manifest.homepage_url&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:": "}),e.jsx("a",{href:o.manifest.homepage_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:o.manifest.homepage_url})]}),o.manifest.repository_url&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:": "}),e.jsx("a",{href:o.manifest.repository_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:o.manifest.repository_url})]})]})]}),e.jsxs(at,{children:[o.manifest.homepage_url&&e.jsxs(C,{onClick:()=>window.open(o.manifest.homepage_url,"_blank"),children:[e.jsx(ao,{className:"h-4 w-4 mr-2"}),""]}),o.manifest.repository_url&&e.jsxs(C,{variant:"outline",onClick:()=>window.open(o.manifest.repository_url,"_blank"),children:[e.jsx(ao,{className:"h-4 w-4 mr-2"}),""]})]})]})})})}),e.jsx(Qs,{open:Se,onOpenChange:oe,children:e.jsxs(qs,{children:[e.jsxs(Gs,{children:[e.jsx(Vs,{children:""}),e.jsxs(Ws,{children:[" ",je?.manifest.name]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:[": ",je?.manifest.version]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[": ",typeof je?.manifest.author=="string"?je.manifest.author:je?.manifest.author?.name]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{id:"advanced-options",checked:Ne,onCheckedChange:G=>Ce(G)}),e.jsx("label",{htmlFor:"advanced-options",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:""})]}),Ne&&e.jsx("div",{className:"space-y-4 p-4 border rounded-lg",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:""}),e.jsxs(Sa,{value:B,onValueChange:G=>_e(G),children:[e.jsxs(xa,{className:"grid w-full grid-cols-2",children:[e.jsx(is,{value:"preset",className:"text-xs",children:""}),e.jsx(is,{value:"custom",className:"text-xs",children:""})]}),B==="preset"&&e.jsx("div",{className:"mt-3",children:e.jsxs(Ue,{value:U,onValueChange:P,children:[e.jsx(Re,{children:e.jsx(Be,{placeholder:""})}),e.jsxs(Le,{children:[e.jsx(ee,{value:"main",children:"main ()"}),e.jsx(ee,{value:"master",children:"master"}),e.jsx(ee,{value:"dev",children:"dev ()"}),e.jsx(ee,{value:"develop",children:"develop"}),e.jsx(ee,{value:"beta",children:"beta ()"}),e.jsx(ee,{value:"stable",children:"stable ()"})]})]})}),B==="custom"&&e.jsxs("div",{className:"space-y-2 mt-3",children:[e.jsx("input",{type:"text",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:": feature/new-feature",value:X,onChange:G=>L(G.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" Git "})]})]})]})}),!Ne&&e.jsx("p",{className:"text-sm text-muted-foreground",children:" (main) "})]}),e.jsxs(at,{children:[e.jsx(C,{variant:"outline",onClick:()=>oe(!1),children:""}),e.jsxs(C,{onClick:We,children:[e.jsx(Da,{className:"h-4 w-4 mr-2"}),""]})]})]})}),e.jsx(vn,{})]})})}function iS(){return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[e.jsx($g,{className:"h-8 w-8",strokeWidth:2}),""]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:""})]})})}),e.jsx(Ze,{className:"flex-1",children:e.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-12rem)]",children:e.jsxs(Ve,{className:"max-w-2xl w-full border-dashed",children:[e.jsxs(rs,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(Vl,{className:"h-16 w-16 text-muted-foreground"})}),e.jsx(cs,{className:"text-2xl",children:""}),e.jsx(st,{className:"text-base",children:""})]}),e.jsx(gs,{children:e.jsxs("div",{className:"space-y-3 text-sm text-muted-foreground",children:[e.jsx("p",{className:"font-medium text-foreground",children:" "}),e.jsxs("ul",{className:"space-y-2 ml-6",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:""})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:""})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:""})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:""})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:""})]})]})]})})]})})})]})}function rS({field:l,value:i,onChange:r}){const[o,u]=m.useState(!1);switch(l.ui_type){case"switch":return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(k,{children:l.label}),l.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:l.hint})]}),e.jsx(Fe,{checked:!!i,onCheckedChange:r,disabled:l.disabled})]});case"number":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:l.label}),e.jsx(ie,{type:"number",value:i??l.default,onChange:x=>r(parseFloat(x.target.value)||0),min:l.min,max:l.max,step:l.step??1,placeholder:l.placeholder,disabled:l.disabled}),l.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:l.hint})]});case"slider":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{children:l.label}),e.jsx("span",{className:"text-sm text-muted-foreground",children:i??l.default})]}),e.jsx(ma,{value:[i??l.default],onValueChange:x=>r(x[0]),min:l.min??0,max:l.max??100,step:l.step??1,disabled:l.disabled}),l.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:l.hint})]});case"select":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:l.label}),e.jsxs(Ue,{value:String(i??l.default),onValueChange:r,disabled:l.disabled,children:[e.jsx(Re,{children:e.jsx(Be,{placeholder:l.placeholder??""})}),e.jsx(Le,{children:l.choices?.map(x=>e.jsx(ee,{value:String(x),children:String(x)},String(x)))})]}),l.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:l.hint})]});case"textarea":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:l.label}),e.jsx(Ys,{value:i??l.default,onChange:x=>r(x.target.value),placeholder:l.placeholder,rows:l.rows??3,disabled:l.disabled}),l.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:l.hint})]});case"password":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:l.label}),e.jsxs("div",{className:"relative",children:[e.jsx(ie,{type:o?"text":"password",value:i??"",onChange:x=>r(x.target.value),placeholder:l.placeholder,disabled:l.disabled,className:"pr-10"}),e.jsx(C,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3",onClick:()=>u(!o),children:o?e.jsx(wr,{className:"h-4 w-4"}):e.jsx(Gt,{className:"h-4 w-4"})})]}),l.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:l.hint})]});case"list":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:l.label}),e.jsx(g1,{value:Array.isArray(i)?i:[],onChange:x=>r(x),itemType:l.item_type??"string",itemFields:l.item_fields,minItems:l.min_items,maxItems:l.max_items,disabled:l.disabled,placeholder:l.placeholder}),l.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:l.hint})]});case"text":default:return e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:l.label}),e.jsx(ie,{type:"text",value:i??l.default??"",onChange:x=>r(x.target.value),placeholder:l.placeholder,maxLength:l.max_length,disabled:l.disabled}),l.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:l.hint})]})}}function qp({section:l,config:i,onChange:r}){const[o,u]=m.useState(!l.collapsed),x=Object.entries(l.fields).filter(([,h])=>!h.hidden).sort(([,h],[,f])=>h.order-f.order);return e.jsx(Tr,{open:o,onOpenChange:u,children:e.jsxs(Ve,{children:[e.jsx(Er,{asChild:!0,children:e.jsxs(rs,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[o?e.jsx(Fa,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Ya,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(cs,{className:"text-lg",children:l.title})]}),e.jsxs(Ye,{variant:"secondary",className:"text-xs",children:[x.length," "]})]}),l.description&&e.jsx(st,{className:"ml-6",children:l.description})]})}),e.jsx(zr,{children:e.jsx(gs,{className:"space-y-4 pt-0",children:x.map(([h,f])=>e.jsx(rS,{field:f,value:i[l.name]?.[h],onChange:g=>r(l.name,h,g),sectionName:l.name},h))})})]})})}function cS({plugin:l,onBack:i}){const{toast:r}=Ks(),{triggerRestart:o,isRestarting:u}=Il(),[x,h]=m.useState(null),[f,g]=m.useState({}),[j,v]=m.useState({}),[y,b]=m.useState(!0),[S,w]=m.useState(!1),[O,A]=m.useState(!1),[D,V]=m.useState(!1),z=m.useCallback(async()=>{b(!0);try{const[ne,ue]=await Promise.all([Y_(l.id),K_(l.id)]);h(ne),g(ue),v(JSON.parse(JSON.stringify(ue)))}catch(ne){r({title:"",description:ne instanceof Error?ne.message:"",variant:"destructive"})}finally{b(!1)}},[l.id,r]);m.useEffect(()=>{z()},[z]),m.useEffect(()=>{A(JSON.stringify(f)!==JSON.stringify(j))},[f,j]);const _=(ne,ue,Se)=>{g(oe=>({...oe,[ne]:{...oe[ne]||{},[ue]:Se}}))},T=async()=>{w(!0);try{await X_(l.id,f),v(JSON.parse(JSON.stringify(f))),r({title:"",description:""})}catch(ne){r({title:"",description:ne instanceof Error?ne.message:"",variant:"destructive"})}finally{w(!1)}},$=async()=>{try{await P_(l.id),r({title:"",description:""}),V(!1),z()}catch(ne){r({title:"",description:ne instanceof Error?ne.message:"",variant:"destructive"})}},E=async()=>{try{const ne=await J_(l.id);r({title:ne.message,description:ne.note}),z()}catch(ne){r({title:"",description:ne instanceof Error?ne.message:"",variant:"destructive"})}};if(y)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(tt,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(!x)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[e.jsx(Ot,{className:"h-12 w-12 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:""}),e.jsxs(C,{onClick:i,variant:"outline",children:[e.jsx(hi,{className:"h-4 w-4 mr-2"}),""]})]});const se=Object.values(x.sections).sort((ne,ue)=>ne.order-ue.order),te=f.plugin?.enabled!==!1;return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(C,{variant:"ghost",size:"icon",onClick:i,children:e.jsx(hi,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:x.plugin_info.name||l.manifest.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Ye,{variant:te?"default":"secondary",children:te?"":""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["v",x.plugin_info.version||l.manifest.version]})]})]})]}),e.jsxs("div",{className:"flex gap-2 ml-10 sm:ml-0",children:[e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>o(),disabled:u,children:[e.jsx(Hg,{className:`h-4 w-4 mr-2 ${u?"animate-spin":""}`}),""]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:E,children:[e.jsx(Mr,{className:"h-4 w-4 mr-2"}),te?"":""]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>V(!0),children:[e.jsx(yr,{className:"h-4 w-4 mr-2"}),""]}),e.jsxs(C,{size:"sm",onClick:T,disabled:!O||S,children:[S?e.jsx(tt,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Ar,{className:"h-4 w-4 mr-2"}),""]})]})]}),O&&e.jsx(Ve,{className:"border-orange-200 bg-orange-50 dark:bg-orange-950/20 dark:border-orange-900",children:e.jsx(gs,{className:"py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ra,{className:"h-4 w-4 text-orange-600"}),e.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:""})]})})}),x.layout.type==="tabs"&&x.layout.tabs.length>0?e.jsxs(Sa,{defaultValue:x.layout.tabs[0]?.id,children:[e.jsx(xa,{children:x.layout.tabs.map(ne=>e.jsxs(is,{value:ne.id,children:[ne.title,ne.badge&&e.jsx(Ye,{variant:"secondary",className:"ml-2 text-xs",children:ne.badge})]},ne.id))}),x.layout.tabs.map(ne=>e.jsx(As,{value:ne.id,className:"space-y-4 mt-4",children:ne.sections.map(ue=>{const Se=x.sections[ue];return Se?e.jsx(qp,{section:Se,config:f,onChange:_},ue):null})},ne.id))]}):e.jsx("div",{className:"space-y-4",children:se.map(ne=>e.jsx(qp,{section:ne,config:f,onChange:_},ne.name))}),e.jsx(Qs,{open:D,onOpenChange:V,children:e.jsxs(qs,{children:[e.jsxs(Gs,{children:[e.jsx(Vs,{children:""}),e.jsx(Ws,{children:""})]}),e.jsxs(at,{children:[e.jsx(C,{variant:"outline",onClick:()=>V(!1),children:""}),e.jsx(C,{variant:"destructive",onClick:$,children:""})]})]})})]})}function oS(){return e.jsx(jn,{children:e.jsx(dS,{})})}function dS(){const{toast:l}=Ks(),[i,r]=m.useState([]),[o,u]=m.useState(!0),[x,h]=m.useState(""),[f,g]=m.useState(null),j=async()=>{u(!0);try{const S=await gr();r(S)}catch(S){l({title:"",description:S instanceof Error?S.message:"",variant:"destructive"})}finally{u(!1)}};m.useEffect(()=>{j()},[]);const v=i.filter(S=>{const w=x.toLowerCase();return S.id.toLowerCase().includes(w)||S.manifest.name.toLowerCase().includes(w)||S.manifest.description?.toLowerCase().includes(w)}),y=i.length,b=0;return f?e.jsxs(e.Fragment,{children:[e.jsx(Ze,{className:"h-full",children:e.jsx("div",{className:"p-4 sm:p-6",children:e.jsx(cS,{plugin:f,onBack:()=>g(null)})})}),e.jsx(vn,{})]}):e.jsx(Ze,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:""})]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:j,children:[e.jsx(At,{className:`h-4 w-4 mr-2 ${o?"animate-spin":""}`}),""]})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 xs:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(Ve,{children:[e.jsxs(rs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(cs,{className:"text-sm font-medium",children:""}),e.jsx(Vl,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(gs,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:o?"...":""})]})]}),e.jsxs(Ve,{children:[e.jsxs(rs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(cs,{className:"text-sm font-medium",children:""}),e.jsx(aa,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(gs,{children:[e.jsx("div",{className:"text-2xl font-bold",children:y}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]})]}),e.jsxs(Ve,{children:[e.jsxs(rs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(cs,{className:"text-sm font-medium",children:""}),e.jsx(Ot,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(gs,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx($t,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{placeholder:"...",value:x,onChange:S=>h(S.target.value),className:"pl-9"})]}),e.jsxs(Ve,{children:[e.jsxs(rs,{children:[e.jsx(cs,{children:""}),e.jsx(st,{children:""})]}),e.jsx(gs,{children:o?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(tt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):v.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[e.jsx(Vl,{className:"h-16 w-16 text-muted-foreground/50"}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-muted-foreground",children:x?"":""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x?"":""})]})]}):e.jsx("div",{className:"space-y-2",children:v.map(S=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>g(S),children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:e.jsx(Vl,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-medium truncate",children:S.manifest.name}),e.jsxs(Ye,{variant:"secondary",className:"text-xs flex-shrink-0",children:["v",S.manifest.version]})]}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:S.manifest.description||""})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx(C,{variant:"ghost",size:"sm",children:e.jsx(ji,{className:"h-4 w-4"})}),e.jsx(Ya,{className:"h-4 w-4 text-muted-foreground"})]})]},S.id))})})]})]})})}function uS(){const l=ka(),{toast:i}=Ks(),[r,o]=m.useState([]),[u,x]=m.useState(!0),[h,f]=m.useState(null),[g,j]=m.useState(null),[v,y]=m.useState(!1),[b,S]=m.useState(!1),[w,O]=m.useState({id:"",name:"",raw_prefix:"",clone_prefix:"",enabled:!0,priority:1}),A=m.useCallback(async()=>{try{x(!0),f(null);const E=await we("/api/webui/plugins/mirrors");if(!E.ok)throw new Error("");const se=await E.json();o(se.mirrors||[])}catch(E){const se=E instanceof Error?E.message:"";f(se),i({title:"",description:se,variant:"destructive"})}finally{x(!1)}},[i]);m.useEffect(()=>{A()},[A]);const D=async()=>{try{const E=await we("/api/webui/plugins/mirrors",{method:"POST",body:JSON.stringify(w)});if(!E.ok){const se=await E.json();throw new Error(se.detail||"")}i({title:"",description:""}),y(!1),O({id:"",name:"",raw_prefix:"",clone_prefix:"",enabled:!0,priority:1}),A()}catch(E){i({title:"",description:E instanceof Error?E.message:"",variant:"destructive"})}},V=async()=>{if(g)try{if(!(await we(`/api/webui/plugins/mirrors/${g.id}`,{method:"PUT",body:JSON.stringify({name:w.name,raw_prefix:w.raw_prefix,clone_prefix:w.clone_prefix,enabled:w.enabled,priority:w.priority})})).ok)throw new Error("");i({title:"",description:""}),S(!1),j(null),A()}catch(E){i({title:"",description:E instanceof Error?E.message:"",variant:"destructive"})}},z=async E=>{if(confirm(""))try{if(!(await we(`/api/webui/plugins/mirrors/${E}`,{method:"DELETE"})).ok)throw new Error("");i({title:"",description:""}),A()}catch(se){i({title:"",description:se instanceof Error?se.message:"",variant:"destructive"})}},_=async E=>{try{if(!(await we(`/api/webui/plugins/mirrors/${E.id}`,{method:"PUT",body:JSON.stringify({enabled:!E.enabled})})).ok)throw new Error("");A()}catch(se){i({title:"",description:se instanceof Error?se.message:"",variant:"destructive"})}},T=E=>{j(E),O({id:E.id,name:E.name,raw_prefix:E.raw_prefix,clone_prefix:E.clone_prefix,enabled:E.enabled,priority:E.priority}),S(!0)},$=async(E,se)=>{const te=se==="up"?E.priority-1:E.priority+1;if(!(te<1))try{if(!(await we(`/api/webui/plugins/mirrors/${E.id}`,{method:"PUT",body:JSON.stringify({priority:te})})).ok)throw new Error("");A()}catch(ne){i({title:"",description:ne instanceof Error?ne.message:"",variant:"destructive"})}};return e.jsx(Ze,{className:"h-full",children:e.jsxs("div",{className:"space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(C,{variant:"ghost",size:"icon",onClick:()=>l({to:"/plugins"}),children:e.jsx(hi,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:" Git "})]})]}),e.jsxs(C,{onClick:()=>y(!0),children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),""]})]}),u?e.jsx(Ve,{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(tt,{className:"h-8 w-8 animate-spin text-primary"})})}):h?e.jsx(Ve,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(Oa,{className:"h-12 w-12 text-destructive mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:h}),e.jsx(C,{onClick:A,children:""})]})}):e.jsxs(Ve,{children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs(bn,{children:[e.jsx(Nn,{children:e.jsxs(gt,{children:[e.jsx(Je,{children:""}),e.jsx(Je,{children:""}),e.jsx(Je,{children:"ID"}),e.jsx(Je,{children:""}),e.jsx(Je,{className:"text-right",children:""})]})}),e.jsx(yn,{children:r.map(E=>e.jsxs(gt,{children:[e.jsx(Qe,{children:e.jsx(Fe,{checked:E.enabled,onCheckedChange:()=>_(E)})}),e.jsx(Qe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:E.name}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Raw: ",E.raw_prefix]})]})}),e.jsx(Qe,{children:e.jsx(Ye,{variant:"outline",children:E.id})}),e.jsx(Qe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono",children:E.priority}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(C,{variant:"ghost",size:"icon",className:"h-5 w-5",onClick:()=>$(E,"up"),disabled:E.priority===1,children:e.jsx(fi,{className:"h-3 w-3"})}),e.jsx(C,{variant:"ghost",size:"icon",className:"h-5 w-5",onClick:()=>$(E,"down"),children:e.jsx(Fa,{className:"h-3 w-3"})})]})]})}),e.jsx(Qe,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(C,{variant:"ghost",size:"icon",onClick:()=>T(E),children:e.jsx(fn,{className:"h-4 w-4"})}),e.jsx(C,{variant:"ghost",size:"icon",onClick:()=>z(E.id),children:e.jsx(es,{className:"h-4 w-4 text-destructive"})})]})})]},E.id))})]})}),e.jsx("div",{className:"md:hidden p-4 space-y-4",children:r.map(E=>e.jsx(Ve,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold",children:E.name}),E.enabled&&e.jsx(Ye,{variant:"default",className:"text-xs",children:""})]}),e.jsx(Ye,{variant:"outline",className:"mt-1 text-xs",children:E.id})]}),e.jsx(Fe,{checked:E.enabled,onCheckedChange:()=>_(E)})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Raw: "}),e.jsx("span",{className:"break-all",children:E.raw_prefix})]}),e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:": "}),e.jsx("span",{className:"font-mono",children:E.priority})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[e.jsxs(C,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>T(E),children:[e.jsx(fn,{className:"h-4 w-4 mr-1"}),""]}),e.jsx(C,{variant:"outline",size:"sm",onClick:()=>$(E,"up"),disabled:E.priority===1,children:e.jsx(fi,{className:"h-4 w-4"})}),e.jsx(C,{variant:"outline",size:"sm",onClick:()=>$(E,"down"),children:e.jsx(Fa,{className:"h-4 w-4"})}),e.jsx(C,{variant:"destructive",size:"sm",onClick:()=>z(E.id),children:e.jsx(es,{className:"h-4 w-4"})})]})]})},E.id))})]}),e.jsx(Qs,{open:v,onOpenChange:y,children:e.jsxs(qs,{className:"max-w-lg",children:[e.jsxs(Gs,{children:[e.jsx(Vs,{children:""}),e.jsx(Ws,{children:" Git "})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"add-id",children:" ID *"}),e.jsx(ie,{id:"add-id",placeholder:": my-mirror",value:w.id,onChange:E=>O({...w,id:E.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"add-name",children:" *"}),e.jsx(ie,{id:"add-name",placeholder:": ",value:w.name,onChange:E=>O({...w,name:E.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"add-raw",children:"Raw  *"}),e.jsx(ie,{id:"add-raw",placeholder:"https://example.com/raw",value:w.raw_prefix,onChange:E=>O({...w,raw_prefix:E.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"add-clone",children:" *"}),e.jsx(ie,{id:"add-clone",placeholder:"https://example.com/clone",value:w.clone_prefix,onChange:E=>O({...w,clone_prefix:E.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"add-priority",children:""}),e.jsx(ie,{id:"add-priority",type:"number",min:"1",value:w.priority,onChange:E=>O({...w,priority:parseInt(E.target.value)||1})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"add-enabled",checked:w.enabled,onCheckedChange:E=>O({...w,enabled:E})}),e.jsx(k,{htmlFor:"add-enabled",children:""})]})]}),e.jsxs(at,{children:[e.jsx(C,{variant:"outline",onClick:()=>y(!1),children:""}),e.jsx(C,{onClick:D,children:""})]})]})}),e.jsx(Qs,{open:b,onOpenChange:S,children:e.jsxs(qs,{className:"max-w-lg",children:[e.jsxs(Gs,{children:[e.jsx(Vs,{children:""}),e.jsx(Ws,{children:""})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:" ID"}),e.jsx(ie,{value:w.id,disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"edit-name",children:" *"}),e.jsx(ie,{id:"edit-name",value:w.name,onChange:E=>O({...w,name:E.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"edit-raw",children:"Raw  *"}),e.jsx(ie,{id:"edit-raw",value:w.raw_prefix,onChange:E=>O({...w,raw_prefix:E.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"edit-clone",children:" *"}),e.jsx(ie,{id:"edit-clone",value:w.clone_prefix,onChange:E=>O({...w,clone_prefix:E.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"edit-priority",children:""}),e.jsx(ie,{id:"edit-priority",type:"number",min:"1",value:w.priority,onChange:E=>O({...w,priority:parseInt(E.target.value)||1})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"edit-enabled",checked:w.enabled,onCheckedChange:E=>O({...w,enabled:E})}),e.jsx(k,{htmlFor:"edit-enabled",children:""})]})]}),e.jsxs(at,{children:[e.jsx(C,{variant:"outline",onClick:()=>S(!1),children:""}),e.jsx(C,{onClick:V,children:""})]})]})})]})})}const jr=m.forwardRef(({className:l,...i},r)=>e.jsx(ig,{ref:r,className:H("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",l),...i}));jr.displayName=ig.displayName;const mS=m.forwardRef(({className:l,...i},r)=>e.jsx(rg,{ref:r,className:H("aspect-square h-full w-full",l),...i}));mS.displayName=rg.displayName;const vr=m.forwardRef(({className:l,...i},r)=>e.jsx(cg,{ref:r,className:H("flex h-full w-full items-center justify-center rounded-full bg-muted",l),...i}));vr.displayName=cg.displayName;function xS(){return"webui_"+Math.random().toString(36).substr(2,9)+"_"+Date.now().toString(36)}function hS(){const l="maibot_webui_user_id";let i=localStorage.getItem(l);return i||(i=xS(),localStorage.setItem(l,i)),i}function fS(){return localStorage.getItem("maibot_webui_user_name")||"WebUI"}function pS(l){localStorage.setItem("maibot_webui_user_name",l)}const Aj="maibot_webui_virtual_tabs";function gS(){try{const l=localStorage.getItem(Aj);if(l)return JSON.parse(l)}catch(l){console.error("[Chat] :",l)}return[]}function Gp(l){try{localStorage.setItem(Aj,JSON.stringify(l))}catch(i){console.error("[Chat] :",i)}}function jS({segment:l}){switch(l.type){case"text":return e.jsx("span",{className:"whitespace-pre-wrap",children:String(l.data)});case"image":case"emoji":return e.jsx("img",{src:String(l.data),alt:l.type==="emoji"?"":"",className:H("rounded-lg max-w-full",l.type==="emoji"?"max-h-32":"max-h-64"),loading:"lazy",onError:i=>{const r=i.target;r.style.display="none",r.parentElement?.insertAdjacentHTML("beforeend",`<span class="text-muted-foreground text-xs">[${l.type==="emoji"?"":""}]</span>`)}});case"voice":return e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("audio",{controls:!0,src:String(l.data),className:"max-w-[200px] h-8",children:""})});case"video":return e.jsx("video",{controls:!0,src:String(l.data),className:"rounded-lg max-w-full max-h-64",children:""});case"face":return e.jsxs("span",{className:"text-muted-foreground",children:["[:",String(l.data),"]"]});case"music":return e.jsx("span",{className:"text-muted-foreground",children:"[]"});case"file":return e.jsxs("span",{className:"text-muted-foreground",children:["[: ",String(l.data),"]"]});case"reply":return e.jsx("span",{className:"text-muted-foreground text-xs",children:"[]"});case"forward":return e.jsx("span",{className:"text-muted-foreground",children:"[]"});case"unknown":default:return e.jsxs("span",{className:"text-muted-foreground",children:["[",l.original_type||"","]"]})}}function vS({message:l,isBot:i}){return l.message_type==="rich"&&l.segments&&l.segments.length>0?e.jsx("div",{className:"flex flex-col gap-2",children:l.segments.map((r,o)=>e.jsx(jS,{segment:r},o))}):e.jsx("span",{className:"whitespace-pre-wrap",children:l.content})}function bS(){const l={id:"webui-default",type:"webui",label:"WebUI",messages:[],isConnected:!1,isTyping:!1,sessionInfo:{}},i=()=>{const He=gS().map(De=>{const ye=De.virtualConfig;return!ye.groupId&&ye.platform&&ye.userId&&(ye.groupId=`webui_virtual_group_${ye.platform}_${ye.userId}`),{id:De.id,type:"virtual",label:De.label,virtualConfig:ye,messages:[],isConnected:!1,isTyping:!1,sessionInfo:{}}});return[l,...He]},[r,o]=m.useState(i),[u,x]=m.useState("webui-default"),h=r.find(F=>F.id===u)||r[0],[f,g]=m.useState(""),[j,v]=m.useState(!1),[y,b]=m.useState(!0),[S,w]=m.useState(fS()),[O,A]=m.useState(!1),[D,V]=m.useState(""),[z,_]=m.useState(!1),[T,$]=m.useState([]),[E,se]=m.useState([]),[te,ne]=m.useState(!1),[ue,Se]=m.useState(!1),[oe,je]=m.useState(""),[be,U]=m.useState({platform:"",personId:"",userId:"",userName:"",groupName:"",groupId:""}),P=m.useRef(hS()),X=m.useRef(new Map),L=m.useRef(null),B=m.useRef(new Map),_e=m.useRef(0),Ne=m.useRef(new Map),{toast:Ce}=Ks(),ve=F=>(_e.current+=1,`${F}-${Date.now()}-${_e.current}-${Math.random().toString(36).substr(2,9)}`),ze=m.useCallback((F,He)=>{o(De=>De.map(ye=>ye.id===F?{...ye,...He}:ye))},[]),Q=m.useCallback((F,He)=>{o(De=>De.map(ye=>ye.id===F?{...ye,messages:[...ye.messages,He]}:ye))},[]),xe=m.useCallback(()=>{L.current?.scrollIntoView({behavior:"smooth"})},[]);m.useEffect(()=>{xe()},[h?.messages,xe]);const Te=m.useCallback(async()=>{ne(!0);try{const F=await we("/api/chat/platforms");if(console.log("[Chat] :",F.status,F.headers.get("content-type")),F.ok){const He=F.headers.get("content-type");if(He&&He.includes("application/json")){const De=await F.json();console.log("[Chat] :",De),$(De.platforms||[])}else{const De=await F.text();console.error("[Chat] :  JSON :",De.substring(0,200)),Ce({title:"",description:" MaiBot ",variant:"destructive"})}}else console.error("[Chat] : HTTP",F.status),Ce({title:"",description:`: ${F.status}`,variant:"destructive"})}catch(F){console.error("[Chat] :",F),Ce({title:"",description:"",variant:"destructive"})}finally{ne(!1)}},[Ce]),J=m.useCallback(async(F,He)=>{Se(!0);try{const De=new URLSearchParams;F&&De.append("platform",F),He&&De.append("search",He),De.append("limit","50");const ye=await we(`/api/chat/persons?${De.toString()}`);if(ye.ok){const ps=ye.headers.get("content-type");if(ps&&ps.includes("application/json")){const ss=await ye.json();se(ss.persons||[])}else console.error("[Chat] :  JSON ")}}catch(De){console.error("[Chat] :",De)}finally{Se(!1)}},[]);m.useEffect(()=>{be.platform&&J(be.platform,oe)},[be.platform,oe,J]);const le=m.useCallback(async(F,He)=>{b(!0);try{const De=new URLSearchParams;De.append("user_id",P.current),De.append("limit","50"),He&&De.append("group_id",He);const ye=`/api/chat/history?${De.toString()}`;console.log("[Chat] :",ye);const ps=await we(ye);if(ps.ok){const ss=await ps.text();try{const Es=JSON.parse(ss);if(Es.messages&&Es.messages.length>0){const Ms=Es.messages.map(ts=>({id:ts.id,type:ts.type,content:ts.content,timestamp:ts.timestamp,sender:{name:ts.sender_name||(ts.is_bot?"":"WebUI"),user_id:ts.user_id,is_bot:ts.is_bot}}));ze(F,{messages:Ms});const Ls=Ne.current.get(F)||new Set;Ms.forEach(ts=>{if(ts.type==="bot"){const Pe=`bot-${ts.content}-${Math.floor(ts.timestamp*1e3)}`;Ls.add(Pe)}}),Ne.current.set(F,Ls)}}catch(Es){console.error("[Chat] JSON :",Es)}}}catch(De){console.error("[Chat] :",De)}finally{b(!1)}},[ze]),qe=m.useCallback(async(F,He,De)=>{const ye=X.current.get(F);if(ye?.readyState===WebSocket.OPEN||ye?.readyState===WebSocket.CONNECTING){console.log(`[Tab ${F}] WebSocket `);return}v(!0);let ps=null;try{const Ls=await we("/api/webui/ws-token");if(Ls.ok){const ts=await Ls.json();ts.success&&ts.token&&(ps=ts.token)}}catch(Ls){console.error(`[Tab ${F}]  WebSocket token :`,Ls)}const ss=window.location.protocol==="https:"?"wss:":"ws:",Es=new URLSearchParams;ps&&Es.append("token",ps),He==="virtual"&&De?(Es.append("user_id",De.userId),Es.append("user_name",De.userName),Es.append("platform",De.platform),Es.append("person_id",De.personId),Es.append("group_name",De.groupName||"WebUI"),De.groupId&&Es.append("group_id",De.groupId)):(Es.append("user_id",P.current),Es.append("user_name",S));const Ms=`${ss}//${window.location.host}/api/chat/ws?${Es.toString()}`;console.log(`[Tab ${F}]  WebSocket:`,Ms);try{const Ls=new WebSocket(Ms);X.current.set(F,Ls),Ls.onopen=()=>{ze(F,{isConnected:!0}),v(!1),console.log(`[Tab ${F}] WebSocket `)},Ls.onmessage=ts=>{try{const Pe=JSON.parse(ts.data);switch(Pe.type){case"session_info":ze(F,{sessionInfo:{session_id:Pe.session_id,user_id:Pe.user_id,user_name:Pe.user_name,bot_name:Pe.bot_name}});break;case"system":Q(F,{id:ve("sys"),type:"system",content:Pe.content||"",timestamp:Pe.timestamp||Date.now()/1e3});break;case"user_message":{const Xe=Pe.sender?.user_id,Os=He==="virtual"&&De?De.userId:P.current;console.log(`[Tab ${F}]  user_message, sender: ${Xe}, current: ${Os}`);const kt=Xe?Xe.replace(/^webui_user_/,""):"",Xs=Os?Os.replace(/^webui_user_/,""):"";if(kt&&Xs&&kt===Xs){console.log(`[Tab ${F}] user_id `);break}const Ss=Ne.current.get(F)||new Set,xt=`user-${Pe.content}-${Math.floor((Pe.timestamp||0)*1e3)}`;if(Ss.has(xt)){console.log(`[Tab ${F}] `);break}if(Ss.add(xt),Ne.current.set(F,Ss),Ss.size>100){const W=Ss.values().next().value;W&&Ss.delete(W)}Q(F,{id:Pe.message_id||ve("user"),type:"user",content:Pe.content||"",timestamp:Pe.timestamp||Date.now()/1e3,sender:Pe.sender});break}case"bot_message":{ze(F,{isTyping:!1});const Xe=Ne.current.get(F)||new Set,Os=`bot-${Pe.content}-${Math.floor((Pe.timestamp||0)*1e3)}`;if(Xe.has(Os))break;if(Xe.add(Os),Ne.current.set(F,Xe),Xe.size>100){const kt=Xe.values().next().value;kt&&Xe.delete(kt)}o(kt=>kt.map(Xs=>{if(Xs.id!==F)return Xs;const Ss=Xs.messages.filter(W=>W.type!=="thinking"),xt={id:ve("bot"),type:"bot",content:Pe.content||"",message_type:Pe.message_type==="rich"?"rich":"text",segments:Pe.segments,timestamp:Pe.timestamp||Date.now()/1e3,sender:Pe.sender};return{...Xs,messages:[...Ss,xt]}}));break}case"typing":ze(F,{isTyping:Pe.is_typing||!1});break;case"error":o(Xe=>Xe.map(Os=>{if(Os.id!==F)return Os;const kt=Os.messages.filter(Xs=>Xs.type!=="thinking");return{...Os,messages:[...kt,{id:ve("error"),type:"error",content:Pe.content||"",timestamp:Pe.timestamp||Date.now()/1e3}]}})),Ce({title:"",description:Pe.content,variant:"destructive"});break;case"pong":break;case"history":{const Xe=Pe.messages||[];if(Xe.length>0){const Os=Ne.current.get(F)||new Set,kt=Xe.map(Xs=>{const Ss=Xs.is_bot||!1,xt=Xs.id||ve(Ss?"bot":"user"),W=`${Ss?"bot":"user"}-${Xs.content}-${Math.floor(Xs.timestamp*1e3)}`;return Os.add(W),{id:xt,type:Ss?"bot":"user",content:Xs.content,timestamp:Xs.timestamp,sender:{name:Xs.sender_name||(Ss?"":""),user_id:Xs.sender_id,is_bot:Ss}}});Ne.current.set(F,Os),ze(F,{messages:kt}),console.log(`[Tab ${F}]  ${kt.length} `)}break}default:console.log(":",Pe.type)}}catch(Pe){console.error(":",Pe)}},Ls.onclose=()=>{ze(F,{isConnected:!1}),v(!1),X.current.delete(F),console.log(`[Tab ${F}] WebSocket `);const ts=B.current.get(F);ts&&clearTimeout(ts);const Pe=window.setTimeout(()=>{if(!We.current){const Xe=r.find(Os=>Os.id===F);Xe&&qe(F,Xe.type,Xe.virtualConfig)}},5e3);B.current.set(F,Pe)},Ls.onerror=ts=>{console.error(`[Tab ${F}] WebSocket :`,ts),v(!1)}}catch(Ls){console.error(`[Tab ${F}]  WebSocket :`,Ls),v(!1)}},[S,ze,Q,Ce,r]),We=m.useRef(!1);m.useEffect(()=>{We.current=!1;const F=X.current,He=B.current,De=Ne.current;le("webui-default");const ye=setTimeout(()=>{We.current||(qe("webui-default","webui"),r.forEach(ss=>{ss.type==="virtual"&&ss.virtualConfig&&(De.set(ss.id,new Set),setTimeout(()=>{We.current||qe(ss.id,"virtual",ss.virtualConfig)},200))}))},100),ps=setInterval(()=>{F.forEach(ss=>{ss.readyState===WebSocket.OPEN&&ss.send(JSON.stringify({type:"ping"}))})},3e4);return()=>{We.current=!0,clearTimeout(ye),clearInterval(ps),He.forEach(ss=>{clearTimeout(ss)}),He.clear(),F.forEach(ss=>{ss.close()}),F.clear()}},[]);const fe=m.useCallback(()=>{const F=X.current.get(u);if(!f.trim()||!F||F.readyState!==WebSocket.OPEN)return;const He=h?.type==="virtual"&&h.virtualConfig?.userName||S,De=f.trim(),ye=Date.now()/1e3;F.send(JSON.stringify({type:"message",content:De,user_name:He}));const ps=Ne.current.get(u)||new Set,ss=`user-${De}-${Math.floor(ye*1e3)}`;if(ps.add(ss),Ne.current.set(u,ps),ps.size>100){const Ls=ps.values().next().value;Ls&&ps.delete(Ls)}const Es={id:ve("user"),type:"user",content:De,timestamp:ye,sender:{name:He,is_bot:!1}};Q(u,Es);const Ms={id:ve("thinking"),type:"thinking",content:"",timestamp:ye+.001,sender:{name:h?.sessionInfo.bot_name||"",is_bot:!0}};Q(u,Ms),g("")},[f,S,u,h,Q]),ls=F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),fe())},G=()=>{V(S),A(!0)},Me=()=>{const F=D.trim()||"WebUI";w(F),pS(F),A(!1);const He=X.current.get(u);He?.readyState===WebSocket.OPEN&&He.send(JSON.stringify({type:"update_nickname",user_name:F}))},re=()=>{V(""),A(!1)},pe=F=>new Date(F*1e3).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),Ee=()=>{const F=X.current.get(u);F&&(F.close(),X.current.delete(u)),qe(u,h?.type||"webui",h?.virtualConfig)},Ie=()=>{U({platform:"",personId:"",userId:"",userName:"",groupName:"",groupId:""}),je(""),Te(),_(!0)},$e=()=>{if(!be.platform||!be.personId){Ce({title:"",description:"",variant:"destructive"});return}const F=`webui_virtual_group_${be.platform}_${be.userId}`,He=`virtual-${be.platform}-${be.userId}-${Date.now()}`,De=be.userName||be.userId,ye={id:He,type:"virtual",label:De,virtualConfig:{...be,groupId:F},messages:[],isConnected:!1,isTyping:!1,sessionInfo:{}};o(ps=>{const ss=[...ps,ye],Es=ss.filter(Ms=>Ms.type==="virtual"&&Ms.virtualConfig).map(Ms=>({id:Ms.id,label:Ms.label,virtualConfig:Ms.virtualConfig,createdAt:Date.now()}));return Gp(Es),ss}),x(He),_(!1),Ne.current.set(He,new Set),setTimeout(()=>{qe(He,"virtual",be)},100),Ce({title:"",description:` ${De} `})},Vt=(F,He)=>{if(He?.stopPropagation(),F==="webui-default")return;const De=X.current.get(F);De&&(De.close(),X.current.delete(F));const ye=B.current.get(F);ye&&(clearTimeout(ye),B.current.delete(F)),Ne.current.delete(F),o(ps=>{const ss=ps.filter(Ms=>Ms.id!==F),Es=ss.filter(Ms=>Ms.type==="virtual"&&Ms.virtualConfig).map(Ms=>({id:Ms.id,label:Ms.label,virtualConfig:Ms.virtualConfig,createdAt:Date.now()}));return Gp(Es),ss}),u===F&&x("webui-default")},_t=F=>{x(F)},nt=F=>{U(He=>({...He,personId:F.person_id,userId:F.user_id,userName:F.nickname||F.person_name}))};return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx(Qs,{open:z,onOpenChange:_,children:e.jsxs(qs,{className:"sm:max-w-[500px] max-h-[85vh] overflow-hidden flex flex-col",children:[e.jsxs(Gs,{children:[e.jsxs(Vs,{className:"flex items-center gap-2",children:[e.jsx(Uu,{className:"h-5 w-5"}),""]}),e.jsx(Ws,{children:""})]}),e.jsxs("div",{className:"space-y-4 flex-1 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(Wu,{className:"h-4 w-4"}),""]}),e.jsxs(Ue,{value:be.platform,onValueChange:F=>{U(He=>({...He,platform:F,personId:"",userId:"",userName:""})),se([])},children:[e.jsx(Re,{disabled:te,children:e.jsx(Be,{placeholder:te?"...":""})}),e.jsx(Le,{children:T.map(F=>e.jsxs(ee,{value:F.platform,children:[F.platform," (",F.count," )"]},F.platform))})]})]}),be.platform&&e.jsxs("div",{className:"space-y-2 flex-1 overflow-hidden flex flex-col",children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(em,{className:"h-4 w-4"}),""]}),e.jsxs("div",{className:"relative",children:[e.jsx($t,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{placeholder:"...",value:oe,onChange:F=>je(F.target.value),className:"pl-9"})]}),e.jsx(Ze,{className:"h-[250px] border rounded-md",children:e.jsx("div",{className:"p-2",children:ue?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(tt,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):E.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[e.jsx(em,{className:"h-8 w-8 mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:""})]}):e.jsx("div",{className:"space-y-1",children:E.map(F=>e.jsxs("button",{onClick:()=>nt(F),className:H("w-full flex items-center gap-3 p-2 rounded-md text-left transition-colors",be.personId===F.person_id?"bg-primary text-primary-foreground":"hover:bg-muted"),children:[e.jsx(jr,{className:"h-8 w-8 shrink-0",children:e.jsx(vr,{className:H("text-xs",be.personId===F.person_id?"bg-primary-foreground/20":"bg-muted"),children:(F.nickname||F.person_name||"?").charAt(0)})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-medium truncate",children:F.nickname||F.person_name}),e.jsxs("div",{className:H("text-xs truncate",be.personId===F.person_id?"text-primary-foreground/70":"text-muted-foreground"),children:["ID: ",F.user_id,F.is_known&&"  "]})]})]},F.person_id))})})})]}),be.personId&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:""}),e.jsx(ie,{placeholder:"WebUI",value:be.groupName,onChange:F=>U(He=>({...He,groupName:F.target.value}))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]}),e.jsxs(at,{className:"gap-2 sm:gap-0",children:[e.jsx(C,{variant:"outline",onClick:()=>_(!1),children:""}),e.jsx(C,{onClick:$e,disabled:!be.platform||!be.personId,children:""})]})]})}),e.jsx("div",{className:"shrink-0 border-b bg-muted/30",children:e.jsx("div",{className:"max-w-4xl mx-auto px-2 sm:px-4",children:e.jsxs("div",{className:"flex items-center gap-1 overflow-x-auto py-1.5 scrollbar-thin",children:[r.map(F=>e.jsxs("div",{className:H("flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm whitespace-nowrap transition-colors cursor-pointer","hover:bg-muted",u===F.id?"bg-background shadow-sm border":"text-muted-foreground"),onClick:()=>_t(F.id),children:[F.type==="webui"?e.jsx(Fl,{className:"h-3.5 w-3.5"}):e.jsx(Uu,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"max-w-[100px] truncate",children:F.label}),e.jsx("span",{className:H("w-1.5 h-1.5 rounded-full",F.isConnected?"bg-green-500":"bg-muted-foreground/50")}),F.id!=="webui-default"&&e.jsx("span",{onClick:He=>Vt(F.id,He),className:"ml-0.5 p-0.5 rounded hover:bg-muted-foreground/20 cursor-pointer",role:"button",tabIndex:0,onKeyDown:He=>{(He.key==="Enter"||He.key===" ")&&(He.preventDefault(),Vt(F.id,He))},children:e.jsx(fl,{className:"h-3 w-3"})})]},F.id)),e.jsx("button",{onClick:Ie,className:"flex items-center gap-1 px-2 py-1.5 rounded-md text-sm text-muted-foreground hover:bg-muted hover:text-foreground transition-colors",title:"",children:e.jsx(ut,{className:"h-3.5 w-3.5"})})]})})}),e.jsx("div",{className:"shrink-0 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsxs("div",{className:"p-3 sm:p-4 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[e.jsx(jr,{className:"h-8 w-8 sm:h-10 sm:w-10 shrink-0",children:e.jsx(vr,{className:"bg-primary/10 text-primary",children:e.jsx(fr,{className:"h-4 w-4 sm:h-5 sm:w-5"})})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-base sm:text-lg font-semibold truncate",children:h?.sessionInfo.bot_name||""}),e.jsx("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:h?.isConnected?e.jsxs(e.Fragment,{children:[e.jsx(Jy,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{className:"text-green-600 dark:text-green-400",children:""})]}):j?e.jsxs(e.Fragment,{children:[e.jsx(tt,{className:"h-3 w-3 animate-spin"}),e.jsx("span",{children:"..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Zy,{className:"h-3 w-3 text-red-500"}),e.jsx("span",{className:"text-red-600 dark:text-red-400",children:""})]})})]})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[y&&e.jsx(tt,{className:"h-4 w-4 animate-spin text-muted-foreground"}),e.jsx(C,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:Ee,disabled:j,title:"",children:e.jsx(At,{className:H("h-4 w-4",j&&"animate-spin")})})]})]}),e.jsx("div",{className:"hidden sm:flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:h?.type==="virtual"&&h.virtualConfig?e.jsxs(e.Fragment,{children:[e.jsx(Uu,{className:"h-3 w-3 text-primary"}),e.jsx("span",{children:""}),e.jsx("span",{className:"font-medium text-primary",children:h.virtualConfig.userName}),e.jsxs("span",{className:"text-xs",children:["(",h.virtualConfig.platform,")"]}),h.virtualConfig.groupName&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-1",children:""}),e.jsxs("span",{className:"text-xs",children:["",h.virtualConfig.groupName]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(oo,{className:"h-3 w-3"}),e.jsx("span",{children:""}),O?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{value:D,onChange:F=>V(F.target.value),onKeyDown:F=>{F.key==="Enter"&&Me(),F.key==="Escape"&&re()},className:"h-7 w-32",placeholder:"",autoFocus:!0}),e.jsx(C,{size:"sm",variant:"ghost",className:"h-7 px-2",onClick:Me,children:""}),e.jsx(C,{size:"sm",variant:"ghost",className:"h-7 px-2",onClick:re,children:""})]}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium text-foreground",children:S}),e.jsx(C,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:G,title:"",children:e.jsx(Wy,{className:"h-3 w-3"})})]})]})})]})}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(Ze,{className:"h-full",children:e.jsxs("div",{className:"p-3 sm:p-4 max-w-4xl mx-auto space-y-3 sm:space-y-4",children:[h?.messages.length===0&&!y&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground",children:[e.jsx(fr,{className:"h-12 w-12 mb-4 opacity-50"}),e.jsxs("p",{className:"text-sm",children:[" ",h?.sessionInfo.bot_name||""," "]})]}),h?.messages.map(F=>e.jsxs("div",{className:H("flex gap-2 sm:gap-3",F.type==="user"&&"flex-row-reverse",F.type==="system"&&"justify-center",F.type==="error"&&"justify-center"),children:[F.type==="system"&&e.jsx("div",{className:"text-xs text-muted-foreground bg-muted/50 px-3 py-1 rounded-full max-w-[90%]",children:F.content}),F.type==="error"&&e.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/30 px-3 py-1 rounded-full max-w-[90%]",children:F.content}),F.type==="thinking"&&e.jsxs(e.Fragment,{children:[e.jsx(jr,{className:"h-7 w-7 sm:h-8 sm:w-8 shrink-0",children:e.jsx(vr,{className:"bg-primary/10 text-primary",children:e.jsx(fr,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})}),e.jsxs("div",{className:"flex flex-col gap-1 max-w-[75%] sm:max-w-[70%]",children:[e.jsx("div",{className:"flex items-center gap-2 text-[10px] sm:text-xs text-muted-foreground",children:e.jsx("span",{className:"hidden sm:inline",children:F.sender?.name||h?.sessionInfo.bot_name})}),e.jsx("div",{className:"bg-muted rounded-2xl rounded-tl-sm px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("span",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("span",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("span",{className:"text-xs text-muted-foreground ml-1",children:"..."})]})})]})]}),(F.type==="user"||F.type==="bot")&&e.jsxs(e.Fragment,{children:[e.jsx(jr,{className:"h-7 w-7 sm:h-8 sm:w-8 shrink-0",children:e.jsx(vr,{className:H("text-xs",F.type==="bot"?"bg-primary/10 text-primary":"bg-secondary text-secondary-foreground"),children:F.type==="bot"?e.jsx(fr,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):e.jsx(oo,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})}),e.jsxs("div",{className:H("flex flex-col gap-1 max-w-[75%] sm:max-w-[70%]",F.type==="user"&&"items-end"),children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] sm:text-xs text-muted-foreground",children:[e.jsx("span",{className:"hidden sm:inline",children:F.sender?.name||(F.type==="bot"?h?.sessionInfo.bot_name:S)}),e.jsx("span",{children:pe(F.timestamp)})]}),e.jsx("div",{className:H("rounded-2xl px-3 py-2 text-sm break-words",F.type==="bot"?"bg-muted rounded-tl-sm":"bg-primary text-primary-foreground rounded-tr-sm"),children:e.jsx(vS,{message:F,isBot:F.type==="bot"})})]})]})]},F.id)),e.jsx("div",{ref:L})]})})}),e.jsx("div",{className:"shrink-0 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsx("div",{className:"p-3 sm:p-4 max-w-4xl mx-auto",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{value:f,onChange:F=>g(F.target.value),onKeyDown:ls,placeholder:h?.isConnected?"...":"...",disabled:!h?.isConnected,className:"flex-1 h-10 sm:h-10"}),e.jsx(C,{onClick:fe,disabled:!h?.isConnected||!f.trim(),size:"icon",className:"h-10 w-10 shrink-0",children:e.jsx(e0,{className:"h-4 w-4"})})]})})})]})}var Nm="Radio",[NS,Oj]=wg(Nm),[yS,wS]=NS(Nm),Dj=m.forwardRef((l,i)=>{const{__scopeRadio:r,name:o,checked:u=!1,required:x,disabled:h,value:f="on",onCheck:g,form:j,...v}=l,[y,b]=m.useState(null),S=nm(i,A=>b(A)),w=m.useRef(!1),O=y?j||!!y.closest("form"):!0;return e.jsxs(yS,{scope:r,checked:u,disabled:h,children:[e.jsx(fo.button,{type:"button",role:"radio","aria-checked":u,"data-state":Bj(u),"data-disabled":h?"":void 0,disabled:h,value:f,...v,ref:S,onClick:Zu(l.onClick,A=>{u||g?.(),O&&(w.current=A.isPropagationStopped(),w.current||A.stopPropagation())})}),O&&e.jsx(Uj,{control:y,bubbles:!w.current,name:o,value:f,checked:u,required:x,disabled:h,form:j,style:{transform:"translateX(-100%)"}})]})});Dj.displayName=Nm;var Rj="RadioIndicator",Lj=m.forwardRef((l,i)=>{const{__scopeRadio:r,forceMount:o,...u}=l,x=wS(Rj,r);return e.jsx(by,{present:o||x.checked,children:e.jsx(fo.span,{"data-state":Bj(x.checked),"data-disabled":x.disabled?"":void 0,...u,ref:i})})});Lj.displayName=Rj;var _S="RadioBubbleInput",Uj=m.forwardRef(({__scopeRadio:l,control:i,checked:r,bubbles:o=!0,...u},x)=>{const h=m.useRef(null),f=nm(h,x),g=Ny(r),j=yy(i);return m.useEffect(()=>{const v=h.current;if(!v)return;const y=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(y,"checked").set;if(g!==r&&S){const w=new Event("click",{bubbles:o});S.call(v,r),v.dispatchEvent(w)}},[g,r,o]),e.jsx(fo.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...u,tabIndex:-1,ref:f,style:{...u.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Uj.displayName=_S;function Bj(l){return l?"checked":"unchecked"}var SS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],_o="RadioGroup",[CS]=wg(_o,[og,Oj]),Hj=og(),$j=Oj(),[kS,TS]=CS(_o),qj=m.forwardRef((l,i)=>{const{__scopeRadioGroup:r,name:o,defaultValue:u,value:x,required:h=!1,disabled:f=!1,orientation:g,dir:j,loop:v=!0,onValueChange:y,...b}=l,S=Hj(r),w=jy(j),[O,A]=vy({prop:x,defaultProp:u??null,onChange:y,caller:_o});return e.jsx(kS,{scope:r,name:o,required:h,disabled:f,value:O,onValueChange:A,children:e.jsx(XN,{asChild:!0,...S,orientation:g,dir:w,loop:v,children:e.jsx(fo.div,{role:"radiogroup","aria-required":h,"aria-orientation":g,"data-disabled":f?"":void 0,dir:w,...b,ref:i})})})});qj.displayName=_o;var Gj="RadioGroupItem",Vj=m.forwardRef((l,i)=>{const{__scopeRadioGroup:r,disabled:o,...u}=l,x=TS(Gj,r),h=x.disabled||o,f=Hj(r),g=$j(r),j=m.useRef(null),v=nm(i,j),y=x.value===u.value,b=m.useRef(!1);return m.useEffect(()=>{const S=O=>{SS.includes(O.key)&&(b.current=!0)},w=()=>b.current=!1;return document.addEventListener("keydown",S),document.addEventListener("keyup",w),()=>{document.removeEventListener("keydown",S),document.removeEventListener("keyup",w)}},[]),e.jsx(PN,{asChild:!0,...f,focusable:!h,active:y,children:e.jsx(Dj,{disabled:h,required:x.required,checked:y,...g,...u,name:x.name,ref:v,onCheck:()=>x.onValueChange(u.value),onKeyDown:Zu(S=>{S.key==="Enter"&&S.preventDefault()}),onFocus:Zu(u.onFocus,()=>{b.current&&j.current?.click()})})})});Vj.displayName=Gj;var ES="RadioGroupIndicator",Fj=m.forwardRef((l,i)=>{const{__scopeRadioGroup:r,...o}=l,u=$j(r);return e.jsx(Lj,{...u,...o,ref:i})});Fj.displayName=ES;var Ij=qj,Qj=Vj,zS=Fj;const Yj=m.forwardRef(({className:l,...i},r)=>e.jsx(Ij,{className:H("grid gap-2",l),...i,ref:r}));Yj.displayName=Ij.displayName;const Kj=m.forwardRef(({className:l,...i},r)=>e.jsx(Qj,{ref:r,className:H("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",l),...i,children:e.jsx(zS,{className:"flex items-center justify-center",children:e.jsx(s0,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Kj.displayName=Qj.displayName;function MS({question:l,value:i,onChange:r,error:o,disabled:u=!1}){const[x,h]=m.useState(null),f=u||l.readOnly,g=()=>{switch(l.type){case"single":return e.jsx(Yj,{value:i||"",onValueChange:r,disabled:f,className:"space-y-2",children:l.options?.map(j=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Kj,{value:j.value,id:`${l.id}-${j.id}`}),e.jsx(k,{htmlFor:`${l.id}-${j.id}`,className:"cursor-pointer font-normal",children:j.label})]},j.id))});case"multiple":{const j=i||[];return e.jsxs("div",{className:"space-y-2",children:[l.options?.map(v=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{id:`${l.id}-${v.id}`,checked:j.includes(v.value),disabled:f||l.maxSelections!==void 0&&j.length>=l.maxSelections&&!j.includes(v.value),onCheckedChange:y=>{r(y?[...j,v.value]:j.filter(b=>b!==v.value))}}),e.jsx(k,{htmlFor:`${l.id}-${v.id}`,className:"cursor-pointer font-normal",children:v.label})]},v.id)),l.maxSelections&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ",l.maxSelections," "]})]})}case"text":return e.jsx(ie,{value:i||"",onChange:j=>r(j.target.value),placeholder:l.placeholder||"...",disabled:f,readOnly:l.readOnly,maxLength:l.maxLength,className:H(l.readOnly&&"bg-muted cursor-not-allowed")});case"textarea":return e.jsxs("div",{className:"space-y-1",children:[e.jsx(Ys,{value:i||"",onChange:j=>r(j.target.value),placeholder:l.placeholder||"...",disabled:f,readOnly:l.readOnly,maxLength:l.maxLength,rows:4,className:H(l.readOnly&&"bg-muted cursor-not-allowed")}),l.maxLength&&e.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:[(i||"").length," / ",l.maxLength]})]});case"rating":{const j=i||0,v=x!==null?x:j;return e.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(y=>e.jsx("button",{type:"button",disabled:f,className:H("p-1 transition-colors focus:outline-none focus:ring-2 focus:ring-ring rounded",f&&"cursor-not-allowed opacity-50"),onMouseEnter:()=>!f&&h(y),onMouseLeave:()=>h(null),onClick:()=>!f&&r(y),children:e.jsx(xl,{className:H("h-6 w-6 transition-colors",y<=v?"fill-yellow-400 text-yellow-400":"text-muted-foreground")})},y)),j>0&&e.jsxs("span",{className:"ml-2 text-sm text-muted-foreground",children:[j," / 5"]})]})}case"scale":{const j=l.min??1,v=l.max??10,y=l.step??1,b=i??j;return e.jsxs("div",{className:"space-y-4",children:[e.jsx(ma,{value:[b],onValueChange:([S])=>r(S),min:j,max:v,step:y,disabled:f}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:l.minLabel||j}),e.jsx("span",{className:"font-medium text-foreground",children:b}),e.jsx("span",{children:l.maxLabel||v})]})]})}case"dropdown":return e.jsxs(Ue,{value:i||"",onValueChange:r,disabled:f,children:[e.jsx(Re,{children:e.jsx(Be,{placeholder:l.placeholder||"..."})}),e.jsx(Le,{children:l.options?.map(j=>e.jsx(ee,{value:j.value,children:j.label},j.id))})]});default:return e.jsx("div",{className:"text-muted-foreground",children:""})}};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(k,{className:"text-base font-medium",children:[l.title,l.required&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),l.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:l.description})]}),g(),o&&e.jsx("p",{className:"text-sm text-destructive",children:o})]})}const Xj="https://maibot-plugin-stats.maibot-webui.workers.dev";function Pj(){const l="maibot_user_id";let i=localStorage.getItem(l);if(!i){const r=Math.random().toString(36).substring(2,10),o=Date.now().toString(36),u=Math.random().toString(36).substring(2,10);i=`fp_${r}_${o}_${u}`,localStorage.setItem(l,i)}return i}async function AS(l,i,r,o){try{const u=o?.userId||Pj(),x={surveyId:l,surveyVersion:i,userId:u,answers:r,submittedAt:new Date().toISOString(),allowMultiple:o?.allowMultiple,metadata:{userAgent:navigator.userAgent,language:navigator.language}},h=await fetch(`${Xj}/survey/submit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)}),f=await h.json();return h.status===429?{success:!1,error:""}:h.status===409?{success:!1,error:f.error||""}:h.ok?{success:!0,submissionId:f.submissionId,message:f.message}:{success:!1,error:f.error||""}}catch(u){return console.error("Error submitting survey:",u),{success:!1,error:""}}}async function OS(l,i){try{const r=i||Pj(),o=new URLSearchParams({user_id:r,survey_id:l}),u=await fetch(`${Xj}/survey/check?${o}`);return u.ok?{success:!0,hasSubmitted:(await u.json()).hasSubmitted}:{success:!1,error:(await u.json()).error||""}}catch(r){return console.error("Error checking submission:",r),{success:!1,error:""}}}function Jj({config:l,initialAnswers:i,onSubmitSuccess:r,onSubmitError:o,showProgress:u=!0,paginateQuestions:x=!1,className:h}){const f=m.useCallback(()=>!i||i.length===0?{}:i.reduce((X,L)=>(X[L.questionId]=L.value,X),{}),[i]),[g,j]=m.useState(()=>f()),[v,y]=m.useState({}),[b,S]=m.useState(0),[w,O]=m.useState(!1),[A,D]=m.useState(!1),[V,z]=m.useState(null),[_,T]=m.useState(null),[$,E]=m.useState(!1),[se,te]=m.useState(!0);m.useEffect(()=>{i&&i.length>0&&j(X=>({...X,...f()}))},[i,f]),m.useEffect(()=>{(async()=>{if(!l.settings?.allowMultiple){const L=await OS(l.id);L.success&&L.hasSubmitted&&E(!0)}te(!1)})()},[l.id,l.settings?.allowMultiple]);const ne=m.useCallback(()=>{const X=new Date;return!(l.settings?.startTime&&new Date(l.settings.startTime)>X||l.settings?.endTime&&new Date(l.settings.endTime)<X)},[l.settings?.startTime,l.settings?.endTime]),ue=l.questions.filter(X=>{const L=g[X.id];return L==null?!1:Array.isArray(L)?L.length>0:typeof L=="string"?L.trim()!=="":!0}).length,Se=ue/l.questions.length*100,oe=m.useCallback((X,L)=>{j(B=>({...B,[X]:L})),y(B=>{const _e={...B};return delete _e[X],_e})},[]),je=m.useCallback(()=>{const X={};for(const L of l.questions){if(L.required){const B=g[L.id];if(B==null){X[L.id]="";continue}if(Array.isArray(B)&&B.length===0){X[L.id]="";continue}if(typeof B=="string"&&B.trim()===""){X[L.id]="";continue}}L.minLength&&typeof g[L.id]=="string"&&g[L.id].length<L.minLength&&(X[L.id]=` ${L.minLength} `)}return y(X),Object.keys(X).length===0},[l.questions,g]),be=m.useCallback(async()=>{if(!je()){if(x){const X=l.questions.findIndex(L=>v[L.id]);X>=0&&S(X)}return}O(!0),z(null);try{const X=l.questions.filter(B=>g[B.id]!==void 0).map(B=>({questionId:B.id,value:g[B.id]})),L=await AS(l.id,l.version,X,{allowMultiple:l.settings?.allowMultiple});if(L.success&&L.submissionId)D(!0),T(L.submissionId),r?.(L.submissionId);else{const B=L.error||"";z(B),o?.(B)}}catch(X){const L=X instanceof Error?X.message:"";z(L),o?.(L)}finally{O(!1)}},[je,x,l,g,v,r,o]),U=m.useCallback(X=>{X>=0&&X<l.questions.length&&S(X)},[l.questions.length]);if(se)return e.jsx(Ve,{className:H("w-full max-w-2xl mx-auto",h),children:e.jsx(gs,{className:"py-12 flex items-center justify-center",children:e.jsx(tt,{className:"h-6 w-6 animate-spin text-muted-foreground"})})});if($&&!l.settings?.allowMultiple)return e.jsxs(Ve,{className:H("w-full max-w-2xl mx-auto",h),children:[e.jsx(rs,{children:e.jsx(cs,{children:l.title})}),e.jsx(gs,{className:"py-8",children:e.jsxs(sa,{children:[e.jsx(Ot,{className:"h-4 w-4"}),e.jsx(ta,{children:""})]})})]});if(!ne())return e.jsxs(Ve,{className:H("w-full max-w-2xl mx-auto",h),children:[e.jsx(rs,{children:e.jsx(cs,{children:l.title})}),e.jsx(gs,{className:"py-8",children:e.jsxs(sa,{variant:"destructive",children:[e.jsx(Ot,{className:"h-4 w-4"}),e.jsx(ta,{children:""})]})})]});if(A)return e.jsxs(Ve,{className:H("w-full max-w-2xl mx-auto",h),children:[e.jsx(rs,{children:e.jsxs(cs,{className:"flex items-center gap-2 text-green-600",children:[e.jsx(aa,{className:"h-6 w-6"}),""]})}),e.jsxs(gs,{className:"py-8",children:[e.jsx("p",{className:"text-center text-muted-foreground",children:l.settings?.thankYouMessage||""}),_&&e.jsxs("p",{className:"text-center text-xs text-muted-foreground mt-4",children:["",_]})]})]});const P=x?[l.questions[b]]:l.questions;return e.jsxs("div",{className:H("h-full flex flex-col",h),children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 mb-4 shrink-0",children:[e.jsx("h2",{className:"text-xl font-semibold",children:l.title}),l.description&&e.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:l.description}),u&&e.jsxs("div",{className:"space-y-1 pt-3",children:[e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:[ue," / ",l.questions.length]})]}),e.jsx(gn,{value:Se,className:"h-2"})]})]}),e.jsx(Ze,{className:"flex-1 min-h-0",children:e.jsxs("div",{className:"space-y-4 pr-4",children:[P.map((X,L)=>e.jsxs("div",{className:H("p-4 rounded-lg border bg-card",v[X.id]?"border-destructive bg-destructive/5":"border-border"),children:[x&&e.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:[" ",b+1," / ",l.questions.length]}),!x&&e.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:[L+1,"."]}),e.jsx(MS,{question:X,value:g[X.id],onChange:B=>oe(X.id,B),error:v[X.id],disabled:w})]},X.id)),V&&e.jsxs(sa,{variant:"destructive",children:[e.jsx(Ot,{className:"h-4 w-4"}),e.jsx(ta,{children:V})]}),e.jsx("div",{className:"flex justify-between items-center py-4",children:x?e.jsxs(e.Fragment,{children:[e.jsxs(C,{variant:"outline",onClick:()=>U(b-1),disabled:b===0||w,children:[e.jsx(pl,{className:"h-4 w-4 mr-1"}),""]}),b===l.questions.length-1?e.jsxs(C,{onClick:be,disabled:w,children:[w&&e.jsx(tt,{className:"h-4 w-4 mr-2 animate-spin"}),""]}):e.jsxs(C,{onClick:()=>U(b+1),disabled:w,children:["",e.jsx(Ya,{className:"h-4 w-4 ml-1"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:Object.keys(v).length>0&&e.jsxs("span",{className:"text-destructive",children:[" ",Object.keys(v).length," "]})}),e.jsxs(C,{onClick:be,disabled:w,size:"lg",children:[w&&e.jsx(tt,{className:"h-4 w-4 mr-2 animate-spin"}),""]})]})})]})})]})}const DS={id:"webui-feedback-v1",version:"1.0.0",title:" WebUI ",description:" WebUI",questions:[{id:"webui_version",type:"text",title:" WebUI ",description:"",required:!0,readOnly:!0,placeholder:"..."},{id:"ui_design_satisfaction",type:"single",title:" WebUI ",required:!0,options:[{id:"very_satisfied",label:"",value:"very_satisfied"},{id:"satisfied",label:"",value:"satisfied"},{id:"neutral",label:"",value:"neutral"},{id:"dissatisfied",label:"",value:"dissatisfied"},{id:"very_dissatisfied",label:"",value:"very_dissatisfied"}]},{id:"problems_encountered",type:"multiple",title:" WebUI ",description:"",required:!0,options:[{id:"lag",label:"",value:"lag"},{id:"incomplete",label:"",value:"incomplete"},{id:"complex",label:"",value:"complex"},{id:"bugs",label:" Bug",value:"bugs"},{id:"none",label:"",value:"none"},{id:"other",label:"",value:"other"}]},{id:"problems_other",type:"text",title:'""',required:!1,placeholder:"...",maxLength:500},{id:"useful_features",type:"textarea",title:"",required:!0,placeholder:"...",maxLength:1e3},{id:"feature_requests",type:"textarea",title:"",required:!0,placeholder:"...",maxLength:1e3},{id:"overall_satisfaction",type:"single",title:" WebUI ",required:!0,options:[{id:"very_satisfied",label:"",value:"very_satisfied"},{id:"satisfied",label:"",value:"satisfied"},{id:"neutral",label:"",value:"neutral"},{id:"dissatisfied",label:"",value:"dissatisfied"},{id:"very_dissatisfied",label:"",value:"very_dissatisfied"}]},{id:"would_recommend",type:"single",title:" WebUI ",required:!0,options:[{id:"yes",label:"",value:"yes"},{id:"no",label:"",value:"no"}]},{id:"other_suggestions",type:"textarea",title:"",description:"",required:!1,placeholder:"...",maxLength:2e3}],settings:{allowMultiple:!1,thankYouMessage:""}},RS={id:"maibot-feedback-v1",version:"1.0.0",title:"",description:" AI ",questions:[{id:"maibot_version",type:"text",title:"",description:"",required:!0,readOnly:!0,placeholder:"..."},{id:"improvement_areas",type:"textarea",title:"",required:!0,placeholder:"...",maxLength:1e3},{id:"problems_encountered",type:"multiple",title:"",description:"",required:!0,options:[{id:"incomplete",label:"",value:"incomplete"},{id:"slow_response",label:"",value:"slow_response"},{id:"complex",label:"",value:"complex"},{id:"unstable",label:"",value:"unstable"},{id:"config_difficult",label:"",value:"config_difficult"},{id:"none",label:"",value:"none"},{id:"other",label:"",value:"other"}]},{id:"problems_other",type:"text",title:'""',required:!1,placeholder:"...",maxLength:500},{id:"helpful_features",type:"textarea",title:"",required:!0,placeholder:"...",maxLength:1e3},{id:"feature_requests",type:"textarea",title:"",required:!0,placeholder:"...",maxLength:1e3},{id:"overall_satisfaction",type:"single",title:"",required:!0,options:[{id:"very_satisfied",label:"",value:"very_satisfied"},{id:"satisfied",label:"",value:"satisfied"},{id:"neutral",label:"",value:"neutral"},{id:"dissatisfied",label:"",value:"dissatisfied"},{id:"very_dissatisfied",label:"",value:"very_dissatisfied"}]},{id:"would_recommend",type:"single",title:"",required:!0,options:[{id:"yes",label:"",value:"yes"},{id:"no",label:"",value:"no"}]},{id:"other_suggestions",type:"textarea",title:"",description:"",required:!1,placeholder:"...",maxLength:2e3}],settings:{allowMultiple:!1,thankYouMessage:""}};function LS(){const[l,i]=m.useState(null),[r,o]=m.useState(!0);m.useEffect(()=>{const f=JSON.parse(JSON.stringify(DS));i(f),o(!1)},[]);const u=m.useMemo(()=>[{questionId:"webui_version",value:`v${go}`}],[]),x=m.useCallback(f=>{console.log("WebUI Survey submitted:",f)},[]),h=m.useCallback(f=>{console.error("WebUI Survey submission error:",f)},[]);return r?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(tt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):l?e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 shrink-0",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[e.jsx(qg,{className:"h-8 w-8",strokeWidth:2}),"WebUI "]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:""})]}),e.jsx("div",{className:"flex-1 min-h-0",children:e.jsx(Jj,{config:l,initialAnswers:u,showProgress:!0,paginateQuestions:!1,onSubmitSuccess:x,onSubmitError:h})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] gap-4",children:[e.jsxs(sa,{variant:"destructive",className:"max-w-md",children:[e.jsx(Ot,{className:"h-4 w-4"}),e.jsx(ta,{children:""})]}),e.jsx(C,{variant:"outline",onClick:()=>window.location.reload(),children:""})]})}function US(){const[l,i]=m.useState(null),[r,o]=m.useState(!0),[u,x]=m.useState("");m.useEffect(()=>{(async()=>{try{const y=await V0();x(y.version||"")}catch(y){console.error("Failed to get MaiBot version:",y),x("")}const v=JSON.parse(JSON.stringify(RS));i(v),o(!1)})()},[]);const h=m.useMemo(()=>[{questionId:"maibot_version",value:u}],[u]),f=m.useCallback(j=>{console.log("MaiBot Survey submitted:",j)},[]),g=m.useCallback(j=>{console.error("MaiBot Survey submission error:",j)},[]);return r?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(tt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):l?e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 shrink-0",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[e.jsx(qg,{className:"h-8 w-8",strokeWidth:2}),""]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:" AI "})]}),e.jsx("div",{className:"flex-1 min-h-0",children:e.jsx(Jj,{config:l,initialAnswers:h,showProgress:!0,paginateQuestions:!1,onSubmitSuccess:f,onSubmitError:g})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] gap-4",children:[e.jsxs(sa,{variant:"destructive",className:"max-w-md",children:[e.jsx(Ot,{className:"h-4 w-4"}),e.jsx(ta,{children:""})]}),e.jsx(C,{variant:"outline",onClick:()=>window.location.reload(),children:""})]})}function BS(){const l=ka(),[i,r]=m.useState(!0);return m.useEffect(()=>{let o=!1;return(async()=>{try{const x=await om();!o&&!x&&l({to:"/auth"})}catch{o||l({to:"/auth"})}finally{o||r(!1)}})(),()=>{o=!0}},[l]),{checking:i}}async function HS(){return await om()}const $S=gi("pointer-events-none inline-flex select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono font-medium opacity-100",{variants:{size:{sm:"h-5 text-[10px]",default:"h-6 text-xs",lg:"h-7 text-sm"}},defaultVariants:{size:"default"}}),Zj=m.forwardRef(({className:l,size:i,abbrTitle:r,children:o,...u},x)=>e.jsx("kbd",{className:H($S({size:i,className:l})),ref:x,...u,children:r?e.jsx("abbr",{title:r,children:o}):o}));Zj.displayName="Kbd";const qS=[{icon:po,title:"",description:"",path:"/",category:""},{icon:Aa,title:"",description:"",path:"/config/bot",category:""},{icon:Gg,title:"",description:"",path:"/config/modelProvider",category:""},{icon:Vg,title:"",description:"",path:"/config/model",category:""},{icon:im,title:"",description:"",path:"/resource/emoji",category:""},{icon:Fl,title:"",description:"",path:"/resource/expression",category:""},{icon:Fg,title:"",description:"",path:"/resource/person",category:""},{icon:pi,title:"",description:"",path:"/resource/jargon",category:""},{icon:t0,title:"",description:"",path:"/statistics",category:""},{icon:Vl,title:"",description:"",path:"/plugins",category:""},{icon:rm,title:"",description:"",path:"/logs",category:""},{icon:ji,title:"",description:"",path:"/settings",category:""}];function GS({open:l,onOpenChange:i}){const[r,o]=m.useState(""),[u,x]=m.useState(0),h=ka(),f=qS.filter(v=>v.title.toLowerCase().includes(r.toLowerCase())||v.description.toLowerCase().includes(r.toLowerCase())||v.category.toLowerCase().includes(r.toLowerCase()));m.useEffect(()=>{l&&(o(""),x(0))},[l]);const g=m.useCallback(v=>{h({to:v}),i(!1)},[h,i]),j=m.useCallback(v=>{v.key==="ArrowDown"?(v.preventDefault(),x(y=>(y+1)%f.length)):v.key==="ArrowUp"?(v.preventDefault(),x(y=>(y-1+f.length)%f.length)):v.key==="Enter"&&f[u]&&(v.preventDefault(),g(f[u].path))},[f,u,g]);return e.jsx(Qs,{open:l,onOpenChange:i,children:e.jsxs(qs,{className:"max-w-2xl p-0 gap-0",children:[e.jsxs(Gs,{className:"px-4 pt-4 pb-0",children:[e.jsx(Vs,{className:"sr-only",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx($t,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-muted-foreground"}),e.jsx(ie,{value:r,onChange:v=>{o(v.target.value),x(0)},onKeyDown:j,placeholder:"...",className:"h-12 pl-11 text-base border-0 focus-visible:ring-0 shadow-none",autoFocus:!0})]})]}),e.jsx("div",{className:"border-t",children:e.jsx(Ze,{className:"h-[400px]",children:f.length>0?e.jsx("div",{className:"p-2",children:f.map((v,y)=>{const b=v.icon;return e.jsxs("button",{onClick:()=>g(v.path),onMouseEnter:()=>x(y),className:H("w-full flex items-center gap-3 px-3 py-2.5 rounded-md text-left transition-colors",y===u?"bg-accent text-accent-foreground":"hover:bg-accent/50"),children:[e.jsx(b,{className:"h-5 w-5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm",children:v.title}),e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:v.description})]}),e.jsx("div",{className:"text-xs text-muted-foreground px-2 py-1 bg-muted rounded",children:v.category})]},v.path)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx($t,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r?"":""})]})})}),e.jsx("div",{className:"border-t px-4 py-3 flex items-center justify-between text-xs text-muted-foreground",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border",children:""}),e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border",children:""}),""]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border",children:"Enter"}),""]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border",children:"Esc"}),""]})]})})]})})}const VS=_y,FS=Sy,IS=Cy,Wj=m.forwardRef(({className:l,sideOffset:i=4,...r},o)=>e.jsx(wy,{children:e.jsx(_g,{ref:o,sideOffset:i,className:H("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",l),...r})}));Wj.displayName=_g.displayName;function QS({children:l}){const{checking:i}=BS(),[r,o]=m.useState(!0),[u,x]=m.useState(!1),[h,f]=m.useState(!1),{theme:g,setTheme:j}=dm(),v=bN();if(m.useEffect(()=>{const O=A=>{(A.metaKey||A.ctrlKey)&&A.key==="k"&&(A.preventDefault(),f(!0))};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[]),i)return e.jsx("div",{className:"flex h-screen items-center justify-center bg-background",children:e.jsx("div",{className:"text-muted-foreground",children:"..."})});const y=[{title:"",items:[{icon:po,label:"",path:"/"}]},{title:"",items:[{icon:Aa,label:"",path:"/config/bot"},{icon:Gg,label:"AI",path:"/config/modelProvider",tourId:"sidebar-model-provider"},{icon:Vg,label:"",path:"/config/model",tourId:"sidebar-model-management"},{icon:pp,label:"",path:"/config/adapter"}]},{title:"",items:[{icon:im,label:"",path:"/resource/emoji"},{icon:Fl,label:"",path:"/resource/expression"},{icon:pi,label:"",path:"/resource/jargon"},{icon:Fg,label:"",path:"/resource/person"},{icon:Bg,label:"",path:"/resource/knowledge-graph"}]},{title:"",items:[{icon:Vl,label:"",path:"/plugins"},{icon:$g,label:"",path:"/model-presets"},{icon:pp,label:"",path:"/plugin-config"},{icon:rm,label:"",path:"/logs"},{icon:Fl,label:"",path:"/chat"}]},{title:"",items:[{icon:ji,label:"",path:"/settings"}]}],S=g==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":g,w=async()=>{await U0()};return e.jsx(VS,{delayDuration:300,children:e.jsxs("div",{className:"flex h-screen overflow-hidden",children:[e.jsxs("aside",{className:H("fixed inset-y-0 left-0 z-50 flex flex-col border-r bg-card transition-all duration-300 lg:relative lg:z-0","w-64 lg:w-auto",r?"lg:w-64":"lg:w-16",u?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:[e.jsx("div",{className:"flex h-16 items-center border-b px-4",children:e.jsxs("div",{className:H("relative flex items-center justify-center flex-1 transition-all overflow-hidden","lg:flex-1",!r&&"lg:flex-none lg:w-8"),children:[e.jsxs("div",{className:H("flex items-baseline gap-2",!r&&"lg:hidden"),children:[e.jsx("span",{className:"font-bold text-xl text-primary-gradient whitespace-nowrap",children:"MaiBot WebUI"}),e.jsx("span",{className:"text-xs text-primary/60 whitespace-nowrap",children:rw()})]}),!r&&e.jsx("span",{className:"hidden lg:block font-bold text-primary-gradient text-2xl",children:"M"})]})}),e.jsx(Ze,{className:H("flex-1 overflow-x-hidden",!r&&"lg:w-16"),children:e.jsx("nav",{className:H("p-4",!r&&"lg:p-2 lg:w-16"),children:e.jsx("ul",{className:H("space-y-6",!r&&"lg:space-y-3 lg:w-full"),children:y.map((O,A)=>e.jsxs("li",{children:[e.jsx("div",{className:H("px-3 h-[1.25rem]","mb-2",!r&&"lg:mb-1 lg:invisible"),children:e.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground/60 whitespace-nowrap",children:O.title})}),!r&&A>0&&e.jsx("div",{className:"hidden lg:block mb-2 border-t border-border"}),e.jsx("ul",{className:"space-y-1",children:O.items.map(D=>{const V=v({to:D.path}),z=D.icon,_=e.jsxs(e.Fragment,{children:[V&&e.jsx("div",{className:"absolute left-0 top-1/2 h-8 w-1 -translate-y-1/2 rounded-r-full bg-primary transition-opacity duration-300"}),e.jsxs("div",{className:H("flex items-center transition-all duration-300",r?"gap-3":"gap-3 lg:gap-0"),children:[e.jsx(z,{className:H("h-5 w-5 flex-shrink-0",V&&"text-primary"),strokeWidth:2,fill:"none"}),e.jsx("span",{className:H("text-sm font-medium whitespace-nowrap transition-all duration-300",V&&"font-semibold",r?"opacity-100 max-w-[200px]":"opacity-100 max-w-[200px] lg:opacity-0 lg:max-w-0 lg:overflow-hidden"),children:D.label})]})]});return e.jsx("li",{className:"relative",children:e.jsxs(FS,{children:[e.jsx(IS,{asChild:!0,children:e.jsx(ci,{to:D.path,"data-tour":D.tourId,className:H("relative flex items-center rounded-lg py-2 transition-all duration-300","hover:bg-accent hover:text-accent-foreground",V?"bg-accent text-foreground":"text-muted-foreground hover:text-foreground",r?"px-3":"px-3 lg:px-0 lg:justify-center lg:w-12 lg:mx-auto"),onClick:()=>x(!1),children:_})}),!r&&e.jsx(Wj,{side:"right",className:"hidden lg:block",children:e.jsx("p",{children:D.label})})]})},D.path)})})]},O.title))})})})]}),u&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:()=>x(!1)}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsxs("header",{className:"flex h-16 items-center justify-between border-b bg-card/80 backdrop-blur-md px-4 sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>x(!u),className:"rounded-lg p-2 hover:bg-accent lg:hidden",children:e.jsx(a0,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>o(!r),className:"hidden rounded-lg p-2 hover:bg-accent lg:block",title:r?"":"",children:e.jsx(pl,{className:H("h-5 w-5 transition-transform",!r&&"rotate-180")})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>f(!0),className:"relative hidden md:flex items-center w-64 h-9 pl-9 pr-16 bg-background/50 border rounded-md hover:bg-accent/50 transition-colors text-left",children:[e.jsx($t,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"..."}),e.jsxs(Zj,{size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2",children:[e.jsx("span",{className:"text-xs",children:""}),"K"]})]}),e.jsx(GS,{open:h,onOpenChange:f}),e.jsxs(C,{variant:"ghost",size:"sm",onClick:()=>window.open("https://docs.mai-mai.org","_blank"),className:"gap-2",title:"",children:[e.jsx(l0,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsx("button",{onClick:O=>{J0(S==="dark"?"light":"dark",j,O)},className:"rounded-lg p-2 hover:bg-accent",title:S==="dark"?"":"",children:S==="dark"?e.jsx(Ag,{className:"h-5 w-5"}):e.jsx(Og,{className:"h-5 w-5"})}),e.jsx("div",{className:"h-6 w-px bg-border"}),e.jsxs(C,{variant:"ghost",size:"sm",onClick:w,className:"gap-2",title:"",children:[e.jsx(n0,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:""})]})]})]}),e.jsx("main",{className:"flex-1 overflow-hidden bg-background",children:l})]})]})})}function YS(l){const i=l.split(`
`).slice(1),r=[];for(const o of i){const u=o.trim();if(!u.startsWith("at "))continue;const x=u.match(/at\s+(?:(.+?)\s+\()?(.+?):(\d+):(\d+)\)?$/);x?r.push({functionName:x[1]||"<anonymous>",fileName:x[2],lineNumber:x[3],columnNumber:x[4],raw:u}):r.push({functionName:"<unknown>",fileName:"",lineNumber:"",columnNumber:"",raw:u})}return r}function KS({error:l,errorInfo:i}){const[r,o]=m.useState(!0),[u,x]=m.useState(!1),[h,f]=m.useState(!1),g=l.stack?YS(l.stack):[],j=async()=>{const v=`
Error: ${l.name}
Message: ${l.message}

Stack Trace:
${l.stack||"No stack trace available"}

Component Stack:
${i?.componentStack||"No component stack available"}

URL: ${window.location.href}
User Agent: ${navigator.userAgent}
Time: ${new Date().toISOString()}
    `.trim();try{await navigator.clipboard.writeText(v),f(!0),setTimeout(()=>f(!1),2e3)}catch(y){console.error("Failed to copy:",y)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(sa,{variant:"destructive",className:"border-red-500/50 bg-red-500/10",children:[e.jsx(Oa,{className:"h-4 w-4"}),e.jsxs(ta,{className:"font-mono text-sm",children:[e.jsxs("span",{className:"font-semibold",children:[l.name,":"]})," ",l.message]})]}),g.length>0&&e.jsxs(Tr,{open:r,onOpenChange:o,children:[e.jsx(Er,{asChild:!0,children:e.jsxs(C,{variant:"ghost",className:"w-full justify-between p-3 h-auto",children:[e.jsxs("span",{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(i0,{className:"h-4 w-4"}),"Stack Trace (",g.length," frames)"]}),r?e.jsx(fi,{className:"h-4 w-4"}):e.jsx(Fa,{className:"h-4 w-4"})]})}),e.jsx(zr,{children:e.jsx(Ze,{className:"h-[280px] rounded-md border bg-muted/30",children:e.jsx("div",{className:"p-3 space-y-1",children:g.map((v,y)=>e.jsx("div",{className:"font-mono text-xs p-2 rounded hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("span",{className:"text-muted-foreground w-6 text-right flex-shrink-0",children:[y+1,"."]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-primary font-medium",children:v.functionName}),v.fileName&&e.jsxs("div",{className:"text-muted-foreground mt-0.5 break-all",children:[v.fileName,v.lineNumber&&e.jsxs("span",{className:"text-yellow-600 dark:text-yellow-400",children:[":",v.lineNumber,":",v.columnNumber]})]})]})]})},y))})})})]}),i?.componentStack&&e.jsxs(Tr,{open:u,onOpenChange:x,children:[e.jsx(Er,{asChild:!0,children:e.jsxs(C,{variant:"ghost",className:"w-full justify-between p-3 h-auto",children:[e.jsxs("span",{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(Oa,{className:"h-4 w-4"}),"Component Stack"]}),u?e.jsx(fi,{className:"h-4 w-4"}):e.jsx(Fa,{className:"h-4 w-4"})]})}),e.jsx(zr,{children:e.jsx(Ze,{className:"h-[200px] rounded-md border bg-muted/30",children:e.jsx("pre",{className:"p-3 font-mono text-xs whitespace-pre-wrap text-muted-foreground",children:i.componentStack})})})]}),e.jsx(C,{variant:"outline",size:"sm",onClick:j,className:"w-full",children:h?e.jsxs(e.Fragment,{children:[e.jsx(ea,{className:"mr-2 h-4 w-4 text-green-500"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(co,{className:"mr-2 h-4 w-4"}),""]})})]})}function ev({error:l,errorInfo:i}){const r=()=>{window.location.href="/"},o=()=>{window.location.reload()};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:e.jsxs(Ve,{className:"w-full max-w-2xl shadow-lg",children:[e.jsxs(rs,{className:"text-center pb-2",children:[e.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/30 mb-4",children:e.jsx(Oa,{className:"h-8 w-8 text-red-600 dark:text-red-400"})}),e.jsx(cs,{className:"text-2xl font-bold",children:""}),e.jsx(st,{className:"text-base mt-2",children:""})]}),e.jsxs(gs,{className:"space-y-4",children:[e.jsx(KS,{error:l,errorInfo:i}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-2",children:[e.jsxs(C,{onClick:o,className:"flex-1",children:[e.jsx(At,{className:"mr-2 h-4 w-4"}),""]}),e.jsxs(C,{onClick:r,variant:"outline",className:"flex-1",children:[e.jsx(po,{className:"mr-2 h-4 w-4"}),""]})]}),e.jsx("p",{className:"text-xs text-center text-muted-foreground pt-2",children:""})]})]})})}class XS extends m.Component{constructor(i){super(i),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(i){return{hasError:!0,error:i}}componentDidCatch(i,r){console.error("ErrorBoundary caught an error:",i,r),this.setState({errorInfo:r})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError&&this.state.error?this.props.fallback?this.props.fallback:e.jsx(ev,{error:this.state.error,errorInfo:this.state.errorInfo}):this.props.children}}function sv({error:l}){return e.jsx(ev,{error:l,errorInfo:null})}const Rr=NN({component:()=>e.jsxs(e.Fragment,{children:[e.jsx(Vp,{}),!1]}),beforeLoad:()=>{if(window.location.pathname==="/"&&!HS())throw wN({to:"/auth"})}}),PS=lt({getParentRoute:()=>Rr,path:"/auth",component:ww}),JS=lt({getParentRoute:()=>Rr,path:"/setup",component:Hw}),wt=lt({getParentRoute:()=>Rr,id:"protected",component:()=>e.jsx(QS,{children:e.jsx(Vp,{})}),errorComponent:({error:l})=>e.jsx(sv,{error:l})}),ZS=lt({getParentRoute:()=>wt,path:"/",component:Y0}),WS=lt({getParentRoute:()=>wt,path:"/config/bot",component:b1}),e4=lt({getParentRoute:()=>wt,path:"/config/modelProvider",component:A1}),s4=lt({getParentRoute:()=>wt,path:"/config/model",component:K1}),t4=lt({getParentRoute:()=>wt,path:"/config/adapter",component:g2}),a4=lt({getParentRoute:()=>wt,path:"/resource/emoji",component:$2}),l4=lt({getParentRoute:()=>wt,path:"/resource/expression",component:Z2}),n4=lt({getParentRoute:()=>wt,path:"/resource/person",component:y_}),i4=lt({getParentRoute:()=>wt,path:"/resource/jargon",component:m_}),r4=lt({getParentRoute:()=>wt,path:"/resource/knowledge-graph",component:M_}),c4=lt({getParentRoute:()=>wt,path:"/logs",component:O_}),o4=lt({getParentRoute:()=>wt,path:"/chat",component:bS}),d4=lt({getParentRoute:()=>wt,path:"/plugins",component:lS}),u4=lt({getParentRoute:()=>wt,path:"/model-presets",component:iS}),m4=lt({getParentRoute:()=>wt,path:"/plugin-config",component:oS}),x4=lt({getParentRoute:()=>wt,path:"/plugin-mirrors",component:uS}),h4=lt({getParentRoute:()=>wt,path:"/settings",component:gw}),f4=lt({getParentRoute:()=>wt,path:"/survey/webui-feedback",component:LS}),p4=lt({getParentRoute:()=>wt,path:"/survey/maibot-feedback",component:US}),g4=lt({getParentRoute:()=>Rr,path:"*",component:fj}),j4=Rr.addChildren([PS,JS,wt.addChildren([ZS,WS,e4,s4,t4,a4,l4,i4,n4,r4,d4,u4,m4,x4,c4,o4,h4,f4,p4]),g4]),v4=yN({routeTree:j4,defaultNotFoundComponent:fj,defaultErrorComponent:({error:l})=>e.jsx(sv,{error:l})});function b4({children:l,defaultTheme:i="system",storageKey:r="ui-theme",...o}){const[u,x]=m.useState(()=>localStorage.getItem(r)||i);m.useEffect(()=>{const f=window.document.documentElement;if(f.classList.remove("light","dark"),u==="system"){const g=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";f.classList.add(g);return}f.classList.add(u)},[u]),m.useEffect(()=>{const f=localStorage.getItem("accent-color");if(f){const g=document.documentElement,v={blue:{hsl:"221.2 83.2% 53.3%",darkHsl:"217.2 91.2% 59.8%",gradient:null},purple:{hsl:"271 91% 65%",darkHsl:"270 95% 75%",gradient:null},green:{hsl:"142 71% 45%",darkHsl:"142 76% 36%",gradient:null},orange:{hsl:"25 95% 53%",darkHsl:"20 90% 48%",gradient:null},pink:{hsl:"330 81% 60%",darkHsl:"330 85% 70%",gradient:null},red:{hsl:"0 84% 60%",darkHsl:"0 90% 70%",gradient:null},"gradient-sunset":{hsl:"15 95% 60%",darkHsl:"15 95% 65%",gradient:"linear-gradient(135deg, hsl(25 95% 53%) 0%, hsl(330 81% 60%) 100%)"},"gradient-ocean":{hsl:"200 90% 55%",darkHsl:"200 90% 60%",gradient:"linear-gradient(135deg, hsl(221.2 83.2% 53.3%) 0%, hsl(189 94% 43%) 100%)"},"gradient-forest":{hsl:"150 70% 45%",darkHsl:"150 75% 40%",gradient:"linear-gradient(135deg, hsl(142 71% 45%) 0%, hsl(158 64% 52%) 100%)"},"gradient-aurora":{hsl:"310 85% 65%",darkHsl:"310 90% 70%",gradient:"linear-gradient(135deg, hsl(271 91% 65%) 0%, hsl(330 81% 60%) 100%)"},"gradient-fire":{hsl:"15 95% 55%",darkHsl:"15 95% 60%",gradient:"linear-gradient(135deg, hsl(0 84% 60%) 0%, hsl(25 95% 53%) 100%)"},"gradient-twilight":{hsl:"250 90% 60%",darkHsl:"250 95% 65%",gradient:"linear-gradient(135deg, hsl(239 84% 67%) 0%, hsl(271 91% 65%) 100%)"}}[f];v&&(g.style.setProperty("--primary",v.hsl),v.gradient?(g.style.setProperty("--primary-gradient",v.gradient),g.classList.add("has-gradient")):(g.style.removeProperty("--primary-gradient"),g.classList.remove("has-gradient")))}},[]);const h={theme:u,setTheme:f=>{localStorage.setItem(r,f),x(f)}};return e.jsx(oj.Provider,{...o,value:h,children:l})}function N4({children:l,defaultEnabled:i=!0,defaultWavesEnabled:r=!0,storageKey:o="enable-animations",wavesStorageKey:u="enable-waves-background"}){const[x,h]=m.useState(()=>{const v=localStorage.getItem(o);return v!==null?v==="true":i}),[f,g]=m.useState(()=>{const v=localStorage.getItem(u);return v!==null?v==="true":r});m.useEffect(()=>{const v=document.documentElement;x?v.classList.remove("no-animations"):v.classList.add("no-animations"),localStorage.setItem(o,String(x))},[x,o]),m.useEffect(()=>{localStorage.setItem(u,String(f))},[f,u]);const j={enableAnimations:x,setEnableAnimations:h,enableWavesBackground:f,setEnableWavesBackground:g};return e.jsx(dj.Provider,{value:j,children:l})}const y4=ky,tv=m.forwardRef(({className:l,...i},r)=>e.jsx(Sg,{ref:r,className:H("fixed bottom-0 right-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:max-w-[420px] gap-2",l),...i}));tv.displayName=Sg.displayName;const w4=gi("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-slide-in-from-right data-[state=open]:animate-fade-in data-[state=closed]:animate-slide-out-to-right data-[state=closed]:animate-fade-out data-[swipe=end]:animate-slide-out-to-right",{variants:{variant:{default:"border bg-primary/5 text-foreground backdrop-blur-sm",destructive:"destructive group border-destructive bg-destructive/10 text-destructive-foreground backdrop-blur-sm"}},defaultVariants:{variant:"default"}}),av=m.forwardRef(({className:l,variant:i,...r},o)=>e.jsx(Cg,{ref:o,className:H(w4({variant:i}),l),...r}));av.displayName=Cg.displayName;const _4=m.forwardRef(({className:l,...i},r)=>e.jsx(kg,{ref:r,className:H("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",l),...i}));_4.displayName=kg.displayName;const lv=m.forwardRef(({className:l,...i},r)=>e.jsx(Tg,{ref:r,className:H("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",l),"toast-close":"",...i,children:e.jsx(fl,{className:"h-4 w-4"})}));lv.displayName=Tg.displayName;const nv=m.forwardRef(({className:l,...i},r)=>e.jsx(Eg,{ref:r,className:H("text-sm font-semibold [&+div]:text-xs",l),...i}));nv.displayName=Eg.displayName;const iv=m.forwardRef(({className:l,...i},r)=>e.jsx(zg,{ref:r,className:H("text-sm opacity-90",l),...i}));iv.displayName=zg.displayName;function S4(){const{toasts:l}=Ks();return e.jsxs(y4,{children:[l.map(function({id:i,title:r,description:o,action:u,...x}){return e.jsxs(av,{...x,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(nv,{children:r}),o&&e.jsx(iv,{children:o})]}),u,e.jsx(lv,{})]},i)}),e.jsx(tv,{})]})}L0.createRoot(document.getElementById("root")).render(e.jsx(m.StrictMode,{children:e.jsx(XS,{children:e.jsx(b4,{defaultTheme:"system",children:e.jsx(N4,{children:e.jsxs(C1,{children:[e.jsx(_N,{router:v4}),e.jsx(E1,{}),e.jsx(S4,{})]})})})})}));
